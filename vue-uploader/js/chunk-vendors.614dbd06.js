"use strict";(self["webpackChunkvue_uploader"]=self["webpackChunkvue_uploader"]||[]).push([[998],{641:function(e,t,i){i.d(t,{Bj:function(){return r},Fl:function(){return je},IU:function(){return Ie},Jd:function(){return T},PG:function(){return Ee},Um:function(){return xe},WL:function(){return Fe},X$:function(){return A},X3:function(){return Se},Xl:function(){return Re},dq:function(){return Me},j:function(){return E},lk:function(){return k},nZ:function(){return a},qj:function(){return Ce},qq:function(){return y},yT:function(){return Ae}});var n=i(349);let s;class r{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=s,!e&&s&&(this.index=(s.scopes||(s.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=s;try{return s=this,e()}finally{s=t}}else 0}on(){s=this}off(){s=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function o(e,t=s){t&&t.active&&t.effects.push(e)}function a(){return s}const l=e=>{const t=new Set(e);return t.w=0,t.n=0,t},c=e=>(e.w&m)>0,u=e=>(e.n&m)>0,h=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=m},d=e=>{const{deps:t}=e;if(t.length){let i=0;for(let n=0;n<t.length;n++){const s=t[n];c(s)&&!u(s)?s.delete(e):t[i++]=s,s.w&=~m,s.n&=~m}t.length=i}},p=new WeakMap;let f=0,m=1;const g=30;let b;const _=Symbol(""),v=Symbol("");class y{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,o(this,i)}run(){if(!this.active)return this.fn();let e=b,t=C;while(e){if(e===this)return;e=e.parent}try{return this.parent=b,b=this,C=!0,m=1<<++f,f<=g?h(this):w(this),this.fn()}finally{f<=g&&d(this),m=1<<--f,b=this.parent,C=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){b===this?this.deferStop=!0:this.active&&(w(this),this.onStop&&this.onStop(),this.active=!1)}}function w(e){const{deps:t}=e;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(e);t.length=0}}let C=!0;const x=[];function T(){x.push(C),C=!1}function k(){const e=x.pop();C=void 0===e||e}function E(e,t,i){if(C&&b){let t=p.get(e);t||p.set(e,t=new Map);let n=t.get(i);n||t.set(i,n=l());const s=void 0;$(n,s)}}function $(e,t){let i=!1;f<=g?u(e)||(e.n|=m,i=!c(e)):i=!e.has(b),i&&(e.add(b),b.deps.push(e))}function A(e,t,i,s,r,o){const a=p.get(e);if(!a)return;let c=[];if("clear"===t)c=[...a.values()];else if("length"===i&&(0,n.kJ)(e)){const e=Number(s);a.forEach(((t,i)=>{("length"===i||i>=e)&&c.push(t)}))}else switch(void 0!==i&&c.push(a.get(i)),t){case"add":(0,n.kJ)(e)?(0,n.S0)(i)&&c.push(a.get("length")):(c.push(a.get(_)),(0,n._N)(e)&&c.push(a.get(v)));break;case"delete":(0,n.kJ)(e)||(c.push(a.get(_)),(0,n._N)(e)&&c.push(a.get(v)));break;case"set":(0,n._N)(e)&&c.push(a.get(_));break}if(1===c.length)c[0]&&S(c[0]);else{const e=[];for(const t of c)t&&e.push(...t);S(l(e))}}function S(e,t){const i=(0,n.kJ)(e)?e:[...e];for(const n of i)n.computed&&I(n,t);for(const n of i)n.computed||I(n,t)}function I(e,t){(e!==b||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const R=(0,n.fY)("__proto__,__v_isRef,__isVue"),L=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(n.yk)),U=F(),O=F(!1,!0),N=F(!0),M=P();function P(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const i=Ie(this);for(let t=0,s=this.length;t<s;t++)E(i,"get",t+"");const n=i[t](...e);return-1===n||!1===n?i[t](...e.map(Ie)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){T();const i=Ie(this)[t].apply(this,e);return k(),i}})),e}function D(e){const t=Ie(this);return E(t,"has",e),t.hasOwnProperty(e)}function F(e=!1,t=!1){return function(i,s,r){if("__v_isReactive"===s)return!e;if("__v_isReadonly"===s)return e;if("__v_isShallow"===s)return t;if("__v_raw"===s&&r===(e?t?ve:_e:t?be:ge).get(i))return i;const o=(0,n.kJ)(i);if(!e){if(o&&(0,n.RI)(M,s))return Reflect.get(M,s,r);if("hasOwnProperty"===s)return D}const a=Reflect.get(i,s,r);return((0,n.yk)(s)?L.has(s):R(s))?a:(e||E(i,"get",s),t?a:Me(a)?o&&(0,n.S0)(s)?a:a.value:(0,n.Kn)(a)?e?Te(a):Ce(a):a)}}const B=j(),V=j(!0);function j(e=!1){return function(t,i,s,r){let o=t[i];if($e(o)&&Me(o)&&!Me(s))return!1;if(!e&&(Ae(s)||$e(s)||(o=Ie(o),s=Ie(s)),!(0,n.kJ)(t)&&Me(o)&&!Me(s)))return o.value=s,!0;const a=(0,n.kJ)(t)&&(0,n.S0)(i)?Number(i)<t.length:(0,n.RI)(t,i),l=Reflect.set(t,i,s,r);return t===Ie(r)&&(a?(0,n.aU)(s,o)&&A(t,"set",i,s,o):A(t,"add",i,s)),l}}function z(e,t){const i=(0,n.RI)(e,t),s=e[t],r=Reflect.deleteProperty(e,t);return r&&i&&A(e,"delete",t,void 0,s),r}function q(e,t){const i=Reflect.has(e,t);return(0,n.yk)(t)&&L.has(t)||E(e,"has",t),i}function H(e){return E(e,"iterate",(0,n.kJ)(e)?"length":_),Reflect.ownKeys(e)}const K={get:U,set:B,deleteProperty:z,has:q,ownKeys:H},W={get:N,set(e,t){return!0},deleteProperty(e,t){return!0}},X=(0,n.l7)({},K,{get:O,set:V}),G=e=>e,J=e=>Reflect.getPrototypeOf(e);function Y(e,t,i=!1,n=!1){e=e["__v_raw"];const s=Ie(e),r=Ie(t);i||(t!==r&&E(s,"get",t),E(s,"get",r));const{has:o}=J(s),a=n?G:i?Ue:Le;return o.call(s,t)?a(e.get(t)):o.call(s,r)?a(e.get(r)):void(e!==s&&e.get(t))}function Z(e,t=!1){const i=this["__v_raw"],n=Ie(i),s=Ie(e);return t||(e!==s&&E(n,"has",e),E(n,"has",s)),e===s?i.has(e):i.has(e)||i.has(s)}function Q(e,t=!1){return e=e["__v_raw"],!t&&E(Ie(e),"iterate",_),Reflect.get(e,"size",e)}function ee(e){e=Ie(e);const t=Ie(this),i=J(t),n=i.has.call(t,e);return n||(t.add(e),A(t,"add",e,e)),this}function te(e,t){t=Ie(t);const i=Ie(this),{has:s,get:r}=J(i);let o=s.call(i,e);o||(e=Ie(e),o=s.call(i,e));const a=r.call(i,e);return i.set(e,t),o?(0,n.aU)(t,a)&&A(i,"set",e,t,a):A(i,"add",e,t),this}function ie(e){const t=Ie(this),{has:i,get:n}=J(t);let s=i.call(t,e);s||(e=Ie(e),s=i.call(t,e));const r=n?n.call(t,e):void 0,o=t.delete(e);return s&&A(t,"delete",e,void 0,r),o}function ne(){const e=Ie(this),t=0!==e.size,i=void 0,n=e.clear();return t&&A(e,"clear",void 0,void 0,i),n}function se(e,t){return function(i,n){const s=this,r=s["__v_raw"],o=Ie(r),a=t?G:e?Ue:Le;return!e&&E(o,"iterate",_),r.forEach(((e,t)=>i.call(n,a(e),a(t),s)))}}function re(e,t,i){return function(...s){const r=this["__v_raw"],o=Ie(r),a=(0,n._N)(o),l="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,u=r[e](...s),h=i?G:t?Ue:Le;return!t&&E(o,"iterate",c?v:_),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:l?[h(e[0]),h(e[1])]:h(e),done:t}},[Symbol.iterator](){return this}}}}function oe(e){return function(...t){return"delete"!==e&&this}}function ae(){const e={get(e){return Y(this,e)},get size(){return Q(this)},has:Z,add:ee,set:te,delete:ie,clear:ne,forEach:se(!1,!1)},t={get(e){return Y(this,e,!1,!0)},get size(){return Q(this)},has:Z,add:ee,set:te,delete:ie,clear:ne,forEach:se(!1,!0)},i={get(e){return Y(this,e,!0)},get size(){return Q(this,!0)},has(e){return Z.call(this,e,!0)},add:oe("add"),set:oe("set"),delete:oe("delete"),clear:oe("clear"),forEach:se(!0,!1)},n={get(e){return Y(this,e,!0,!0)},get size(){return Q(this,!0)},has(e){return Z.call(this,e,!0)},add:oe("add"),set:oe("set"),delete:oe("delete"),clear:oe("clear"),forEach:se(!0,!0)},s=["keys","values","entries",Symbol.iterator];return s.forEach((s=>{e[s]=re(s,!1,!1),i[s]=re(s,!0,!1),t[s]=re(s,!1,!0),n[s]=re(s,!0,!0)})),[e,i,t,n]}const[le,ce,ue,he]=ae();function de(e,t){const i=t?e?he:ue:e?ce:le;return(t,s,r)=>"__v_isReactive"===s?!e:"__v_isReadonly"===s?e:"__v_raw"===s?t:Reflect.get((0,n.RI)(i,s)&&s in t?i:t,s,r)}const pe={get:de(!1,!1)},fe={get:de(!1,!0)},me={get:de(!0,!1)};const ge=new WeakMap,be=new WeakMap,_e=new WeakMap,ve=new WeakMap;function ye(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function we(e){return e["__v_skip"]||!Object.isExtensible(e)?0:ye((0,n.W7)(e))}function Ce(e){return $e(e)?e:ke(e,!1,K,pe,ge)}function xe(e){return ke(e,!1,X,fe,be)}function Te(e){return ke(e,!0,W,me,_e)}function ke(e,t,i,s,r){if(!(0,n.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const o=r.get(e);if(o)return o;const a=we(e);if(0===a)return e;const l=new Proxy(e,2===a?s:i);return r.set(e,l),l}function Ee(e){return $e(e)?Ee(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function $e(e){return!(!e||!e["__v_isReadonly"])}function Ae(e){return!(!e||!e["__v_isShallow"])}function Se(e){return Ee(e)||$e(e)}function Ie(e){const t=e&&e["__v_raw"];return t?Ie(t):e}function Re(e){return(0,n.Nj)(e,"__v_skip",!0),e}const Le=e=>(0,n.Kn)(e)?Ce(e):e,Ue=e=>(0,n.Kn)(e)?Te(e):e;function Oe(e){C&&b&&(e=Ie(e),$(e.dep||(e.dep=l())))}function Ne(e,t){e=Ie(e);const i=e.dep;i&&S(i)}function Me(e){return!(!e||!0!==e.__v_isRef)}function Pe(e){return Me(e)?e.value:e}const De={get:(e,t,i)=>Pe(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Me(s)&&!Me(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Fe(e){return Ee(e)?e:new Proxy(e,De)}var Be;class Ve{constructor(e,t,i,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[Be]=!1,this._dirty=!0,this.effect=new y(e,(()=>{this._dirty||(this._dirty=!0,Ne(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!n,this["__v_isReadonly"]=i}get value(){const e=Ie(this);return Oe(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function je(e,t,i=!1){let s,r;const o=(0,n.mf)(e);o?(s=e,r=n.dG):(s=e.get,r=e.set);const a=new Ve(s,r,o||!r,i);return a}Be="__v_isReadonly"},875:function(e,t,i){i.d(t,{$d:function(){return o},FN:function(){return ai},HY:function(){return At},Ko:function(){return Ne},P$:function(){return te},Q6:function(){return ae},U2:function(){return ne},Us:function(){return Ct},Wm:function(){return Wt},Y8:function(){return Z},_:function(){return Kt},h:function(){return Ti},iD:function(){return Ft},ic:function(){return Ce},j4:function(){return Bt},nK:function(){return oe},up:function(){return Re},w5:function(){return N},wg:function(){return Ot}});var n=i(641),s=i(349);function r(e,t,i,n){let s;try{s=n?e(...n):e()}catch(r){a(r,t,i)}return s}function o(e,t,i,n){if((0,s.mf)(e)){const o=r(e,t,i,n);return o&&(0,s.tI)(o)&&o.catch((e=>{a(e,t,i)})),o}const l=[];for(let s=0;s<e.length;s++)l.push(o(e[s],t,i,n));return l}function a(e,t,i,n=!0){const s=t?t.vnode:null;if(t){let n=t.parent;const s=t.proxy,o=i;while(n){const t=n.ec;if(t)for(let i=0;i<t.length;i++)if(!1===t[i](e,s,o))return;n=n.parent}const a=t.appContext.config.errorHandler;if(a)return void r(a,null,10,[e,s,o])}l(e,i,s,n)}function l(e,t,i,n=!0){console.error(e)}let c=!1,u=!1;const h=[];let d=0;const p=[];let f=null,m=0;const g=Promise.resolve();let b=null;function _(e){const t=b||g;return e?t.then(this?e.bind(this):e):t}function v(e){let t=d+1,i=h.length;while(t<i){const n=t+i>>>1,s=E(h[n]);s<e?t=n+1:i=n}return t}function y(e){h.length&&h.includes(e,c&&e.allowRecurse?d+1:d)||(null==e.id?h.push(e):h.splice(v(e.id),0,e),w())}function w(){c||u||(u=!0,b=g.then(A))}function C(e){const t=h.indexOf(e);t>d&&h.splice(t,1)}function x(e){(0,s.kJ)(e)?p.push(...e):f&&f.includes(e,e.allowRecurse?m+1:m)||p.push(e),w()}function T(e,t=(c?d+1:0)){for(0;t<h.length;t++){const e=h[t];e&&e.pre&&(h.splice(t,1),t--,e())}}function k(e){if(p.length){const e=[...new Set(p)];if(p.length=0,f)return void f.push(...e);for(f=e,f.sort(((e,t)=>E(e)-E(t))),m=0;m<f.length;m++)f[m]();f=null,m=0}}const E=e=>null==e.id?1/0:e.id,$=(e,t)=>{const i=E(e)-E(t);if(0===i){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return i};function A(e){u=!1,c=!0,h.sort($);s.dG;try{for(d=0;d<h.length;d++){const e=h[d];e&&!1!==e.active&&r(e,null,14)}}finally{d=0,h.length=0,k(e),c=!1,b=null,(h.length||p.length)&&A(e)}}new Set;new Map;function S(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||s.kT;let r=i;const a=t.startsWith("update:"),l=a&&t.slice(7);if(l&&l in n){const e=`${"modelValue"===l?"model":l}Modifiers`,{number:t,trim:o}=n[e]||s.kT;o&&(r=i.map((e=>(0,s.HD)(e)?e.trim():e))),t&&(r=i.map(s.h5))}let c;let u=n[c=(0,s.hR)(t)]||n[c=(0,s.hR)((0,s._A)(t))];!u&&a&&(u=n[c=(0,s.hR)((0,s.rs)(t))]),u&&o(u,e,6,r);const h=n[c+"Once"];if(h){if(e.emitted){if(e.emitted[c])return}else e.emitted={};e.emitted[c]=!0,o(h,e,6,r)}}function I(e,t,i=!1){const n=t.emitsCache,r=n.get(e);if(void 0!==r)return r;const o=e.emits;let a={},l=!1;if(!(0,s.mf)(e)){const n=e=>{const i=I(e,t,!0);i&&(l=!0,(0,s.l7)(a,i))};!i&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return o||l?((0,s.kJ)(o)?o.forEach((e=>a[e]=null)):(0,s.l7)(a,o),(0,s.Kn)(e)&&n.set(e,a),a):((0,s.Kn)(e)&&n.set(e,null),null)}function R(e,t){return!(!e||!(0,s.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,s.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,s.RI)(e,(0,s.rs)(t))||(0,s.RI)(e,t))}let L=null,U=null;function O(e){const t=L;return L=e,U=e&&e.type.__scopeId||null,t}function N(e,t=L,i){if(!t)return e;if(e._n)return e;const n=(...i)=>{n._d&&Pt(-1);const s=O(t);let r;try{r=e(...i)}finally{O(s),n._d&&Pt(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function M(e){const{type:t,vnode:i,proxy:n,withProxy:r,props:o,propsOptions:[l],slots:c,attrs:u,emit:h,render:d,renderCache:p,data:f,setupState:m,ctx:g,inheritAttrs:b}=e;let _,v;const y=O(e);try{if(4&i.shapeFlag){const e=r||n;_=Zt(d.call(e,e,p,o,m,f,g)),v=u}else{const e=t;0,_=Zt(e.length>1?e(o,{attrs:u,slots:c,emit:h}):e(o,null)),v=t.props?u:P(u)}}catch(C){Lt.length=0,a(C,e,1),_=Wt(It)}let w=_;if(v&&!1!==b){const e=Object.keys(v),{shapeFlag:t}=w;e.length&&7&t&&(l&&e.some(s.tR)&&(v=D(v,l)),w=Jt(w,v))}return i.dirs&&(w=Jt(w),w.dirs=w.dirs?w.dirs.concat(i.dirs):i.dirs),i.transition&&(w.transition=i.transition),_=w,O(y),_}const P=e=>{let t;for(const i in e)("class"===i||"style"===i||(0,s.F7)(i))&&((t||(t={}))[i]=e[i]);return t},D=(e,t)=>{const i={};for(const n in e)(0,s.tR)(n)&&n.slice(9)in t||(i[n]=e[n]);return i};function F(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(!(i&&l>=0))return!(!s&&!a||a&&a.$stable)||n!==o&&(n?!o||B(n,o,c):!!o);if(1024&l)return!0;if(16&l)return n?B(n,o,c):!!o;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const i=e[t];if(o[i]!==n[i]&&!R(c,i))return!0}}return!1}function B(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!R(i,r))return!0}return!1}function V({vnode:e,parent:t},i){while(t&&t.subTree===e)(e=t.vnode).el=i,t=t.parent}const j=e=>e.__isSuspense;function z(e,t){t&&t.pendingBranch?(0,s.kJ)(e)?t.effects.push(...e):t.effects.push(e):x(e)}function q(e,t){if(oi){let i=oi.provides;const n=oi.parent&&oi.parent.provides;n===i&&(i=oi.provides=Object.create(n)),i[e]=t}else 0}function H(e,t,i=!1){const n=oi||L;if(n){const r=null==n.parent?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return i&&(0,s.mf)(t)?t.call(n.proxy):t}else 0}const K={};function W(e,t,i){return X(e,t,i)}function X(e,t,{immediate:i,deep:a,flush:l,onTrack:c,onTrigger:u}=s.kT){const h=(0,n.nZ)()===(null===oi||void 0===oi?void 0:oi.scope)?oi:null;let d,p,f=!1,m=!1;if((0,n.dq)(e)?(d=()=>e.value,f=(0,n.yT)(e)):(0,n.PG)(e)?(d=()=>e,a=!0):(0,s.kJ)(e)?(m=!0,f=e.some((e=>(0,n.PG)(e)||(0,n.yT)(e))),d=()=>e.map((e=>(0,n.dq)(e)?e.value:(0,n.PG)(e)?Y(e):(0,s.mf)(e)?r(e,h,2):void 0))):d=(0,s.mf)(e)?t?()=>r(e,h,2):()=>{if(!h||!h.isUnmounted)return p&&p(),o(e,h,3,[b])}:s.dG,t&&a){const e=d;d=()=>Y(e())}let g,b=e=>{p=C.onStop=()=>{r(e,h,4)}};if(pi){if(b=s.dG,t?i&&o(t,h,3,[d(),m?[]:void 0,b]):d(),"sync"!==l)return s.dG;{const e=Ei();g=e.__watcherHandles||(e.__watcherHandles=[])}}let _=m?new Array(e.length).fill(K):K;const v=()=>{if(C.active)if(t){const e=C.run();(a||f||(m?e.some(((e,t)=>(0,s.aU)(e,_[t]))):(0,s.aU)(e,_)))&&(p&&p(),o(t,h,3,[e,_===K?void 0:m&&_[0]===K?[]:_,b]),_=e)}else C.run()};let w;v.allowRecurse=!!t,"sync"===l?w=v:"post"===l?w=()=>wt(v,h&&h.suspense):(v.pre=!0,h&&(v.id=h.uid),w=()=>y(v));const C=new n.qq(d,w);t?i?v():_=C.run():"post"===l?wt(C.run.bind(C),h&&h.suspense):C.run();const x=()=>{C.stop(),h&&h.scope&&(0,s.Od)(h.scope.effects,C)};return g&&g.push(x),x}function G(e,t,i){const n=this.proxy,r=(0,s.HD)(e)?e.includes(".")?J(n,e):()=>n[e]:e.bind(n,n);let o;(0,s.mf)(t)?o=t:(o=t.handler,i=t);const a=oi;li(this);const l=X(r,o.bind(n),i);return a?li(a):ci(),l}function J(e,t){const i=t.split(".");return()=>{let t=e;for(let e=0;e<i.length&&t;e++)t=t[i[e]];return t}}function Y(e,t){if(!(0,s.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,n.dq)(e))Y(e.value,t);else if((0,s.kJ)(e))for(let i=0;i<e.length;i++)Y(e[i],t);else if((0,s.DM)(e)||(0,s._N)(e))e.forEach((e=>{Y(e,t)}));else if((0,s.PO)(e))for(const i in e)Y(e[i],t);return e}function Z(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ye((()=>{e.isMounted=!0})),xe((()=>{e.isUnmounting=!0})),e}const Q=[Function,Array],ee={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Q,onEnter:Q,onAfterEnter:Q,onEnterCancelled:Q,onBeforeLeave:Q,onLeave:Q,onAfterLeave:Q,onLeaveCancelled:Q,onBeforeAppear:Q,onAppear:Q,onAfterAppear:Q,onAppearCancelled:Q},setup(e,{slots:t}){const i=ai(),s=Z();let r;return()=>{const o=t.default&&ae(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){let e=!1;for(const t of o)if(t.type!==It){0,a=t,e=!0;break}}const l=(0,n.IU)(e),{mode:c}=l;if(s.isLeaving)return se(a);const u=re(a);if(!u)return se(a);const h=ne(u,l,s,i);oe(u,h);const d=i.subTree,p=d&&re(d);let f=!1;const{getTransitionKey:m}=u.type;if(m){const e=m();void 0===r?r=e:e!==r&&(r=e,f=!0)}if(p&&p.type!==It&&(!jt(u,p)||f)){const e=ne(p,l,s,i);if(oe(p,e),"out-in"===c)return s.isLeaving=!0,e.afterLeave=()=>{s.isLeaving=!1,!1!==i.update.active&&i.update()},se(a);"in-out"===c&&u.type!==It&&(e.delayLeave=(e,t,i)=>{const n=ie(s,p);n[String(p.key)]=p,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=i})}return a}}},te=ee;function ie(e,t){const{leavingVNodes:i}=e;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function ne(e,t,i,n){const{appear:r,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:p,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:_,onAfterAppear:v,onAppearCancelled:y}=t,w=String(e.key),C=ie(i,e),x=(e,t)=>{e&&o(e,n,9,t)},T=(e,t)=>{const i=t[1];x(e,t),(0,s.kJ)(e)?e.every((e=>e.length<=1))&&i():e.length<=1&&i()},k={mode:a,persisted:l,beforeEnter(t){let n=c;if(!i.isMounted){if(!r)return;n=b||c}t._leaveCb&&t._leaveCb(!0);const s=C[w];s&&jt(e,s)&&s.el._leaveCb&&s.el._leaveCb(),x(n,[t])},enter(e){let t=u,n=h,s=d;if(!i.isMounted){if(!r)return;t=_||u,n=v||h,s=y||d}let o=!1;const a=e._enterCb=t=>{o||(o=!0,x(t?s:n,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?T(t,[e,a]):a()},leave(t,n){const s=String(e.key);if(t._enterCb&&t._enterCb(!0),i.isUnmounting)return n();x(p,[t]);let r=!1;const o=t._leaveCb=i=>{r||(r=!0,n(),x(i?g:m,[t]),t._leaveCb=void 0,C[s]===e&&delete C[s])};C[s]=e,f?T(f,[t,o]):o()},clone(e){return ne(e,t,i,n)}};return k}function se(e){if(ce(e))return e=Jt(e),e.children=null,e}function re(e){return ce(e)?e.children?e.children[0]:void 0:e}function oe(e,t){6&e.shapeFlag&&e.component?oe(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ae(e,t=!1,i){let n=[],s=0;for(let r=0;r<e.length;r++){let o=e[r];const a=null==i?o.key:String(i)+String(null!=o.key?o.key:r);o.type===At?(128&o.patchFlag&&s++,n=n.concat(ae(o.children,t,a))):(t||o.type!==It)&&n.push(null!=a?Jt(o,{key:a}):o)}if(s>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}const le=e=>!!e.type.__asyncLoader;const ce=e=>e.type.__isKeepAlive;RegExp,RegExp;function ue(e,t){return(0,s.kJ)(e)?e.some((e=>ue(e,t))):(0,s.HD)(e)?e.split(",").includes(t):!!(0,s.Kj)(e)&&e.test(t)}function he(e,t){pe(e,"a",t)}function de(e,t){pe(e,"da",t)}function pe(e,t,i=oi){const n=e.__wdc||(e.__wdc=()=>{let t=i;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(be(t,n,i),i){let e=i.parent;while(e&&e.parent)ce(e.parent.vnode)&&fe(n,t,i,e),e=e.parent}}function fe(e,t,i,n){const r=be(t,e,n,!0);Te((()=>{(0,s.Od)(n[t],r)}),i)}function me(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function ge(e){return 128&e.shapeFlag?e.ssContent:e}function be(e,t,i=oi,s=!1){if(i){const r=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...s)=>{if(i.isUnmounted)return;(0,n.Jd)(),li(i);const r=o(t,i,e,s);return ci(),(0,n.lk)(),r});return s?r.unshift(a):r.push(a),a}}const _e=e=>(t,i=oi)=>(!pi||"sp"===e)&&be(e,((...e)=>t(...e)),i),ve=_e("bm"),ye=_e("m"),we=_e("bu"),Ce=_e("u"),xe=_e("bum"),Te=_e("um"),ke=_e("sp"),Ee=_e("rtg"),$e=_e("rtc");function Ae(e,t=oi){be("ec",e,t)}function Se(e,t,i,s){const r=e.dirs,a=t&&t.dirs;for(let l=0;l<r.length;l++){const c=r[l];a&&(c.oldValue=a[l].value);let u=c.dir[s];u&&((0,n.Jd)(),o(u,i,8,[e.el,c,e,t]),(0,n.lk)())}}const Ie="components";function Re(e,t){return Ue(Ie,e,!0,t)||e}const Le=Symbol();function Ue(e,t,i=!0,n=!1){const r=L||oi;if(r){const i=r.type;if(e===Ie){const e=wi(i,!1);if(e&&(e===t||e===(0,s._A)(t)||e===(0,s.kC)((0,s._A)(t))))return i}const o=Oe(r[e]||i[e],t)||Oe(r.appContext[e],t);return!o&&n?i:o}}function Oe(e,t){return e&&(e[t]||e[(0,s._A)(t)]||e[(0,s.kC)((0,s._A)(t))])}function Ne(e,t,i,n){let r;const o=i&&i[n];if((0,s.kJ)(e)||(0,s.HD)(e)){r=new Array(e.length);for(let i=0,n=e.length;i<n;i++)r[i]=t(e[i],i,void 0,o&&o[i])}else if("number"===typeof e){0,r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,o&&o[i])}else if((0,s.Kn)(e))if(e[Symbol.iterator])r=Array.from(e,((e,i)=>t(e,i,void 0,o&&o[i])));else{const i=Object.keys(e);r=new Array(i.length);for(let n=0,s=i.length;n<s;n++){const s=i[n];r[n]=t(e[s],s,n,o&&o[n])}}else r=[];return i&&(i[n]=r),r}const Me=e=>e?ui(e)?yi(e)||e.proxy:Me(e.parent):null,Pe=(0,s.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Me(e.parent),$root:e=>Me(e.root),$emit:e=>e.emit,$options:e=>He(e),$forceUpdate:e=>e.f||(e.f=()=>y(e.update)),$nextTick:e=>e.n||(e.n=_.bind(e.proxy)),$watch:e=>G.bind(e)}),De=(e,t)=>e!==s.kT&&!e.__isScriptSetup&&(0,s.RI)(e,t),Fe={get({_:e},t){const{ctx:i,setupState:r,data:o,props:a,accessCache:l,type:c,appContext:u}=e;let h;if("$"!==t[0]){const n=l[t];if(void 0!==n)switch(n){case 1:return r[t];case 2:return o[t];case 4:return i[t];case 3:return a[t]}else{if(De(r,t))return l[t]=1,r[t];if(o!==s.kT&&(0,s.RI)(o,t))return l[t]=2,o[t];if((h=e.propsOptions[0])&&(0,s.RI)(h,t))return l[t]=3,a[t];if(i!==s.kT&&(0,s.RI)(i,t))return l[t]=4,i[t];Be&&(l[t]=0)}}const d=Pe[t];let p,f;return d?("$attrs"===t&&(0,n.j)(e,"get",t),d(e)):(p=c.__cssModules)&&(p=p[t])?p:i!==s.kT&&(0,s.RI)(i,t)?(l[t]=4,i[t]):(f=u.config.globalProperties,(0,s.RI)(f,t)?f[t]:void 0)},set({_:e},t,i){const{data:n,setupState:r,ctx:o}=e;return De(r,t)?(r[t]=i,!0):n!==s.kT&&(0,s.RI)(n,t)?(n[t]=i,!0):!(0,s.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=i,!0))},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:r,propsOptions:o}},a){let l;return!!i[a]||e!==s.kT&&(0,s.RI)(e,a)||De(t,a)||(l=o[0])&&(0,s.RI)(l,a)||(0,s.RI)(n,a)||(0,s.RI)(Pe,a)||(0,s.RI)(r.config.globalProperties,a)},defineProperty(e,t,i){return null!=i.get?e._.accessCache[t]=0:(0,s.RI)(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};let Be=!0;function Ve(e){const t=He(e),i=e.proxy,r=e.ctx;Be=!1,t.beforeCreate&&ze(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:l,watch:c,provide:u,inject:h,created:d,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:b,deactivated:_,beforeDestroy:v,beforeUnmount:y,destroyed:w,unmounted:C,render:x,renderTracked:T,renderTriggered:k,errorCaptured:E,serverPrefetch:$,expose:A,inheritAttrs:S,components:I,directives:R,filters:L}=t,U=null;if(h&&je(h,r,U,e.appContext.config.unwrapInjectedRef),l)for(const n in l){const e=l[n];(0,s.mf)(e)&&(r[n]=e.bind(i))}if(o){0;const t=o.call(i,i);0,(0,s.Kn)(t)&&(e.data=(0,n.qj)(t))}if(Be=!0,a)for(const n in a){const e=a[n],t=(0,s.mf)(e)?e.bind(i,i):(0,s.mf)(e.get)?e.get.bind(i,i):s.dG;0;const o=!(0,s.mf)(e)&&(0,s.mf)(e.set)?e.set.bind(i):s.dG,l=xi({get:t,set:o});Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:e=>l.value=e})}if(c)for(const n in c)qe(c[n],r,i,n);if(u){const e=(0,s.mf)(u)?u.call(i):u;Reflect.ownKeys(e).forEach((t=>{q(t,e[t])}))}function O(e,t){(0,s.kJ)(t)?t.forEach((t=>e(t.bind(i)))):t&&e(t.bind(i))}if(d&&ze(d,e,"c"),O(ve,p),O(ye,f),O(we,m),O(Ce,g),O(he,b),O(de,_),O(Ae,E),O($e,T),O(Ee,k),O(xe,y),O(Te,C),O(ke,$),(0,s.kJ)(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>i[e],set:t=>i[e]=t})}))}else e.exposed||(e.exposed={});x&&e.render===s.dG&&(e.render=x),null!=S&&(e.inheritAttrs=S),I&&(e.components=I),R&&(e.directives=R)}function je(e,t,i=s.dG,r=!1){(0,s.kJ)(e)&&(e=Je(e));for(const o in e){const i=e[o];let a;a=(0,s.Kn)(i)?"default"in i?H(i.from||o,i.default,!0):H(i.from||o):H(i),(0,n.dq)(a)&&r?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e}):t[o]=a}}function ze(e,t,i){o((0,s.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,i)}function qe(e,t,i,n){const r=n.includes(".")?J(i,n):()=>i[n];if((0,s.HD)(e)){const i=t[e];(0,s.mf)(i)&&W(r,i)}else if((0,s.mf)(e))W(r,e.bind(i));else if((0,s.Kn)(e))if((0,s.kJ)(e))e.forEach((e=>qe(e,t,i,n)));else{const n=(0,s.mf)(e.handler)?e.handler.bind(i):t[e.handler];(0,s.mf)(n)&&W(r,n,e)}else 0}function He(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,l=o.get(t);let c;return l?c=l:r.length||i||n?(c={},r.length&&r.forEach((e=>Ke(c,e,a,!0))),Ke(c,t,a)):c=t,(0,s.Kn)(t)&&o.set(t,c),c}function Ke(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&Ke(e,r,i,!0),s&&s.forEach((t=>Ke(e,t,i,!0)));for(const o in t)if(n&&"expose"===o);else{const n=We[o]||i&&i[o];e[o]=n?n(e[o],t[o]):t[o]}return e}const We={data:Xe,props:Ze,emits:Ze,methods:Ze,computed:Ze,beforeCreate:Ye,created:Ye,beforeMount:Ye,mounted:Ye,beforeUpdate:Ye,updated:Ye,beforeDestroy:Ye,beforeUnmount:Ye,destroyed:Ye,unmounted:Ye,activated:Ye,deactivated:Ye,errorCaptured:Ye,serverPrefetch:Ye,components:Ze,directives:Ze,watch:Qe,provide:Xe,inject:Ge};function Xe(e,t){return t?e?function(){return(0,s.l7)((0,s.mf)(e)?e.call(this,this):e,(0,s.mf)(t)?t.call(this,this):t)}:t:e}function Ge(e,t){return Ze(Je(e),Je(t))}function Je(e){if((0,s.kJ)(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Ye(e,t){return e?[...new Set([].concat(e,t))]:t}function Ze(e,t){return e?(0,s.l7)((0,s.l7)(Object.create(null),e),t):t}function Qe(e,t){if(!e)return t;if(!t)return e;const i=(0,s.l7)(Object.create(null),e);for(const n in t)i[n]=Ye(e[n],t[n]);return i}function et(e,t,i,r=!1){const o={},a={};(0,s.Nj)(a,zt,1),e.propsDefaults=Object.create(null),it(e,t,o,a);for(const n in e.propsOptions[0])n in o||(o[n]=void 0);i?e.props=r?o:(0,n.Um)(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function tt(e,t,i,r){const{props:o,attrs:a,vnode:{patchFlag:l}}=e,c=(0,n.IU)(o),[u]=e.propsOptions;let h=!1;if(!(r||l>0)||16&l){let n;it(e,t,o,a)&&(h=!0);for(const r in c)t&&((0,s.RI)(t,r)||(n=(0,s.rs)(r))!==r&&(0,s.RI)(t,n))||(u?!i||void 0===i[r]&&void 0===i[n]||(o[r]=nt(u,c,r,void 0,e,!0)):delete o[r]);if(a!==c)for(const e in a)t&&(0,s.RI)(t,e)||(delete a[e],h=!0)}else if(8&l){const i=e.vnode.dynamicProps;for(let n=0;n<i.length;n++){let r=i[n];if(R(e.emitsOptions,r))continue;const l=t[r];if(u)if((0,s.RI)(a,r))l!==a[r]&&(a[r]=l,h=!0);else{const t=(0,s._A)(r);o[t]=nt(u,c,t,l,e,!1)}else l!==a[r]&&(a[r]=l,h=!0)}}h&&(0,n.X$)(e,"set","$attrs")}function it(e,t,i,r){const[o,a]=e.propsOptions;let l,c=!1;if(t)for(let n in t){if((0,s.Gg)(n))continue;const u=t[n];let h;o&&(0,s.RI)(o,h=(0,s._A)(n))?a&&a.includes(h)?(l||(l={}))[h]=u:i[h]=u:R(e.emitsOptions,n)||n in r&&u===r[n]||(r[n]=u,c=!0)}if(a){const t=(0,n.IU)(i),r=l||s.kT;for(let n=0;n<a.length;n++){const l=a[n];i[l]=nt(o,t,l,r[l],e,!(0,s.RI)(r,l))}}return c}function nt(e,t,i,n,r,o){const a=e[i];if(null!=a){const e=(0,s.RI)(a,"default");if(e&&void 0===n){const e=a.default;if(a.type!==Function&&(0,s.mf)(e)){const{propsDefaults:s}=r;i in s?n=s[i]:(li(r),n=s[i]=e.call(null,t),ci())}else n=e}a[0]&&(o&&!e?n=!1:!a[1]||""!==n&&n!==(0,s.rs)(i)||(n=!0))}return n}function st(e,t,i=!1){const n=t.propsCache,r=n.get(e);if(r)return r;const o=e.props,a={},l=[];let c=!1;if(!(0,s.mf)(e)){const n=e=>{c=!0;const[i,n]=st(e,t,!0);(0,s.l7)(a,i),n&&l.push(...n)};!i&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}if(!o&&!c)return(0,s.Kn)(e)&&n.set(e,s.Z6),s.Z6;if((0,s.kJ)(o))for(let h=0;h<o.length;h++){0;const e=(0,s._A)(o[h]);rt(e)&&(a[e]=s.kT)}else if(o){0;for(const e in o){const t=(0,s._A)(e);if(rt(t)){const i=o[e],n=a[t]=(0,s.kJ)(i)||(0,s.mf)(i)?{type:i}:Object.assign({},i);if(n){const e=lt(Boolean,n.type),i=lt(String,n.type);n[0]=e>-1,n[1]=i<0||e<i,(e>-1||(0,s.RI)(n,"default"))&&l.push(t)}}}}const u=[a,l];return(0,s.Kn)(e)&&n.set(e,u),u}function rt(e){return"$"!==e[0]}function ot(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:null===e?"null":""}function at(e,t){return ot(e)===ot(t)}function lt(e,t){return(0,s.kJ)(t)?t.findIndex((t=>at(t,e))):(0,s.mf)(t)&&at(t,e)?0:-1}const ct=e=>"_"===e[0]||"$stable"===e,ut=e=>(0,s.kJ)(e)?e.map(Zt):[Zt(e)],ht=(e,t,i)=>{if(t._n)return t;const n=N(((...e)=>ut(t(...e))),i);return n._c=!1,n},dt=(e,t,i)=>{const n=e._ctx;for(const r in e){if(ct(r))continue;const i=e[r];if((0,s.mf)(i))t[r]=ht(r,i,n);else if(null!=i){0;const e=ut(i);t[r]=()=>e}}},pt=(e,t)=>{const i=ut(t);e.slots.default=()=>i},ft=(e,t)=>{if(32&e.vnode.shapeFlag){const i=t._;i?(e.slots=(0,n.IU)(t),(0,s.Nj)(t,"_",i)):dt(t,e.slots={})}else e.slots={},t&&pt(e,t);(0,s.Nj)(e.slots,zt,1)},mt=(e,t,i)=>{const{vnode:n,slots:r}=e;let o=!0,a=s.kT;if(32&n.shapeFlag){const e=t._;e?i&&1===e?o=!1:((0,s.l7)(r,t),i||1!==e||delete r._):(o=!t.$stable,dt(t,r)),a=t}else t&&(pt(e,t),a={default:1});if(o)for(const s in r)ct(s)||s in a||delete r[s]};function gt(){return{app:null,config:{isNativeTag:s.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bt=0;function _t(e,t){return function(i,n=null){(0,s.mf)(i)||(i=Object.assign({},i)),null==n||(0,s.Kn)(n)||(n=null);const r=gt(),o=new Set;let a=!1;const l=r.app={_uid:bt++,_component:i,_props:n,_container:null,_context:r,_instance:null,version:$i,get config(){return r.config},set config(e){0},use(e,...t){return o.has(e)||(e&&(0,s.mf)(e.install)?(o.add(e),e.install(l,...t)):(0,s.mf)(e)&&(o.add(e),e(l,...t))),l},mixin(e){return r.mixins.includes(e)||r.mixins.push(e),l},component(e,t){return t?(r.components[e]=t,l):r.components[e]},directive(e,t){return t?(r.directives[e]=t,l):r.directives[e]},mount(s,o,c){if(!a){0;const u=Wt(i,n);return u.appContext=r,o&&t?t(u,s):e(u,s,c),a=!0,l._container=s,s.__vue_app__=l,yi(u.component)||u.component.proxy}},unmount(){a&&(e(null,l._container),delete l._container.__vue_app__)},provide(e,t){return r.provides[e]=t,l}};return l}}function vt(e,t,i,o,a=!1){if((0,s.kJ)(e))return void e.forEach(((e,n)=>vt(e,t&&((0,s.kJ)(t)?t[n]:t),i,o,a)));if(le(o)&&!a)return;const l=4&o.shapeFlag?yi(o.component)||o.component.proxy:o.el,c=a?null:l,{i:u,r:h}=e;const d=t&&t.r,p=u.refs===s.kT?u.refs={}:u.refs,f=u.setupState;if(null!=d&&d!==h&&((0,s.HD)(d)?(p[d]=null,(0,s.RI)(f,d)&&(f[d]=null)):(0,n.dq)(d)&&(d.value=null)),(0,s.mf)(h))r(h,u,12,[c,p]);else{const t=(0,s.HD)(h),r=(0,n.dq)(h);if(t||r){const n=()=>{if(e.f){const i=t?(0,s.RI)(f,h)?f[h]:p[h]:h.value;a?(0,s.kJ)(i)&&(0,s.Od)(i,l):(0,s.kJ)(i)?i.includes(l)||i.push(l):t?(p[h]=[l],(0,s.RI)(f,h)&&(f[h]=p[h])):(h.value=[l],e.k&&(p[e.k]=h.value))}else t?(p[h]=c,(0,s.RI)(f,h)&&(f[h]=c)):r&&(h.value=c,e.k&&(p[e.k]=c))};c?(n.id=-1,wt(n,i)):n()}else 0}}function yt(){}const wt=z;function Ct(e){return xt(e)}function xt(e,t){yt();const i=(0,s.E9)();i.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:l,createText:c,createComment:u,setText:h,setElementText:d,parentNode:p,nextSibling:f,setScopeId:m=s.dG,insertStaticContent:g}=e,b=(e,t,i,n=null,s=null,r=null,o=!1,a=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!jt(e,t)&&(n=Z(e),W(e,s,r,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=t;switch(c){case St:_(e,t,i,n);break;case It:v(e,t,i,n);break;case Rt:null==e&&w(t,i,n,o);break;case At:O(e,t,i,n,s,r,o,a,l);break;default:1&h?$(e,t,i,n,s,r,o,a,l):6&h?N(e,t,i,n,s,r,o,a,l):(64&h||128&h)&&c.process(e,t,i,n,s,r,o,a,l,ee)}null!=u&&s&&vt(u,e&&e.ref,r,t||e,!t)},_=(e,t,i,n)=>{if(null==e)r(t.el=c(t.children),i,n);else{const i=t.el=e.el;t.children!==e.children&&h(i,t.children)}},v=(e,t,i,n)=>{null==e?r(t.el=u(t.children||""),i,n):t.el=e.el},w=(e,t,i,n)=>{[e.el,e.anchor]=g(e.children,t,i,n,e.el,e.anchor)},x=({el:e,anchor:t},i,n)=>{let s;while(e&&e!==t)s=f(e),r(e,i,n),e=s;r(t,i,n)},E=({el:e,anchor:t})=>{let i;while(e&&e!==t)i=f(e),o(e),e=i;o(t)},$=(e,t,i,n,s,r,o,a,l)=>{o=o||"svg"===t.type,null==e?A(t,i,n,s,r,o,a,l):R(e,t,s,r,o,a,l)},A=(e,t,i,n,o,c,u,h)=>{let p,f;const{type:m,props:g,shapeFlag:b,transition:_,dirs:v}=e;if(p=e.el=l(e.type,c,g&&g.is,g),8&b?d(p,e.children):16&b&&I(e.children,p,null,n,o,c&&"foreignObject"!==m,u,h),v&&Se(e,null,n,"created"),S(p,e,e.scopeId,u,n),g){for(const t in g)"value"===t||(0,s.Gg)(t)||a(p,t,null,g[t],c,e.children,n,o,Y);"value"in g&&a(p,"value",null,g.value),(f=g.onVnodeBeforeMount)&&ii(f,n,e)}v&&Se(e,null,n,"beforeMount");const y=(!o||o&&!o.pendingBranch)&&_&&!_.persisted;y&&_.beforeEnter(p),r(p,t,i),((f=g&&g.onVnodeMounted)||y||v)&&wt((()=>{f&&ii(f,n,e),y&&_.enter(p),v&&Se(e,null,n,"mounted")}),o)},S=(e,t,i,n,s)=>{if(i&&m(e,i),n)for(let r=0;r<n.length;r++)m(e,n[r]);if(s){let i=s.subTree;if(t===i){const t=s.vnode;S(e,t,t.scopeId,t.slotScopeIds,s.parent)}}},I=(e,t,i,n,s,r,o,a,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=a?Qt(e[c]):Zt(e[c]);b(null,l,t,i,n,s,r,o,a)}},R=(e,t,i,n,r,o,l)=>{const c=t.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:p}=t;u|=16&e.patchFlag;const f=e.props||s.kT,m=t.props||s.kT;let g;i&&Tt(i,!1),(g=m.onVnodeBeforeUpdate)&&ii(g,i,t,e),p&&Se(t,e,i,"beforeUpdate"),i&&Tt(i,!0);const b=r&&"foreignObject"!==t.type;if(h?L(e.dynamicChildren,h,c,i,n,b,o):l||z(e,t,c,null,i,n,b,o,!1),u>0){if(16&u)U(c,t,f,m,i,n,r);else if(2&u&&f.class!==m.class&&a(c,"class",null,m.class,r),4&u&&a(c,"style",f.style,m.style,r),8&u){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const o=s[t],l=f[o],u=m[o];u===l&&"value"!==o||a(c,o,l,u,r,e.children,i,n,Y)}}1&u&&e.children!==t.children&&d(c,t.children)}else l||null!=h||U(c,t,f,m,i,n,r);((g=m.onVnodeUpdated)||p)&&wt((()=>{g&&ii(g,i,t,e),p&&Se(t,e,i,"updated")}),n)},L=(e,t,i,n,s,r,o)=>{for(let a=0;a<t.length;a++){const l=e[a],c=t[a],u=l.el&&(l.type===At||!jt(l,c)||70&l.shapeFlag)?p(l.el):i;b(l,c,u,null,n,s,r,o,!0)}},U=(e,t,i,n,r,o,l)=>{if(i!==n){if(i!==s.kT)for(const c in i)(0,s.Gg)(c)||c in n||a(e,c,i[c],null,l,t.children,r,o,Y);for(const c in n){if((0,s.Gg)(c))continue;const u=n[c],h=i[c];u!==h&&"value"!==c&&a(e,c,h,u,l,t.children,r,o,Y)}"value"in n&&a(e,"value",i.value,n.value)}},O=(e,t,i,n,s,o,a,l,u)=>{const h=t.el=e?e.el:c(""),d=t.anchor=e?e.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=t;m&&(l=l?l.concat(m):m),null==e?(r(h,i,n),r(d,i,n),I(t.children,i,d,s,o,a,l,u)):p>0&&64&p&&f&&e.dynamicChildren?(L(e.dynamicChildren,f,i,s,o,a,l),(null!=t.key||s&&t===s.subTree)&&kt(e,t,!0)):z(e,t,i,d,s,o,a,l,u)},N=(e,t,i,n,s,r,o,a,l)=>{t.slotScopeIds=a,null==e?512&t.shapeFlag?s.ctx.activate(t,i,n,o,l):P(t,i,n,s,r,o,l):D(e,t,l)},P=(e,t,i,n,s,r,o)=>{const a=e.component=ri(e,n,s);if(ce(e)&&(a.ctx.renderer=ee),fi(a),a.asyncDep){if(s&&s.registerDep(a,B),!e.el){const e=a.subTree=Wt(It);v(null,e,t,i)}}else B(a,e,t,i,s,r,o)},D=(e,t,i)=>{const n=t.component=e.component;if(F(e,t,i)){if(n.asyncDep&&!n.asyncResolved)return void j(n,t,i);n.next=t,C(n.update),n.update()}else t.el=e.el,n.vnode=t},B=(e,t,i,r,o,a,l)=>{const c=()=>{if(e.isMounted){let t,{next:i,bu:n,u:r,parent:c,vnode:u}=e,h=i;0,Tt(e,!1),i?(i.el=u.el,j(e,i,l)):i=u,n&&(0,s.ir)(n),(t=i.props&&i.props.onVnodeBeforeUpdate)&&ii(t,c,i,u),Tt(e,!0);const d=M(e);0;const f=e.subTree;e.subTree=d,b(f,d,p(f.el),Z(f),e,o,a),i.el=d.el,null===h&&V(e,d.el),r&&wt(r,o),(t=i.props&&i.props.onVnodeUpdated)&&wt((()=>ii(t,c,i,u)),o)}else{let n;const{el:l,props:c}=t,{bm:u,m:h,parent:d}=e,p=le(t);if(Tt(e,!1),u&&(0,s.ir)(u),!p&&(n=c&&c.onVnodeBeforeMount)&&ii(n,d,t),Tt(e,!0),l&&ie){const i=()=>{e.subTree=M(e),ie(l,e.subTree,e,o,null)};p?t.type.__asyncLoader().then((()=>!e.isUnmounted&&i())):i()}else{0;const n=e.subTree=M(e);0,b(null,n,i,r,e,o,a),t.el=n.el}if(h&&wt(h,o),!p&&(n=c&&c.onVnodeMounted)){const e=t;wt((()=>ii(n,d,e)),o)}(256&t.shapeFlag||d&&le(d.vnode)&&256&d.vnode.shapeFlag)&&e.a&&wt(e.a,o),e.isMounted=!0,t=i=r=null}},u=e.effect=new n.qq(c,(()=>y(h)),e.scope),h=e.update=()=>u.run();h.id=e.uid,Tt(e,!0),h()},j=(e,t,i)=>{t.component=e;const s=e.vnode.props;e.vnode=t,e.next=null,tt(e,t.props,s,i),mt(e,t.children,i),(0,n.Jd)(),T(),(0,n.lk)()},z=(e,t,i,n,s,r,o,a,l=!1)=>{const c=e&&e.children,u=e?e.shapeFlag:0,h=t.children,{patchFlag:p,shapeFlag:f}=t;if(p>0){if(128&p)return void H(c,h,i,n,s,r,o,a,l);if(256&p)return void q(c,h,i,n,s,r,o,a,l)}8&f?(16&u&&Y(c,s,r),h!==c&&d(i,h)):16&u?16&f?H(c,h,i,n,s,r,o,a,l):Y(c,s,r,!0):(8&u&&d(i,""),16&f&&I(h,i,n,s,r,o,a,l))},q=(e,t,i,n,r,o,a,l,c)=>{e=e||s.Z6,t=t||s.Z6;const u=e.length,h=t.length,d=Math.min(u,h);let p;for(p=0;p<d;p++){const n=t[p]=c?Qt(t[p]):Zt(t[p]);b(e[p],n,i,null,r,o,a,l,c)}u>h?Y(e,r,o,!0,!1,d):I(t,i,n,r,o,a,l,c,d)},H=(e,t,i,n,r,o,a,l,c)=>{let u=0;const h=t.length;let d=e.length-1,p=h-1;while(u<=d&&u<=p){const n=e[u],s=t[u]=c?Qt(t[u]):Zt(t[u]);if(!jt(n,s))break;b(n,s,i,null,r,o,a,l,c),u++}while(u<=d&&u<=p){const n=e[d],s=t[p]=c?Qt(t[p]):Zt(t[p]);if(!jt(n,s))break;b(n,s,i,null,r,o,a,l,c),d--,p--}if(u>d){if(u<=p){const e=p+1,s=e<h?t[e].el:n;while(u<=p)b(null,t[u]=c?Qt(t[u]):Zt(t[u]),i,s,r,o,a,l,c),u++}}else if(u>p)while(u<=d)W(e[u],r,o,!0),u++;else{const f=u,m=u,g=new Map;for(u=m;u<=p;u++){const e=t[u]=c?Qt(t[u]):Zt(t[u]);null!=e.key&&g.set(e.key,u)}let _,v=0;const y=p-m+1;let w=!1,C=0;const x=new Array(y);for(u=0;u<y;u++)x[u]=0;for(u=f;u<=d;u++){const n=e[u];if(v>=y){W(n,r,o,!0);continue}let s;if(null!=n.key)s=g.get(n.key);else for(_=m;_<=p;_++)if(0===x[_-m]&&jt(n,t[_])){s=_;break}void 0===s?W(n,r,o,!0):(x[s-m]=u+1,s>=C?C=s:w=!0,b(n,t[s],i,null,r,o,a,l,c),v++)}const T=w?Et(x):s.Z6;for(_=T.length-1,u=y-1;u>=0;u--){const e=m+u,s=t[e],d=e+1<h?t[e+1].el:n;0===x[u]?b(null,s,i,d,r,o,a,l,c):w&&(_<0||u!==T[_]?K(s,i,d,2):_--)}}},K=(e,t,i,n,s=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void K(e.component.subTree,t,i,n);if(128&u)return void e.suspense.move(t,i,n);if(64&u)return void a.move(e,t,i,ee);if(a===At){r(o,t,i);for(let e=0;e<c.length;e++)K(c[e],t,i,n);return void r(e.anchor,t,i)}if(a===Rt)return void x(e,t,i);const h=2!==n&&1&u&&l;if(h)if(0===n)l.beforeEnter(o),r(o,t,i),wt((()=>l.enter(o)),s);else{const{leave:e,delayLeave:n,afterLeave:s}=l,a=()=>r(o,t,i),c=()=>{e(o,(()=>{a(),s&&s()}))};n?n(o,a,c):c()}else r(o,t,i)},W=(e,t,i,n=!1,s=!1)=>{const{type:r,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:d}=e;if(null!=a&&vt(a,null,i,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&d,f=!le(e);let m;if(f&&(m=o&&o.onVnodeBeforeUnmount)&&ii(m,t,e),6&u)J(e.component,i,n);else{if(128&u)return void e.suspense.unmount(i,n);p&&Se(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,i,s,ee,n):c&&(r!==At||h>0&&64&h)?Y(c,t,i,!1,!0):(r===At&&384&h||!s&&16&u)&&Y(l,t,i),n&&X(e)}(f&&(m=o&&o.onVnodeUnmounted)||p)&&wt((()=>{m&&ii(m,t,e),p&&Se(e,null,t,"unmounted")}),i)},X=e=>{const{type:t,el:i,anchor:n,transition:s}=e;if(t===At)return void G(i,n);if(t===Rt)return void E(e);const r=()=>{o(i),s&&!s.persisted&&s.afterLeave&&s.afterLeave()};if(1&e.shapeFlag&&s&&!s.persisted){const{leave:t,delayLeave:n}=s,o=()=>t(i,r);n?n(e.el,r,o):o()}else r()},G=(e,t)=>{let i;while(e!==t)i=f(e),o(e),e=i;o(t)},J=(e,t,i)=>{const{bum:n,scope:r,update:o,subTree:a,um:l}=e;n&&(0,s.ir)(n),r.stop(),o&&(o.active=!1,W(a,e,t,i)),l&&wt(l,t),wt((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},Y=(e,t,i,n=!1,s=!1,r=0)=>{for(let o=r;o<e.length;o++)W(e[o],t,i,n,s)},Z=e=>6&e.shapeFlag?Z(e.component.subTree):128&e.shapeFlag?e.suspense.next():f(e.anchor||e.el),Q=(e,t,i)=>{null==e?t._vnode&&W(t._vnode,null,null,!0):b(t._vnode||null,e,t,null,null,null,i),T(),k(),t._vnode=e},ee={p:b,um:W,m:K,r:X,mt:P,mc:I,pc:z,pbc:L,n:Z,o:e};let te,ie;return t&&([te,ie]=t(ee)),{render:Q,hydrate:te,createApp:_t(Q,te)}}function Tt({effect:e,update:t},i){e.allowRecurse=t.allowRecurse=i}function kt(e,t,i=!1){const n=e.children,r=t.children;if((0,s.kJ)(n)&&(0,s.kJ)(r))for(let s=0;s<n.length;s++){const e=n[s];let t=r[s];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=r[s]=Qt(r[s]),t.el=e.el),i||kt(e,t)),t.type===St&&(t.el=e.el)}}function Et(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const l=e[n];if(0!==l){if(s=i[i.length-1],e[s]<l){t[n]=s,i.push(n);continue}r=0,o=i.length-1;while(r<o)a=r+o>>1,e[i[a]]<l?r=a+1:o=a;l<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}r=i.length,o=i[r-1];while(r-- >0)i[r]=o,o=t[o];return i}const $t=e=>e.__isTeleport;const At=Symbol(void 0),St=Symbol(void 0),It=Symbol(void 0),Rt=Symbol(void 0),Lt=[];let Ut=null;function Ot(e=!1){Lt.push(Ut=e?null:[])}function Nt(){Lt.pop(),Ut=Lt[Lt.length-1]||null}let Mt=1;function Pt(e){Mt+=e}function Dt(e){return e.dynamicChildren=Mt>0?Ut||s.Z6:null,Nt(),Mt>0&&Ut&&Ut.push(e),e}function Ft(e,t,i,n,s,r){return Dt(Kt(e,t,i,n,s,r,!0))}function Bt(e,t,i,n,s){return Dt(Wt(e,t,i,n,s,!0))}function Vt(e){return!!e&&!0===e.__v_isVNode}function jt(e,t){return e.type===t.type&&e.key===t.key}const zt="__vInternal",qt=({key:e})=>null!=e?e:null,Ht=({ref:e,ref_key:t,ref_for:i})=>null!=e?(0,s.HD)(e)||(0,n.dq)(e)||(0,s.mf)(e)?{i:L,r:e,k:t,f:!!i}:e:null;function Kt(e,t=null,i=null,n=0,r=null,o=(e===At?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&qt(t),ref:t&&Ht(t),scopeId:U,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:L};return l?(ei(c,i),128&o&&e.normalize(c)):i&&(c.shapeFlag|=(0,s.HD)(i)?8:16),Mt>0&&!a&&Ut&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&Ut.push(c),c}const Wt=Xt;function Xt(e,t=null,i=null,r=0,o=null,a=!1){if(e&&e!==Le||(e=It),Vt(e)){const n=Jt(e,t,!0);return i&&ei(n,i),Mt>0&&!a&&Ut&&(6&n.shapeFlag?Ut[Ut.indexOf(e)]=n:Ut.push(n)),n.patchFlag|=-2,n}if(Ci(e)&&(e=e.__vccOpts),t){t=Gt(t);let{class:e,style:i}=t;e&&!(0,s.HD)(e)&&(t.class=(0,s.C_)(e)),(0,s.Kn)(i)&&((0,n.X3)(i)&&!(0,s.kJ)(i)&&(i=(0,s.l7)({},i)),t.style=(0,s.j5)(i))}const l=(0,s.HD)(e)?1:j(e)?128:$t(e)?64:(0,s.Kn)(e)?4:(0,s.mf)(e)?2:0;return Kt(e,t,i,r,o,l,a,!0)}function Gt(e){return e?(0,n.X3)(e)||zt in e?(0,s.l7)({},e):e:null}function Jt(e,t,i=!1){const{props:n,ref:r,patchFlag:o,children:a}=e,l=t?ti(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&qt(l),ref:t&&t.ref?i&&r?(0,s.kJ)(r)?r.concat(Ht(t)):[r,Ht(t)]:Ht(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==At?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jt(e.ssContent),ssFallback:e.ssFallback&&Jt(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c}function Yt(e=" ",t=0){return Wt(St,null,e,t)}function Zt(e){return null==e||"boolean"===typeof e?Wt(It):(0,s.kJ)(e)?Wt(At,null,e.slice()):"object"===typeof e?Qt(e):Wt(St,null,String(e))}function Qt(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:Jt(e)}function ei(e,t){let i=0;const{shapeFlag:n}=e;if(null==t)t=null;else if((0,s.kJ)(t))i=16;else if("object"===typeof t){if(65&n){const i=t.default;return void(i&&(i._c&&(i._d=!1),ei(e,i()),i._c&&(i._d=!0)))}{i=32;const n=t._;n||zt in t?3===n&&L&&(1===L.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=L}}else(0,s.mf)(t)?(t={default:t,_ctx:L},i=32):(t=String(t),64&n?(i=16,t=[Yt(t)]):i=8);e.children=t,e.shapeFlag|=i}function ti(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const e in n)if("class"===e)t.class!==n.class&&(t.class=(0,s.C_)([t.class,n.class]));else if("style"===e)t.style=(0,s.j5)([t.style,n.style]);else if((0,s.F7)(e)){const i=t[e],r=n[e];!r||i===r||(0,s.kJ)(i)&&i.includes(r)||(t[e]=i?[].concat(i,r):r)}else""!==e&&(t[e]=n[e])}return t}function ii(e,t,i,n=null){o(e,t,7,[i,n])}const ni=gt();let si=0;function ri(e,t,i){const r=e.type,o=(t?t.appContext:e.appContext)||ni,a={uid:si++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new n.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:st(r,o),emitsOptions:I(r,o),emit:null,emitted:null,propsDefaults:s.kT,inheritAttrs:r.inheritAttrs,ctx:s.kT,data:s.kT,props:s.kT,attrs:s.kT,slots:s.kT,refs:s.kT,setupState:s.kT,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=S.bind(null,a),e.ce&&e.ce(a),a}let oi=null;const ai=()=>oi||L,li=e=>{oi=e,e.scope.on()},ci=()=>{oi&&oi.scope.off(),oi=null};function ui(e){return 4&e.vnode.shapeFlag}let hi,di,pi=!1;function fi(e,t=!1){pi=t;const{props:i,children:n}=e.vnode,s=ui(e);et(e,i,s,t),ft(e,n);const r=s?mi(e,t):void 0;return pi=!1,r}function mi(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=(0,n.Xl)(new Proxy(e.ctx,Fe));const{setup:o}=i;if(o){const i=e.setupContext=o.length>1?vi(e):null;li(e),(0,n.Jd)();const l=r(o,e,0,[e.props,i]);if((0,n.lk)(),ci(),(0,s.tI)(l)){if(l.then(ci,ci),t)return l.then((i=>{gi(e,i,t)})).catch((t=>{a(t,e,0)}));e.asyncDep=l}else gi(e,l,t)}else bi(e,t)}function gi(e,t,i){(0,s.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,s.Kn)(t)&&(e.setupState=(0,n.WL)(t)),bi(e,i)}function bi(e,t,i){const r=e.type;if(!e.render){if(!t&&hi&&!r.render){const t=r.template||He(e).template;if(t){0;const{isCustomElement:i,compilerOptions:n}=e.appContext.config,{delimiters:o,compilerOptions:a}=r,l=(0,s.l7)((0,s.l7)({isCustomElement:i,delimiters:o},n),a);r.render=hi(t,l)}}e.render=r.render||s.dG,di&&di(e)}li(e),(0,n.Jd)(),Ve(e),(0,n.lk)(),ci()}function _i(e){return new Proxy(e.attrs,{get(t,i){return(0,n.j)(e,"get","$attrs"),t[i]}})}function vi(e){const t=t=>{e.exposed=t||{}};let i;return{get attrs(){return i||(i=_i(e))},slots:e.slots,emit:e.emit,expose:t}}function yi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,n.WL)((0,n.Xl)(e.exposed)),{get(t,i){return i in t?t[i]:i in Pe?Pe[i](e):void 0},has(e,t){return t in e||t in Pe}}))}function wi(e,t=!0){return(0,s.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function Ci(e){return(0,s.mf)(e)&&"__vccOpts"in e}const xi=(e,t)=>(0,n.Fl)(e,t,pi);function Ti(e,t,i){const n=arguments.length;return 2===n?(0,s.Kn)(t)&&!(0,s.kJ)(t)?Vt(t)?Wt(e,null,[t]):Wt(e,t):Wt(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):3===n&&Vt(i)&&(i=[i]),Wt(e,t,i))}const ki=Symbol(""),Ei=()=>{{const e=H(ki);return e}};const $i="3.2.47"},825:function(e,t,i){i.d(t,{ri:function(){return le}});var n=i(349),s=i(875),r=i(641);const o="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t?a.createElementNS(o,e):a.createElement(e,i?{is:i}:void 0);return"select"===e&&n&&null!=n.multiple&&s.setAttribute("multiple",n.multiple),s},createText:e=>a.createTextNode(e),createComment:e=>a.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>a.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling)){while(1)if(t.insertBefore(s.cloneNode(!0),i),s===r||!(s=s.nextSibling))break}else{l.innerHTML=n?`<svg>${e}</svg>`:e;const s=l.content;if(n){const e=s.firstChild;while(e.firstChild)s.appendChild(e.firstChild);s.removeChild(e)}t.insertBefore(s,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function u(e,t,i){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),null==t?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}function h(e,t,i){const s=e.style,r=(0,n.HD)(i);if(i&&!r){if(t&&!(0,n.HD)(t))for(const e in t)null==i[e]&&p(s,e,"");for(const e in i)p(s,e,i[e])}else{const n=s.display;r?t!==i&&(s.cssText=i):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=n)}}const d=/\s*!important$/;function p(e,t,i){if((0,n.kJ)(i))i.forEach((i=>p(e,t,i)));else if(null==i&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=g(e,t);d.test(i)?e.setProperty((0,n.rs)(s),i.replace(d,""),"important"):e[s]=i}}const f=["Webkit","Moz","ms"],m={};function g(e,t){const i=m[t];if(i)return i;let s=(0,n._A)(t);if("filter"!==s&&s in e)return m[t]=s;s=(0,n.kC)(s);for(let n=0;n<f.length;n++){const i=f[n]+s;if(i in e)return m[t]=i}return t}const b="http://www.w3.org/1999/xlink";function _(e,t,i,s,r){if(s&&t.startsWith("xlink:"))null==i?e.removeAttributeNS(b,t.slice(6,t.length)):e.setAttributeNS(b,t,i);else{const s=(0,n.Pq)(t);null==i||s&&!(0,n.yA)(i)?e.removeAttribute(t):e.setAttribute(t,s?"":i)}}function v(e,t,i,s,r,o,a){if("innerHTML"===t||"textContent"===t)return s&&a(s,r,o),void(e[t]=null==i?"":i);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=i;const n=null==i?"":i;return e.value===n&&"OPTION"!==e.tagName||(e.value=n),void(null==i&&e.removeAttribute(t))}let l=!1;if(""===i||null==i){const s=typeof e[t];"boolean"===s?i=(0,n.yA)(i):null==i&&"string"===s?(i="",l=!0):"number"===s&&(i=0,l=!0)}try{e[t]=i}catch(c){0}l&&e.removeAttribute(t)}function y(e,t,i,n){e.addEventListener(t,i,n)}function w(e,t,i,n){e.removeEventListener(t,i,n)}function C(e,t,i,n,s=null){const r=e._vei||(e._vei={}),o=r[t];if(n&&o)o.value=n;else{const[i,a]=T(t);if(n){const o=r[t]=A(n,s);y(e,i,o,a)}else o&&(w(e,i,o,a),r[t]=void 0)}}const x=/(?:Once|Passive|Capture)$/;function T(e){let t;if(x.test(e)){let i;t={};while(i=e.match(x))e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}const i=":"===e[2]?e.slice(3):(0,n.rs)(e.slice(2));return[i,t]}let k=0;const E=Promise.resolve(),$=()=>k||(E.then((()=>k=0)),k=Date.now());function A(e,t){const i=e=>{if(e._vts){if(e._vts<=i.attached)return}else e._vts=Date.now();(0,s.$d)(S(e,i.value),t,5,[e])};return i.value=e,i.attached=$(),i}function S(e,t){if((0,n.kJ)(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const I=/^on[a-z]/,R=(e,t,i,s,r=!1,o,a,l,c)=>{"class"===t?u(e,s,r):"style"===t?h(e,i,s):(0,n.F7)(t)?(0,n.tR)(t)||C(e,t,i,s,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):L(e,t,s,r))?v(e,t,s,o,a,l,c):("true-value"===t?e._trueValue=s:"false-value"===t&&(e._falseValue=s),_(e,t,s,r))};function L(e,t,i,s){return s?"innerHTML"===t||"textContent"===t||!!(t in e&&I.test(t)&&(0,n.mf)(i)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!I.test(t)||!(0,n.HD)(i))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const U="transition",O="animation",N=(e,{slots:t})=>(0,s.h)(s.P$,B(e),t);N.displayName="Transition";const M={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},P=N.props=(0,n.l7)({},s.P$.props,M),D=(e,t=[])=>{(0,n.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},F=e=>!!e&&((0,n.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function B(e){const t={};for(const n in e)n in M||(t[n]=e[n]);if(!1===e.css)return t;const{name:i="v",type:s,duration:r,enterFromClass:o=`${i}-enter-from`,enterActiveClass:a=`${i}-enter-active`,enterToClass:l=`${i}-enter-to`,appearFromClass:c=o,appearActiveClass:u=a,appearToClass:h=l,leaveFromClass:d=`${i}-leave-from`,leaveActiveClass:p=`${i}-leave-active`,leaveToClass:f=`${i}-leave-to`}=e,m=V(r),g=m&&m[0],b=m&&m[1],{onBeforeEnter:_,onEnter:v,onEnterCancelled:y,onLeave:w,onLeaveCancelled:C,onBeforeAppear:x=_,onAppear:T=v,onAppearCancelled:k=y}=t,E=(e,t,i)=>{q(e,t?h:l),q(e,t?u:a),i&&i()},$=(e,t)=>{e._isLeaving=!1,q(e,d),q(e,f),q(e,p),t&&t()},A=e=>(t,i)=>{const n=e?T:v,r=()=>E(t,e,i);D(n,[t,r]),H((()=>{q(t,e?c:o),z(t,e?h:l),F(n)||W(t,s,g,r)}))};return(0,n.l7)(t,{onBeforeEnter(e){D(_,[e]),z(e,o),z(e,a)},onBeforeAppear(e){D(x,[e]),z(e,c),z(e,u)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const i=()=>$(e,t);z(e,d),Y(),z(e,p),H((()=>{e._isLeaving&&(q(e,d),z(e,f),F(w)||W(e,s,b,i))})),D(w,[e,i])},onEnterCancelled(e){E(e,!1),D(y,[e])},onAppearCancelled(e){E(e,!0),D(k,[e])},onLeaveCancelled(e){$(e),D(C,[e])}})}function V(e){if(null==e)return null;if((0,n.Kn)(e))return[j(e.enter),j(e.leave)];{const t=j(e);return[t,t]}}function j(e){const t=(0,n.He)(e);return t}function z(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function q(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:i}=e;i&&(i.delete(t),i.size||(e._vtc=void 0))}function H(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let K=0;function W(e,t,i,n){const s=e._endId=++K,r=()=>{s===e._endId&&n()};if(i)return setTimeout(r,i);const{type:o,timeout:a,propCount:l}=X(e,t);if(!o)return n();const c=o+"end";let u=0;const h=()=>{e.removeEventListener(c,d),r()},d=t=>{t.target===e&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),a+1),e.addEventListener(c,d)}function X(e,t){const i=window.getComputedStyle(e),n=e=>(i[e]||"").split(", "),s=n(`${U}Delay`),r=n(`${U}Duration`),o=G(s,r),a=n(`${O}Delay`),l=n(`${O}Duration`),c=G(a,l);let u=null,h=0,d=0;t===U?o>0&&(u=U,h=o,d=r.length):t===O?c>0&&(u=O,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?U:O:null,d=u?u===U?r.length:l.length:0);const p=u===U&&/\b(transform|all)(,|$)/.test(n(`${U}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:p}}function G(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,i)=>J(t)+J(e[i]))))}function J(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Y(){return document.body.offsetHeight}const Z=new WeakMap,Q=new WeakMap,ee={name:"TransitionGroup",props:(0,n.l7)({},P,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=(0,s.FN)(),n=(0,s.Y8)();let o,a;return(0,s.ic)((()=>{if(!o.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!se(o[0].el,i.vnode.el,t))return;o.forEach(te),o.forEach(ie);const n=o.filter(ne);Y(),n.forEach((e=>{const i=e.el,n=i.style;z(i,t),n.transform=n.webkitTransform=n.transitionDuration="";const s=i._moveCb=e=>{e&&e.target!==i||e&&!/transform$/.test(e.propertyName)||(i.removeEventListener("transitionend",s),i._moveCb=null,q(i,t))};i.addEventListener("transitionend",s)}))})),()=>{const l=(0,r.IU)(e),c=B(l);let u=l.tag||s.HY;o=a,a=t.default?(0,s.Q6)(t.default()):[];for(let e=0;e<a.length;e++){const t=a[e];null!=t.key&&(0,s.nK)(t,(0,s.U2)(t,c,n,i))}if(o)for(let e=0;e<o.length;e++){const t=o[e];(0,s.nK)(t,(0,s.U2)(t,c,n,i)),Z.set(t,t.el.getBoundingClientRect())}return(0,s.Wm)(u,null,a)}}};ee.props;function te(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ie(e){Q.set(e,e.el.getBoundingClientRect())}function ne(e){const t=Z.get(e),i=Q.get(e),n=t.left-i.left,s=t.top-i.top;if(n||s){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${n}px,${s}px)`,t.transitionDuration="0s",e}}function se(e,t,i){const n=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&n.classList.remove(e)))})),i.split(/\s+/).forEach((e=>e&&n.classList.add(e))),n.style.display="none";const s=1===t.nodeType?t:t.parentNode;s.appendChild(n);const{hasTransform:r}=X(n);return s.removeChild(n),r}const re=(0,n.l7)({patchProp:R},c);let oe;function ae(){return oe||(oe=(0,s.Us)(re))}const le=(...e)=>{const t=ae().createApp(...e);const{mount:i}=t;return t.mount=e=>{const s=ce(e);if(!s)return;const r=t._component;(0,n.mf)(r)||r.render||r.template||(r.template=s.innerHTML),s.innerHTML="";const o=i(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function ce(e){if((0,n.HD)(e)){const t=document.querySelector(e);return t}return e}},349:function(e,t,i){function n(e,t){const i=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)i[n[s]]=!0;return t?e=>!!i[e.toLowerCase()]:e=>!!i[e]}i.d(t,{C_:function(){return h},DM:function(){return R},E9:function(){return se},F7:function(){return x},Gg:function(){return q},HD:function(){return N},He:function(){return ie},Kj:function(){return U},Kn:function(){return P},NO:function(){return w},Nj:function(){return ee},Od:function(){return E},PO:function(){return j},Pq:function(){return p},RI:function(){return A},S0:function(){return z},W7:function(){return V},WV:function(){return g},Z6:function(){return v},_A:function(){return W},_N:function(){return I},aU:function(){return Z},dG:function(){return y},e1:function(){return r},fY:function(){return n},h5:function(){return te},hR:function(){return Y},hq:function(){return b},ir:function(){return Q},j5:function(){return o},kC:function(){return J},kJ:function(){return S},kT:function(){return _},l7:function(){return k},mf:function(){return O},rs:function(){return G},tI:function(){return D},tR:function(){return T},yA:function(){return f},yk:function(){return M}});const s="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",r=n(s);function o(e){if(S(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=N(n)?u(n):o(n);if(s)for(const e in s)t[e]=s[e]}return t}return N(e)||P(e)?e:void 0}const a=/;(?![^(]*\))/g,l=/:([^]+)/,c=/\/\*.*?\*\//gs;function u(e){const t={};return e.replace(c,"").split(a).forEach((e=>{if(e){const i=e.split(l);i.length>1&&(t[i[0].trim()]=i[1].trim())}})),t}function h(e){let t="";if(N(e))t=e;else if(S(e))for(let i=0;i<e.length;i++){const n=h(e[i]);n&&(t+=n+" ")}else if(P(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const d="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",p=n(d);function f(e){return!!e||""===e}function m(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=g(e[n],t[n]);return i}function g(e,t){if(e===t)return!0;let i=L(e),n=L(t);if(i||n)return!(!i||!n)&&e.getTime()===t.getTime();if(i=M(e),n=M(t),i||n)return e===t;if(i=S(e),n=S(t),i||n)return!(!i||!n)&&m(e,t);if(i=P(e),n=P(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const i in e){const n=e.hasOwnProperty(i),s=t.hasOwnProperty(i);if(n&&!s||!n&&s||!g(e[i],t[i]))return!1}}return String(e)===String(t)}function b(e,t){return e.findIndex((e=>g(e,t)))}const _={},v=[],y=()=>{},w=()=>!1,C=/^on[^a-z]/,x=e=>C.test(e),T=e=>e.startsWith("onUpdate:"),k=Object.assign,E=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},$=Object.prototype.hasOwnProperty,A=(e,t)=>$.call(e,t),S=Array.isArray,I=e=>"[object Map]"===B(e),R=e=>"[object Set]"===B(e),L=e=>"[object Date]"===B(e),U=e=>"[object RegExp]"===B(e),O=e=>"function"===typeof e,N=e=>"string"===typeof e,M=e=>"symbol"===typeof e,P=e=>null!==e&&"object"===typeof e,D=e=>P(e)&&O(e.then)&&O(e.catch),F=Object.prototype.toString,B=e=>F.call(e),V=e=>B(e).slice(8,-1),j=e=>"[object Object]"===B(e),z=e=>N(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,q=n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),H=e=>{const t=Object.create(null);return i=>{const n=t[i];return n||(t[i]=e(i))}},K=/-(\w)/g,W=H((e=>e.replace(K,((e,t)=>t?t.toUpperCase():"")))),X=/\B([A-Z])/g,G=H((e=>e.replace(X,"-$1").toLowerCase())),J=H((e=>e.charAt(0).toUpperCase()+e.slice(1))),Y=H((e=>e?`on${J(e)}`:"")),Z=(e,t)=>!Object.is(e,t),Q=(e,t)=>{for(let i=0;i<e.length;i++)e[i](t)},ee=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})},te=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ie=e=>{const t=N(e)?Number(e):NaN;return isNaN(t)?e:t};let ne;const se=()=>ne||(ne="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:{})},957:function(){},407:function(e,t){t.Z=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i}},655:function(e,t,i){function n(e){for(let t in e){let i=[...t].reduce(((e,t)=>(t.toUpperCase()===t&&(t="-"+t.toLowerCase()),e+t)),"");i.startsWith("-")&&(i=i.replace("-","")),i.startsWith("lr-")||(i="lr-"+i),e[t].reg&&e[t].reg(i)}}i.d(t,{n:function(){return n}})},339:function(e,t,i){i.d(t,{d:function(){return n},l:function(){return s}});const n="blocks",s="0.20.1"},817:function(e,t,i){i.r(t),i.d(t,{ActivityBlock:function(){return de},ActivityHeader:function(){return Gn},BaseComponent:function(){return M},Block:function(){return le},CameraSource:function(){return on},CloudEditor:function(){return Dn},CloudImageEditor:function(){return Fn},ConfirmationDialog:function(){return un},Copyright:function(){return is},CropFrame:function(){return Es},Data:function(){return a},DataOutput:function(){return Xn},DropArea:function(){return qi},EditorCropButtonControl:function(){return Is},EditorFilterControl:function(){return Ms},EditorImageCropper:function(){return zs},EditorImageFader:function(){return Gs},EditorOperationControl:function(){return Ps},EditorScroller:function(){return Ys},EditorSlider:function(){return Us},EditorToolbar:function(){return er},ExternalSource:function(){return Kn},FileItem:function(){return tn},FilePreview:function(){return fn},FileUploaderInline:function(){return os},FileUploaderMinimal:function(){return rs},FileUploaderRegular:function(){return ss},Icon:function(){return hi},Img:function(){return Li},LineLoaderUi:function(){return ir},LrBtnUi:function(){return tr},MessageBox:function(){return Ji},Modal:function(){return ce},PresenceToggle:function(){return sr},ProgressBar:function(){return dn},ProgressBarCommon:function(){return hn},Select:function(){return Jn},ShadowWrapper:function(){return ts},SimpleBtn:function(){return Ui},SliderUi:function(){return rr},SourceBtn:function(){return Ki},SourceList:function(){return Wi},StartFrom:function(){return Oi},Tabs:function(){return Wn},UploadCtxProvider:function(){return an},UploadDetails:function(){return ln},UploadList:function(){return nn},UploaderBlock:function(){return ui},UrlSource:function(){return sn},Video:function(){return Qn},connectBlocksFrom:function(){return lr},registerBlocks:function(){return or.n}});var n=Object.defineProperty,s=(e,t,i)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,r=(e,t,i)=>(s(e,"symbol"!==typeof t?t+"":t,i),i);function o(e){let t=e=>{var i;for(let n in e)(null==(i=e[n])?void 0:i.constructor)===Object&&(e[n]=t(e[n]));return{...e}};return t(e)}var a=class{constructor(e){e.constructor===Object?this.store=o(e):(this._storeIsProxy=!0,this.store=e),this.callbackMap=Object.create(null)}static warn(e,t){console.warn(`Symbiote Data: cannot ${e}. Prop name: `+t)}read(e){return this._storeIsProxy||this.store.hasOwnProperty(e)?this.store[e]:(a.warn("read",e),null)}has(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}add(e,t,i=!1){!i&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}pub(e,t){this._storeIsProxy||this.store.hasOwnProperty(e)?(this.store[e]=t,this.notify(e)):a.warn("publish",e)}multiPub(e){for(let t in e)this.pub(t,e[t])}notify(e){this.callbackMap[e]&&this.callbackMap[e].forEach((t=>{t(this.store[e])}))}sub(e,t,i=!0){return this._storeIsProxy||this.store.hasOwnProperty(e)?(this.callbackMap[e]||(this.callbackMap[e]=new Set),this.callbackMap[e].add(t),i&&t(this.store[e]),{remove:()=>{this.callbackMap[e].delete(t),this.callbackMap[e].size||delete this.callbackMap[e]},callback:t}):(a.warn("subscribe",e),null)}static registerCtx(e,t=Symbol()){let i=a.globalStore.get(t);return i?console.warn('State: context UID "'+t+'" already in use'):(i=new a(e),a.globalStore.set(t,i)),i}static deleteCtx(e){a.globalStore.delete(e)}static getCtx(e,t=!0){return a.globalStore.get(e)||(t&&console.warn('State: wrong context UID - "'+e+'"'),null)}};a.globalStore=new Map;var l=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),c="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",u=c.length-1,h=class{static generate(e="XXXXXXXXX-XXX"){let t="";for(let i=0;i<e.length;i++)t+="-"===e[i]?e[i]:c.charAt(Math.random()*u);return t}};function d(e,t,i){let n,s=!0,r=t.split(".");return r.forEach(((t,i)=>{i<r.length-1?e=e[t]:n=t})),e?e[n]=i:s=!1,s}function p(e){return e.split("-").map(((e,t)=>e&&t?e[0].toUpperCase()+e.slice(1):e)).join("").split("_").map(((e,t)=>e&&t?e.toUpperCase():e)).join("")}function f(e,t){[...e.querySelectorAll(`[${l.REPEAT_ATTR}]`)].forEach((e=>{let i,n=e.getAttribute(l.REPEAT_ITEM_TAG_ATTR);if(n&&(i=window.customElements.get(n)),!i){i=class extends t.BaseComponent{constructor(){super(),n||(this.style.display="contents")}};let s=e.innerHTML;i.template=s,i.reg(n)}while(e.firstChild)e.firstChild.remove();let s=e.getAttribute(l.REPEAT_ATTR);t.sub(s,(t=>{if(!t){while(e.firstChild)e.firstChild.remove();return}let n,s=[...e.children],r=t=>{t.forEach(((e,t)=>{if(s[t])if(s[t].set$)setTimeout((()=>{s[t].set$(e)}));else for(let i in e)s[t][i]=e[i];else{n||(n=new DocumentFragment);let t=new i;Object.assign(t.init$,e),n.appendChild(t)}})),n&&e.appendChild(n);let r=s.slice(t.length,s.length);for(let e of r)e.remove()};if(t.constructor===Array)r(t);else if(t.constructor===Object){let e=[];for(let i in t){let n=t[i];Object.defineProperty(n,"_KEY_",{value:i,enumerable:!0}),e.push(n)}r(e)}else console.warn("Symbiote repeat data type error:"),console.log(t)})),e.removeAttribute(l.REPEAT_ATTR),e.removeAttribute(l.REPEAT_ITEM_TAG_ATTR)}))}var m="__default__";function g(e,t){if(t.shadowRoot)return;let i=[...e.querySelectorAll("slot")];if(!i.length)return;let n={};i.forEach((e=>{let t=e.getAttribute("name")||m;n[t]={slot:e,fr:document.createDocumentFragment()}})),t.initChildren.forEach((e=>{var t;let i=m;e instanceof Element&&e.hasAttribute("slot")&&(i=e.getAttribute("slot"),e.removeAttribute("slot")),null==(t=n[i])||t.fr.appendChild(e)})),Object.values(n).forEach((e=>{if(e.fr.childNodes.length)e.slot.parentNode.replaceChild(e.fr,e.slot);else if(e.slot.childNodes.length){let t=document.createDocumentFragment();t.append(...e.slot.childNodes),e.slot.parentNode.replaceChild(t,e.slot)}else e.slot.remove()}))}function b(e,t){[...e.querySelectorAll(`[${l.EL_REF_ATTR}]`)].forEach((e=>{let i=e.getAttribute(l.EL_REF_ATTR);t.ref[i]=e,e.removeAttribute(l.EL_REF_ATTR)}))}function _(e,t){[...e.querySelectorAll(`[${l.BIND_ATTR}]`)].forEach((e=>{let i=e.getAttribute(l.BIND_ATTR),n=i.split(";");[...e.attributes].forEach((t=>{if(t.name.startsWith("-")&&t.value){let i=p(t.name.replace("-",""));n.push(i+":"+t.value),e.removeAttribute(t.name)}})),n.forEach((i=>{if(!i)return;let n,s=i.split(":").map((e=>e.trim())),r=s[0];0===r.indexOf(l.ATTR_BIND_PRFX)&&(n=!0,r=r.replace(l.ATTR_BIND_PRFX,""));let o=s[1].split(",").map((e=>e.trim()));for(let a of o){let i;a.startsWith("!!")?(i="double",a=a.replace("!!","")):a.startsWith("!")&&(i="single",a=a.replace("!","")),t.sub(a,(t=>{"double"===i?t=!!t:"single"===i&&(t=!t),n?(null==t?void 0:t.constructor)===Boolean?t?e.setAttribute(r,""):e.removeAttribute(r):e.setAttribute(r,t):d(e,r,t)||(e[l.SET_LATER_KEY]||(e[l.SET_LATER_KEY]=Object.create(null)),e[l.SET_LATER_KEY][r]=t)}))}})),e.removeAttribute(l.BIND_ATTR)}))}var v="{{",y="}}",w="skip-text";function C(e){let t,i=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:e=>{var t;return!(null==(t=e.parentElement)?void 0:t.hasAttribute(w))&&e.textContent.includes(v)&&e.textContent.includes(y)&&1}});while(t=n.nextNode())i.push(t);return i}var x=function(e,t){let i=C(e);i.forEach((e=>{let i,n=[];while(e.textContent.includes(y))e.textContent.startsWith(v)?(i=e.textContent.indexOf(y)+y.length,e.splitText(i),n.push(e)):(i=e.textContent.indexOf(v),e.splitText(i)),e=e.nextSibling;n.forEach((e=>{let i=e.textContent.replace(v,"").replace(y,"");e.textContent="",t.sub(i,(t=>{e.textContent=t}))}))}))},T=[f,g,b,_,x],k="'",E='"',$=/\\([0-9a-fA-F]{1,6} ?)/g;function A(e){return(e[0]===E||e[0]===k)&&(e[e.length-1]===E||e[e.length-1]===k)}function S(e){return e[0]!==E&&e[0]!==k||(e=e.slice(1)),e[e.length-1]!==E&&e[e.length-1]!==k||(e=e.slice(0,-1)),e}function I(e){let t="",i="";for(var n=0;n<e.length;n++){const s=e[n+1];"\\"===e[n]&&'"'===s?(t+='\\"',n++):'"'===e[n]&&"\\"!==i?t+='\\"':t+=e[n],i=e[n]}return t}function R(e){let t=e;A(e)&&(t=S(t),t=t.replace($,((e,t)=>String.fromCodePoint(parseInt(t.trim(),16)))),t=t.replaceAll("\\\n","\\n"),t=I(t),t=E+t+E);try{return JSON.parse(t)}catch(i){throw new Error(`Failed to parse CSS property value: ${t}. Original input: ${e}`)}}var L=0,U=null,O=null,N=class extends HTMLElement{constructor(){super(),r(this,"updateCssData",(()=>{var e;this.dropCssDataCache(),null==(e=this.__boundCssProps)||e.forEach((e=>{let t=this.getCssData(this.__extractCssName(e),!0);null!==t&&this.$[e]!==t&&(this.$[e]=t)}))})),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return N}initCallback(){}__initCallback(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}render(e,t=this.renderShadow){let i;if(!t&&!this.constructor["__shadowStylesUrl"]||this.shadowRoot||this.attachShadow({mode:"open"}),this.allowCustomTemplate){let t=this.getAttribute(l.USE_TPL);if(t){let i=this.getRootNode(),n=(null==i?void 0:i.querySelector(t))||document.querySelector(t);n?e=n.content.cloneNode(!0):console.warn(`Symbiote template "${t}" is not found...`)}}if(this.processInnerHtml)for(let s of this.tplProcessors)s(this,this);if(e||this.constructor["template"]){if(this.constructor["template"]&&!this.constructor["__tpl"]&&(this.constructor["__tpl"]=document.createElement("template"),this.constructor["__tpl"].innerHTML=this.constructor["template"]),(null==e?void 0:e.constructor)===DocumentFragment)i=e;else if((null==e?void 0:e.constructor)===String){let t=document.createElement("template");t.innerHTML=e,i=t.content.cloneNode(!0)}else this.constructor["__tpl"]&&(i=this.constructor["__tpl"].content.cloneNode(!0));for(let e of this.tplProcessors)e(i,this)}let n=()=>{i&&(t&&this.shadowRoot.appendChild(i)||this.appendChild(i)),this.__initCallback()};if(this.constructor["__shadowStylesUrl"]){t=!0;let e=document.createElement("link");e.rel="stylesheet",e.href=this.constructor["__shadowStylesUrl"],e.onload=n,this.shadowRoot.prepend(e)}else n()}addTemplateProcessor(e){this.tplProcessors.add(e)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=h.generate(),this.style.setProperty(l.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(l.CSS_CTX_PROP,!0)}get ctxName(){var e;let t=(null==(e=this.getAttribute(l.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}get localCtx(){return this.__localCtx||(this.__localCtx=a.registerCtx({},this)),this.__localCtx}get nodeCtx(){return a.getCtx(this.ctxName,!1)||a.registerCtx({},this.ctxName)}static __parseProp(e,t){let i,n;if(e.startsWith(l.EXT_DATA_CTX_PRFX))i=t.nodeCtx,n=e.replace(l.EXT_DATA_CTX_PRFX,"");else if(e.includes(l.NAMED_DATA_CTX_SPLTR)){let t=e.split(l.NAMED_DATA_CTX_SPLTR);i=a.getCtx(t[0]),n=t[1]}else i=t.localCtx,n=e;return{ctx:i,name:n}}sub(e,t,i=!0){let n=e=>{this.isConnected&&t(e)},s=N.__parseProp(e,this);s.ctx.has(s.name)?this.allSubs.add(s.ctx.sub(s.name,n,i)):window.setTimeout((()=>{this.allSubs.add(s.ctx.sub(s.name,n,i))}))}notify(e){let t=N.__parseProp(e,this);t.ctx.notify(t.name)}has(e){let t=N.__parseProp(e,this);return t.ctx.has(t.name)}add(e,t,i=!1){let n=N.__parseProp(e,this);n.ctx.add(n.name,t,i)}add$(e,t=!1){for(let i in e)this.add(i,e[i],t)}get $(){if(!this.__stateProxy){let e=Object.create(null);this.__stateProxy=new Proxy(e,{set:(e,t,i)=>{let n=N.__parseProp(t,this);return n.ctx.pub(n.name,i),!0},get:(e,t)=>{let i=N.__parseProp(t,this);return i.ctx.read(i.name)}})}return this.__stateProxy}set$(e,t=!1){for(let i in e){let n=e[i],s=[String,Number,Boolean];(t||!s.includes(null==n?void 0:n.constructor)||this.$[i]!==n)&&(this.$[i]=n)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(l.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(l.CTX_OWNER_ATTR)}__initDataCtx(){let e=this.constructor["__attrDesc"];if(e)for(let t of Object.values(e))Object.keys(this.init$).includes(t)||(this.init$[t]="");for(let t in this.init$)if(t.startsWith(l.EXT_DATA_CTX_PRFX))this.nodeCtx.add(t.replace(l.EXT_DATA_CTX_PRFX,""),this.init$[t],this.__ctxOwner);else if(t.includes(l.NAMED_DATA_CTX_SPLTR)){let e=t.split(l.NAMED_DATA_CTX_SPLTR),i=e[0].trim(),n=e[1].trim();if(i&&n){let e=a.getCtx(i,!1);e||(e=a.registerCtx({},i)),e.add(n,this.init$[t])}}else this.localCtx.add(t,this.init$[t]);for(let t in this.cssInit$)this.bindCssData(t,this.cssInit$[t]);this.__dataCtxInitialized=!0}connectedCallback(){var e;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let t=null==(e=this.getAttribute(l.CTX_NAME_ATTR))?void 0:e.trim();if(t&&this.style.setProperty(l.CSS_CTX_PROP,`'${t}'`),this.__initDataCtx(),this[l.SET_LATER_KEY]){for(let e in this[l.SET_LATER_KEY])d(this,e,this[l.SET_LATER_KEY][e]);delete this[l.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let e of T)this.addTemplateProcessor(e);if(this.pauseRender)this.__initCallback();else if(this.constructor["__rootStylesLink"]){let e=this.getRootNode();if(!e)return;let t=null==e?void 0:e.querySelector(`link[${l.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`);if(t)return void this.render();let i=this.constructor["__rootStylesLink"].cloneNode(!0);i.setAttribute(l.ROOT_STYLE_ATTR_NAME,this.constructor["is"]),i.onload=()=>{this.render()},e.nodeType===Node.DOCUMENT_NODE?e.head.appendChild(i):e.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout((()=>{this.destroyCallback();for(let e of this.allSubs)e.remove(),this.allSubs.delete(e);for(let e of this.tplProcessors)this.tplProcessors.delete(e);null==O||O.delete(this.updateCssData),(null==O?void 0:O.size)||(null==U||U.disconnect(),U=null,O=null)}),100)))}static reg(e,t=!1){e||(L++,e=`${l.AUTO_TAG_PRFX}-${L}`),this.__tag=e,window.customElements.get(e)?console.warn(`${e} - is already in "customElements" registry`):window.customElements.define(e,t?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}attributeChangedCallback(e,t,i){var n;if(t===i)return;let s=null==(n=this.constructor["__attrDesc"])?void 0:n[e];s?this.__dataCtxInitialized?this.$[s]=i:this.init$[s]=i:this[e]=i}getCssData(e,t=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=R(n)}catch(i){!t&&console.warn(`CSS Data error: ${e}`),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}__extractCssName(e){return e.split("--").map(((e,t)=>0===t?"":e)).join("--")}__initStyleAttrObserver(){O||(O=new Set),O.add(this.updateCssData),U||(U=new MutationObserver((e=>{"attributes"===e[0].type&&O.forEach((e=>{e()}))})),U.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(e,t=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);let i=this.getCssData(this.__extractCssName(e),!0);null===i&&(i=t),this.add(e,i),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(e,t,i){let n="__"+e;this[n]=this[e],Object.defineProperty(this,e,{set:e=>{this[n]=e,i?window.setTimeout((()=>{null==t||t(e)})):null==t||t(e)},get:()=>this[n]}),this[e]=this[n]}static set shadowStyles(e){let t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}static set rootStyles(e){if(!this.__rootStylesLink){let t=new Blob([e],{type:"text/css"}),i=URL.createObjectURL(t),n=document.createElement("link");n.href=i,n.rel="stylesheet",this.__rootStylesLink=n}}},M=N;r(M,"template");var P=class{static _print(e){console.warn(e)}static setDefaultTitle(e){this.defaultTitle=e}static setRoutingMap(e){Object.assign(this.appMap,e);for(let t in this.appMap)this.defaultRoute||!0!==this.appMap[t].default?this.errorRoute||!0!==this.appMap[t].error||(this.errorRoute=t):this.defaultRoute=t}static set routingEventName(e){this.__routingEventName=e}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let e={route:null,options:{}},t=window.location.search.split(this.separator);return t.forEach((t=>{if(t.includes("?"))e.route=t.replace("?","");else if(t.includes("=")){let i=t.split("=");e.options[i[0]]=decodeURI(i[1])}else e.options[t]=!0})),e}static notify(){let e=this.readAddressBar(),t=this.appMap[e.route];if(t&&t.title&&(document.title=t.title),null===e.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!t&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t)return void this._print(`Route "${e.route}" not found...`);let i=new CustomEvent(P.routingEventName,{detail:{route:e.route,options:Object.assign(t||{},e.options)}});window.dispatchEvent(i)}static reflect(e,t={}){let i=this.appMap[e];if(!i)return void this._print("Wrong route: "+e);let n="?"+e;for(let r in t)!0===t[r]?n+=this.separator+r:n+=this.separator+r+`=${t[r]}`;let s=i.title||this.defaultTitle||"";window.history.pushState(null,s,n),document.title=s}static applyRoute(e,t={}){this.reflect(e,t),this.notify()}static setSeparator(e){this._separator=e}static get separator(){return this._separator||"&"}static createRouterData(e,t){this.setRoutingMap(t);let i=a.registerCtx({route:null,options:null,title:null},e);return window.addEventListener(this.routingEventName,(e=>{var t;i.multiPub({route:e.detail.route,options:e.detail.options,title:(null==(t=e.detail.options)?void 0:t.title)||this.defaultTitle||""})})),P.notify(),this.initPopstateListener(),i}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function D(e,t){for(let i in t)i.includes("-")?e.style.setProperty(i,t[i]):e.style[i]=t[i]}function F(e,t){for(let i in t)t[i].constructor===Boolean?t[i]?e.setAttribute(i,""):e.removeAttribute(i):e.setAttribute(i,t[i])}function B(e={tag:"div"}){let t=document.createElement(e.tag);if(e.attributes&&F(t,e.attributes),e.styles&&D(t,e.styles),e.properties)for(let i in e.properties)t[i]=e.properties[i];return e.processors&&e.processors.forEach((e=>{e(t)})),e.children&&e.children.forEach((e=>{let i=B(e);t.appendChild(i)})),t}P.appMap=Object.create(null);var V="idb-store-ready",j="symbiote-db",z="symbiote-idb-update_",q=class{_notifyWhenReady(e=null){window.dispatchEvent(new CustomEvent(V,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}get _updEventName(){return z+this.name}_getUpdateEvent(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}_notifySubscribers(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}constructor(e,t){this.name=e,this.storeName=t,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=e=>{this.db=e.target["result"],this.objStore=this.db.createObjectStore(t,{keyPath:"_key"}),this.objStore.transaction.oncomplete=e=>{this._notifyWhenReady(e)}},this.request.onsuccess=e=>{this.db=e.target.result,this._notifyWhenReady(e)},this.request.onerror=e=>{console.error(e)},this._subscriptionsMap={},this._updateHandler=e=>{if(e.key===this.name&&this._subscriptionsMap[e.newValue]){let t=this._subscriptionsMap[e.newValue];t.forEach((async t=>{t(await this.read(e.newValue))}))}},this._localUpdateHandler=e=>{this._updateHandler(e.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(e){let t=this.db.transaction(this.storeName,"readwrite"),i=t.objectStore(this.storeName).get(e);return new Promise(((t,n)=>{i.onsuccess=i=>{var n;(null==(n=i.target.result)?void 0:n._value)?t(i.target.result._value):(t(null),console.warn(`IDB: cannot read "${e}"`))},i.onerror=e=>{n(e)}}))}write(e,t,i=!1){let n={_key:e,_value:t},s=this.db.transaction(this.storeName,"readwrite"),r=s.objectStore(this.storeName).put(n);return new Promise(((t,n)=>{r.onsuccess=n=>{i||this._notifySubscribers(e),t(n.target.result)},r.onerror=e=>{n(e)}}))}delete(e,t=!1){let i=this.db.transaction(this.storeName,"readwrite"),n=i.objectStore(this.storeName).delete(e);return new Promise(((i,s)=>{n.onsuccess=n=>{t||this._notifySubscribers(e),i(n)},n.onerror=e=>{s(e)}}))}getAll(){let e=this.db.transaction(this.storeName,"readwrite"),t=e.objectStore(this.storeName).getAll();return new Promise(((e,i)=>{t.onsuccess=t=>{let i=t.target.result;e(i.map((e=>e._value)))},t.onerror=e=>{i(e)}}))}subscribe(e,t){this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);let i=this._subscriptionsMap[e];return i.add(t),{remove:()=>{i.delete(t),i.size||delete this._subscriptionsMap[e]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,H.clear(this.name)}},H=class{static get readyEventName(){return V}static open(e=j,t="store"){let i=e+"/"+t;return this._reg[i]||(this._reg[i]=new q(e,t)),this._reg[i]}static clear(e){window.indexedDB.deleteDatabase(e);for(let t in this._reg)t.split("/")[0]===e&&delete this._reg[t]}};r(H,"_reg",Object.create(null));const K=e=>e,W="{{",X="}}",G="plural:";function J(e,t,i={}){let{openToken:n=W,closeToken:s=X,transform:r=K}=i;for(let o in t){let i=t[o]?.toString();e=e.replaceAll(n+o+s,"string"===typeof i?r(i):i)}return e}function Y(e){const t=[];let i=e.indexOf(W);while(-1!==i){const n=e.indexOf(X,i),s=e.substring(i+2,n);if(s.startsWith(G)){const r=e.substring(i+2,n).replace(G,""),o=r.substring(0,r.indexOf("(")),a=r.substring(r.indexOf("(")+1,r.indexOf(")"));t.push({variable:s,pluralKey:o,countVariable:a})}i=e.indexOf(W,n)}return t}function Z(e,t){[...e.querySelectorAll("[l10n]")].forEach((e=>{let i=e.getAttribute("l10n"),n="textContent";if(i.includes(":")){let e=i.split(":");n=e[0],i=e[1]}let s="l10n:"+i;t.__l10nKeys.push(s),t.add(s,i),t.sub(s,(i=>{e[n]=t.l10n(i)})),e.removeAttribute("l10n")}))}const Q=()=>({"*blocksRegistry":new Set}),ee=e=>({...Q(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{e.set$({"*modalActive":!1,"*currentActivity":""})}}),te=e=>({...ee(e),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null});function ie(e,t){let i,n=(...n)=>{clearTimeout(i),i=setTimeout((()=>e(...n)),t)};return n.cancel=()=>{clearTimeout(i)},n}const ne="--uploadcare-blocks-window-height",se="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function re(){return"undefined"!==typeof window[se]&&!!window[se]}function oe(){if(re())return;const e=()=>{document.documentElement.style.setProperty(ne,`${window.innerHeight}px`),window[se]=!0},t=ie(e,100);return window.addEventListener("resize",t,{passive:!0}),e(),()=>{window[se]=!1,window.removeEventListener("resize",t)}}const ae="lr-";class le extends M{static StateConsumerScope=null;allowCustomTemplate=!0;ctxInit=Q();init$=this.ctxInit;l10n(e,t={}){if(!e)return"";let i=this.getCssData("--l10n-"+e,!0)||e,n=Y(i);for(let r of n)t[r.variable]=this.pluralize(r.pluralKey,Number(t[r.countVariable]));let s=J(i,t);return s}pluralize(e,t){const i=this.l10n("locale-name")||"en-US",n=new Intl.PluralRules(i).select(t);return this.l10n(`${e}__${n}`)}constructor(){super(),this.activityType=null,this.addTemplateProcessor(Z),this.__l10nKeys=[]}applyL10nKey(e,t){let i="l10n:"+e;this.$[i]=t,this.__l10nKeys.push(e)}findBlockInCtx(e){let t=this.$["*blocksRegistry"];for(let i of t)if(e(i))return!0;return!1}setForCtxTarget(e,t,i){this.findBlockInCtx((t=>t.constructor.StateConsumerScope===e))&&(this.$[t]=i)}setActivity(e){this.findBlockInCtx((t=>t.activityType===e))?this.$["*currentActivity"]=e:console.warn(`Activity type "${e}" not found in the context`)}connectedCallback(){if(re()||(this._destroyInnerHeightTracker=oe()),this.hasAttribute("retpl")&&(this.constructor["template"]=null,this.processInnerHtml=!0),this.isConnected&&this["__ctxOwner"]){let e=a.getCtx(this.ctxName,!1);e&&(e.store={...this.ctxInit})}super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._destroyInnerHeightTracker?.()}initCallback(){let e=this.$["*blocksRegistry"];e.add(this)}destroyCallback(){let e=this.$["*blocksRegistry"];e.delete(this)}fileSizeFmt(e,t=2){let i=["B","KB","MB","GB","TB"],n=e=>this.getCssData("--l10n-unit-"+e.toLowerCase(),!0)||e;if(0===e)return`0 ${n(i[0])}`;let s=1024,r=t<0?0:t,o=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/s**o).toFixed(r))+" "+n(i[o])}proxyUrl(e){let t=this.getCssData("--cfg-secure-delivery-proxy",!0);return t?J(t,{previewUrl:e},{transform:e=>window.encodeURIComponent(e)}):e}updateCtxCssData=()=>{let e=this.$["*blocksRegistry"];for(let t of e)t.updateCssData()};static reg(e){e?super.reg(e.startsWith(ae)?e:ae+e):super.reg()}}class ce extends le{static StateConsumerScope="modal";_handleBackdropClick=()=>{this._closeDialog()};_closeDialog=()=>{this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!1)};_handleDialogClose=()=>{this._closeDialog()};_handleDialogClick=e=>{e.target===this.ref.dialog&&this._closeDialog()};init$={...this.ctxInit,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose};cssInit$={"--cfg-modal-backdrop-strokes":0};show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),"function"===typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("click",this._handleDialogClick);else{this.setAttribute("dialog-fallback","");let e=document.createElement("div");e.className="backdrop",this.appendChild(e),e.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",(e=>{this.$.isOpen!==e&&(this.$.isOpen=e),e&&this.getCssData("--cfg-modal-scroll-lock")?document.body.style.overflow="hidden":document.body.style.overflow=null})),this.sub("--cfg-modal-backdrop-strokes",(e=>{e?this.setAttribute("strokes",""):this.removeAttribute("strokes")})),this.sub("isOpen",(e=>{e?this.show():this.hide()}))}destroyCallback(){super.destroyCallback(),this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("click",this._handleDialogClick)}}ce.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n';const ue="active",he="___ACTIVITY_IS_ACTIVE___";class de extends le{historyTracked=!1;ctxInit=ee(this);_debouncedHistoryFlush=ie(this._historyFlush.bind(this),10);initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",(e=>{this.setAttribute("current-activity",e)})),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",(e=>{let t=this.ctxName+this.activityType,i=de._activityRegistry[t];this.activityType!==e&&this[he]?(this[he]=!1,this.removeAttribute(ue),i?.deactivateCallback?.()):this.activityType!==e||this[he]||(this.$["*historyBack"]=this.historyBack.bind(this),this[he]=!0,this.setAttribute(ue,""),i?.activateCallback?.(),this._debouncedHistoryFlush()),e||(this.$["*history"]=[])})))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e.push(this.activityType),this.$["*history"]=e)}static _activityRegistry=Object.create(null);get isActivityActive(){return this[he]}registerActivity(e,t={}){const{onActivate:i,onDeactivate:n}=t;de._activityRegistry||(de._activityRegistry=Object.create(null));let s=this.ctxName+e;de._activityRegistry[s]={activateCallback:i,deactivateCallback:n}}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let t=e.pop();while(t===this.activityType)t=e.pop();this.$["*currentActivity"]=t,this.$["*history"]=e,t||this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!1)}}}de.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const pe=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],fe=e=>e?e.map((e=>e?.split(","))).flat().filter((e=>"string"===typeof e&&e)).map((e=>e.trim())):[],me=(e,t)=>t.some((t=>t.endsWith("*")?(t=t.replace("*",""),e.startsWith(t)):e===t)),ge=e=>{let t=e?.type;return!!t&&me(t,pe)};function be(e){return"[object Object]"===Object.prototype.toString.call(e)}const _e=/\W|_/g;function ve(e){return e.split(_e).map(((e,t)=>e.charAt(0)[t>0?"toUpperCase":"toLowerCase"]()+e.slice(1))).join("")}function ye(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map((e=>we(e,{ignoreKeys:t}))):e}function we(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return ye(e,{ignoreKeys:t});if(!be(e))return e;const i={};for(const n of Object.keys(e)){let s=e[n];t.includes(n)?i[n]=s:(be(s)?s=we(s,{ignoreKeys:t}):Array.isArray(s)&&(s=ye(s,{ignoreKeys:t})),i[ve(n)]=s)}return i}const Ce=e=>new Promise((t=>setTimeout(t,e)));function xe({libraryName:e,libraryVersion:t,userAgent:i,publicKey:n="",integration:s=""}){const r="JavaScript";if("string"===typeof i)return i;if("function"===typeof i)return i({publicKey:n,libraryName:e,libraryVersion:t,languageName:r,integration:s});const o=[e,t,n].filter(Boolean).join("/"),a=[r,s].filter(Boolean).join("; ");return`${o} (${a})`}const Te={factor:2,time:100};function ke(e,t=Te){let i=0;function n(e){const s=Math.round(t.time*t.factor**i),r=t=>Ce(t??s).then((()=>(i+=1,n(e))));return e({attempt:i,retry:r})}return n(e)}class Ee extends Error{constructor(e){super(),this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,Ee.prototype),this.originalProgressEvent=e}}const $e=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",(()=>t()),{once:!0}))};class Ae extends Error{constructor(e="Request canceled"){super(e),this.isCancel=!0,Object.setPrototypeOf(this,Ae.prototype)}}const Se=500,Ie=({check:e,interval:t=Se,timeout:i,signal:n})=>new Promise(((s,r)=>{let o,a;$e(n,(()=>{o&&clearTimeout(o),r(new Ae("Poll cancelled"))})),i&&(a=setTimeout((()=>{o&&clearTimeout(o),r(new Ae("Timed out"))}),i));const l=()=>{try{Promise.resolve(e(n)).then((e=>{e?(a&&clearTimeout(a),s(e)):o=setTimeout(l,t)})).catch((e=>{a&&clearTimeout(a),r(e)}))}catch(i){a&&clearTimeout(a),r(i)}};o=setTimeout(l,0)})),Re={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Le="application/octet-stream",Ue="original",Oe=({method:e,url:t,data:i,headers:n={},signal:s,onProgress:r})=>new Promise(((o,a)=>{const l=new XMLHttpRequest,c=e?.toUpperCase()||"GET";let u=!1;l.open(c,t,!0),n&&Object.entries(n).forEach((e=>{const[t,i]=e;"undefined"!==typeof i&&!Array.isArray(i)&&l.setRequestHeader(t,i)})),l.responseType="text",$e(s,(()=>{u=!0,l.abort(),a(new Ae)})),l.onload=()=>{if(200!=l.status)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const e={method:c,url:t,data:i,headers:n||void 0,signal:s,onProgress:r},a=l.getAllResponseHeaders().trim().split(/[\r\n]+/),u={};a.forEach((function(e){const t=e.split(": "),i=t.shift(),n=t.join(": ");i&&"undefined"!==typeof i&&(u[i]=n)}));const h=l.response,d=l.status;o({request:e,data:h,headers:u,status:d})}},l.onerror=e=>{u||a(new Ee(e))},r&&"function"===typeof r&&(l.upload.onprogress=e=>{e.lengthComputable?r({isComputable:!0,value:e.loaded/e.total}):r({isComputable:!1})}),i?l.send(i):l.send()}));function Ne(e,...t){return e}const Me=({name:e})=>e?[e]:[],Pe=Ne;var De=()=>new FormData;const Fe=e=>"undefined"!==typeof Blob&&e instanceof Blob,Be=e=>"undefined"!==typeof File&&e instanceof File,Ve=e=>"undefined"!==typeof Buffer&&e instanceof Buffer,je=e=>!!e&&"object"===typeof e&&!Array.isArray(e)&&"uri"in e&&"string"===typeof e.uri,ze=e=>Fe(e)||Be(e)||Ve(e)||je(e),qe=e=>"string"===typeof e||"number"===typeof e||"undefined"===typeof e,He=e=>!!e&&"object"===typeof e&&!Array.isArray(e),Ke=e=>!!e&&"object"===typeof e&&"data"in e&&ze(e.data);function We(e,t,i){if(Ke(i)){const{name:n,contentType:s}=i,r=Pe(i.data,n,s),o=Me({name:n,contentType:s});e.push([t,r,...o])}else if(He(i))for(const[n,s]of Object.entries(i))"undefined"!==typeof s&&e.push([`${t}[${n}]`,String(s)]);else qe(i)&&i&&e.push([t,i.toString()])}function Xe(e){const t=[];for(const[i,n]of Object.entries(e))We(t,i,n);return t}function Ge(e){const t=De(),i=Xe(e);for(const n of i){const[e,i,...s]=n;t.append(e,i,...s)}return t}class Je extends Error{constructor(e,t,i,n,s){super(),this.name="UploadClientError",this.message=e,this.code=t,this.request=i,this.response=n,this.headers=s,Object.setPrototypeOf(this,Je.prototype)}}const Ye=e=>{const t=new URLSearchParams;for(const[i,n]of Object.entries(e))n&&"object"===typeof n&&!Array.isArray(n)?Object.entries(n).filter((e=>e[1]??!1)).forEach((e=>t.set(`${i}[${e[0]}]`,String(e[1])))):Array.isArray(n)?n.forEach((e=>{t.append(`${i}[]`,e)})):"string"===typeof n&&n?t.set(i,n):"number"===typeof n&&t.set(i,n.toString());return t.toString()},Ze=(e,t,i)=>{const n=new URL(e);return n.pathname=(n.pathname+t).replace("//","/"),i&&(n.search=Ye(i)),n.toString()};var Qe="6.4.1";const et="UploadcareUploadClient",tt=Qe;function it(e){return xe({libraryName:et,libraryVersion:tt,...e})}const nt="RequestThrottledError",st=15e3,rt=1e3;function ot(e){const{headers:t}=e||{};if(!t||"string"!==typeof t["retry-after"])return st;const i=parseInt(t["retry-after"],10);return Number.isFinite(i)?1e3*i:st}function at(e,t){const{retryThrottledRequestMaxTimes:i,retryNetworkErrorMaxTimes:n}=t;return ke((({attempt:t,retry:s})=>e().catch((e=>{if("response"in e&&e?.code===nt&&t<i)return s(ot(e));if(e instanceof Ee&&t<n)return s((t+1)*rt);throw e}))))}const lt=e=>{let t="";return(Fe(e)||Be(e)||je(e))&&(t=e.type),t||Le},ct=e=>{let t="";return Be(e)&&e.name?t=e.name:Fe(e)||Ve(e)?t="":je(e)&&e.name&&(t=e.name),t||Ue};function ut(e){return"undefined"===typeof e||"auto"===e?"auto":e?"1":"0"}function ht(e,{publicKey:t,fileName:i,contentType:n,baseURL:s=Re.baseURL,secureSignature:r,secureExpire:o,store:a,signal:l,onProgress:c,source:u="local",integration:h,userAgent:d,retryThrottledRequestMaxTimes:p=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Re.retryNetworkErrorMaxTimes,metadata:m}){return at((()=>Oe({method:"POST",url:Ze(s,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":it({publicKey:t,integration:h,userAgent:d})},data:Ge({file:{data:e,name:i||ct(e),contentType:n||lt(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:ut(a),signature:r,expire:o,source:u,metadata:m}),signal:l,onProgress:c}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n}))),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:p})}var dt,pt;function ft(e,{publicKey:t,baseURL:i=Re.baseURL,store:n,fileName:s,checkForUrlDuplicates:r,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Re.retryNetworkErrorMaxTimes,metadata:m}){return at((()=>Oe({method:"POST",headers:{"X-UC-User-Agent":it({publicKey:t,integration:h,userAgent:d})},url:Ze(i,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:ut(n),filename:s,check_URL_duplicates:r?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:m}),signal:u}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n}))),{retryNetworkErrorMaxTimes:f,retryThrottledRequestMaxTimes:p})}(function(e){e["Token"]="token",e["FileInfo"]="file_info"})(dt||(dt={})),function(e){e["Unknown"]="unknown",e["Waiting"]="waiting",e["Progress"]="progress",e["Error"]="error",e["Success"]="success"}(pt||(pt={}));const mt=e=>"status"in e&&e.status===pt.Error;function gt(e,{publicKey:t,baseURL:i=Re.baseURL,signal:n,integration:s,userAgent:r,retryThrottledRequestMaxTimes:o=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=Re.retryNetworkErrorMaxTimes}={}){return at((()=>Oe({method:"GET",headers:t?{"X-UC-User-Agent":it({publicKey:t,integration:s,userAgent:r})}:void 0,url:Ze(i,"/from_url/status/",{jsonerrors:1,token:e}),signal:n}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n&&!mt(n))throw new Je(n.error.content,void 0,i,n,t);return n}))),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function bt(e,{publicKey:t,baseURL:i=Re.baseURL,jsonpCallback:n,secureSignature:s,secureExpire:r,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:u=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:h=Re.retryNetworkErrorMaxTimes}){return at((()=>Oe({method:"POST",headers:{"X-UC-User-Agent":it({publicKey:t,integration:l,userAgent:c})},url:Ze(i,"/group/",{jsonerrors:1,pub_key:t,files:e,callback:n,signature:s,expire:r,source:a}),signal:o}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n}))),{retryNetworkErrorMaxTimes:h,retryThrottledRequestMaxTimes:u})}function _t(e,{publicKey:t,baseURL:i=Re.baseURL,signal:n,source:s,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Re.retryNetworkErrorMaxTimes}){return at((()=>Oe({method:"GET",headers:{"X-UC-User-Agent":it({publicKey:t,integration:r,userAgent:o})},url:Ze(i,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:s}),signal:n}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n}))),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function vt(e,{publicKey:t,contentType:i,fileName:n,multipartChunkSize:s=Re.multipartChunkSize,baseURL:r="",secureSignature:o,secureExpire:a,store:l,signal:c,source:u="local",integration:h,userAgent:d,retryThrottledRequestMaxTimes:p=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:f=Re.retryNetworkErrorMaxTimes,metadata:m}){return at((()=>Oe({method:"POST",url:Ze(r,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":it({publicKey:t,integration:h,userAgent:d})},data:Ge({filename:n||Ue,size:e,content_type:i||Le,part_size:s,UPLOADCARE_STORE:ut(l),UPLOADCARE_PUB_KEY:t,signature:o,expire:a,source:u,metadata:m}),signal:c}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n.parts=Object.keys(n.parts).map((e=>n.parts[e])),n}))),{retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f})}function yt(e,t,{contentType:i,signal:n,onProgress:s,retryThrottledRequestMaxTimes:r=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=Re.retryNetworkErrorMaxTimes}){return at((()=>Oe({method:"PUT",url:t,data:e,onProgress:s,signal:n,headers:{"Content-Type":i||Le}}).then((e=>(s&&s({isComputable:!0,value:1}),e))).then((({status:e})=>({code:e})))),{retryThrottledRequestMaxTimes:r,retryNetworkErrorMaxTimes:o})}function wt(e,{publicKey:t,baseURL:i=Re.baseURL,source:n="local",signal:s,integration:r,userAgent:o,retryThrottledRequestMaxTimes:a=Re.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=Re.retryNetworkErrorMaxTimes}){return at((()=>Oe({method:"POST",url:Ze(i,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":it({publicKey:t,integration:r,userAgent:o})},data:Ge({uuid:e,UPLOADCARE_PUB_KEY:t,source:n}),signal:s}).then((({data:e,headers:t,request:i})=>{const n=we(JSON.parse(e));if("error"in n)throw new Je(n.error.content,n.error.errorCode,i,n,t);return n}))),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Ct({file:e,publicKey:t,baseURL:i,source:n,integration:s,userAgent:r,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return Ie({check:l=>_t(e,{publicKey:t,baseURL:i,signal:l,source:n,integration:s,userAgent:r,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then((e=>e.isReady?e:(c&&c({isComputable:!0,value:1}),!1))),signal:l})}class xt{constructor(e,{baseCDN:t=Re.baseCDN,fileName:i}={}){this.name=null,this.size=null,this.isStored=null,this.isImage=null,this.mimeType=null,this.cdnUrl=null,this.s3Url=null,this.originalFilename=null,this.imageInfo=null,this.videoInfo=null,this.contentInfo=null,this.metadata=null,this.s3Bucket=null;const{uuid:n,s3Bucket:s}=e,r=Ze(t,`${n}/`),o=s?Ze(`https://${s}.s3.amazonaws.com/`,`${n}/${e.filename}`):null;this.uuid=n,this.name=i||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=r,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=o}}const Tt=(e,{publicKey:t,fileName:i,baseURL:n,secureSignature:s,secureExpire:r,store:o,contentType:a,signal:l,onProgress:c,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,baseCDN:m,metadata:g})=>ht(e,{publicKey:t,fileName:i,contentType:a,baseURL:n,secureSignature:s,secureExpire:r,store:o,signal:l,onProgress:c,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,metadata:g}).then((({file:e})=>Ct({file:e,publicKey:t,baseURL:n,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,onProgress:c,signal:l}))).then((e=>new xt(e,{baseCDN:m}))),kt=(e,{publicKey:t,fileName:i,baseURL:n,signal:s,onProgress:r,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u,baseCDN:h})=>_t(e,{publicKey:t,baseURL:n,signal:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u}).then((e=>new xt(e,{baseCDN:h,fileName:i}))).then((e=>(r&&r({isComputable:!0,value:1}),e))),Et=(e,{signal:t}={})=>{let i=null,n=null;const s=e.map((()=>new AbortController)),r=e=>()=>{n=e,s.forEach(((t,i)=>i!==e&&t.abort()))};return $e(t,(()=>{s.forEach((e=>e.abort()))})),Promise.all(e.map(((e,t)=>{const n=r(t);return Promise.resolve().then((()=>e({stopRace:n,signal:s[t].signal}))).then((e=>(n(),e))).catch((e=>(i=e,null)))}))).then((e=>{if(null===n)throw i;return e[n]}))};var $t=window.WebSocket;class At{constructor(){this.events=Object.create({})}emit(e,t){this.events[e]?.forEach((e=>e(t)))}on(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}off(e,t){this.events[e]=t?this.events[e].filter((e=>e!==t)):[]}}const St=(e,t)=>"success"===e?{status:pt.Success,...t}:"progress"===e?{status:pt.Progress,...t}:{status:pt.Error,...t};class It{constructor(e,t=3e4){this.ws=void 0,this.queue=[],this.isConnected=!1,this.subscribers=0,this.emmitter=new At,this.disconnectTimeoutId=null,this.key=e,this.disconnectTime=t}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const e=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new $t(e),this.ws.addEventListener("error",(e=>{this.emmitter.emit("error",new Error(e.message))})),this.emmitter.on("connected",(()=>{this.isConnected=!0,this.queue.forEach((e=>this.send(e.event,e.data))),this.queue=[]})),this.ws.addEventListener("message",(e=>{const t=JSON.parse(e.data.toString());switch(t.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(t.channel,St(t.event,JSON.parse(t.data)))}}))}}disconnect(){const e=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout((()=>{e()}),this.disconnectTime):e()}send(e,t){const i=JSON.stringify({event:e,data:t});this.ws?.send(i)}subscribe(e,t){this.subscribers+=1,this.connect();const i=`task-status-${e}`,n={event:"pusher:subscribe",data:{channel:i}};this.emmitter.on(i,t),this.isConnected?this.send(n.event,n.data):this.queue.push(n)}unsubscribe(e){this.subscribers-=1;const t=`task-status-${e}`,i={event:"pusher:unsubscribe",data:{channel:t}};this.emmitter.off(t),this.isConnected?this.send(i.event,i.data):this.queue=this.queue.filter((e=>e.data.channel!==t)),0===this.subscribers&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let Rt=null;const Lt=e=>{if(!Rt){const t="undefined"===typeof window?0:3e4;Rt=new It(e,t)}return Rt},Ut=e=>{Lt(e).connect()};function Ot({token:e,publicKey:t,baseURL:i,integration:n,userAgent:s,retryThrottledRequestMaxTimes:r,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return Ie({check:l=>gt(e,{publicKey:t,baseURL:i,integration:n,userAgent:s,retryThrottledRequestMaxTimes:r,retryNetworkErrorMaxTimes:o,signal:l}).then((t=>{switch(t.status){case pt.Error:return new Je(t.error,t.errorCode);case pt.Waiting:return!1;case pt.Unknown:return new Je(`Token "${e}" was not found.`);case pt.Progress:return a&&("unknown"===t.total?a({isComputable:!1}):a({isComputable:!0,value:t.done/t.total})),!1;case pt.Success:return a&&a({isComputable:!0,value:t.done/t.total}),t;default:throw new Error("Unknown status")}})),signal:l})}const Nt=({token:e,pusherKey:t,signal:i,onProgress:n})=>new Promise(((s,r)=>{const o=Lt(t),a=o.onError(r),l=()=>{a(),o.unsubscribe(e)};$e(i,(()=>{l(),r(new Ae("pusher cancelled"))})),o.subscribe(e,(e=>{switch(e.status){case pt.Progress:n&&("unknown"===e.total?n({isComputable:!1}):n({isComputable:!0,value:e.done/e.total}));break;case pt.Success:l(),n&&n({isComputable:!0,value:e.done/e.total}),s(e);break;case pt.Error:l(),r(new Je(e.msg,e.error_code))}}))})),Mt=(e,{publicKey:t,fileName:i,baseURL:n,baseCDN:s,checkForUrlDuplicates:r,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:u,onProgress:h,source:d,integration:p,userAgent:f,retryThrottledRequestMaxTimes:m,pusherKey:g=Re.pusherKey,metadata:b})=>Promise.resolve(Ut(g)).then((()=>ft(e,{publicKey:t,fileName:i,baseURL:n,checkForUrlDuplicates:r,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:u,source:d,integration:p,userAgent:f,retryThrottledRequestMaxTimes:m,metadata:b}))).catch((e=>{const t=Lt(g);return t?.disconnect(),Promise.reject(e)})).then((e=>e.type===dt.FileInfo?e:Et([({signal:i})=>Ot({token:e.token,publicKey:t,baseURL:n,integration:p,userAgent:f,retryThrottledRequestMaxTimes:m,onProgress:h,signal:i}),({signal:t})=>Nt({token:e.token,pusherKey:g,signal:t,onProgress:h})],{signal:u}))).then((e=>{if(e instanceof Je)throw e;return e})).then((e=>Ct({file:e.uuid,publicKey:t,baseURL:n,integration:p,userAgent:f,retryThrottledRequestMaxTimes:m,onProgress:h,signal:u}))).then((e=>new xt(e,{baseCDN:s}))),Pt=new WeakMap,Dt=async e=>{if(Pt.has(e))return Pt.get(e);const t=await fetch(e.uri).then((e=>e.blob()));return Pt.set(e,t),t},Ft=async e=>{if(Ve(e))return e.length;if(Be(e)||Fe(e))return e.size;if(je(e)){const t=await Dt(e);return t.size}throw new Error("Unknown file type. Cannot determine file size.")},Bt=(e,t=Re.multipartMinFileSize)=>e>=t,Vt=e=>{const t="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",i=new RegExp(t);return!ze(e)&&i.test(e)},jt=e=>{const t="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",i=new RegExp(t);return!ze(e)&&i.test(e)},zt=(e,t)=>new Promise(((i,n)=>{const s=[];let r=!1,o=t.length;const a=[...t],l=()=>{const e=t.length-a.length,c=a.shift();c&&c().then((t=>{r||(s[e]=t,o-=1,o?l():i(s))})).catch((e=>{r=!0,n(e)}))};for(let t=0;t<e;t++)l()})),qt=(e,t,i,n)=>{const s=n*t,r=Math.min(s+n,i);return e.slice(s,r)},Ht=async(e,t,i)=>n=>qt(e,n,t,i),Kt=(e,t,{publicKey:i,contentType:n,onProgress:s,signal:r,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>yt(e,t,{publicKey:i,contentType:n,onProgress:s,signal:r,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}),Wt=async(e,{publicKey:t,fileName:i,fileSize:n,baseURL:s,secureSignature:r,secureExpire:o,store:a,signal:l,onProgress:c,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,contentType:m,multipartChunkSize:g=Re.multipartChunkSize,maxConcurrentRequests:b=Re.maxConcurrentRequests,baseCDN:_,metadata:v})=>{const y=n??await Ft(e);let w;const C=(e,t)=>{if(!c)return;w||(w=Array(e).fill(0));const i=e=>e.reduce(((e,t)=>e+t),0);return n=>{n.isComputable&&(w[t]=n.value,c({isComputable:!0,value:i(w)/e}))}};return m||(m=lt(e)),vt(y,{publicKey:t,contentType:m,fileName:i||ct(e),baseURL:s,secureSignature:r,secureExpire:o,store:a,signal:l,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,metadata:v}).then((async({uuid:i,parts:n})=>{const s=await Ht(e,y,g);return Promise.all([i,zt(b,n.map(((e,i)=>()=>Kt(s(i),e,{publicKey:t,contentType:m,onProgress:C(n.length,i),signal:l,integration:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f}))))])})).then((([e])=>wt(e,{publicKey:t,baseURL:s,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f}))).then((e=>e.isReady?e:Ct({file:e.uuid,publicKey:t,baseURL:s,source:u,integration:h,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:f,onProgress:c,signal:l}))).then((e=>new xt(e,{baseCDN:_})))};async function Xt(e,{publicKey:t,fileName:i,baseURL:n=Re.baseURL,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,contentType:f,multipartMinFileSize:m,multipartChunkSize:g,maxConcurrentRequests:b,baseCDN:_=Re.baseCDN,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:y,pusherKey:w,metadata:C}){if(ze(e)){const v=await Ft(e);return Bt(v,m)?Wt(e,{publicKey:t,contentType:f,multipartChunkSize:g,fileSize:v,fileName:i,baseURL:n,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:h,maxConcurrentRequests:b,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,baseCDN:_,metadata:C}):Tt(e,{publicKey:t,fileName:i,contentType:f,baseURL:n,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,baseCDN:_,metadata:C})}if(jt(e))return Mt(e,{publicKey:t,fileName:i,baseURL:n,baseCDN:_,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:y,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,pusherKey:w,metadata:C});if(Vt(e))return kt(e,{publicKey:t,fileName:i,baseURL:n,signal:a,onProgress:l,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,baseCDN:_});throw new TypeError(`File uploading from "${e}" is not supported`)}class Gt{constructor(e,t){this.storedAt=null,this.uuid=e.id,this.filesCount=e.filesCount,this.totalSize=Object.values(e.files).reduce(((e,t)=>e+t.size),0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(e.files).filter((e=>e.isImage)).length,this.cdnUrl=e.cdnUrl,this.files=t,this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}const Jt=e=>{for(const t of e)if(!ze(t))return!1;return!0},Yt=e=>{for(const t of e)if(!Vt(t))return!1;return!0},Zt=e=>{for(const t of e)if(!jt(t))return!1;return!0};function Qt(e,{publicKey:t,fileName:i,baseURL:n=Re.baseURL,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,contentType:f,multipartChunkSize:m=Re.multipartChunkSize,baseCDN:g=Re.baseCDN,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:_,jsonpCallback:v}){if(!Jt(e)&&!Zt(e)&&!Yt(e))throw new TypeError(`Group uploading from "${e}" is not supported`);let y,w=!0;const C=e.length,x=(e,t)=>{if(!l)return;y||(y=Array(e).fill(0));const i=t=>t.reduce(((e,t)=>e+t))/e;return e=>{if(!e.isComputable||!w)return w=!1,void l({isComputable:!1});y[t]=e.value,l({isComputable:!0,value:i(y)})}};return Promise.all(e.map(((e,l)=>Xt(e,{publicKey:t,fileName:i,baseURL:n,secureSignature:s,secureExpire:r,store:o,signal:a,onProgress:x(C,l),source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p,contentType:f,multipartChunkSize:m,baseCDN:g,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:_})))).then((e=>{const i=e.map((e=>e.uuid));return bt(i,{publicKey:t,baseURL:n,jsonpCallback:v,secureSignature:s,secureExpire:r,signal:a,source:c,integration:u,userAgent:h,retryThrottledRequestMaxTimes:d,retryNetworkErrorMaxTimes:p}).then((t=>new Gt(t,e))).then((e=>(l&&l({isComputable:!0,value:1}),e)))}))}const ei=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null},fileSize:{type:Number,value:null},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:xt,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0}});var ti=i(339);function ii(e){return xe({...e,libraryName:ti.d,libraryVersion:ti.l})}const ni="[Typed State] Wrong property name: ",si="[Typed State] Wrong property type: ";class ri{constructor(e,t){this.__typedSchema=e,this.__ctxId=t||h.generate(),this.__schema=Object.keys(e).reduce(((t,i)=>(t[i]=e[i].value,t)),{}),this.__data=a.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,t){if(!this.__typedSchema.hasOwnProperty(e))return void console.warn(ni+e);let i=this.__typedSchema[e];t?.constructor===i.type||t instanceof i.type||i.nullable&&null===t?this.__data.pub(e,t):console.warn(si+e)}setMultipleValues(e){for(let t in e)this.setValue(t,e[t])}getValue(e){if(this.__typedSchema.hasOwnProperty(e))return this.__data.read(e);console.warn(ni+e)}subscribe(e,t){return this.__data.sub(e,t)}remove(){a.deleteCtx(this.__ctxId)}}class oi{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||h.generate(),this.__data=a.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__handler=e.handler||null,this.__subsMap=Object.create(null),this.__observers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let t=Object.create(null);this.__notifyObservers=(e,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),t[e]||(t[e]=new Set),t[e].add(i),this.__observeTimeout=window.setTimeout((()=>{this.__observers.forEach((e=>{e({...t})})),t=Object.create(null)}))}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout((()=>{let e=this.__added,t=this.__removed;this.__added.clear(),this.__removed.clear(),this.__handler?.([...this.__items],e,t)}))}add(e){let t=new ri(this.__typedSchema);for(let i in e)t.setValue(i,e[i]);return this.__data.add(t.uid,t),this.__added.add(t),this.__watchList.forEach((e=>{this.__subsMap[t.uid]||(this.__subsMap[t.uid]=[]),this.__subsMap[t.uid].push(t.subscribe(e,(()=>{this.__notifyObservers(e,t.uid)})))})),this.__items.add(t.uid),this.notify(),t}read(e){return this.__data.read(e)}readProp(e,t){let i=this.read(e);return i.getValue(t)}publishProp(e,t,i){let n=this.read(e);n.setValue(t,i)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach((e=>{this.remove(e)}))}observe(e){this.__observers.add(e)}unobserve(e){this.__observers.delete(e)}findItems(e){let t=[];return this.__items.forEach((i=>{let n=this.read(i);e(n)&&t.push(i)})),t}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){a.deleteCtx(this.__data),this.__observers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach((e=>{e.remove()})),delete this.__subsMap[e]}}const ai={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CDN_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT",DONE_FLOW:"DONE_FLOW",INIT_FLOW:"INIT_FLOW"};class li{constructor(e){this.ctx=e.ctx,this.type=e.type,this.data=e.data}}class ci{static eName(e){return"LR_"+e}static _timeoutStore=Object.create(null);static emit(e,t=window,i=!0){let n=()=>{t.dispatchEvent(new CustomEvent(this.eName(e.type),{detail:e}))};if(!i)return void n();let s=e.type+e.ctx;this._timeoutStore[s]&&window.clearTimeout(this._timeoutStore[s]),this._timeoutStore[s]=window.setTimeout((()=>{n(),delete this._timeoutStore[s]}),20)}}class ui extends de{ctxInit=te(this);__initialUploadMetadata=null;setUploadMetadata(e){this.connectedOnce?this.$["*uploadMetadata"]=e:this.__initialUploadMetadata=e}initCallback(){super.initCallback(),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}destroyCallback(){super.destroyCallback();let e=this.$["*blocksRegistry"];e.has(this)&&(this.uploadCollection.unobserve(this._handleCollectionUpdate),e.delete(this))}addFiles(e){e.forEach((e=>{this.uploadCollection.add({file:e,isImage:ge(e),mimeType:e.type,fileName:e.name,fileSize:e.size})}))}openSystemDialog(e={}){let t=fe([this.getCssData("--cfg-accept"),...this.getCssData("--cfg-img-only")?pe:[]]).join(",");this.getCssData("--cfg-accept")&&this.getCssData("--cfg-img-only")&&console.warn("There could be a mistake.\nBoth `--cfg-accept` and `--cfg-img-only` parameters are set.\nThe value of `--cfg-accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=!!this.getCssData("--cfg-multiple"),e.captureCamera?(this.fileInput.capture="",this.fileInput.accept=pe.join(",")):this.fileInput.accept=t,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{this.addFiles([...this.fileInput["files"]]),this.$["*currentActivity"]=de.activities.UPLOAD_LIST,this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!0),this.fileInput["value"]="",this.fileInput=null}}get sourceList(){let e=null;return this.getCssData("--cfg-source-list")&&(e=this.getCssData("--cfg-source-list").split(",").map((e=>e.trim()))),e}initFlow(e=!1){if(this.$["*uploadList"]?.length&&!e)this.set$({"*currentActivity":de.activities.UPLOAD_LIST}),this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!0);else if(1===this.sourceList?.length){let e=this.sourceList[0];"local"===e?(this.$["*currentActivity"]=de.activities.UPLOAD_LIST,this?.["openSystemDialog"]()):(Object.values(ui.extSrcList).includes(e)?this.set$({"*currentActivityParams":{externalSourceType:e},"*currentActivity":de.activities.EXTERNAL}):this.$["*currentActivity"]=e,this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!0))}else this.set$({"*currentActivity":de.activities.START_FROM}),this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!0);ci.emit(new li({type:ai.INIT_FLOW,ctx:this.ctxName}),void 0,!1)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!1),ci.emit(new li({type:ai.DONE_FLOW,ctx:this.ctxName}),void 0,!1)}get uploadCollection(){if(!this.has("*uploadCollection")){let e=new oi({typedSchema:ei,watchList:["uploadProgress","uuid","uploadError","validationErrorMsg","cdnUrlModifiers"],handler:(e,t,i)=>{for(let n of i)n?.getValue("abortController")?.abort(),n?.setValue("abortController",null),URL.revokeObjectURL(n?.getValue("thumbUrl"));this.$["*uploadList"]=e.map((e=>({uid:e})))}});e.observe(this._handleCollectionUpdate),this.add("*uploadCollection",e)}return this.$["*uploadCollection"]}_handleCollectionUpdate=e=>{let t=this.uploadCollection;if(e.uploadProgress){let e=0,i=t.findItems((e=>!e.getValue("uploadError")));i.forEach((i=>{e+=t.readProp(i,"uploadProgress")}));let n=Math.round(e/i.length);this.$["*commonProgress"]=n,ci.emit(new li({type:ai.UPLOAD_PROGRESS,ctx:this.ctxName,data:n}),void 0,100===n)}if(e.uuid){let e=t.findItems((e=>!!e.getValue("uuid"))),i=t.findItems((e=>!!e.getValue("uploadError")||!!e.getValue("validationErrorMsg")));if(t.size-i.length===e.length){let e=this.getOutputData((e=>!!e.getValue("uuid")));ci.emit(new li({type:ai.UPLOAD_FINISH,ctx:this.ctxName,data:e}))}}if(e.uploadError){let e=t.findItems((e=>!!e.getValue("uploadError")));e.forEach((e=>{ci.emit(new li({type:ai.UPLOAD_ERROR,ctx:this.ctxName,data:t.readProp(e,"uploadError")}),void 0,!1)}))}if(e.validationErrorMsg){let e=t.findItems((e=>!!e.getValue("validationErrorMsg")));e.forEach((e=>{ci.emit(new li({type:ai.VALIDATION_ERROR,ctx:this.ctxName,data:t.readProp(e,"validationErrorMsg")}),void 0,!1)}))}if(e.cdnUrlModifiers){let e=t.findItems((e=>!!e.getValue("cdnUrlModifiers")));e.forEach((e=>{ci.emit(new li({type:ai.CDN_MODIFICATION,ctx:this.ctxName,data:a.getCtx(e).store}),void 0,!1)}))}};getUploadClientOptions(){let e=this.getCssData("--cfg-store",!0),t={store:null===e?void 0:!!e,publicKey:this.getCssData("--cfg-pubkey"),baseCDN:this.getCssData("--cfg-cdn-cname"),baseURL:this.getCssData("--cfg-base-url"),userAgent:ii,integration:this.getCssData("--cfg-user-agent-integration"),secureSignature:this.getCssData("--cfg-secure-signature"),secureExpire:this.getCssData("--cfg-secure-expire"),retryThrottledRequestMaxTimes:this.getCssData("--cfg-retry-throttled-request-max-times"),multipartMinFileSize:this.getCssData("--cfg-multipart-min-file-size"),multipartChunkSize:this.getCssData("--cfg-multipart-chunk-size"),maxConcurrentRequests:this.getCssData("--cfg-max-concurrent-requests"),multipartMaxAttempts:this.getCssData("--cfg-multipart-max-attempts"),checkForUrlDuplicates:!!this.getCssData("--cfg-check-for-url-duplicates"),saveUrlForRecurrentUploads:!!this.getCssData("--cfg-save-url-for-recurrent-uploads"),metadata:this.$["*uploadMetadata"]};return console.log("Upload client options:",t),t}getOutputData(e){let t=[],i=this.uploadCollection.findItems(e);return i.forEach((e=>{let i=a.getCtx(e).store,n=i.fileInfo||{name:i.fileName,fileSize:i.fileSize,isImage:i.isImage,mimeType:i.mimeType},s={...n,cdnUrlModifiers:i.cdnUrlModifiers,cdnUrl:i.cdnUrl||n.cdnUrl};t.push(s)})),t}}ui.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),ui.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...ui.extSrcList}),Object.values(ai).forEach((e=>{let t=ci.eName(e);window.addEventListener(t,(e=>{let t=[ai.UPLOAD_FINISH,ai.REMOVE,ai.CDN_MODIFICATION];if(t.includes(e.detail.type)){let t=a.getCtx(e.detail.ctx),i=t.read("uploadCollection"),n=[];i.items().forEach((e=>{let t=a.getCtx(e).store,i=t.fileInfo;if(i){let e={...i,cdnUrlModifiers:t.cdnUrlModifiers,cdnUrl:t.cdnUrl||i.cdnUrl};n.push(e)}})),ci.emit(new li({type:ai.DATA_OUTPUT,ctx:e.detail.ctx,data:n})),t.pub("outputData",n)}}))}));class hi extends le{init$={...this.ctxInit,name:"",path:"",size:"24",viewBox:""};initCallback(){super.initCallback(),this.sub("name",(e=>{if(!e)return;let t=this.getCssData(`--icon-${e}`);t&&(this.$.path=t)})),this.sub("path",(e=>{if(!e)return;let t=e.trimStart().startsWith("<");t?(this.setAttribute("raw",""),this.ref.svg.innerHTML=e):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${e}"></path>`)})),this.sub("size",(e=>{this.$.viewBox=`0 0 ${e} ${e}`}))}}hi.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>\n',hi.bindAttributes({name:"name",size:"size"});const di=e=>{if("string"!==typeof e||!e)return"";let t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},pi=(...e)=>e.filter((e=>"string"===typeof e&&e)).map((e=>di(e))).join("/-/"),fi=(...e)=>{let t=pi(...e);return t?`-/${t}/`:""};function mi(e){let t=new URL(e),i=t.pathname+t.search+t.hash,n=i.lastIndexOf("http"),s=i.lastIndexOf("/"),r="";return n>=0?r=i.slice(n):s>=0&&(r=i.slice(s+1)),r}function gi(e){let t=new URL(e),{pathname:i}=t;const n=i.indexOf("/"),s=i.indexOf("/",n+1);return i.substring(n+1,s)}function bi(e){let t=_i(e),i=new URL(t),n=i.pathname.indexOf("/-/");if(-1===n)return[];let s=i.pathname.substring(n);return s.split("/-/").filter(Boolean).map((e=>di(e)))}function _i(e){let t=new URL(e),i=mi(e),n=vi(i)?yi(i).pathname:i;return t.pathname=t.pathname.replace(n,""),t.search="",t.hash="",t.toString()}function vi(e){return e.startsWith("http")}function yi(e){let t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}const wi=(e,t,i)=>{let n=new URL(_i(e));if(i=i||mi(e),n.pathname.startsWith("//")&&(n.pathname=n.pathname.replace("//","/")),vi(i)){let e=yi(i);n.pathname=n.pathname+(t||"")+(e.pathname||""),n.search=e.search,n.hash=e.hash}else n.pathname=n.pathname+(t||"")+(i||"");return n.toString()},Ci=(e,t)=>{let i=new URL(e);return i.pathname=t+"/",i.toString()},xi="https://ucarecdn.com",Ti=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:xi},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),ki="--lr-img-",Ei="unresolved",$i=2,Ai=3,Si=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Ii=Object.create(null);for(let cr in Ti)Ii[ki+cr]=Ti[cr]?.default||"";class Ri extends M{cssInit$=Ii;$$(e){return this.$[ki+e]}set$$(e){for(let t in e)this.$[ki+t]=e[t]}sub$$(e,t){this.sub(ki+e,(e=>{null!==e&&""!==e&&t(e)}))}_fmtAbs(e){let t=!e.includes("//");return t&&!Si&&(e=new URL(e,document.baseURI).href),e}_getCdnModifiers(e=""){return fi(e&&`resize/${e}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||Ti.format["default"]}`,`quality/${this.$$("quality")||Ti.quality["default"]}`)}_getUrlBase(e=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Si&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let t=this._getCdnModifiers(e);return this.$$("src").startsWith(this.$$("cdn-cname"))?wi(this.$$("src"),t):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(wi(Ci(this.$$("cdn-cname"),this.$$("uuid")),t)):this.$$("proxy-cname")?this._proxyUrl(wi(this.$$("proxy-cname"),t,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(wi(`https://${this.$$("pubkey")}.ucr.io/`,t,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(e){let t=this.$$("secure-delivery-proxy");return t?J(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:e=>window.encodeURIComponent(e)}):e}_getElSize(e,t=1,i=!0){let n=e.getBoundingClientRect(),s=t*Math.round(n.width),r=i?"":t*Math.round(n.height);return s||r?`${s||""}x${r||""}`:null}_setupEventProxy(e){let t=e=>{e.stopPropagation();let t=new Event(e.type,e);this.dispatchEvent(t)},i=["load","error"];for(let n of i)e.addEventListener(n,t)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(Ei,""),this.img.onload=()=>{this.img.removeAttribute(Ei)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach((e=>{Ti[e.name]||this.img.setAttribute(e.name,e.value)}))}get breakpoints(){if(this.$$("breakpoints")){let e=new Set;return this.$$("breakpoints").split(",").forEach((t=>{e.add(parseFloat(t.trim()))})),e}return null}renderBg(e){let t=new Set;this.breakpoints?this.breakpoints.forEach((e=>{t.add(`url("${this._getUrlBase(e+"x")}") ${e}w`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(e*$i+"x")}") ${e*$i}w`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(e*Ai+"x")}") ${e*Ai}w`)})):(t.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,$i))}") ${$i}x`),this.$$("ultra-res-support")&&t.add(`url("${this._getUrlBase(this._getElSize(e,Ai))}") ${Ai}x`));let i=`image-set(${[...t].join(", ")})`;e.style.setProperty("background-image",i),e.style.setProperty("background-image","-webkit-"+i)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach((t=>{e.add(this._getUrlBase(t+"x")+` ${t}w`),this.$$("hi-res-support")&&e.add(this._getUrlBase(t*$i+"x")+` ${t*$i}w`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(t*Ai+"x")+` ${t*Ai}w`)})):(e.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach((e=>{this.$$("intersection")?this.initIntersection(e,(()=>{this.renderBg(e)})):this.renderBg(e)})):this.$$("intersection")?this.initIntersection(this.img,(()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()})):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(e,t){let i={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver((i=>{i.forEach((i=>{i.isIntersecting&&(t(),this._isnObserver.unobserve(e))}))}),i),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach((e=>{this._isnObserver.unobserve(e)})),this._isnObserver=null)}static get observedAttributes(){return Object.keys(Ti)}attributeChangedCallback(e,t,i){window.setTimeout((()=>{this.$[ki+e]=i}))}}class Li extends Ri{initCallback(){super.initCallback(),this.sub$$("src",(()=>{this.init()})),this.sub$$("uuid",(()=>{this.init()})),this.sub$$("lazy",(e=>{this.$$("is-background-for")||(this.img.loading=e?"lazy":"eager")}))}}class Ui extends ui{init$={...this.ctxInit,"*simpleButtonText":"",onClick:()=>{this.initFlow()}};initCallback(){super.initCallback(),this.bindCssData("--cfg-multiple"),this.sub("--cfg-multiple",(e=>{this.$["*simpleButtonText"]=e?this.l10n("upload-files"):this.l10n("upload-file")}))}}Ui.template='\n  <lr-drop-area>\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span>{{*simpleButtonText}}</span>\n      <slot></slot>\n      <div class="visual-drop-area"></div>\n    </button>\n  </lr-drop-area>\n';class Oi extends de{historyTracked=!0;activityType="start-from";initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function Ni(e){return new Promise((t=>{"function"!==typeof window.FileReader&&t(!1);try{let i=new FileReader;i.onerror=()=>{t(!0)};let n=e=>{"loadend"!==e.type&&i.abort(),t(!1)};i.onloadend=n,i.onprogress=n,i.readAsDataURL(e)}catch(i){t(!1)}}))}function Mi(e){return new Promise((t=>{let i=0,n=[],s=e=>{e||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),t(null)),e.isFile?(i++,e.file((e=>{i--,n.push(e),0===i&&t(n)}))):e.isDirectory&&r(e.createReader())},r=e=>{i++,e.readEntries((e=>{i--;for(let t of e)s(t);0===i&&t(n)}))};s(e)}))}function Pi(e){let t=[],i=[];for(let n=0;n<e.items.length;n++){let s=e.items[n];if(s)if("file"===s.kind){if("function"===typeof s.webkitGetAsEntry||"function"===typeof s.getAsEntry){let e="function"===typeof s.webkitGetAsEntry?s.webkitGetAsEntry():s.getAsEntry();i.push(Mi(e).then((e=>{t.push(...e)})));continue}let e=s.getAsFile();i.push(Ni(e).then((i=>{i||t.push(e)})))}else"string"===s.kind&&s.type.match("^text/uri-list")&&i.push(new Promise((e=>{s.getAsString((i=>{t.push(i),e()}))})))}return Promise.all(i).then((()=>t))}const Di={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Fi=["focus"],Bi=100,Vi=new Map;function ji(e,t){let i=Math.max(Math.min(e[0],t.x+t.width),t.x),n=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-i)*(e[0]-i)+(e[1]-n)*(e[1]-n))}function zi(e){let t=0,i=document.body,n=new Set,s=e=>n.add(e),r=Di.INACTIVE,o=t=>{e.shouldIgnore()&&t!==Di.INACTIVE||(r!==t&&n.forEach((e=>e(t))),r=t)};s((t=>e.onChange(t)));let a=()=>{t=0,o(Di.INACTIVE)},l=()=>{t+=1,r===Di.INACTIVE&&o(Di.ACTIVE)},c=()=>{t-=1;let e=t>0;e||o(Di.INACTIVE)},u=e=>{e.preventDefault(),t=0,o(Di.INACTIVE)},h=t=>{t.preventDefault();let i=[t.x,t.y],n=e.element.getBoundingClientRect(),s=Math.floor(ji(i,n)),r=s<Bi,a=t.composedPath().includes(e.element);Vi.set(e.element,s);let l=Math.min(...Vi.values())===s;o(a&&l?Di.OVER:r&&l?Di.NEAR:Di.ACTIVE)},d=async t=>{t.preventDefault();let i=await Pi(t.dataTransfer);e.onItems(i),o(Di.INACTIVE)};return i.addEventListener("drop",u),i.addEventListener("dragleave",c),i.addEventListener("dragenter",l),i.addEventListener("dragover",h),e.element.addEventListener("drop",d),Fi.forEach((e=>{window.addEventListener(e,a)})),()=>{Vi.delete(e.element),i.removeEventListener("drop",u),i.removeEventListener("dragleave",c),i.removeEventListener("dragenter",l),i.removeEventListener("dragover",h),e.element.removeEventListener("drop",d),Fi.forEach((e=>{window.removeEventListener(e,a)}))}}class qi extends ui{init$={...this.ctxInit,state:Di.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null};isActive(){const e=this.getBoundingClientRect(),t=e.width>0&&e.height>0,i=e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth),n=window.getComputedStyle(this),s="hidden"!==n.visibility&&"none"!==n.display;return t&&s&&i}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("clickable",(e=>{this.set$({isClickable:"string"===typeof e})})),this.defineAccessor("with-icon",(e=>{this.set$({withIcon:"string"===typeof e})})),this.defineAccessor("fullscreen",(e=>{this.set$({isFullscreen:"string"===typeof e})})),this.defineAccessor("text",(e=>{e?this.set$({text:this.l10n(e)||e}):this.set$({text:this.l10n("drop-files-here")})})),this._destroyDropzone=zi({element:this,shouldIgnore:()=>this._isDisabled(),onChange:e=>{this.$.state=e},onItems:e=>{if(!e.length)return;let t=this.getCssData("--cfg-multiple"),i=this.getCssData("--cfg-multiple-max"),n=this.uploadCollection.size;t&&i?e=e.slice(0,i-n-1):t||(e=e.slice(0,n>0?0:1)),e.forEach((e=>{if("string"===typeof e)return void this.uploadCollection.add({externalUrl:e});let t=ge(e);this.uploadCollection.add({file:e,isImage:t,mimeType:e.type,fileName:e.name,fileSize:e.size})})),this.uploadCollection.size&&(this.set$({"*currentActivity":de.activities.UPLOAD_LIST}),this.setForCtxTarget(ce.StateConsumerScope,"*modalActive",!0))}});let e=this.ref["content-wrapper"];e&&(this._destroyContentWrapperDropzone=zi({element:e,onChange:t=>{const i=Object.entries(Di).find((([,e])=>e===t))?.[0].toLowerCase();i&&e.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._isDisabled()})),this.sub("state",(e=>{const t=Object.entries(Di).find((([,t])=>t===e))?.[0].toLowerCase();t&&this.setAttribute("drag-state",t)})),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_isDisabled(){if(!this._couldHandleFiles())return!0;if(!this.$.isFullscreen)return!1;const e=[...this.$["lr-drop-area/targets"]].filter((e=>e!==this)),t=e.filter((e=>e.isActive()));return t.length>0}_couldHandleFiles(){let e=this.getCssData("--cfg-multiple"),t=this.getCssData("--cfg-multiple-max"),i=this.uploadCollection.size;return!(e&&t&&i>=t)&&!(!e&&i>0)}destroyCallback(){super.destroyCallback(),this.$["lr-drop-area/targets"]?.remove?.(this),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}qi.template='\n  <slot>\n    <div ref="content-wrapper" class="content-wrapper">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',qi.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null});const Hi="src-type-";class Ki extends ui{_registeredTypes={};init$={...this.ctxInit,iconName:"default"};initTypes(){this.registerType({type:ui.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:ui.sourceTypes.URL,activity:de.activities.URL,textKey:"from-url"}),this.registerType({type:ui.sourceTypes.CAMERA,activity:de.activities.CAMERA,onClick:()=>{let e=document.createElement("input");var t=void 0!==e.capture;return t&&this.openSystemDialog({captureCamera:!0}),!t}}),this.registerType({type:"draw",activity:de.activities.DRAW,icon:"edit-draw"});for(let e of Object.values(ui.extSrcList))this.registerType({type:e,activity:de.activities.EXTERNAL,activityParams:{externalSourceType:e}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",(e=>{e&&this.applyType(e)}))}registerType(e){this._registeredTypes[e.type]=e}getType(e){return this._registeredTypes[e]}applyType(e){const t=this._registeredTypes[e];if(!t)return void console.warn("Unsupported source type: "+e);const{textKey:i=e,icon:n=e,activity:s,onClick:r,activityParams:o={}}=t;this.applyL10nKey("src-type",`${Hi}${i}`),this.$.iconName=n,this.onclick=e=>{const t=r?r(e):!!s;t&&this.set$({"*currentActivityParams":o,"*currentActivity":s})}}}Ki.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',Ki.bindAttributes({type:null});class Wi extends le{cssInit$={"--cfg-source-list":""};initCallback(){super.initCallback(),this.sub("--cfg-source-list",(e=>{if(!e)return;let t=e.split(",").map((e=>e.trim())),i="";t.forEach((e=>{i+=`<lr-source-btn type="${e}"></lr-source-btn>`})),this.getCssData("--cfg-source-list-wrap")?this.innerHTML=i:this.outerHTML=i}))}}function Xi(e,t=40){if("image/svg+xml"===e.type)return URL.createObjectURL(e);let i=document.createElement("canvas"),n=i.getContext("2d"),s=new Image,r=new Promise(((e,r)=>{s.onload=()=>{let o=s.height/s.width;o>1?(i.width=t,i.height=t*o):(i.height=t,i.width=t/o),n.fillStyle="rgb(240, 240, 240)",n.fillRect(0,0,i.width,i.height),n.drawImage(s,0,0,i.width,i.height),i.toBlob((t=>{if(!t)return void r();let i=URL.createObjectURL(t);e(i)}))},s.onerror=e=>{r(e)}}));return s.src=URL.createObjectURL(e),r}class Gi{caption="";text="";iconName="";isError=!1}class Ji extends le{init$={...this.ctxInit,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}};initCallback(){super.initCallback(),this.sub("*message",(e=>{e?(this.setAttribute("active",""),this.set$({captionTxt:e.caption||"",msgTxt:e.text||"",iconName:e.isError?"error":"info"}),e.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")}))}}function Yi(e){let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function Zi(e="#fff",t="rgba(0, 0, 0, .1)"){return Yi(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="${e}" />\n    <rect x="0" y="0" width="10" height="10" fill="${t}" />\n    <rect x="10" y="10" width="10" height="10" fill="${t}" />\n  </svg>`)}function Qi(e="hsl(209, 21%, 65%)",t=32,i=32){return Yi(`\n  <svg width="${t}" height="${i}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${e}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}Ji.template='\n  <div class="heading">\n    <lr-icon set="@name: iconName"></lr-icon>\n    <div class="caption">{{captionTxt}}</div>\n    <button type="button" set="onclick: onClose">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </div>\n  <div class="msg">{{msgTxt}}</div>\n';const en=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class tn extends ui{pauseRender=!0;_entrySubs=new Set;_entry=null;_isIntersecting=!1;_debouncedGenerateThumb=ie(this._generateThumbnail.bind(this),100);_debouncedCalculateState=ie(this._calculateState.bind(this),0);_renderedOnce=!1;cssInit$={"--cfg-use-cloud-image-editor":0};init$={...this.ctxInit,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:en.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.findBlockInCtx((e=>e.activityType===de.activities.DETAILS))?this.$["*currentActivity"]=de.activities.DETAILS:this.$["*currentActivity"]=de.activities.CLOUD_IMG_EDIT},onRemove:()=>{let e=this._entry.getValue("uuid");if(e){let t=this.getOutputData((t=>t.getValue("uuid")===e));ci.emit(new li({type:ai.REMOVE,ctx:this.ctxName,data:t}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}};_reset(){for(let e of this._entrySubs)e.remove();this._debouncedGenerateThumb.cancel(),this._entrySubs=new Set,this._entry=null,this._isIntersecting=!1}_observerCallback(e){let[t]=e;this._isIntersecting=t.isIntersecting,t.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===t.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){let e=this._entry,t=en.IDLE;e.getValue("uploadError")||e.getValue("validationErrorMsg")?t=en.FAILED:e.getValue("isUploading")?t=en.UPLOADING:e.getValue("uuid")&&(t=en.FINISHED),this.$.state!==t&&(this.$.state=t)}async _generateThumbnail(){let e=this._entry;if(e.getValue("uuid")&&e.getValue("isImage")){let t=this.getCssData("--cfg-thumb-size")||76,i=this.proxyUrl(wi(Ci(this.getCssData("--cfg-cdn-cname"),this._entry.getValue("uuid")),fi(e.getValue("cdnUrlModifiers"),`scale_crop/${t}x${t}/center`))),n=e.getValue("thumbUrl");return e.setValue("thumbUrl",i),void URL.revokeObjectURL(n)}if(!e.getValue("thumbUrl"))if(e.getValue("file")?.type.includes("image"))try{let t=await Xi(e.getValue("file"),this.getCssData("--cfg-thumb-size")||76);e.setValue("thumbUrl",t)}catch(t){let i=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Qi(i))}else{let t=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Qi(t))}}_showMessage(e,t,i){let n=new Gi;n.caption=t,n.text=i,n.isError="error"===e,this.set$({badgeIcon:`badge-${e}`,"*message":n})}_subEntry(e,t){let i=this._entry.subscribe(e,t);this._entrySubs.add(i)}_handleEntryId(e){this._reset();let t=this.uploadCollection?.read(e);this._entry=t,t&&(this._subEntry("validationErrorMsg",(e=>{this._debouncedCalculateState(),this.$.errorText=e})),this._subEntry("uploadError",(e=>{this._debouncedCalculateState(),this.$.errorText=e?.message})),this._subEntry("isUploading",(()=>{this._debouncedCalculateState()})),this._subEntry("uploadProgress",(e=>{this.$.progressValue=e})),this._subEntry("fileName",(e=>{this.$.itemName=e||t.getValue("externalUrl")||this.l10n("file-no-name")})),this._subEntry("fileSize",(e=>{let i=this.getCssData("--cfg-max-local-file-size-bytes");i&&e&&e>i&&t.setValue("validationErrorMsg",this.l10n("files-max-size-limit-error",{maxFileSize:i}))})),this._subEntry("mimeType",(e=>{if(!e)return;let i=this.getCssData("--cfg-img-only"),n=this.getCssData("--cfg-accept"),s=fe([...i?pe:[],n]);s.length>0&&!me(e,s)&&t.setValue("validationErrorMsg",this.l10n("file-type-not-allowed"))})),this._subEntry("isImage",(e=>{let i=this.getCssData("--cfg-img-only");t.getValue("externalUrl")&&!t.getValue("uuid")&&i&&!e||i&&!e&&t.setValue("validationErrorMsg",this.l10n("images-only-accepted"))})),this._subEntry("externalUrl",(e=>{this.$.itemName=t.getValue("fileName")||e||this.l10n("file-no-name")})),this._subEntry("uuid",(e=>{this._debouncedCalculateState(),e&&this._debouncedGenerateThumb()})),this._subEntry("cdnUrlModifiers",(()=>{this._debouncedGenerateThumb()})),this._subEntry("thumbUrl",(e=>{this.$.thumbUrl=e?`url(${e})`:""})),this.getCssData("--cfg-confirm-upload")||this.upload(),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",(e=>{this._handleEntryId(e)})),this.sub("state",(e=>{this._handleState(e)})),this.sub("--cfg-use-cloud-image-editor",(()=>{this._handleState(this.$.state)})),this.onclick=()=>{tn.activeInstances.forEach((e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")}))},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",(e=>{e&&this.isConnected&&this.upload()})),tn.activeInstances.add(this)}_handleState(e){this.set$({isFailed:e===en.FAILED,isUploading:e===en.UPLOADING,isFinished:e===en.FINISHED,progressVisible:e===en.UPLOADING,isEditable:this.$["--cfg-use-cloud-image-editor"]&&e===en.FINISHED&&this._entry?.getValue("isImage")}),e===en.FAILED?this.$.badgeIcon="badge-error":e===en.FINISHED&&(this.$.badgeIcon="badge-success"),e===en.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),tn.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}async upload(){let e=this._entry;if(e.getValue("uuid")||e.getValue("isUploading")||e.getValue("validationErrorMsg"))return;let t=this.getOutputData((e=>!e.getValue("uuid")));ci.emit(new li({type:ai.UPLOAD_START,ctx:this.ctxName,data:t})),this._debouncedCalculateState(),e.setValue("isUploading",!0),e.setValue("uploadError",null),e.setValue("validationErrorMsg",null),!e.getValue("file")&&e.getValue("externalUrl")&&(this.$.progressUnknown=!0);try{let t=new AbortController;e.setValue("abortController",t);let i=await Xt(e.getValue("file")||e.getValue("externalUrl"),{...this.getUploadClientOptions(),fileName:e.getValue("fileName"),onProgress:t=>{if(t.isComputable){let i=100*t.value;e.setValue("uploadProgress",i)}this.$.progressUnknown=!t.isComputable},signal:t.signal});e.setMultipleValues({fileInfo:i,isUploading:!1,fileName:i.name,fileSize:i.size,isImage:i.isImage,mimeType:i.mimeType,uuid:i.uuid,cdnUrl:i.cdnUrl}),e===this._entry&&this._debouncedCalculateState()}catch(i){e.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),e===this._entry&&this._debouncedCalculateState(),i?.isCancel||e.setValue("uploadError",i)}}}tn.template='\n  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <div class="file-actions">\n      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n        <lr-icon name="edit-file"></lr-icon>\n      </button>\n      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n        <lr-icon name="remove-file"></lr-icon>\n      </button>\n      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n        <lr-icon name="upload"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar\n      class="progress-bar"\n      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"\n    >\n    </lr-progress-bar>\n  </div>\n',tn.activeInstances=new Set;class nn extends ui{historyTracked=!0;activityType=de.activities.UPLOAD_LIST;init$={...this.ctxInit,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.$["*uploadTrigger"]={},this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let e=this.getOutputData((e=>!!e.getValue("uuid")));ci.emit(new li({type:ai.REMOVE,ctx:this.ctxName,data:e})),this.uploadCollection.clearAll()}};cssInit$={"--cfg-show-empty-list":0,"--cfg-multiple":1,"--cfg-multiple-min":0,"--cfg-multiple-max":0,"--cfg-confirm-upload":1,"--cfg-source-list":""};_debouncedHandleCollectionUpdate=ie((()=>{this._updateUploadsState(),this._updateCountLimitMessage()}),0);_validateFilesCount(){let e=!!this.getCssData("--cfg-multiple"),t=e?this.getCssData("--cfg-multiple-min")??0:1,i=e?this.getCssData("--cfg-multiple-max")??0:1,n=this.uploadCollection.size,s=!!t&&n<t,r=!!i&&n>i,o=!s&&!r,a=i===n;return{passed:o,tooFew:s,tooMany:r,min:t,max:i,exact:a}}_updateCountLimitMessage(){let e=this.uploadCollection.size,t=this._validateFilesCount();if(e&&!t.passed){let i=new Gi,n=t.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";i.caption=this.l10n("files-count-limit-error-title"),i.text=this.l10n(n,{min:t.min,max:t.max,total:e}),i.isError=!0,this.set$({"*message":i})}}_updateUploadsState(){let e=this.uploadCollection.items(),t=e.length,i={total:t,succeed:0,uploading:0,failed:0};for(let u of e){let e=this.uploadCollection.read(u);e.getValue("uuid")&&!e.getValue("validationErrorMsg")&&(i.succeed+=1),e.getValue("isUploading")&&(i.uploading+=1),(e.getValue("validationErrorMsg")||e.getValue("uploadError"))&&(i.failed+=1)}let n=i.total===i.succeed+i.failed,{passed:s,tooMany:r,exact:o}=this._validateFilesCount(),a=0===i.failed,l=i.total>0&&s&&a,c=!n&&i.total-i.succeed-i.uploading-i.failed>0&&s;this.set$({doneBtnVisible:n,doneBtnEnabled:l,uploadBtnVisible:c,addMoreBtnEnabled:0===i.total||!r&&!o,addMoreBtnVisible:!o||this.getCssData("--cfg-multiple"),headerText:this._getHeaderText(i)})}_getHeaderText(e){const t=t=>{const i=e[t];return this.l10n(`header-${t}`,{count:i})};return e.uploading>0?t("uploading"):e.failed>0?t("failed"):e.succeed>0?t("succeed"):t("total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.sub("--cfg-multiple",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-min",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-max",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",(e=>{0!==this.uploadCollection?.size||this.getCssData("--cfg-show-empty-list")||e!==this.activityType||(this.$["*currentActivity"]=this.initActivity)})),this.uploadCollection.observe(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",(e=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:e.length>0}),0!==e?.length||this.getCssData("--cfg-show-empty-list")||this.historyBack()}))}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserve(this._debouncedHandleCollectionUpdate)}}nn.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n';class sn extends ui{activityType=de.activities.URL;init$={...this.ctxInit,importDisabled:!0,onUpload:()=>{let e=this.ref.input["value"];this.uploadCollection.add({externalUrl:e}),this.$["*currentActivity"]=de.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:e=>{let t=e.target.value;this.set$({importDisabled:!t})}};initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}sn.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="button"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n    ></button>\n  </div>\n';const rn=()=>"undefined"!==typeof navigator.permissions;class on extends ui{activityType=de.activities.CAMERA;_unsubPermissions=null;init$={...this.ctxInit,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:rn(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:e=>{this._selectedCameraId=e.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}};cssInit$={"--cfg-camera-mirror":1};_onActivate=()=>{rn()&&this._subscribePermissions(),this._capture()};_onDeactivate=()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()};_handlePermissionsChange=()=>{this._capture()};_setPermissionsState=ie((e=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized","granted"===e),"granted"===e?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===e?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())}),300);async _subscribePermissions(){try{let e=await navigator.permissions.query({name:"camera"});e.addEventListener("change",this._handlePermissionsChange)}catch(e){console.log("Failed to use permissions API. Fallback to manual request mode.",e),this._capture()}}async _capture(){let e={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(e.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let t=await navigator.mediaDevices.getUserMedia(e);t.addEventListener("inactive",(()=>{this._setPermissionsState("denied")})),this.$.video=t,this._capturing=!0,this._setPermissionsState("granted")}catch(t){this._setPermissionsState("denied"),this.$.originalErrorMessage=t.message}}_stopCapture(){this._capturing&&(this.$.video?.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video["videoHeight"],this._canvas.width=this.ref.video["videoWidth"],this._ctx.drawImage(this.ref.video,0,0);let e=Date.now(),t=`camera-${e}.png`;this._canvas.toBlob((i=>{let n=new File([i],t,{lastModified:e,type:"image/png"});this.uploadCollection.add({file:n,fileName:t,fileSize:n.size,isImage:!0,mimeType:n.type}),this.set$({"*currentActivity":de.activities.UPLOAD_LIST})}))}async initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.sub("--cfg-camera-mirror",(e=>{this.$.videoTransformCss=e?"scaleX(-1)":null}));try{let e=await navigator.mediaDevices.enumerateDevices(),t=e.filter((e=>"videoinput"===e.kind)).map(((e,t)=>({text:e.label.trim()||`${this.l10n("caption-camera")} ${t+1}`,value:e.deviceId})));t.length>1&&(this.$.cameraSelectOptions=t,this.$.cameraSelectHidden=!1)}catch(e){}}}on.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span>{{l10nMessage}}</span>\n      <span>{{originalErrorMessage}}</span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n';class an extends ui{}class ln extends ui{activityType=de.activities.DETAILS;pauseRender=!0;init$={...this.ctxInit,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=de.activities.CLOUD_IMG_EDIT)}};cssInit$={"--cfg-use-cloud-image-editor":0,"--cfg-use-local-image-editor":0};showNonImageThumb(){let e=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),t=Qi(e,108,108);this.ref.filePreview.setImageUrl(t),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",(e=>{if(!e)return;this._entrySubs?this._entrySubs.forEach((e=>{this._entrySubs.delete(e),e.remove()})):this._entrySubs=new Set,this.entry=e;let t=e.getValue("file");if(t){this._file=t;let i=ge(this._file);i&&!e.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),i||this.showNonImageThumb()}let i=(e,t)=>{this._entrySubs.add(this.entry.subscribe(e,t))};i("fileName",(e=>{this.$.fileName=e,this.$.onNameInput=()=>{let e=this.ref.file_name_input["value"];Object.defineProperty(this._file,"name",{writable:!0,value:e}),this.entry.setValue("fileName",e)}})),i("fileSize",(e=>{this.$.fileSize=Number.isFinite(e)?this.fileSizeFmt(e):this.l10n("file-size-unknown")})),i("uploadError",(e=>{this.$.errorTxt=e?.message})),i("externalUrl",(e=>{e&&(this.entry.getValue("uuid")||this.showNonImageThumb())})),i("cdnUrl",(e=>{const t=this.$["--cfg-use-cloud-image-editor"]&&e&&this.entry.getValue("isImage");if(e&&this.ref.filePreview.clear(),this.set$({cdnUrl:e,cloudEditBtnHidden:!t}),e&&this.entry.getValue("isImage")){let t=wi(e,fi("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(t))}}))}))}}ln.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span l10n="caption-edit-file"></span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <lr-tabs tab-list="tab-view, tab-details">\n      <div tab-ctx="tab-details" class="details">\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-name"></div>\n          <input\n            name="name-input"\n            ref="file_name_input"\n            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"\n            type="text"\n          />\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-size"></div>\n          <div>{{fileSize}}</div>\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="cdn-url"></div>\n          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>\n        </div>\n\n        <div>{{errorTxt}}</div>\n      </div>\n\n      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>\n    </lr-tabs>\n\n    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">\n      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">\n        <lr-icon name="edit"></lr-icon>\n        <span l10n="edit-image"></span>\n      </button>\n      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">\n        <lr-icon name="remove"></lr-icon>\n        <span l10n="remove-from-list"></span>\n      </button>\n      <div></div>\n      <button type="button" class="back-btn primary-btn" set="onclick: onBack">\n        <span l10n="ok"></span>\n      </button>\n    </div>\n  </div>\n';class cn{captionL10nStr="confirm-your-action";messageL10Str="are-you-sure";confirmL10nStr="yes";denyL10nStr="no";confirmAction(){console.log("Confirmed")}denyAction(){this["historyBack"]()}}class un extends de{activityType=de.activities.CONFIRMATION;_defaults=new cn;init$={...this.ctxInit,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)};initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",(e=>{e&&this.set$({"*currentActivity":de.activities.CONFIRMATION,activityCaption:this.l10n(e.captionL10nStr),messageTxt:this.l10n(e.messageL10Str),confirmBtnTxt:this.l10n(e.confirmL10nStr),denyBtnTxt:this.l10n(e.denyL10nStr),onDeny:()=>{e.denyAction()},onConfirm:()=>{e.confirmAction()}})}))}}un.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n';class hn extends ui{init$={...this.ctxInit,visible:!1,unknown:!1,value:0,"*commonProgress":0};initCallback(){super.initCallback(),this.uploadCollection.observe((()=>{let e=this.uploadCollection.items().some((e=>{let t=this.uploadCollection.read(e);return t.getValue("isUploading")}));this.$.visible=e})),this.sub("visible",(e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})),this.sub("*commonProgress",(e=>{this.$.value=e}))}}hn.template='\n  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>\n';class dn extends le{_value=0;_unknownMode=!1;init$={...this.ctxInit,width:0,opacity:0};initCallback(){super.initCallback(),this.defineAccessor("value",(e=>{void 0!==e&&(this._value=e,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))})),this.defineAccessor("visible",(e=>{this.ref.line.classList.toggle("progress--hidden",!e)})),this.defineAccessor("unknown",(e=>{this._unknownMode=e,this.ref.line.classList.toggle("progress--unknown",e)}))}}dn.template=' <div ref="line" class="progress"></div> ';const pn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class fn extends le{init$={...this.ctxInit,checkerboard:!1,src:pn};constructor(){super()}initCallback(){super.initCallback(),this.sub("checkerboard",(()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${Zi()})`:"unset"}))}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(e){this.$.src=e.src}setImageFile(e){let t=URL.createObjectURL(e);this.$.src=t,this._lastObjectUrl=t}setImageUrl(e){this.$.src=e}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=pn}}function mn(...e){return e.reduce(((e,t)=>{if("string"===typeof t)return e[t]=!0,e;for(let i of Object.keys(t))e[i]=t[i];return e}),{})}function gn(...e){let t=mn(...e);return Object.keys(t).reduce(((e,i)=>(t[i]&&e.push(i),e)),[]).join(" ")}function bn(e,...t){let i=mn(...t);for(let n of Object.keys(i))e.classList.toggle(n,i[n])}function _n(e,t){let i,n=(...n)=>{clearTimeout(i),i=setTimeout((()=>e(...n)),t)};return n.cancel=()=>{clearTimeout(i)},n}fn.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',fn.bindAttributes({checkerboard:"checkerboard"});const vn={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0};function yn(e,t){if("number"===typeof t)return vn[e]!==t?`${e}/${t}`:"";if("boolean"===typeof t)return t&&vn[e]!==t?`${e}`:"";if("filter"===e){if(!t||vn[e]===t.amount)return"";let{name:i,amount:n}=t;return`${e}/${i}/${n}`}if("crop"===e){if(!t)return"";let{dimensions:i,coords:n}=t;return`${e}/${i.join("x")}/${n.join(",")}`}return""}const wn=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Cn(e){return pi(...wn.filter((t=>"undefined"!==typeof e[t]&&null!==e[t])).map((t=>{let i=e[t];return yn(t,i)})).filter((e=>!!e)))}const xn=pi("format/auto","progressive/yes"),Tn=([e])=>"undefined"!==typeof e?Number(e):void 0,kn=()=>!0,En=([e,t])=>({name:e,amount:"undefined"!==typeof t?Number(t):100}),$n=([e,t])=>({dimensions:e.split("x").map(Number),coords:t.split(",").map(Number)}),An={enhance:Tn,brightness:Tn,exposure:Tn,gamma:Tn,contrast:Tn,saturation:Tn,vibrance:Tn,warmth:Tn,filter:En,mirror:kn,flip:kn,rotate:Tn,crop:$n};function Sn(e){let t={};for(let i of e){let[e,...n]=i.split("/");if(!wn.includes(e))continue;const s=An[e],r=s(n);t[e]=r}return t}function In(e){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:pn,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let t=e.querySelectorAll("img");for(let e of t){let t=e.src;e.src=pn,e.src=t}e.$["*networkProblems"]=!1},"*on.apply":t=>{if(!t)return;let i=e.$["*originalUrl"],n=fi(Cn(t)),s=wi(i,fi(n,"preview")),r={originalUrl:i,cdnUrlModifiers:n,cdnUrl:s,transformations:t};e.dispatchEvent(new CustomEvent("apply",{detail:r,bubbles:!0,composed:!0})),e.remove()},"*on.cancel":()=>{e.remove(),e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const Rn=`\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon size="20" name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="${pn}" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`,Ln={CROP:"crop",SLIDERS:"sliders",FILTERS:"filters"},Un=[Ln.CROP,Ln.SLIDERS,Ln.FILTERS],On=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],Nn=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],Mn=["rotate","mirror","flip"],Pn={brightness:{zero:vn.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:vn.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:vn.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:vn.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:vn.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:vn.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:vn.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:vn.enhance,range:[0,100],keypointsNumber:1},filter:{zero:vn.filter,range:[0,100],keypointsNumber:1}};class Dn extends le{pauseRender=!0;get ctxName(){return this.autoCtxName}init$={...this.ctxInit,...In(this)};_debouncedShowLoader=_n(this._showLoader.bind(this),300);_showLoader(e){this.$.showLoader=e}_waitForSize(){const e=3e3;return new Promise(((t,i)=>{const n=setTimeout((()=>{i(new Error("[cloud-image-editor] timout waiting for non-zero container size"))}),e),s=new ResizeObserver((([e])=>{e.contentRect.width>0&&e.contentRect.height>0&&(t(),clearTimeout(n),s.disconnect())}));s.observe(this)}))}cssInit$={"--cfg-cdn-cname":"https://ucarecdn.com"};async connectedCallback(){super.connectedCallback();try{await this._waitForSize()}catch(e){return void(this.isConnected&&console.error(e.message))}this.render(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.ref["img-el"].addEventListener("load",(e=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==pn&&(this.$["*networkProblems"]=!1)})),this.ref["img-el"].addEventListener("error",(e=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0})),this.sub("src",(e=>{let t=this.ref["img-el"];t.src!==e&&(this._imgLoading=!0,t.src=e||pn)})),this.sub("*tabId",(e=>{this.ref["img-el"].className=gn("image",{image_hidden_to_cropper:e===Ln.CROP,image_hidden_effects:e!==Ln.CROP})}))}initCallback(){if(super.initCallback(),this.$.cdnUrl){let e=gi(this.$.cdnUrl);this.$["*originalUrl"]=Ci(this.$.cdnUrl,e);let t=bi(this.$.cdnUrl),i=Sn(t);this.$["*editorTransformations"]=i}else{if(!this.$.uuid)throw new Error("No UUID nor CDN URL provided");this.$["*originalUrl"]=Ci(this.localCtx.read("--cfg-cdn-cname"),this.$.uuid)}this.classList.add("editor_ON"),this.sub("*networkProblems",(e=>{this.$["presence.networkProblems"]=e,this.$["presence.modalCaption"]=!e})),this.sub("*editorTransformations",(e=>{let t=this.$["*originalUrl"],i=fi(Cn(e)),n=wi(t,fi(i,"preview")),s={originalUrl:t,cdnUrlModifiers:i,cdnUrl:n,transformations:e};this.dispatchEvent(new CustomEvent("change",{detail:s,bubbles:!0,composed:!0}))}),!1);try{fetch(wi(this.$["*originalUrl"],fi("json"))).then((e=>e.json())).then((({width:e,height:t})=>{this.$["*imageSize"]={width:e,height:t}}))}catch(e){e&&console.error("Failed to load image info",e)}}}Dn.template=Rn,Dn.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl"});class Fn extends ui{activityType=de.activities.CLOUD_IMG_EDIT;init$={...this.ctxInit,cdnUrl:null};initCallback(){super.initCallback(),this.bindCssData("--cfg-pubkey"),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",(e=>{e&&(this.entry=e,this.entry.subscribe("cdnUrl",(e=>{e&&(this.$.cdnUrl=e)})))}))}handleApply(e){let t=e.detail;this.entry.setMultipleValues({cdnUrl:t.cdnUrl,cdnUrlModifiers:t.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){let e=new Dn;e.classList.add("lr-cldtr-common");let t=this.$.cdnUrl;e.setAttribute("cdn-url",t),e.addEventListener("apply",(e=>this.handleApply(e))),e.addEventListener("cancel",(()=>this.handleCancel())),this.innerHTML="",this.appendChild(e)}unmountEditor(){this.innerHTML=""}}let Bn={};window.addEventListener("message",(e=>{let t;try{t=JSON.parse(e.data)}catch(i){return}if(t?.type in Bn){let i=Bn[t.type];for(let[n,s]of i)e.source===n&&s(t)}}));const Vn=function(e,t,i){e in Bn||(Bn[e]=[]),Bn[e].push([t,i])},jn=function(e,t){e in Bn&&(Bn[e]=Bn[e].filter((e=>e[0]!==t)))};let zn=e=>{let t=Object.keys(e).reduce(((t,i)=>{let n=e[i],s=Object.keys(n).reduce(((e,t)=>{let i=n[t];return e+`${t}: ${i};`}),"");return t+`${i}{${s}}`}),"");return t};function qn({textColor:e,backgroundColor:t,linkColor:i,linkColorHover:n,shadeColor:s}){let r=`solid 1px ${s}`;return zn({body:{color:e,"background-color":t},".side-bar":{background:"inherit","border-right":r},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:s},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":r},".list-table-body .list-items":{"border-bottom":r},".bread-crumbs a":{color:i},".bread-crumbs a:hover":{color:n},".main-content.loading":{background:`${t} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{background:`center no-repeat ${s}`},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:n},".side-bar-menu a":{color:i},".side-bar-menu a:hover":{color:n},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:n},".source-vk .side-bar-menu a":{color:i},".source-vk .side-bar-menu a:hover":{color:n,background:"none"}})}function Hn(e){let t=[];for(let[i,n]of Object.entries(e))void 0===n||null===n||"string"===typeof n&&0===n.length||t.push(`${i}=${encodeURIComponent(n)}`);return t.join("&")}class Kn extends ui{activityType=de.activities.EXTERNAL;init$={...this.ctxInit,activityIcon:"",activityCaption:"",counter:0,onDone:()=>{this.$["*currentActivity"]=de.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}};_iframe=null;initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:e}=this.activityParams;this.set$({activityCaption:`${e?.[0].toUpperCase()}${e?.slice(1)}`,activityIcon:e}),this.$.counter=0,this.mountIframe()}}),this.sub("*currentActivity",(e=>{e!==this.activityType&&this.unmountIframe()}))}sendMessage(e){this._iframe.contentWindow.postMessage(JSON.stringify(e),"*")}async handleFileSelected(e){this.$.counter=this.$.counter+1;let{url:t,filename:i}=e;this.uploadCollection.add({externalUrl:t,fileName:i})}handleIframeLoad(e){this.applyStyles()}getCssValue(e){let t=window.getComputedStyle(this);return t.getPropertyValue(e).trim()}applyStyles(){let e={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:qn(e)})}remoteUrl(){let e=this.getCssData("--cfg-pubkey"),t=(!1).toString(),{externalSourceType:i}=this.activityParams,n={lang:"en",widget_version:"3.11.3",public_key:e,images_only:t,pass_window_open:!1,session_key:this.getCssData("--cfg-remote-tab-session-key")};return`https://social.uploadcare.com/window3/${i}?${Hn(n)}`}mountIframe(){let e=B({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});e.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(e),Vn("file-selected",e.contentWindow,this.handleFileSelected.bind(this)),this._iframe=e}unmountIframe(){this._iframe&&jn("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=void 0}}Kn.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n';class Wn extends le{setCurrentTab(e){if(!e)return;let t=[...this.ref.context.querySelectorAll("[tab-ctx]")];t.forEach((t=>{t.getAttribute("tab-ctx")===e?t.removeAttribute("hidden"):t.setAttribute("hidden","")}));for(let i in this._tabMap)i===e?this._tabMap[i].setAttribute("current",""):this._tabMap[i].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",(e=>{if(!e)return;let t=e.split(",").map((e=>e.trim()));t.forEach((e=>{let t=B({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(e)}}});t.textContent=this.l10n(e),this.ref.row.appendChild(t),this._tabMap[e]=t}))})),this.defineAccessor("default",(e=>{this.setCurrentTab(e)})),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Wn.bindAttributes({"tab-list":null,default:null}),Wn.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';class Xn extends ui{processInnerHtml=!0;init$={...this.ctxInit,output:null,filesData:null};cssInit$={"--cfg-group-output":0};get dict(){return Xn.dict}get validationInput(){return this._validationInputElement}initCallback(){if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer),this.hasAttribute(this.dict.INPUT_REQUIRED))){let e=document.createElement("input");e.type="text",e.name="__UPLOADCARE_VALIDATION_INPUT__",e.required=!0,this.appendChild(e),this._validationInputElement=e}this.sub("output",(e=>{if(e){if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:e}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer.innerHTML="";let t=e.groupData?[e.groupData.cdnUrl]:e.map((e=>e.cdnUrl));for(let e of t){let t=document.createElement("input");t.type="hidden",t.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,t.value=e,this._dynamicInputsContainer.appendChild(t)}this.hasAttribute(this.dict.INPUT_REQUIRED)&&(this._validationInputElement.value=t.length?"__VALUE__":"")}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(e)}}),!1),this.sub(this.dict.SRC_CTX_KEY,(async e=>{if(!e)return this.$.output=null,void(this.$.filesData=null);if(this.$.filesData=e,this.getCssData("--cfg-group-output")||this.hasAttribute(this.dict.GROUP_ATTR)){let t=e.map((e=>e.uuid)),i=await Qt(t,{...this.getUploadClientOptions()});this.$.output={groupData:i,files:e}}else this.$.output=e}),!1)}}Xn.dict={SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"};class Gn extends de{}class Jn extends le{init$={...this.ctxInit,currentText:"",options:[],selectHtml:"",onSelect:e=>{e.preventDefault(),e.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find((e=>e.value==this.value))?.text||"",this.dispatchEvent(new Event("change"))}};initCallback(){super.initCallback(),this.sub("options",(e=>{this.$.currentText=e?.[0]?.text||"";let t="";e?.forEach((e=>{t+=`<option value="${e.value}">${e.text}</option>`})),this.$.selectHtml=t}))}}Jn.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n';const Yn={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},Zn={requestFullscreen:e=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document["webkitExitFullscreen"]&&document["webkitExitFullscreen"]()}};class Qn extends le{togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document["webkitFullscreenElement"])===this?Zn.exitFullscreen():Zn.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===Yn.CAP_OFF?(this.$.capIcon=Yn.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(Qn.is+":captions","1")):(this.$.capIcon=Yn.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(Qn.is+":captions"))}toggleSound(){this.$.volIcon===Yn.VOL_ON?(this.$.volIcon=Yn.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=Yn.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(e){window.localStorage.setItem(Qn.is+":volume",e);let t=e?e/100:0;this._video.volume=t}get progress(){return this.ref.progress}init$={...this.ctxInit,src:"",ppIcon:Yn.PLAY,fsIcon:Yn.FS_ON,volIcon:Yn.VOL_ON,capIcon:Yn.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:e=>{let t=parseFloat(e.currentTarget.$.value);this.setVolume(t)},progressClicked:e=>{let t=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(e.offsetX/t.width)}};_getUrl(e){return e.includes("/")?e:`https://ucarecdn.com/${e}/`}_desc2attrs(e){let t=[];for(let i in e){let n="src"===i?this._getUrl(e[i]):e[i];t.push(`${i}="${n}"`)}return t.join(" ")}_timeFmt(e){let t=new Date(1e3*Math.round(e));return[t.getMinutes(),t.getSeconds()].map((e=>e<10?"0"+e:e)).join(":")}_initTracks(){[...this._video.textTracks].forEach((e=>{e.mode="hidden"})),window.localStorage.getItem(Qn.is+":captions")&&this.toggleCaptions()}_castAttributes(){let e=["autoplay","loop","muted"];[...this.attributes].forEach((t=>{e.includes(t.name)&&this._video.setAttribute(t.name,t.value)}))}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",(()=>{this.$.ppIcon=Yn.PAUSE,this.setAttribute("playback","")})),this._video.addEventListener("pause",(()=>{this.$.ppIcon=Yn.PLAY,this.removeAttribute("playback")})),this.addEventListener("fullscreenchange",(e=>{console.log(e),document.fullscreenElement===this?this.$.fsIcon=Yn.FS_OFF:this.$.fsIcon=Yn.FS_ON})),this.sub("src",(e=>{if(!e)return;let t=this._getUrl(e);this._video.src=t})),this.sub("video",(async e=>{if(!e)return;let t=await(await window.fetch(this._getUrl(e))).json();t.poster&&(this._video.poster=this._getUrl(t.poster));let i="";t?.sources.forEach((e=>{i+=`<source ${this._desc2attrs(e)} />`})),t.tracks&&(t.tracks.forEach((e=>{i+=`<track ${this._desc2attrs(e)} />`})),this.$.hasSubtitles=!0),this._video.innerHTML+=i,this._initTracks(),console.log(t)})),this._video.addEventListener("loadedmetadata",(e=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)})),this._video.addEventListener("timeupdate",(e=>{let t=Math.round(this._video.currentTime/this._video.duration*100);this.$.progressCssWidth=t+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)}));let e=window.localStorage.getItem(Qn.is+":volume");if(e){let t=parseFloat(e);this.setVolume(t),this.$.volumeValue=t}}}Qn.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',Qn.bindAttributes({video:"video",src:"src"});const es="css-src";class ts extends le{pauseRender=!0;shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden","");let e=this.getAttribute(es);if(e){this.renderShadow=!0,this.attachShadow({mode:"open"});let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,t.onload=()=>{window.requestAnimationFrame((()=>{this.render(),window.setTimeout((()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()}))}))},this.shadowRoot.appendChild(t)}else this.render(),this.removeAttribute("hidden"),this.shadowReadyCallback()}}class is extends le{cssInit$={"--cfg-remove-copyright":0};init$={...this.ctxInit,removeCopyright:!1};initCallback(){super.initCallback(),this.sub("--cfg-remove-copyright",(e=>{this.$.removeCopyright=!!e}))}static template='\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      set="@hidden: removeCopyright"\n      >Powered by Uploadcare</a\n    >\n  '}class ns extends ts{ctxInit=te(this);ctxOwner=!0;_template=null;static set template(e){this._template=e+"<slot></slot>"}static get template(){return this._template}}class ss extends ns{}ss.template="\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor></lr-cloud-image-editor>\n  </lr-modal>\n\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar-common></lr-progress-bar-common>\n";class rs extends ns{pauseRender=!0;init$={...this.ctxInit,selectClicked:()=>{this.ref.uBlock.openSystemDialog()}};shadowReadyCallback(){const e=this.ref.uBlock;this.sub("*currentActivity",(t=>{t||(this.$["*currentActivity"]=e.initActivity||de.activities.START_FROM)})),this.sub("*uploadList",(t=>{0===t?.length&&(this.$["*currentActivity"]=e.initActivity||de.activities.START_FROM)}))}}rs.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-message-box></lr-message-box>\n';class os extends ns{init$={...this.ctxInit,dropAreaHidden:!1};shadowReadyCallback(){const e=this.ref.uBlock;this.sub("*currentActivity",(t=>{t||(this.$["*currentActivity"]=e.initActivity||de.activities.START_FROM)})),window.customElements.whenDefined(e.tagName.toLowerCase()).then((()=>{1!==e.sourceList.length||e.sourceList.includes(ui.sourceTypes.LOCAL)||(this.$.dropAreaHidden=!0)}))}}os.template=' <lr-start-from>\n    <lr-drop-area set="@hidden: dropAreaHidden" with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor></lr-cloud-image-editor>';const as=20,ls=24,cs=34,us=3,hs=us/2,ds=1,ps=100/3,fs=2*ls+cs;function ms(e,t){for(let i in t)e.setAttributeNS(null,i,t[i].toString())}function gs(e,t={}){let i=document.createElementNS("http://www.w3.org/2000/svg",e);return ms(i,t),i}function bs(e,t){let{x:i,y:n,width:s,height:r}=e,o=t.includes("w")?0:1,a=t.includes("n")?0:1,l=[-1,1][o],c=[-1,1][a],u=[i+o*s+hs*l,n+a*r+hs*c-ls*c],h=[i+o*s+hs*l,n+a*r+hs*c],d=[i+o*s-ls*l+hs*l,n+a*r+hs*c],p=`M ${u[0]} ${u[1]} L ${h[0]} ${h[1]} L ${d[0]} ${d[1]}`,f=h;return{d:p,center:f}}function _s(e,t){let i,n,{x:s,y:r,width:o,height:a}=e,l=["n","s"].includes(t)?.5:{w:0,e:1}[t],c=["w","e"].includes(t)?.5:{n:0,s:1}[t],u=[-1,1][l],h=[-1,1][c];["n","s"].includes(t)?(i=[s+l*o-cs/2,r+c*a+hs*h],n=[s+l*o+cs/2,r+c*a+hs*h]):(i=[s+l*o+hs*u,r+c*a-cs/2],n=[s+l*o+hs*u,r+c*a+cs/2]);let d=`M ${i[0]} ${i[1]} L ${n[0]} ${n[1]}`,p=[n[0]-(n[0]-i[0])/2,n[1]-(n[1]-i[1])/2];return{d:d,center:p}}function vs(e){return""===e?"move":["e","w"].includes(e)?"ew-resize":["n","s"].includes(e)?"ns-resize":["nw","se"].includes(e)?"nwse-resize":"nesw-resize"}function ys(e,[t,i]){return{...e,x:e.x+t,y:e.y+i}}function ws(e,t){let{x:i}=e,{y:n}=e;return e.x<t.x?i=t.x:e.x+e.width>t.x+t.width&&(i=t.x+t.width-e.width),e.y<t.y?n=t.y:e.y+e.height>t.y+t.height&&(n=t.y+t.height-e.height),{...e,x:i,y:n}}function Cs(e,[t,i],n){let{x:s,y:r,width:o,height:a}=e;return n.includes("n")&&(r+=i,a-=i),n.includes("s")&&(a+=i),n.includes("w")&&(s+=t,o-=t),n.includes("e")&&(o+=t),{x:s,y:r,width:o,height:a}}function xs(e,t){let i=Math.max(e.x,t.x),n=Math.min(e.x+e.width,t.x+t.width),s=Math.max(e.y,t.y),r=Math.min(e.y+e.height,t.y+t.height);return{x:i,y:s,width:n-i,height:r-s}}function Ts(e,[t,i],n){let{x:s,y:r,width:o,height:a}=e;if(n.includes("n")){let e=a;a=Math.max(i,a),r=r+e-a}if(n.includes("s")&&(a=Math.max(i,a)),n.includes("w")){let e=o;o=Math.max(t,o),s=s+e-o}return n.includes("e")&&(o=Math.max(t,o)),{x:s,y:r,width:o,height:a}}function ks(e,[t,i]){return e.x<=t&&t<=e.x+e.width&&e.y<=i&&i<=e.y+e.height}class Es extends le{init$={...this.ctxInit,dragging:!1};constructor(){super(),this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(e){let t=this.$["*imageBox"];if(!t)return;if(""===e&&t.height<=fs&&t.width<=fs)return!0;let i=t.height<=fs&&(e.includes("n")||e.includes("s")),n=t.width<=fs&&(e.includes("e")||e.includes("w"));return i||n}_createBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:i,width:n,height:s}=e,r=this.ref["svg-el"],o=gs("mask",{id:"backdrop-mask"}),a=gs("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),l=gs("rect",{x:t,y:i,width:n,height:s,fill:"black"});o.appendChild(a),o.appendChild(l);let c=gs("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});r.appendChild(c),r.appendChild(o),this._backdropMask=o,this._backdropMaskInner=l}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame((()=>{this._backdropMask.style.display="block"})))}_updateBackdrop(){let e=this.$["*cropBox"];if(!e)return;let{x:t,y:i,width:n,height:s}=e;ms(this._backdropMaskInner,{x:t,y:i,width:n,height:s})}_updateFrame(){let e=this.$["*cropBox"];if(!e)return;for(let i of Object.values(this._frameThumbs)){let{direction:t,pathNode:n,interactionNode:s,groupNode:r}=i,o=""===t,a=2===t.length;if(o){let{x:t,y:i,width:n,height:r}=e,o=[t+n/2,i+r/2];ms(s,{r:Math.min(n,r)/3,cx:o[0],cy:o[1]})}else{let{d:i,center:r}=a?bs(e,t):_s(e,t);ms(s,{cx:r[0],cy:r[1]}),ms(n,{d:i})}let l=this._shouldThumbBeDisabled(t);r.setAttribute("class",gn("thumb",{"thumb--hidden":l,"thumb--visible":!l}))}let t=this._frameGuides;ms(t,{x:e.x-.5*ds,y:e.y-.5*ds,width:e.width+ds,height:e.height+ds})}_createThumbs(){let e={};for(let t=0;t<3;t++)for(let i=0;i<3;i++){let n=`${["n","","s"][t]}${["w","","e"][i]}`,s=gs("g");s.classList.add("thumb"),s.setAttribute("with-effects","");let r=gs("circle",{r:ls+hs,fill:"transparent"}),o=gs("path",{stroke:"currentColor",fill:"none","stroke-width":us});s.appendChild(o),s.appendChild(r),e[n]={direction:n,pathNode:o,interactionNode:r,groupNode:s},r.addEventListener("pointerdown",this._handlePointerDown.bind(this,n))}return e}_createGuides(){let e=gs("svg"),t=gs("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":ds,"stroke-opacity":.5});e.appendChild(t);for(let i=1;i<=2;i++){let t=gs("line",{x1:ps*i+"%",y1:"0%",x2:ps*i+"%",y2:"100%",stroke:"#000000","stroke-width":ds,"stroke-opacity":.3});e.appendChild(t)}for(let i=1;i<=2;i++){let t=gs("line",{x1:"0%",y1:ps*i+"%",x2:"100%",y2:ps*i+"%",stroke:"#000000","stroke-width":ds,"stroke-opacity":.3});e.appendChild(t)}return e.classList.add("guides","guides--semi-hidden"),e}_createFrame(){let e=this.ref["svg-el"],t=document.createDocumentFragment(),i=this._createGuides();t.appendChild(i);let n=this._createThumbs();for(let{groupNode:s}of Object.values(n))t.appendChild(s);e.appendChild(t),this._frameThumbs=n,this._frameGuides=i}_handlePointerDown(e,t){let i=this._frameThumbs[e];if(this._shouldThumbBeDisabled(e))return;let n=this.$["*cropBox"],{x:s,y:r}=this.ref["svg-el"].getBoundingClientRect(),o=t.x-s,a=t.y-r;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[o,a],this._dragStartCrop={...n}}_handlePointerUp_(e){this._updateCursor(),this.$.dragging&&(e.stopPropagation(),e.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(e){if(!this.$.dragging)return;e.stopPropagation(),e.preventDefault();let t=this.ref["svg-el"],{x:i,y:n}=t.getBoundingClientRect(),s=e.x-i,r=e.y-n,o=s-this._dragStartPoint[0],a=r-this._dragStartPoint[1],{direction:l}=this._draggingThumb,c=this.$["*imageBox"],u=this._dragStartCrop;""===l?(u=ys(u,[o,a]),u=ws(u,c)):(u=Cs(u,[o,a],l),u=xs(u,c));let h=[Math.min(c.width,fs),Math.min(c.height,fs)];u=Ts(u,h,l),Object.values(u).every((e=>Number.isFinite(e)&&e>=0))?this.$["*cropBox"]=u:console.error("CropFrame is trying to create invalid rectangle",{payload:u})}_handleSvgPointerMove_(e){let t=Object.values(this._frameThumbs).find((t=>{if(this._shouldThumbBeDisabled(t.direction))return!1;let i=t.groupNode,n=i.getBoundingClientRect(),s={x:n.x,y:n.y,width:n.width,height:n.height},r=ks(s,[e.x,e.y]);return r}));this._hoverThumb=t,this._updateCursor()}_updateCursor(){let e=this._hoverThumb;this.ref["svg-el"].style.cursor=e?vs(e.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(e){Object.values(this._frameThumbs).map((({groupNode:e})=>e)).forEach((t=>{t.setAttribute("class",gn("thumb",{"thumb--hidden":!e,"thumb--visible":e}))}))}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",(()=>{this._resizeBackdrop(),window.requestAnimationFrame((()=>{this._render()}))})),this.sub("*cropBox",(e=>{e&&(this._guidesHidden=e.height<=fs||e.width<=fs,window.requestAnimationFrame((()=>{this._render()})))})),this.sub("dragging",(e=>{this._frameGuides.setAttribute("class",gn({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&e,"guides--semi-hidden":!this._guidesHidden&&!e}))})),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}Es.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class $s extends le{init$={...this.ctxInit,active:!1,title:"",icon:"","on.click":null};initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",(e=>{let t=this._titleEl;t&&(this._titleEl.style.display=e?"block":"none")})),this.sub("active",(e=>{this.className=gn({active:e,not_active:!e})})),this.sub("on.click",(e=>{this.onclick=e}))}}function As(e){let t=e+90;return t=t>=360?0:t,t}function Ss(e,t){return"rotate"===e?As(t):["mirror","flip"].includes(e)?!t:null}$s.template='\n  <div class="before"></div>\n  <lr-icon size="20" set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n';class Is extends $s{initCallback(){super.initCallback(),this.defineAccessor("operation",(e=>{e&&(this._operation=e,this.$["icon"]=e)})),this.$["on.click"]=e=>{let t=this.$["*cropperEl"].getValue(this._operation),i=Ss(this._operation,t);this.$["*cropperEl"].setValue(this._operation,i)}}}const Rs={FILTER:"filter",COLOR_OPERATION:"color_operation"},Ls="original";class Us extends le{init$={...this.ctxInit,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":e=>{this.$["*faderEl"].set(e),this.$.value=e}};setOperation(e,t){this._controlType="filter"===e?Rs.FILTER:Rs.COLOR_OPERATION,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=t,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Ls?void 0:this.$.value,filter:this._filter===Ls?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:e,zero:t}=Pn[this._operation],[i,n]=e;this.$.min=i,this.$.max=n,this.$.zero=t;let s=this.$["*editorTransformations"][this._operation];if(this._controlType===Rs.FILTER){let e=n;if(s){let{name:t,amount:i}=s;e=t===this._filter?i:n}this.$.value=e,this.$.defaultValue=e}if(this._controlType===Rs.COLOR_OPERATION){let e="undefined"!==typeof s?s:t;this.$.value=e,this.$.defaultValue=e}}apply(){let e;e=this._controlType===Rs.FILTER?this._filter===Ls?null:{name:this._filter,amount:this.$.value}:this.$.value;let t={...this.$["*editorTransformations"],[this._operation]:e};this.$["*editorTransformations"]=t}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",(e=>{this._originalUrl=e})),this.sub("value",(e=>{let t=`${this._filter||this._operation} ${e}`;this.$["*operationTooltip"]=t}))}}function Os(e){let t=new Image,i=new Promise(((i,n)=>{t.src=e,t.onload=i,t.onerror=n})),n=()=>{0===t.naturalWidth&&(t.src=pn)};return{promise:i,image:t,cancel:n}}function Ns(e){let t=[];for(let r of e){let e=Os(r);t.push(e)}let i=t.map((e=>e.image)),n=Promise.allSettled(t.map((e=>e.promise))),s=()=>{t.forEach((e=>{e.cancel()}))};return{promise:n,images:i,cancel:s}}Us.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n';class Ms extends $s{init$={...this.ctxInit,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null};_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),t=window.devicePixelRatio,i=Math.ceil(t*e),n=t>=2?"lightest":"normal",s=100,r={...this.$["*editorTransformations"]};return r[this._operation]=this._filter!==Ls?{name:this._filter,amount:s}:void 0,wi(this._originalUrl,fi(xn,Cn(r),`quality/${n}`,`scale_crop/${i}x${i}/center`))}_observerCallback(e,t){let i=e[0];if(i.isIntersecting){let e=this.proxyUrl(this._previewSrc()),i=this.ref["preview-el"],{promise:n,cancel:s}=Os(e);this._cancelPreload=s,n.catch((e=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:e})})).finally((()=>{i.style.backgroundImage=`url(${e})`,i.setAttribute("loaded",""),t.unobserve(this)}))}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",(e=>{this._operation="filter",this._filter=e,this.$.isOriginal=e===Ls,this.$.icon=this.$.isOriginal?"original":"slider"})),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",(e=>{this.$.active=e&&e===this._filter})),this.sub("isOriginal",(e=>{this.$.iconSize=e?40:20})),this.sub("active",(e=>{if(this.$.isOriginal)return;let t=this.ref["icon-el"];t.style.opacity=e?"1":"0";let i=this.ref["preview-el"];e?i.style.opacity="0":i.style.backgroundImage&&(i.style.opacity="1")})),this.sub("*networkProblems",(e=>{if(!e){let e=this.proxyUrl(this._previewSrc()),t=this.ref["preview-el"];t.style.backgroundImage&&(t.style.backgroundImage="none",t.style.backgroundImage=`url(${e})`)}}))}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload&&this._cancelPreload()}}Ms.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n';class Ps extends $s{_operation="";initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",(e=>{e&&(this._operation=e,this.$["icon"]=e,this.$.title=this.l10n(e))})),this.sub("*editorTransformations",(e=>{if(!this._operation)return;let{zero:t}=Pn[this._operation],i=e[this._operation],n="undefined"!==typeof i&&i!==t;this.$.active=n}))}}function Ds(e,t){let i={};for(let n of t){let t=e[n];(e.hasOwnProperty(n)||void 0!==t)&&(i[n]=t)}return i}function Fs(e,t,i){const n=3e3;let s=window.devicePixelRatio,r=Math.min(Math.ceil(t*s),n),o=s>=2?"lightest":"normal";return wi(e,fi(xn,Cn(i),`quality/${o}`,`stretch/off/-/resize/${r}x`))}function Bs(e,t,i){return Math.min(Math.max(e,t),i)}function Vs({width:e,height:t},i){let n=i/90%2!==0;return{width:n?t:e,height:n?e:t}}function js(e){if(!e)return!0;let t=[({dimensions:e,coords:t})=>[...e,...t].every((e=>Number.isInteger(e)&&Number.isFinite(e))),({dimensions:e,coords:t})=>e.every((e=>e>0))&&t.every((e=>e>=0))];return t.every((t=>t(e)))}class zs extends le{init$={...this.ctxInit,image:null,"*padding":as,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}};constructor(){super(),this._commitDebounced=_n(this._commit.bind(this),300),this._handleResizeDebounced=_n(this._handleResize.bind(this),10)}_handleResize(){this.isConnected&&(this.deactivate(),this.activate(this._imageSize,{fromViewer:!1}))}_syncTransformations(){let e=this.$["*editorTransformations"],t=Ds(e,Object.keys(this.$["*operations"])),i={...this.$["*operations"],...t};this.$["*operations"]=i}_initCanvas(){let e=this.ref["canvas-el"],t=e.getContext("2d"),i=this.offsetWidth,n=this.offsetHeight,s=window.devicePixelRatio;e.style.width=`${i}px`,e.style.height=`${n}px`,e.width=i*s,e.height=n*s,t.scale(s,s),this._canvas=e,this._ctx=t}_alignImage(){if(!this._isActive||!this.$.image)return;let e=this.$.image,t=this.$["*padding"],i=this.$["*operations"],{rotate:n}=i,s={width:this.offsetWidth,height:this.offsetHeight},r=Vs({width:e.naturalWidth,height:e.naturalHeight},n);if(r.width>s.width-2*t||r.height>s.height-2*t){let e=r.width/r.height,i=s.width/s.height;if(e>i){let i=s.width-2*t,n=i/e,r=0+t,o=t+(s.height-2*t)/2-n/2;this.$["*imageBox"]={x:r,y:o,width:i,height:n}}else{let i=s.height-2*t,n=i*e,r=t+(s.width-2*t)/2-n/2,o=0+t;this.$["*imageBox"]={x:r,y:o,width:n,height:i}}}else{let{width:e,height:i}=r,n=t+(s.width-2*t)/2-e/2,o=t+(s.height-2*t)/2-i/2;this.$["*imageBox"]={x:n,y:o,width:e,height:i}}}_alignCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],i=this.$["*operations"],{rotate:n}=i,s=this.$["*editorTransformations"]["crop"];if(s){let{dimensions:[t,i],coords:[r,o]}=s,{width:a,x:l,y:c}=this.$["*imageBox"],{width:u}=Vs(this._imageSize,n),h=a/u;e={x:l+r*h,y:c+o*h,width:t*h,height:i*h}}else e={x:t.x,y:t.y,width:t.width,height:t.height};let r=[Math.min(t.width,fs),Math.min(t.height,fs)];e=Ts(e,r,"se"),e=ws(e,t),this.$["*cropBox"]=e}_drawImage(){let e=this.$.image,t=this.$["*imageBox"],i=this.$["*operations"],{mirror:n,flip:s,rotate:r}=i,o=this._ctx,a=Vs({width:t.width,height:t.height},r);o.save(),o.translate(t.x+t.width/2,t.y+t.height/2),o.rotate(r*Math.PI*-1/180),o.scale(n?-1:1,s?-1:1),o.drawImage(e,-a.width/2,-a.height/2,a.width,a.height),o.restore()}_draw(){if(!this._isActive||!this.$.image)return;let e=this._canvas,t=this._ctx;t.clearRect(0,0,e.width,e.height),this._drawImage()}_animateIn({fromViewer:e}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout((()=>{this.className=gn({active_from_viewer:e,active_from_editor:!e,inactive_to_editor:!1})})))}_calculateDimensions(){let e=this.$["*cropBox"],t=this.$["*imageBox"],i=this.$["*operations"],{rotate:n}=i,{width:s,height:r}=t,{width:o,height:a}=Vs(this._imageSize,n),{width:l,height:c}=e,u=s/o,h=r/a,d=[Bs(Math.round(l/u),1,o),Bs(Math.round(c/h),1,a)];return d}_calculateCrop(){let e=this.$["*cropBox"],t=this.$["*imageBox"],i=this.$["*operations"],{rotate:n}=i,{width:s,height:r,x:o,y:a}=t,{width:l,height:c}=Vs(this._imageSize,n),{x:u,y:h}=e,d=s/l,p=r/c,f=this._calculateDimensions(),m={dimensions:f,coords:[Bs(Math.round((u-o)/d),0,l-f[0]),Bs(Math.round((h-a)/p),0,c-f[1])]};if(js(m)){if(f[0]!==l||f[1]!==c)return m}else console.error("Cropper is trying to create invalid crop object",{payload:m})}_commit(){if(!this.isConnected)return;let e=this.$["*operations"],{rotate:t,mirror:i,flip:n}=e,s=this._calculateCrop(),r=this.$["*editorTransformations"],o={...r,crop:s,rotate:t,mirror:i,flip:n};this.$["*editorTransformations"]=o}setValue(e,t){console.log(`Apply cropper operation [${e}=${t}]`),this.$["*operations"]={...this.$["*operations"],[e]:t},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(e){return this.$["*operations"][e]}async activate(e,{fromViewer:t}){if(!this._isActive){this._isActive=!0,this._imageSize=e,this.removeEventListener("transitionend",this._reset),this._initCanvas();try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw(),this._animateIn({fromViewer:t})}catch(i){console.error("Failed to activate cropper",{error:i})}}}deactivate(){this._isActive&&(this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=gn({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}))}_transitionToCrop(){let e=this._calculateDimensions(),t=Math.min(this.offsetWidth,e[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,e[1])/this.$["*cropBox"].height,n=Math.min(t,i),s=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${n}) translate(${(this.offsetWidth/2-s)/n}px, ${(this.offsetHeight/2-r)/n}px)`,this.style.transformOrigin=`${s}px ${r}px`}_transitionToImage(){let e=this.$["*cropBox"].x+this.$["*cropBox"].width/2,t=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${e}px ${t}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(e,t){let i=this.offsetWidth;t={...t,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let n=this.proxyUrl(Fs(e,i,t)),{promise:s,cancel:r,image:o}=Os(n),a=this._handleImageLoading(n);return o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=r,s.then((()=>o)).catch((e=>(console.error("Failed to load image",{error:e}),this.$["*networkProblems"]=!0,Promise.resolve(o))))}_handleImageLoading(e){let t="crop",i=this.$["*loadingOperations"];return i.get(t)||i.set(t,new Map),i.get(t).get(e)||(i.set(t,i.get(t).set(e,!0)),this.$["*loadingOperations"]=i),()=>{i?.get(t)?.has(e)&&(i.get(t).delete(e),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this._observer=new ResizeObserver((([e])=>{const t=e.contentRect.width>0&&e.contentRect.height>0;t&&this._isActive&&this.$.image&&this._handleResizeDebounced()})),this._observer.observe(this),this.sub("*imageBox",(()=>{this._draw()})),this.sub("*cropBox",(e=>{this.$.image&&this._commitDebounced()})),setTimeout((()=>{this.sub("*networkProblems",(e=>{e||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})}))}),0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}function qs(e,t,i){let n=Array(i);i--;for(let s=i;s>=0;s--)n[s]=Math.ceil((s*t+(i-s)*e)/i);return n}function Hs(e){return e.reduce(((t,i,n)=>n<e.length-1?[...t,[i,e[n+1]]]:t),[])}function Ks(e,t,i){let n=Hs(e).find((([e,i])=>e<=t&&t<=i));return e.map((e=>{let s=Math.abs(n[0]-n[1]),r=Math.abs(t-n[0])/s;return n[0]===e?t>i?1:1-r:n[1]===e?t>=i?r:1:0}))}function Ws(e,t){return e.map(((i,n)=>i<t?e.length-n:n))}function Xs(e,t){let i=Pn[e].keypointsNumber,{range:n,zero:s}=Pn[e];return[...new Set([...qs(n[0],s,i+1),...qs(s,n[1],i+1),s,t])].sort(((e,t)=>e-t))}zs.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n';class Gs extends le{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=_n(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let t=this._operation,i=this.$["*loadingOperations"];return i.get(t)||i.set(t,new Map),i.get(t).get(e)||(i.set(t,i.get(t).set(e,!0)),this.$["*loadingOperations"]=i),()=>{i?.get(t)?.has(e)&&(i.get(t).delete(e),this.$["*loadingOperations"]=i)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame((()=>{for(let e of this._keypoints){let{image:t}=e;t&&(t.style.opacity=e.opacity.toString(),t.style.zIndex=e.zIndex.toString())}}))}_imageSrc({url:e=this._url,filter:t=this._filter,operation:i,value:n}={}){let s={...this._transformations};i&&(s[i]=t?{name:t,amount:n}:n);let r=this.offsetWidth;return this.proxyUrl(Fs(e,r,s))}_constructKeypoint(e,t){let i=this._imageSrc({operation:e,value:t});return{src:i,image:null,opacity:0,zIndex:0,value:t}}_isSame(e,t){return this._operation===e&&this._filter===t}_addKeypoint(e,t,i){let n=()=>!this._isSame(e,t)||this._value!==i||!!this._keypoints.find((e=>e.value===i));if(n())return;let s=this._constructKeypoint(e,i),r=new Image;r.src=s.src;let o=this._handleImageLoading(s.src);r.addEventListener("load",o,{once:!0}),r.addEventListener("error",o,{once:!0}),s.image=r,r.classList.add("fader-image"),r.addEventListener("load",(()=>{if(n())return;let t=this._keypoints,o=t.findIndex((e=>e.value>i)),a=o<t.length?t[o].image:null;!this._container||a&&!this._container.contains(a)||(t.splice(o,0,s),this._container.insertBefore(r,a),this._update(e,i))}),{once:!0}),r.addEventListener("error",(()=>{this.$["*networkProblems"]=!0}),{once:!0})}set(e){e="string"===typeof e?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,t){this._operation=e,this._value=t;let{zero:i}=Pn[e],n=this._keypoints.map((e=>e.value)),s=Ks(n,t,i),r=Ws(n,i);for(let[o,a]of Object.entries(this._keypoints))a.opacity=s[o],a.zIndex=r[o];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}async _initNodes(){let e=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&e.appendChild(this._previewImage);let t=document.createElement("div");e.appendChild(t);let i=this._keypoints.map((e=>e.src)),{images:n,promise:s,cancel:r}=Ns(i);n.forEach((e=>{let t=this._handleImageLoading(e.src);e.addEventListener("load",t),e.addEventListener("error",t)})),this._cancelLastImages=()=>{r(),this._cancelLastImages=void 0};let o=this._operation,a=this._filter;await s,this._isActive&&this._isSame(o,a)&&(this._container&&this._container.remove(),this._container=t,this._keypoints.forEach(((e,t)=>{let i=n[t];i.classList.add("fader-image"),e.image=i,this._container.appendChild(i)})),this.appendChild(e),this._flush())}setTransformations(e){if(this._transformations=e,this._previewImage){let e=this._imageSrc(),t=this._handleImageLoading(e);this._previewImage.src=e,this._previewImage.addEventListener("load",t,{once:!0}),this._previewImage.addEventListener("error",t,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",(()=>{this.$["*networkProblems"]=!0}),{once:!0})}}preload({url:e,filter:t,operation:i,value:n}){this._cancelBatchPreload&&this._cancelBatchPreload();let s=Xs(i,n),r=s.map((n=>this._imageSrc({url:e,filter:t,operation:i,value:n}))),{cancel:o}=Ns(r);this._cancelBatchPreload=o}_setOriginalSrc(e){let t=this._previewImage||this._createPreviewImage();if(!this.contains(t)&&this.appendChild(t),this._previewImage=t,t.src===e)return t.style.opacity="1",t.style.transform="scale(1)",void(this.className=gn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));t.style.opacity="0";let i=this._handleImageLoading(e);t.addEventListener("error",i,{once:!0}),t.src=e,t.addEventListener("load",(()=>{i(),t&&(t.style.opacity="1",t.style.transform="scale(1)",this.className=gn({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))}),{once:!0}),t.addEventListener("error",(()=>{this.$["*networkProblems"]=!0}),{once:!0})}activate({url:e,operation:t,value:i,filter:n,fromViewer:s}){this._isActive=!0,this._hidden=!1,this._url=e,this._operation=t||"initial",this._value=i,this._filter=n,this._fromViewer=s;let r="number"!==typeof i&&!n;if(r){let e=this._imageSrc({operation:t,value:i});return this._setOriginalSrc(e),void(this._container&&this._container.remove())}this._keypoints=Xs(t,i).map((e=>this._constructKeypoint(t,e))),this._update(t,i),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=gn({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",(()=>{this._container&&this._container.remove()}),{once:!0})):this._container&&this._container.remove()}}const Js=1;class Ys extends le{initCallback(){super.initCallback(),this.addEventListener("wheel",(e=>{e.preventDefault();let{deltaY:t,deltaX:i}=e;Math.abs(i)>Js?this.scrollLeft+=i:this.scrollLeft+=t}))}}function Zs(e){return`\n    <lr-btn-ui\n      theme="boring"\n      ref="tab-toggle-${e}"\n      data-id="${e}"\n      icon="${e}"\n      tabindex="0"\n      set="onclick: on.clickTab;"\n    >\n    </lr-btn-ui>\n  `}function Qs(e){return`\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${e}; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-${e}"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `}Ys.template=" <slot></slot> ";class er extends le{constructor(){super(),this.init$={...this.ctxInit,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Ls,"*currentOperation":null,"*tabId":Ln.CROP,showLoader:!1,filters:Nn,colorOperations:On,cropOperations:Mn,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabContent.crop":!1,"presence.tabContent.sliders":!1,"presence.tabContent.filters":!1,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"on.cancel":e=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":e=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":e=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":e=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{let t=e.currentTarget.getAttribute("data-id");this._activateTab(t,{fromViewer:!1})}},this._debouncedShowLoader=_n(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===Ln.SLIDERS&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(e){let t=Ps.is&&new Ps;return t["operation"]=e,t}_createFilterControl(e){let t=Ms.is&&new Ms;return t["filter"]=e,t}_createToggleControl(e){let t=Is.is&&new Is;return t["operation"]=e,t}_renderControlsList(e){let t=this.ref[`controls-list-${e}`],i=document.createDocumentFragment();e===Ln.CROP?this.$.cropOperations.forEach((e=>{let t=this._createToggleControl(e);i.appendChild(t)})):e===Ln.FILTERS?[Ls,...this.$.filters].forEach((e=>{let t=this._createFilterControl(e);i.appendChild(t)})):e===Ln.SLIDERS&&this.$.colorOperations.forEach((e=>{let t=this._createOperationControl(e);i.appendChild(t)})),i.childNodes.forEach(((e,t)=>{t===i.childNodes.length-1&&e.classList.add("controls-list_last-item")})),t.innerHTML="",t.appendChild(i)}_activateTab(e,{fromViewer:t}){this.$["*tabId"]=e,e===Ln.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:t})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:t}),this.$["*cropperEl"].deactivate());for(let i of Un){let t=i===e,n=this.ref[`tab-toggle-${i}`];n.active=t,t?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(i),this.$[`presence.tabContent.${i}`]=t}}_unmountTabControls(e){let t=this.ref[`controls-list-${e}`];t&&(t.innerHTML="")}_syncTabIndicator(){let e=this.ref[`tab-toggle-${this.$["*tabId"]}`],t=this.ref["tabs-indicator"];t.style.transform=`translateX(${e.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let e=this.$["*imgContainerEl"].offsetWidth,t=this.proxyUrl(Fs(this.$["*originalUrl"],e,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:i}=Ns([t]);this._cancelPreload=()=>{i(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}_updateInfoTooltip=_n((()=>{let e=this.$["*editorTransformations"],t="",i=!1;if(this.$["*tabId"]===Ln.FILTERS)if(i=!0,this.$["*currentFilter"]&&e?.filter?.name===this.$["*currentFilter"]){let i=e?.filter?.amount||100;t=this.l10n(this.$["*currentFilter"])+" "+i}else t=this.l10n(Ls);else if(this.$["*tabId"]===Ln.SLIDERS&&this.$["*currentOperation"]){i=!0;let n=e?.[this.$["*currentOperation"]]||Pn[this.$["*currentOperation"]].zero;t=this.$["*currentOperation"]+" "+n}i&&(this.$["*operationTooltip"]=t),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",i)}),0);initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",(e=>{e&&setTimeout((()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})}),0)})),this.sub("*editorTransformations",(e=>{let t=e?.filter?.name;this.$["*currentFilter"]!==t&&(this.$["*currentFilter"]=t)})),this.sub("*currentFilter",(()=>{this._updateInfoTooltip()})),this.sub("*currentOperation",(()=>{this._updateInfoTooltip()})),this.sub("*tabId",(()=>{this._updateInfoTooltip()})),this.sub("*originalUrl",(e=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()})),this.sub("*editorTransformations",(e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)})),this.sub("*loadingOperations",(e=>{let t=!1;for(let[,i]of e.entries()){if(t)break;for(let[,e]of i.entries())if(e){t=!0;break}}this._debouncedShowLoader(t)})),this.sub("*showSlider",(e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e})),this._updateInfoTooltip()}}er.template=`\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">${Un.map(Qs).join("")}</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <div class="tab-toggles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ${Un.map(Zs).join("")}\n        </div>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;class tr extends le{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.ctxInit,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",(e=>{e?this.setAttribute("active",""):this.removeAttribute("active")}))}_iconCss(){return gn("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",(e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()})),this.sub("theme",(e=>{"custom"!==e&&(this.className=e)})),this.sub("text",(e=>{this._iconSingle=!1})),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}tr.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),tr.template='\n  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>\n  <div class="text">{{text}}</div>\n';class ir extends le{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let e=this.ref["line-el"];e.style.transition="initial",e.style.opacity="0",e.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",(e=>{"boolean"===typeof e&&(e?this._start():this._stop())}))}_start(){this._active=!0;let{width:e}=this.getBoundingClientRect(),t=this.ref["line-el"];t.style.transition="transform 1s",t.style.opacity="1",t.style.transform=`translateX(${e}px)`,t.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}ir.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n';const nr={transition:"transition",visible:"visible",hidden:"hidden"};class sr extends le{constructor(){super(),this._visible=!1,this._visibleStyle=nr.visible,this._hiddenStyle=nr.hidden,this._externalTransitions=!1,this.defineAccessor("styles",(e=>{e&&(this._externalTransitions=!0,this._visibleStyle=e.visible,this._hiddenStyle=e.hidden)})),this.defineAccessor("visible",(e=>{"boolean"===typeof e&&(this._visible=e,this._handleVisible())}))}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",bn(this,{[nr.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(nr.transition),this._handleVisible(),setTimeout((()=>this.removeAttribute("hidden")),0)}}sr.template=" <slot></slot> ";class rr extends le{init$={...this.ctxInit,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e),this.$.onInput&&this.$.onInput(e)},"on.sliderChange":()=>{let e=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(e)}};constructor(){super(),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",(e=>{this.$.disabled=e})),this.defineAccessor("min",(e=>{this.$.min=e})),this.defineAccessor("max",(e=>{this.$.max=e})),this.defineAccessor("defaultValue",(e=>{this.$.defaultValue=e,this.ref["input-el"].value=e,this._updateValue(e)})),this.defineAccessor("zero",(e=>{this._zero=e})),this.defineAccessor("onInput",(e=>{e&&(this.$.onInput=e)})),this.defineAccessor("onChange",(e=>{e&&(this.$.onChange=e)})),this._updateSteps(),this._observer=new ResizeObserver((()=>{this._updateSteps();let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e)})),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout((()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e)}),0),this.sub("disabled",(e=>{let t=this.ref["input-el"];e?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")}));let e=this.ref["input-el"];e.addEventListener("focus",(()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")})),e.addEventListener("blur",(()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")}))}_updateValue(e){this._updateZeroDot(e);let{width:t}=this.getBoundingClientRect(),i=100/(this.$.max-this.$.min),n=i*(e-this.$.min),s=n*(t-this._thumbSize)/100;window.requestAnimationFrame((()=>{this.ref["thumb-el"].style.transform=`translateX(${s}px)`}))}_updateZeroDot(e){if(!this._zeroDotEl)return;e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:t}=this.getBoundingClientRect(),i=100/(this.$.max-this.$.min),n=i*(this._zero-this.$.min),s=n*(t-this._thumbSize)/100;window.requestAnimationFrame((()=>{this._zeroDotEl.style.transform=`translateX(${s}px)`}))}_updateSteps(){const e=15;let t=this.ref["steps-el"],{width:i}=t.getBoundingClientRect(),n=Math.ceil(i/2),s=Math.ceil(n/e)-2;if(this._stepsCount===s)return;let r=document.createDocumentFragment(),o=document.createElement("div"),a=document.createElement("div");o.className="minor-step",a.className="border-step",r.appendChild(a);for(let c=0;c<s;c++)r.appendChild(o.cloneNode());r.appendChild(a.cloneNode());for(let c=0;c<s;c++)r.appendChild(o.cloneNode());r.appendChild(a.cloneNode());let l=document.createElement("div");l.className="zero-dot",r.appendChild(l),this._zeroDotEl=l,t.innerHTML="",t.appendChild(r),this._stepsCount=s}destroyCallback(){this._observer?.disconnect()}}rr.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n';var or=i(655);const ar="__lr-blocks__";async function lr(e,t=!1){return new Promise(((i,n)=>{if("object"!==typeof document)return void i(null);if("object"===typeof window&&window[ar])return void i(window[ar]);let s=document.createElement("script");s.type="module",s.src=e,s.onerror=()=>{n()},s.onload=()=>{let e=window[ar];t&&(0,or.n)(e),i(e)},document.head.appendChild(s)}))}}}]);
//# sourceMappingURL=chunk-vendors.614dbd06.js.map