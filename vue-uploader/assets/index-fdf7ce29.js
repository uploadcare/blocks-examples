var Ia=Object.defineProperty;var Oa=(t,i,e)=>i in t?Ia(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var m=(t,i,e)=>(Oa(t,typeof i!="symbol"?i+"":i,e),e);(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(r){if(r.ep)return;r.ep=!0;const n=e(r);fetch(r.href,n)}})();function Er(t,i){const e=Object.create(null),s=t.split(",");for(let r=0;r<s.length;r++)e[s[r]]=!0;return i?r=>!!e[r.toLowerCase()]:r=>!!e[r]}const K={},ti=[],Ve=()=>{},ka=()=>!1,La=/^on[^a-z]/,gs=t=>La.test(t),xr=t=>t.startsWith("onUpdate:"),ue=Object.assign,Ar=(t,i)=>{const e=t.indexOf(i);e>-1&&t.splice(e,1)},Ua=Object.prototype.hasOwnProperty,B=(t,i)=>Ua.call(t,i),R=Array.isArray,ii=t=>Ni(t)==="[object Map]",bs=t=>Ni(t)==="[object Set]",vn=t=>Ni(t)==="[object Date]",F=t=>typeof t=="function",ne=t=>typeof t=="string",oi=t=>typeof t=="symbol",Y=t=>t!==null&&typeof t=="object",El=t=>(Y(t)||F(t))&&F(t.then)&&F(t.catch),xl=Object.prototype.toString,Ni=t=>xl.call(t),Pa=t=>Ni(t).slice(8,-1),Al=t=>Ni(t)==="[object Object]",Sr=t=>ne(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ji=Er(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_s=t=>{const i=Object.create(null);return e=>i[e]||(i[e]=t(e))},Ra=/-(\w)/g,tt=_s(t=>t.replace(Ra,(i,e)=>e?e.toUpperCase():"")),Ma=/\B([A-Z])/g,pi=_s(t=>t.replace(Ma,"-$1").toLowerCase()),ys=_s(t=>t.charAt(0).toUpperCase()+t.slice(1)),Bs=_s(t=>t?`on${ys(t)}`:""),ai=(t,i)=>!Object.is(t,i),Zi=(t,i)=>{for(let e=0;e<t.length;e++)t[e](i)},ns=(t,i,e)=>{Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value:e})},sr=t=>{const i=parseFloat(t);return isNaN(i)?t:i};let wn;const rr=()=>wn||(wn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function $r(t){if(R(t)){const i={};for(let e=0;e<t.length;e++){const s=t[e],r=ne(s)?za(s):$r(s);if(r)for(const n in r)i[n]=r[n]}return i}else if(ne(t)||Y(t))return t}const Da=/;(?![^(]*\))/g,Fa=/:([^]+)/,Na=/\/\*[^]*?\*\//g;function za(t){const i={};return t.replace(Na,"").split(Da).forEach(e=>{if(e){const s=e.split(Fa);s.length>1&&(i[s[0].trim()]=s[1].trim())}}),i}function vs(t){let i="";if(ne(t))i=t;else if(R(t))for(let e=0;e<t.length;e++){const s=vs(t[e]);s&&(i+=s+" ")}else if(Y(t))for(const e in t)t[e]&&(i+=e+" ");return i.trim()}const Va="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ja=Er(Va);function Sl(t){return!!t||t===""}function Ba(t,i){if(t.length!==i.length)return!1;let e=!0;for(let s=0;e&&s<t.length;s++)e=ws(t[s],i[s]);return e}function ws(t,i){if(t===i)return!0;let e=vn(t),s=vn(i);if(e||s)return e&&s?t.getTime()===i.getTime():!1;if(e=oi(t),s=oi(i),e||s)return t===i;if(e=R(t),s=R(i),e||s)return e&&s?Ba(t,i):!1;if(e=Y(t),s=Y(i),e||s){if(!e||!s)return!1;const r=Object.keys(t).length,n=Object.keys(i).length;if(r!==n)return!1;for(const l in t){const o=t.hasOwnProperty(l),a=i.hasOwnProperty(l);if(o&&!a||!o&&a||!ws(t[l],i[l]))return!1}}return String(t)===String(i)}function $l(t,i){return t.findIndex(e=>ws(e,i))}const Ha=t=>ne(t)?t:t==null?"":R(t)||Y(t)&&(t.toString===xl||!F(t.toString))?JSON.stringify(t,Il,2):String(t),Il=(t,i)=>i&&i.__v_isRef?Il(t,i.value):ii(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((e,[s,r])=>(e[`${s} =>`]=r,e),{})}:bs(i)?{[`Set(${i.size})`]:[...i.values()]}:Y(i)&&!R(i)&&!Al(i)?String(i):i;let Re;class Wa{constructor(i=!1){this.detached=i,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Re,!i&&Re&&(this.index=(Re.scopes||(Re.scopes=[])).push(this)-1)}get active(){return this._active}run(i){if(this._active){const e=Re;try{return Re=this,i()}finally{Re=e}}}on(){Re=this}off(){Re=this.parent}stop(i){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!i){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Xa(t,i=Re){i&&i.active&&i.effects.push(t)}function qa(){return Re}const Ir=t=>{const i=new Set(t);return i.w=0,i.n=0,i},Ol=t=>(t.w&Ct)>0,kl=t=>(t.n&Ct)>0,Ka=({deps:t})=>{if(t.length)for(let i=0;i<t.length;i++)t[i].w|=Ct},Ga=t=>{const{deps:i}=t;if(i.length){let e=0;for(let s=0;s<i.length;s++){const r=i[s];Ol(r)&&!kl(r)?r.delete(t):i[e++]=r,r.w&=~Ct,r.n&=~Ct}i.length=e}},nr=new WeakMap;let Ai=0,Ct=1;const lr=30;let Ne;const Dt=Symbol(""),or=Symbol("");class Or{constructor(i,e=null,s){this.fn=i,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,Xa(this,s)}run(){if(!this.active)return this.fn();let i=Ne,e=_t;for(;i;){if(i===this)return;i=i.parent}try{return this.parent=Ne,Ne=this,_t=!0,Ct=1<<++Ai,Ai<=lr?Ka(this):Cn(this),this.fn()}finally{Ai<=lr&&Ga(this),Ct=1<<--Ai,Ne=this.parent,_t=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ne===this?this.deferStop=!0:this.active&&(Cn(this),this.onStop&&this.onStop(),this.active=!1)}}function Cn(t){const{deps:i}=t;if(i.length){for(let e=0;e<i.length;e++)i[e].delete(t);i.length=0}}let _t=!0;const Ll=[];function mi(){Ll.push(_t),_t=!1}function gi(){const t=Ll.pop();_t=t===void 0?!0:t}function Te(t,i,e){if(_t&&Ne){let s=nr.get(t);s||nr.set(t,s=new Map);let r=s.get(e);r||s.set(e,r=Ir()),Ul(r)}}function Ul(t,i){let e=!1;Ai<=lr?kl(t)||(t.n|=Ct,e=!Ol(t)):e=!t.has(Ne),e&&(t.add(Ne),Ne.deps.push(t))}function ot(t,i,e,s,r,n){const l=nr.get(t);if(!l)return;let o=[];if(i==="clear")o=[...l.values()];else if(e==="length"&&R(t)){const a=Number(s);l.forEach((c,u)=>{(u==="length"||!oi(u)&&u>=a)&&o.push(c)})}else switch(e!==void 0&&o.push(l.get(e)),i){case"add":R(t)?Sr(e)&&o.push(l.get("length")):(o.push(l.get(Dt)),ii(t)&&o.push(l.get(or)));break;case"delete":R(t)||(o.push(l.get(Dt)),ii(t)&&o.push(l.get(or)));break;case"set":ii(t)&&o.push(l.get(Dt));break}if(o.length===1)o[0]&&ar(o[0]);else{const a=[];for(const c of o)c&&a.push(...c);ar(Ir(a))}}function ar(t,i){const e=R(t)?t:[...t];for(const s of e)s.computed&&Tn(s);for(const s of e)s.computed||Tn(s)}function Tn(t,i){(t!==Ne||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Ya=Er("__proto__,__v_isRef,__isVue"),Pl=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(oi)),En=Ja();function Ja(){const t={};return["includes","indexOf","lastIndexOf"].forEach(i=>{t[i]=function(...e){const s=H(this);for(let n=0,l=this.length;n<l;n++)Te(s,"get",n+"");const r=s[i](...e);return r===-1||r===!1?s[i](...e.map(H)):r}}),["push","pop","shift","unshift","splice"].forEach(i=>{t[i]=function(...e){mi();const s=H(this)[i].apply(this,e);return gi(),s}}),t}function Za(t){const i=H(this);return Te(i,"has",t),i.hasOwnProperty(t)}class Rl{constructor(i=!1,e=!1){this._isReadonly=i,this._shallow=e}get(i,e,s){const r=this._isReadonly,n=this._shallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return n;if(e==="__v_raw"&&s===(r?n?hc:Nl:n?Fl:Dl).get(i))return i;const l=R(i);if(!r){if(l&&B(En,e))return Reflect.get(En,e,s);if(e==="hasOwnProperty")return Za}const o=Reflect.get(i,e,s);return(oi(e)?Pl.has(e):Ya(e))||(r||Te(i,"get",e),n)?o:be(o)?l&&Sr(e)?o:o.value:Y(o)?r?zl(o):Ur(o):o}}class Ml extends Rl{constructor(i=!1){super(!1,i)}set(i,e,s,r){let n=i[e];if(Ui(n)&&be(n)&&!be(s))return!1;if(!this._shallow&&(!cr(s)&&!Ui(s)&&(n=H(n),s=H(s)),!R(i)&&be(n)&&!be(s)))return n.value=s,!0;const l=R(i)&&Sr(e)?Number(e)<i.length:B(i,e),o=Reflect.set(i,e,s,r);return i===H(r)&&(l?ai(s,n)&&ot(i,"set",e,s):ot(i,"add",e,s)),o}deleteProperty(i,e){const s=B(i,e);i[e];const r=Reflect.deleteProperty(i,e);return r&&s&&ot(i,"delete",e,void 0),r}has(i,e){const s=Reflect.has(i,e);return(!oi(e)||!Pl.has(e))&&Te(i,"has",e),s}ownKeys(i){return Te(i,"iterate",R(i)?"length":Dt),Reflect.ownKeys(i)}}class Qa extends Rl{constructor(i=!1){super(!0,i)}set(i,e){return!0}deleteProperty(i,e){return!0}}const ec=new Ml,tc=new Qa,ic=new Ml(!0),kr=t=>t,Cs=t=>Reflect.getPrototypeOf(t);function Bi(t,i,e=!1,s=!1){t=t.__v_raw;const r=H(t),n=H(i);e||(ai(i,n)&&Te(r,"get",i),Te(r,"get",n));const{has:l}=Cs(r),o=s?kr:e?Mr:Rr;if(l.call(r,i))return o(t.get(i));if(l.call(r,n))return o(t.get(n));t!==r&&t.get(i)}function Hi(t,i=!1){const e=this.__v_raw,s=H(e),r=H(t);return i||(ai(t,r)&&Te(s,"has",t),Te(s,"has",r)),t===r?e.has(t):e.has(t)||e.has(r)}function Wi(t,i=!1){return t=t.__v_raw,!i&&Te(H(t),"iterate",Dt),Reflect.get(t,"size",t)}function xn(t){t=H(t);const i=H(this);return Cs(i).has.call(i,t)||(i.add(t),ot(i,"add",t,t)),this}function An(t,i){i=H(i);const e=H(this),{has:s,get:r}=Cs(e);let n=s.call(e,t);n||(t=H(t),n=s.call(e,t));const l=r.call(e,t);return e.set(t,i),n?ai(i,l)&&ot(e,"set",t,i):ot(e,"add",t,i),this}function Sn(t){const i=H(this),{has:e,get:s}=Cs(i);let r=e.call(i,t);r||(t=H(t),r=e.call(i,t)),s&&s.call(i,t);const n=i.delete(t);return r&&ot(i,"delete",t,void 0),n}function $n(){const t=H(this),i=t.size!==0,e=t.clear();return i&&ot(t,"clear",void 0,void 0),e}function Xi(t,i){return function(s,r){const n=this,l=n.__v_raw,o=H(l),a=i?kr:t?Mr:Rr;return!t&&Te(o,"iterate",Dt),l.forEach((c,u)=>s.call(r,a(c),a(u),n))}}function qi(t,i,e){return function(...s){const r=this.__v_raw,n=H(r),l=ii(n),o=t==="entries"||t===Symbol.iterator&&l,a=t==="keys"&&l,c=r[t](...s),u=e?kr:i?Mr:Rr;return!i&&Te(n,"iterate",a?or:Dt),{next(){const{value:d,done:p}=c.next();return p?{value:d,done:p}:{value:o?[u(d[0]),u(d[1])]:u(d),done:p}},[Symbol.iterator](){return this}}}}function pt(t){return function(...i){return t==="delete"?!1:this}}function sc(){const t={get(n){return Bi(this,n)},get size(){return Wi(this)},has:Hi,add:xn,set:An,delete:Sn,clear:$n,forEach:Xi(!1,!1)},i={get(n){return Bi(this,n,!1,!0)},get size(){return Wi(this)},has:Hi,add:xn,set:An,delete:Sn,clear:$n,forEach:Xi(!1,!0)},e={get(n){return Bi(this,n,!0)},get size(){return Wi(this,!0)},has(n){return Hi.call(this,n,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:Xi(!0,!1)},s={get(n){return Bi(this,n,!0,!0)},get size(){return Wi(this,!0)},has(n){return Hi.call(this,n,!0)},add:pt("add"),set:pt("set"),delete:pt("delete"),clear:pt("clear"),forEach:Xi(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=qi(n,!1,!1),e[n]=qi(n,!0,!1),i[n]=qi(n,!1,!0),s[n]=qi(n,!0,!0)}),[t,e,i,s]}const[rc,nc,lc,oc]=sc();function Lr(t,i){const e=i?t?oc:lc:t?nc:rc;return(s,r,n)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(B(e,r)&&r in s?e:s,r,n)}const ac={get:Lr(!1,!1)},cc={get:Lr(!1,!0)},uc={get:Lr(!0,!1)},Dl=new WeakMap,Fl=new WeakMap,Nl=new WeakMap,hc=new WeakMap;function dc(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fc(t){return t.__v_skip||!Object.isExtensible(t)?0:dc(Pa(t))}function Ur(t){return Ui(t)?t:Pr(t,!1,ec,ac,Dl)}function pc(t){return Pr(t,!1,ic,cc,Fl)}function zl(t){return Pr(t,!0,tc,uc,Nl)}function Pr(t,i,e,s,r){if(!Y(t)||t.__v_raw&&!(i&&t.__v_isReactive))return t;const n=r.get(t);if(n)return n;const l=fc(t);if(l===0)return t;const o=new Proxy(t,l===2?s:e);return r.set(t,o),o}function si(t){return Ui(t)?si(t.__v_raw):!!(t&&t.__v_isReactive)}function Ui(t){return!!(t&&t.__v_isReadonly)}function cr(t){return!!(t&&t.__v_isShallow)}function Vl(t){return si(t)||Ui(t)}function H(t){const i=t&&t.__v_raw;return i?H(i):t}function jl(t){return ns(t,"__v_skip",!0),t}const Rr=t=>Y(t)?Ur(t):t,Mr=t=>Y(t)?zl(t):t;function mc(t){_t&&Ne&&(t=H(t),Ul(t.dep||(t.dep=Ir())))}function gc(t,i){t=H(t);const e=t.dep;e&&ar(e)}function be(t){return!!(t&&t.__v_isRef===!0)}function bc(t){return be(t)?t.value:t}const _c={get:(t,i,e)=>bc(Reflect.get(t,i,e)),set:(t,i,e,s)=>{const r=t[i];return be(r)&&!be(e)?(r.value=e,!0):Reflect.set(t,i,e,s)}};function Bl(t){return si(t)?t:new Proxy(t,_c)}class yc{constructor(i,e,s,r){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Or(i,()=>{this._dirty||(this._dirty=!0,gc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=s}get value(){const i=H(this);return mc(i),(i._dirty||!i._cacheable)&&(i._dirty=!1,i._value=i.effect.run()),i._value}set value(i){this._setter(i)}}function vc(t,i,e=!1){let s,r;const n=F(t);return n?(s=t,r=Ve):(s=t.get,r=t.set),new yc(s,r,n||!r,e)}function yt(t,i,e,s){let r;try{r=s?t(...s):t()}catch(n){Ts(n,i,e)}return r}function je(t,i,e,s){if(F(t)){const n=yt(t,i,e,s);return n&&El(n)&&n.catch(l=>{Ts(l,i,e)}),n}const r=[];for(let n=0;n<t.length;n++)r.push(je(t[n],i,e,s));return r}function Ts(t,i,e,s=!0){const r=i?i.vnode:null;if(i){let n=i.parent;const l=i.proxy,o=e;for(;n;){const c=n.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,l,o)===!1)return}n=n.parent}const a=i.appContext.config.errorHandler;if(a){yt(a,null,10,[t,l,o]);return}}wc(t,e,r,s)}function wc(t,i,e,s=!0){console.error(t)}let Pi=!1,ur=!1;const ce=[];let Ze=0;const ri=[];let nt=null,Ut=0;const Hl=Promise.resolve();let Dr=null;function Cc(t){const i=Dr||Hl;return t?i.then(this?t.bind(this):t):i}function Tc(t){let i=Ze+1,e=ce.length;for(;i<e;){const s=i+e>>>1,r=ce[s],n=Ri(r);n<t||n===t&&r.pre?i=s+1:e=s}return i}function Fr(t){(!ce.length||!ce.includes(t,Pi&&t.allowRecurse?Ze+1:Ze))&&(t.id==null?ce.push(t):ce.splice(Tc(t.id),0,t),Wl())}function Wl(){!Pi&&!ur&&(ur=!0,Dr=Hl.then(ql))}function Ec(t){const i=ce.indexOf(t);i>Ze&&ce.splice(i,1)}function xc(t){R(t)?ri.push(...t):(!nt||!nt.includes(t,t.allowRecurse?Ut+1:Ut))&&ri.push(t),Wl()}function In(t,i=Pi?Ze+1:0){for(;i<ce.length;i++){const e=ce[i];e&&e.pre&&(ce.splice(i,1),i--,e())}}function Xl(t){if(ri.length){const i=[...new Set(ri)];if(ri.length=0,nt){nt.push(...i);return}for(nt=i,nt.sort((e,s)=>Ri(e)-Ri(s)),Ut=0;Ut<nt.length;Ut++)nt[Ut]();nt=null,Ut=0}}const Ri=t=>t.id==null?1/0:t.id,Ac=(t,i)=>{const e=Ri(t)-Ri(i);if(e===0){if(t.pre&&!i.pre)return-1;if(i.pre&&!t.pre)return 1}return e};function ql(t){ur=!1,Pi=!0,ce.sort(Ac);const i=Ve;try{for(Ze=0;Ze<ce.length;Ze++){const e=ce[Ze];e&&e.active!==!1&&yt(e,null,14)}}finally{Ze=0,ce.length=0,Xl(),Pi=!1,Dr=null,(ce.length||ri.length)&&ql()}}function Sc(t,i,...e){if(t.isUnmounted)return;const s=t.vnode.props||K;let r=e;const n=i.startsWith("update:"),l=n&&i.slice(7);if(l&&l in s){const u=`${l==="modelValue"?"model":l}Modifiers`,{number:d,trim:p}=s[u]||K;p&&(r=e.map(b=>ne(b)?b.trim():b)),d&&(r=e.map(sr))}let o,a=s[o=Bs(i)]||s[o=Bs(tt(i))];!a&&n&&(a=s[o=Bs(pi(i))]),a&&je(a,t,6,r);const c=s[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,je(c,t,6,r)}}function Kl(t,i,e=!1){const s=i.emitsCache,r=s.get(t);if(r!==void 0)return r;const n=t.emits;let l={},o=!1;if(!F(t)){const a=c=>{const u=Kl(c,i,!0);u&&(o=!0,ue(l,u))};!e&&i.mixins.length&&i.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!n&&!o?(Y(t)&&s.set(t,null),null):(R(n)?n.forEach(a=>l[a]=null):ue(l,n),Y(t)&&s.set(t,l),l)}function Es(t,i){return!t||!gs(i)?!1:(i=i.slice(2).replace(/Once$/,""),B(t,i[0].toLowerCase()+i.slice(1))||B(t,pi(i))||B(t,i))}let Le=null,xs=null;function ls(t){const i=Le;return Le=t,xs=t&&t.type.__scopeId||null,i}function Gl(t){xs=t}function Yl(){xs=null}function $c(t,i=Le,e){if(!i||t._n)return t;const s=(...r)=>{s._d&&zn(-1);const n=ls(i);let l;try{l=t(...r)}finally{ls(n),s._d&&zn(1)}return l};return s._n=!0,s._c=!0,s._d=!0,s}function Hs(t){const{type:i,vnode:e,proxy:s,withProxy:r,props:n,propsOptions:[l],slots:o,attrs:a,emit:c,render:u,renderCache:d,data:p,setupState:b,ctx:y,inheritAttrs:E}=t;let P,U;const k=ls(t);try{if(e.shapeFlag&4){const L=r||s;P=Ye(u.call(L,L,d,n,b,p,y)),U=a}else{const L=i;P=Ye(L.length>1?L(n,{attrs:a,slots:o,emit:c}):L(n,null)),U=i.props?a:Ic(a)}}catch(L){Li.length=0,Ts(L,t,1),P=Qe(jt)}let $=P;if(U&&E!==!1){const L=Object.keys(U),{shapeFlag:le}=$;L.length&&le&7&&(l&&L.some(xr)&&(U=Oc(U,l)),$=ci($,U))}return e.dirs&&($=ci($),$.dirs=$.dirs?$.dirs.concat(e.dirs):e.dirs),e.transition&&($.transition=e.transition),P=$,ls(k),P}const Ic=t=>{let i;for(const e in t)(e==="class"||e==="style"||gs(e))&&((i||(i={}))[e]=t[e]);return i},Oc=(t,i)=>{const e={};for(const s in t)(!xr(s)||!(s.slice(9)in i))&&(e[s]=t[s]);return e};function kc(t,i,e){const{props:s,children:r,component:n}=t,{props:l,children:o,patchFlag:a}=i,c=n.emitsOptions;if(i.dirs||i.transition)return!0;if(e&&a>=0){if(a&1024)return!0;if(a&16)return s?On(s,l,c):!!l;if(a&8){const u=i.dynamicProps;for(let d=0;d<u.length;d++){const p=u[d];if(l[p]!==s[p]&&!Es(c,p))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:s===l?!1:s?l?On(s,l,c):!0:!!l;return!1}function On(t,i,e){const s=Object.keys(i);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const n=s[r];if(i[n]!==t[n]&&!Es(e,n))return!0}return!1}function Lc({vnode:t,parent:i},e){for(;i&&i.subTree===t;)(t=i.vnode).el=e,i=i.parent}const Jl="components";function Uc(t,i){return Rc(Jl,t,!0,i)||t}const Pc=Symbol.for("v-ndc");function Rc(t,i,e=!0,s=!1){const r=Le||ae;if(r){const n=r.type;if(t===Jl){const o=ku(n,!1);if(o&&(o===i||o===tt(i)||o===ys(tt(i))))return n}const l=kn(r[t]||n[t],i)||kn(r.appContext[t],i);return!l&&s?n:l}}function kn(t,i){return t&&(t[i]||t[tt(i)]||t[ys(tt(i))])}const Mc=t=>t.__isSuspense;function Dc(t,i){i&&i.pendingBranch?R(t)?i.effects.push(...t):i.effects.push(t):xc(t)}const Ki={};function Ws(t,i,e){return Zl(t,i,e)}function Zl(t,i,{immediate:e,deep:s,flush:r,onTrack:n,onTrigger:l}=K){var o;const a=qa()===((o=ae)==null?void 0:o.scope)?ae:null;let c,u=!1,d=!1;if(be(t)?(c=()=>t.value,u=cr(t)):si(t)?(c=()=>t,s=!0):R(t)?(d=!0,u=t.some(L=>si(L)||cr(L)),c=()=>t.map(L=>{if(be(L))return L.value;if(si(L))return Mt(L);if(F(L))return yt(L,a,2)})):F(t)?i?c=()=>yt(t,a,2):c=()=>{if(!(a&&a.isUnmounted))return p&&p(),je(t,a,3,[b])}:c=Ve,i&&s){const L=c;c=()=>Mt(L())}let p,b=L=>{p=k.onStop=()=>{yt(L,a,4)}},y;if(Di)if(b=Ve,i?e&&je(i,a,3,[c(),d?[]:void 0,b]):c(),r==="sync"){const L=Ru();y=L.__watcherHandles||(L.__watcherHandles=[])}else return Ve;let E=d?new Array(t.length).fill(Ki):Ki;const P=()=>{if(k.active)if(i){const L=k.run();(s||u||(d?L.some((le,xe)=>ai(le,E[xe])):ai(L,E)))&&(p&&p(),je(i,a,3,[L,E===Ki?void 0:d&&E[0]===Ki?[]:E,b]),E=L)}else k.run()};P.allowRecurse=!!i;let U;r==="sync"?U=P:r==="post"?U=()=>ve(P,a&&a.suspense):(P.pre=!0,a&&(P.id=a.uid),U=()=>Fr(P));const k=new Or(c,U);i?e?P():E=k.run():r==="post"?ve(k.run.bind(k),a&&a.suspense):k.run();const $=()=>{k.stop(),a&&a.scope&&Ar(a.scope.effects,k)};return y&&y.push($),$}function Fc(t,i,e){const s=this.proxy,r=ne(t)?t.includes(".")?Ql(s,t):()=>s[t]:t.bind(s,s);let n;F(i)?n=i:(n=i.handler,e=i);const l=ae;ui(this);const o=Zl(r,n.bind(s),e);return l?ui(l):Nt(),o}function Ql(t,i){const e=i.split(".");return()=>{let s=t;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}function Mt(t,i){if(!Y(t)||t.__v_skip||(i=i||new Set,i.has(t)))return t;if(i.add(t),be(t))Mt(t.value,i);else if(R(t))for(let e=0;e<t.length;e++)Mt(t[e],i);else if(bs(t)||ii(t))t.forEach(e=>{Mt(e,i)});else if(Al(t))for(const e in t)Mt(t[e],i);return t}function Xs(t,i){const e=Le;if(e===null)return t;const s=Is(e)||e.proxy,r=t.dirs||(t.dirs=[]);for(let n=0;n<i.length;n++){let[l,o,a,c=K]=i[n];l&&(F(l)&&(l={mounted:l,updated:l}),l.deep&&Mt(o),r.push({dir:l,instance:s,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function It(t,i,e,s){const r=t.dirs,n=i&&i.dirs;for(let l=0;l<r.length;l++){const o=r[l];n&&(o.oldValue=n[l].value);let a=o.dir[s];a&&(mi(),je(a,e,8,[t.el,o,t,i]),gi())}}const Qi=t=>!!t.type.__asyncLoader,eo=t=>t.type.__isKeepAlive;function Nc(t,i){to(t,"a",i)}function zc(t,i){to(t,"da",i)}function to(t,i,e=ae){const s=t.__wdc||(t.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(As(i,s,e),e){let r=e.parent;for(;r&&r.parent;)eo(r.parent.vnode)&&Vc(s,i,e,r),r=r.parent}}function Vc(t,i,e,s){const r=As(i,t,s,!0);io(()=>{Ar(s[i],r)},e)}function As(t,i,e=ae,s=!1){if(e){const r=e[t]||(e[t]=[]),n=i.__weh||(i.__weh=(...l)=>{if(e.isUnmounted)return;mi(),ui(e);const o=je(i,e,t,l);return Nt(),gi(),o});return s?r.unshift(n):r.push(n),n}}const ht=t=>(i,e=ae)=>(!Di||t==="sp")&&As(t,(...s)=>i(...s),e),jc=ht("bm"),Bc=ht("m"),Hc=ht("bu"),Wc=ht("u"),Xc=ht("bum"),io=ht("um"),qc=ht("sp"),Kc=ht("rtg"),Gc=ht("rtc");function Yc(t,i=ae){As("ec",t,i)}function Jc(t,i,e,s){let r;const n=e&&e[s];if(R(t)||ne(t)){r=new Array(t.length);for(let l=0,o=t.length;l<o;l++)r[l]=i(t[l],l,void 0,n&&n[l])}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=i(l+1,l,void 0,n&&n[l])}else if(Y(t))if(t[Symbol.iterator])r=Array.from(t,(l,o)=>i(l,o,void 0,n&&n[o]));else{const l=Object.keys(t);r=new Array(l.length);for(let o=0,a=l.length;o<a;o++){const c=l[o];r[o]=i(t[c],c,o,n&&n[o])}}else r=[];return e&&(e[s]=r),r}const hr=t=>t?po(t)?Is(t)||t.proxy:hr(t.parent):null,ki=ue(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>hr(t.parent),$root:t=>hr(t.root),$emit:t=>t.emit,$options:t=>Nr(t),$forceUpdate:t=>t.f||(t.f=()=>Fr(t.update)),$nextTick:t=>t.n||(t.n=Cc.bind(t.proxy)),$watch:t=>Fc.bind(t)}),qs=(t,i)=>t!==K&&!t.__isScriptSetup&&B(t,i),Zc={get({_:t},i){const{ctx:e,setupState:s,data:r,props:n,accessCache:l,type:o,appContext:a}=t;let c;if(i[0]!=="$"){const b=l[i];if(b!==void 0)switch(b){case 1:return s[i];case 2:return r[i];case 4:return e[i];case 3:return n[i]}else{if(qs(s,i))return l[i]=1,s[i];if(r!==K&&B(r,i))return l[i]=2,r[i];if((c=t.propsOptions[0])&&B(c,i))return l[i]=3,n[i];if(e!==K&&B(e,i))return l[i]=4,e[i];dr&&(l[i]=0)}}const u=ki[i];let d,p;if(u)return i==="$attrs"&&Te(t,"get",i),u(t);if((d=o.__cssModules)&&(d=d[i]))return d;if(e!==K&&B(e,i))return l[i]=4,e[i];if(p=a.config.globalProperties,B(p,i))return p[i]},set({_:t},i,e){const{data:s,setupState:r,ctx:n}=t;return qs(r,i)?(r[i]=e,!0):s!==K&&B(s,i)?(s[i]=e,!0):B(t.props,i)||i[0]==="$"&&i.slice(1)in t?!1:(n[i]=e,!0)},has({_:{data:t,setupState:i,accessCache:e,ctx:s,appContext:r,propsOptions:n}},l){let o;return!!e[l]||t!==K&&B(t,l)||qs(i,l)||(o=n[0])&&B(o,l)||B(s,l)||B(ki,l)||B(r.config.globalProperties,l)},defineProperty(t,i,e){return e.get!=null?t._.accessCache[i]=0:B(e,"value")&&this.set(t,i,e.value,null),Reflect.defineProperty(t,i,e)}};function Ln(t){return R(t)?t.reduce((i,e)=>(i[e]=null,i),{}):t}let dr=!0;function Qc(t){const i=Nr(t),e=t.proxy,s=t.ctx;dr=!1,i.beforeCreate&&Un(i.beforeCreate,t,"bc");const{data:r,computed:n,methods:l,watch:o,provide:a,inject:c,created:u,beforeMount:d,mounted:p,beforeUpdate:b,updated:y,activated:E,deactivated:P,beforeDestroy:U,beforeUnmount:k,destroyed:$,unmounted:L,render:le,renderTracked:xe,renderTriggered:Q,errorCaptured:ee,serverPrefetch:he,expose:oe,inheritAttrs:de,components:ft,directives:Ht,filters:zs}=i;if(c&&eu(c,s,null),l)for(const te in l){const X=l[te];F(X)&&(s[te]=X.bind(e))}if(r){const te=r.call(e,e);Y(te)&&(t.data=Ur(te))}if(dr=!0,n)for(const te in n){const X=n[te],St=F(X)?X.bind(e,e):F(X.get)?X.get.bind(e,e):Ve,Vi=!F(X)&&F(X.set)?X.set.bind(e):Ve,$t=Uu({get:St,set:Vi});Object.defineProperty(s,te,{enumerable:!0,configurable:!0,get:()=>$t.value,set:He=>$t.value=He})}if(o)for(const te in o)so(o[te],s,e,te);if(a){const te=F(a)?a.call(e):a;Reflect.ownKeys(te).forEach(X=>{lu(X,te[X])})}u&&Un(u,t,"c");function fe(te,X){R(X)?X.forEach(St=>te(St.bind(e))):X&&te(X.bind(e))}if(fe(jc,d),fe(Bc,p),fe(Hc,b),fe(Wc,y),fe(Nc,E),fe(zc,P),fe(Yc,ee),fe(Gc,xe),fe(Kc,Q),fe(Xc,k),fe(io,L),fe(qc,he),R(oe))if(oe.length){const te=t.exposed||(t.exposed={});oe.forEach(X=>{Object.defineProperty(te,X,{get:()=>e[X],set:St=>e[X]=St})})}else t.exposed||(t.exposed={});le&&t.render===Ve&&(t.render=le),de!=null&&(t.inheritAttrs=de),ft&&(t.components=ft),Ht&&(t.directives=Ht)}function eu(t,i,e=Ve){R(t)&&(t=fr(t));for(const s in t){const r=t[s];let n;Y(r)?"default"in r?n=es(r.from||s,r.default,!0):n=es(r.from||s):n=es(r),be(n)?Object.defineProperty(i,s,{enumerable:!0,configurable:!0,get:()=>n.value,set:l=>n.value=l}):i[s]=n}}function Un(t,i,e){je(R(t)?t.map(s=>s.bind(i.proxy)):t.bind(i.proxy),i,e)}function so(t,i,e,s){const r=s.includes(".")?Ql(e,s):()=>e[s];if(ne(t)){const n=i[t];F(n)&&Ws(r,n)}else if(F(t))Ws(r,t.bind(e));else if(Y(t))if(R(t))t.forEach(n=>so(n,i,e,s));else{const n=F(t.handler)?t.handler.bind(e):i[t.handler];F(n)&&Ws(r,n,t)}}function Nr(t){const i=t.type,{mixins:e,extends:s}=i,{mixins:r,optionsCache:n,config:{optionMergeStrategies:l}}=t.appContext,o=n.get(i);let a;return o?a=o:!r.length&&!e&&!s?a=i:(a={},r.length&&r.forEach(c=>os(a,c,l,!0)),os(a,i,l)),Y(i)&&n.set(i,a),a}function os(t,i,e,s=!1){const{mixins:r,extends:n}=i;n&&os(t,n,e,!0),r&&r.forEach(l=>os(t,l,e,!0));for(const l in i)if(!(s&&l==="expose")){const o=tu[l]||e&&e[l];t[l]=o?o(t[l],i[l]):i[l]}return t}const tu={data:Pn,props:Rn,emits:Rn,methods:Si,computed:Si,beforeCreate:me,created:me,beforeMount:me,mounted:me,beforeUpdate:me,updated:me,beforeDestroy:me,beforeUnmount:me,destroyed:me,unmounted:me,activated:me,deactivated:me,errorCaptured:me,serverPrefetch:me,components:Si,directives:Si,watch:su,provide:Pn,inject:iu};function Pn(t,i){return i?t?function(){return ue(F(t)?t.call(this,this):t,F(i)?i.call(this,this):i)}:i:t}function iu(t,i){return Si(fr(t),fr(i))}function fr(t){if(R(t)){const i={};for(let e=0;e<t.length;e++)i[t[e]]=t[e];return i}return t}function me(t,i){return t?[...new Set([].concat(t,i))]:i}function Si(t,i){return t?ue(Object.create(null),t,i):i}function Rn(t,i){return t?R(t)&&R(i)?[...new Set([...t,...i])]:ue(Object.create(null),Ln(t),Ln(i??{})):i}function su(t,i){if(!t)return i;if(!i)return t;const e=ue(Object.create(null),t);for(const s in i)e[s]=me(t[s],i[s]);return e}function ro(){return{app:null,config:{isNativeTag:ka,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ru=0;function nu(t,i){return function(s,r=null){F(s)||(s=ue({},s)),r!=null&&!Y(r)&&(r=null);const n=ro(),l=new WeakSet;let o=!1;const a=n.app={_uid:ru++,_component:s,_props:r,_container:null,_context:n,_instance:null,version:Mu,get config(){return n.config},set config(c){},use(c,...u){return l.has(c)||(c&&F(c.install)?(l.add(c),c.install(a,...u)):F(c)&&(l.add(c),c(a,...u))),a},mixin(c){return n.mixins.includes(c)||n.mixins.push(c),a},component(c,u){return u?(n.components[c]=u,a):n.components[c]},directive(c,u){return u?(n.directives[c]=u,a):n.directives[c]},mount(c,u,d){if(!o){const p=Qe(s,r);return p.appContext=n,u&&i?i(p,c):t(p,c,d),o=!0,a._container=c,c.__vue_app__=a,Is(p.component)||p.component.proxy}},unmount(){o&&(t(null,a._container),delete a._container.__vue_app__)},provide(c,u){return n.provides[c]=u,a},runWithContext(c){as=a;try{return c()}finally{as=null}}};return a}}let as=null;function lu(t,i){if(ae){let e=ae.provides;const s=ae.parent&&ae.parent.provides;s===e&&(e=ae.provides=Object.create(s)),e[t]=i}}function es(t,i,e=!1){const s=ae||Le;if(s||as){const r=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:as._context.provides;if(r&&t in r)return r[t];if(arguments.length>1)return e&&F(i)?i.call(s&&s.proxy):i}}function ou(t,i,e,s=!1){const r={},n={};ns(n,$s,1),t.propsDefaults=Object.create(null),no(t,i,r,n);for(const l in t.propsOptions[0])l in r||(r[l]=void 0);e?t.props=s?r:pc(r):t.type.props?t.props=r:t.props=n,t.attrs=n}function au(t,i,e,s){const{props:r,attrs:n,vnode:{patchFlag:l}}=t,o=H(r),[a]=t.propsOptions;let c=!1;if((s||l>0)&&!(l&16)){if(l&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let p=u[d];if(Es(t.emitsOptions,p))continue;const b=i[p];if(a)if(B(n,p))b!==n[p]&&(n[p]=b,c=!0);else{const y=tt(p);r[y]=pr(a,o,y,b,t,!1)}else b!==n[p]&&(n[p]=b,c=!0)}}}else{no(t,i,r,n)&&(c=!0);let u;for(const d in o)(!i||!B(i,d)&&((u=pi(d))===d||!B(i,u)))&&(a?e&&(e[d]!==void 0||e[u]!==void 0)&&(r[d]=pr(a,o,d,void 0,t,!0)):delete r[d]);if(n!==o)for(const d in n)(!i||!B(i,d))&&(delete n[d],c=!0)}c&&ot(t,"set","$attrs")}function no(t,i,e,s){const[r,n]=t.propsOptions;let l=!1,o;if(i)for(let a in i){if(Ji(a))continue;const c=i[a];let u;r&&B(r,u=tt(a))?!n||!n.includes(u)?e[u]=c:(o||(o={}))[u]=c:Es(t.emitsOptions,a)||(!(a in s)||c!==s[a])&&(s[a]=c,l=!0)}if(n){const a=H(e),c=o||K;for(let u=0;u<n.length;u++){const d=n[u];e[d]=pr(r,a,d,c[d],t,!B(c,d))}}return l}function pr(t,i,e,s,r,n){const l=t[e];if(l!=null){const o=B(l,"default");if(o&&s===void 0){const a=l.default;if(l.type!==Function&&!l.skipFactory&&F(a)){const{propsDefaults:c}=r;e in c?s=c[e]:(ui(r),s=c[e]=a.call(null,i),Nt())}else s=a}l[0]&&(n&&!o?s=!1:l[1]&&(s===""||s===pi(e))&&(s=!0))}return s}function lo(t,i,e=!1){const s=i.propsCache,r=s.get(t);if(r)return r;const n=t.props,l={},o=[];let a=!1;if(!F(t)){const u=d=>{a=!0;const[p,b]=lo(d,i,!0);ue(l,p),b&&o.push(...b)};!e&&i.mixins.length&&i.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!n&&!a)return Y(t)&&s.set(t,ti),ti;if(R(n))for(let u=0;u<n.length;u++){const d=tt(n[u]);Mn(d)&&(l[d]=K)}else if(n)for(const u in n){const d=tt(u);if(Mn(d)){const p=n[u],b=l[d]=R(p)||F(p)?{type:p}:ue({},p);if(b){const y=Nn(Boolean,b.type),E=Nn(String,b.type);b[0]=y>-1,b[1]=E<0||y<E,(y>-1||B(b,"default"))&&o.push(d)}}}const c=[l,o];return Y(t)&&s.set(t,c),c}function Mn(t){return t[0]!=="$"}function Dn(t){const i=t&&t.toString().match(/^\s*(function|class) (\w+)/);return i?i[2]:t===null?"null":""}function Fn(t,i){return Dn(t)===Dn(i)}function Nn(t,i){return R(i)?i.findIndex(e=>Fn(e,t)):F(i)&&Fn(i,t)?0:-1}const oo=t=>t[0]==="_"||t==="$stable",zr=t=>R(t)?t.map(Ye):[Ye(t)],cu=(t,i,e)=>{if(i._n)return i;const s=$c((...r)=>zr(i(...r)),e);return s._c=!1,s},ao=(t,i,e)=>{const s=t._ctx;for(const r in t){if(oo(r))continue;const n=t[r];if(F(n))i[r]=cu(r,n,s);else if(n!=null){const l=zr(n);i[r]=()=>l}}},co=(t,i)=>{const e=zr(i);t.slots.default=()=>e},uu=(t,i)=>{if(t.vnode.shapeFlag&32){const e=i._;e?(t.slots=H(i),ns(i,"_",e)):ao(i,t.slots={})}else t.slots={},i&&co(t,i);ns(t.slots,$s,1)},hu=(t,i,e)=>{const{vnode:s,slots:r}=t;let n=!0,l=K;if(s.shapeFlag&32){const o=i._;o?e&&o===1?n=!1:(ue(r,i),!e&&o===1&&delete r._):(n=!i.$stable,ao(i,r)),l=i}else i&&(co(t,i),l={default:1});if(n)for(const o in r)!oo(o)&&l[o]==null&&delete r[o]};function mr(t,i,e,s,r=!1){if(R(t)){t.forEach((p,b)=>mr(p,i&&(R(i)?i[b]:i),e,s,r));return}if(Qi(s)&&!r)return;const n=s.shapeFlag&4?Is(s.component)||s.component.proxy:s.el,l=r?null:n,{i:o,r:a}=t,c=i&&i.r,u=o.refs===K?o.refs={}:o.refs,d=o.setupState;if(c!=null&&c!==a&&(ne(c)?(u[c]=null,B(d,c)&&(d[c]=null)):be(c)&&(c.value=null)),F(a))yt(a,o,12,[l,u]);else{const p=ne(a),b=be(a);if(p||b){const y=()=>{if(t.f){const E=p?B(d,a)?d[a]:u[a]:a.value;r?R(E)&&Ar(E,n):R(E)?E.includes(n)||E.push(n):p?(u[a]=[n],B(d,a)&&(d[a]=u[a])):(a.value=[n],t.k&&(u[t.k]=a.value))}else p?(u[a]=l,B(d,a)&&(d[a]=l)):b&&(a.value=l,t.k&&(u[t.k]=l))};l?(y.id=-1,ve(y,e)):y()}}}const ve=Dc;function du(t){return fu(t)}function fu(t,i){const e=rr();e.__VUE__=!0;const{insert:s,remove:r,patchProp:n,createElement:l,createText:o,createComment:a,setText:c,setElementText:u,parentNode:d,nextSibling:p,setScopeId:b=Ve,insertStaticContent:y}=t,E=(h,f,g,_=null,v=null,T=null,A=!1,C=null,x=!!f.dynamicChildren)=>{if(h===f)return;h&&!wi(h,f)&&(_=ji(h),He(h,v,T,!0),h=null),f.patchFlag===-2&&(x=!1,f.dynamicChildren=null);const{type:w,ref:I,shapeFlag:S}=f;switch(w){case Ss:P(h,f,g,_);break;case jt:U(h,f,g,_);break;case Ks:h==null&&k(f,g,_,A);break;case Ge:ft(h,f,g,_,v,T,A,C,x);break;default:S&1?le(h,f,g,_,v,T,A,C,x):S&6?Ht(h,f,g,_,v,T,A,C,x):(S&64||S&128)&&w.process(h,f,g,_,v,T,A,C,x,Wt)}I!=null&&v&&mr(I,h&&h.ref,T,f||h,!f)},P=(h,f,g,_)=>{if(h==null)s(f.el=o(f.children),g,_);else{const v=f.el=h.el;f.children!==h.children&&c(v,f.children)}},U=(h,f,g,_)=>{h==null?s(f.el=a(f.children||""),g,_):f.el=h.el},k=(h,f,g,_)=>{[h.el,h.anchor]=y(h.children,f,g,_,h.el,h.anchor)},$=({el:h,anchor:f},g,_)=>{let v;for(;h&&h!==f;)v=p(h),s(h,g,_),h=v;s(f,g,_)},L=({el:h,anchor:f})=>{let g;for(;h&&h!==f;)g=p(h),r(h),h=g;r(f)},le=(h,f,g,_,v,T,A,C,x)=>{A=A||f.type==="svg",h==null?xe(f,g,_,v,T,A,C,x):he(h,f,v,T,A,C,x)},xe=(h,f,g,_,v,T,A,C)=>{let x,w;const{type:I,props:S,shapeFlag:O,transition:M,dirs:V}=h;if(x=h.el=l(h.type,T,S&&S.is,S),O&8?u(x,h.children):O&16&&ee(h.children,x,null,_,v,T&&I!=="foreignObject",A,C),V&&It(h,null,_,"created"),Q(x,h,h.scopeId,A,_),S){for(const W in S)W!=="value"&&!Ji(W)&&n(x,W,null,S[W],T,h.children,_,v,it);"value"in S&&n(x,"value",null,S.value),(w=S.onVnodeBeforeMount)&&Xe(w,_,h)}V&&It(h,null,_,"beforeMount");const q=pu(v,M);q&&M.beforeEnter(x),s(x,f,g),((w=S&&S.onVnodeMounted)||q||V)&&ve(()=>{w&&Xe(w,_,h),q&&M.enter(x),V&&It(h,null,_,"mounted")},v)},Q=(h,f,g,_,v)=>{if(g&&b(h,g),_)for(let T=0;T<_.length;T++)b(h,_[T]);if(v){let T=v.subTree;if(f===T){const A=v.vnode;Q(h,A,A.scopeId,A.slotScopeIds,v.parent)}}},ee=(h,f,g,_,v,T,A,C,x=0)=>{for(let w=x;w<h.length;w++){const I=h[w]=C?gt(h[w]):Ye(h[w]);E(null,I,f,g,_,v,T,A,C)}},he=(h,f,g,_,v,T,A)=>{const C=f.el=h.el;let{patchFlag:x,dynamicChildren:w,dirs:I}=f;x|=h.patchFlag&16;const S=h.props||K,O=f.props||K;let M;g&&Ot(g,!1),(M=O.onVnodeBeforeUpdate)&&Xe(M,g,f,h),I&&It(f,h,g,"beforeUpdate"),g&&Ot(g,!0);const V=v&&f.type!=="foreignObject";if(w?oe(h.dynamicChildren,w,C,g,_,V,T):A||X(h,f,C,null,g,_,V,T,!1),x>0){if(x&16)de(C,f,S,O,g,_,v);else if(x&2&&S.class!==O.class&&n(C,"class",null,O.class,v),x&4&&n(C,"style",S.style,O.style,v),x&8){const q=f.dynamicProps;for(let W=0;W<q.length;W++){const se=q[W],Ue=S[se],Xt=O[se];(Xt!==Ue||se==="value")&&n(C,se,Ue,Xt,v,h.children,g,_,it)}}x&1&&h.children!==f.children&&u(C,f.children)}else!A&&w==null&&de(C,f,S,O,g,_,v);((M=O.onVnodeUpdated)||I)&&ve(()=>{M&&Xe(M,g,f,h),I&&It(f,h,g,"updated")},_)},oe=(h,f,g,_,v,T,A)=>{for(let C=0;C<f.length;C++){const x=h[C],w=f[C],I=x.el&&(x.type===Ge||!wi(x,w)||x.shapeFlag&70)?d(x.el):g;E(x,w,I,null,_,v,T,A,!0)}},de=(h,f,g,_,v,T,A)=>{if(g!==_){if(g!==K)for(const C in g)!Ji(C)&&!(C in _)&&n(h,C,g[C],null,A,f.children,v,T,it);for(const C in _){if(Ji(C))continue;const x=_[C],w=g[C];x!==w&&C!=="value"&&n(h,C,w,x,A,f.children,v,T,it)}"value"in _&&n(h,"value",g.value,_.value)}},ft=(h,f,g,_,v,T,A,C,x)=>{const w=f.el=h?h.el:o(""),I=f.anchor=h?h.anchor:o("");let{patchFlag:S,dynamicChildren:O,slotScopeIds:M}=f;M&&(C=C?C.concat(M):M),h==null?(s(w,g,_),s(I,g,_),ee(f.children,g,I,v,T,A,C,x)):S>0&&S&64&&O&&h.dynamicChildren?(oe(h.dynamicChildren,O,g,v,T,A,C),(f.key!=null||v&&f===v.subTree)&&uo(h,f,!0)):X(h,f,g,I,v,T,A,C,x)},Ht=(h,f,g,_,v,T,A,C,x)=>{f.slotScopeIds=C,h==null?f.shapeFlag&512?v.ctx.activate(f,g,_,A,x):zs(f,g,_,v,T,A,x):pn(h,f,x)},zs=(h,f,g,_,v,T,A)=>{const C=h.component=Au(h,_,v);if(eo(h)&&(C.ctx.renderer=Wt),Su(C),C.asyncDep){if(v&&v.registerDep(C,fe),!h.el){const x=C.subTree=Qe(jt);U(null,x,f,g)}return}fe(C,h,f,g,v,T,A)},pn=(h,f,g)=>{const _=f.component=h.component;if(kc(h,f,g))if(_.asyncDep&&!_.asyncResolved){te(_,f,g);return}else _.next=f,Ec(_.update),_.update();else f.el=h.el,_.vnode=f},fe=(h,f,g,_,v,T,A)=>{const C=()=>{if(h.isMounted){let{next:I,bu:S,u:O,parent:M,vnode:V}=h,q=I,W;Ot(h,!1),I?(I.el=V.el,te(h,I,A)):I=V,S&&Zi(S),(W=I.props&&I.props.onVnodeBeforeUpdate)&&Xe(W,M,I,V),Ot(h,!0);const se=Hs(h),Ue=h.subTree;h.subTree=se,E(Ue,se,d(Ue.el),ji(Ue),h,v,T),I.el=se.el,q===null&&Lc(h,se.el),O&&ve(O,v),(W=I.props&&I.props.onVnodeUpdated)&&ve(()=>Xe(W,M,I,V),v)}else{let I;const{el:S,props:O}=f,{bm:M,m:V,parent:q}=h,W=Qi(f);if(Ot(h,!1),M&&Zi(M),!W&&(I=O&&O.onVnodeBeforeMount)&&Xe(I,q,f),Ot(h,!0),S&&js){const se=()=>{h.subTree=Hs(h),js(S,h.subTree,h,v,null)};W?f.type.__asyncLoader().then(()=>!h.isUnmounted&&se()):se()}else{const se=h.subTree=Hs(h);E(null,se,g,_,h,v,T),f.el=se.el}if(V&&ve(V,v),!W&&(I=O&&O.onVnodeMounted)){const se=f;ve(()=>Xe(I,q,se),v)}(f.shapeFlag&256||q&&Qi(q.vnode)&&q.vnode.shapeFlag&256)&&h.a&&ve(h.a,v),h.isMounted=!0,f=g=_=null}},x=h.effect=new Or(C,()=>Fr(w),h.scope),w=h.update=()=>x.run();w.id=h.uid,Ot(h,!0),w()},te=(h,f,g)=>{f.component=h;const _=h.vnode.props;h.vnode=f,h.next=null,au(h,f.props,_,g),hu(h,f.children,g),mi(),In(),gi()},X=(h,f,g,_,v,T,A,C,x=!1)=>{const w=h&&h.children,I=h?h.shapeFlag:0,S=f.children,{patchFlag:O,shapeFlag:M}=f;if(O>0){if(O&128){Vi(w,S,g,_,v,T,A,C,x);return}else if(O&256){St(w,S,g,_,v,T,A,C,x);return}}M&8?(I&16&&it(w,v,T),S!==w&&u(g,S)):I&16?M&16?Vi(w,S,g,_,v,T,A,C,x):it(w,v,T,!0):(I&8&&u(g,""),M&16&&ee(S,g,_,v,T,A,C,x))},St=(h,f,g,_,v,T,A,C,x)=>{h=h||ti,f=f||ti;const w=h.length,I=f.length,S=Math.min(w,I);let O;for(O=0;O<S;O++){const M=f[O]=x?gt(f[O]):Ye(f[O]);E(h[O],M,g,null,v,T,A,C,x)}w>I?it(h,v,T,!0,!1,S):ee(f,g,_,v,T,A,C,x,S)},Vi=(h,f,g,_,v,T,A,C,x)=>{let w=0;const I=f.length;let S=h.length-1,O=I-1;for(;w<=S&&w<=O;){const M=h[w],V=f[w]=x?gt(f[w]):Ye(f[w]);if(wi(M,V))E(M,V,g,null,v,T,A,C,x);else break;w++}for(;w<=S&&w<=O;){const M=h[S],V=f[O]=x?gt(f[O]):Ye(f[O]);if(wi(M,V))E(M,V,g,null,v,T,A,C,x);else break;S--,O--}if(w>S){if(w<=O){const M=O+1,V=M<I?f[M].el:_;for(;w<=O;)E(null,f[w]=x?gt(f[w]):Ye(f[w]),g,V,v,T,A,C,x),w++}}else if(w>O)for(;w<=S;)He(h[w],v,T,!0),w++;else{const M=w,V=w,q=new Map;for(w=V;w<=O;w++){const Ae=f[w]=x?gt(f[w]):Ye(f[w]);Ae.key!=null&&q.set(Ae.key,w)}let W,se=0;const Ue=O-V+1;let Xt=!1,bn=0;const vi=new Array(Ue);for(w=0;w<Ue;w++)vi[w]=0;for(w=M;w<=S;w++){const Ae=h[w];if(se>=Ue){He(Ae,v,T,!0);continue}let We;if(Ae.key!=null)We=q.get(Ae.key);else for(W=V;W<=O;W++)if(vi[W-V]===0&&wi(Ae,f[W])){We=W;break}We===void 0?He(Ae,v,T,!0):(vi[We-V]=w+1,We>=bn?bn=We:Xt=!0,E(Ae,f[We],g,null,v,T,A,C,x),se++)}const _n=Xt?mu(vi):ti;for(W=_n.length-1,w=Ue-1;w>=0;w--){const Ae=V+w,We=f[Ae],yn=Ae+1<I?f[Ae+1].el:_;vi[w]===0?E(null,We,g,yn,v,T,A,C,x):Xt&&(W<0||w!==_n[W]?$t(We,g,yn,2):W--)}}},$t=(h,f,g,_,v=null)=>{const{el:T,type:A,transition:C,children:x,shapeFlag:w}=h;if(w&6){$t(h.component.subTree,f,g,_);return}if(w&128){h.suspense.move(f,g,_);return}if(w&64){A.move(h,f,g,Wt);return}if(A===Ge){s(T,f,g);for(let S=0;S<x.length;S++)$t(x[S],f,g,_);s(h.anchor,f,g);return}if(A===Ks){$(h,f,g);return}if(_!==2&&w&1&&C)if(_===0)C.beforeEnter(T),s(T,f,g),ve(()=>C.enter(T),v);else{const{leave:S,delayLeave:O,afterLeave:M}=C,V=()=>s(T,f,g),q=()=>{S(T,()=>{V(),M&&M()})};O?O(T,V,q):q()}else s(T,f,g)},He=(h,f,g,_=!1,v=!1)=>{const{type:T,props:A,ref:C,children:x,dynamicChildren:w,shapeFlag:I,patchFlag:S,dirs:O}=h;if(C!=null&&mr(C,null,g,h,!0),I&256){f.ctx.deactivate(h);return}const M=I&1&&O,V=!Qi(h);let q;if(V&&(q=A&&A.onVnodeBeforeUnmount)&&Xe(q,f,h),I&6)$a(h.component,g,_);else{if(I&128){h.suspense.unmount(g,_);return}M&&It(h,null,f,"beforeUnmount"),I&64?h.type.remove(h,f,g,v,Wt,_):w&&(T!==Ge||S>0&&S&64)?it(w,f,g,!1,!0):(T===Ge&&S&384||!v&&I&16)&&it(x,f,g),_&&mn(h)}(V&&(q=A&&A.onVnodeUnmounted)||M)&&ve(()=>{q&&Xe(q,f,h),M&&It(h,null,f,"unmounted")},g)},mn=h=>{const{type:f,el:g,anchor:_,transition:v}=h;if(f===Ge){Sa(g,_);return}if(f===Ks){L(h);return}const T=()=>{r(g),v&&!v.persisted&&v.afterLeave&&v.afterLeave()};if(h.shapeFlag&1&&v&&!v.persisted){const{leave:A,delayLeave:C}=v,x=()=>A(g,T);C?C(h.el,T,x):x()}else T()},Sa=(h,f)=>{let g;for(;h!==f;)g=p(h),r(h),h=g;r(f)},$a=(h,f,g)=>{const{bum:_,scope:v,update:T,subTree:A,um:C}=h;_&&Zi(_),v.stop(),T&&(T.active=!1,He(A,h,f,g)),C&&ve(C,f),ve(()=>{h.isUnmounted=!0},f),f&&f.pendingBranch&&!f.isUnmounted&&h.asyncDep&&!h.asyncResolved&&h.suspenseId===f.pendingId&&(f.deps--,f.deps===0&&f.resolve())},it=(h,f,g,_=!1,v=!1,T=0)=>{for(let A=T;A<h.length;A++)He(h[A],f,g,_,v)},ji=h=>h.shapeFlag&6?ji(h.component.subTree):h.shapeFlag&128?h.suspense.next():p(h.anchor||h.el),gn=(h,f,g)=>{h==null?f._vnode&&He(f._vnode,null,null,!0):E(f._vnode||null,h,f,null,null,null,g),In(),Xl(),f._vnode=h},Wt={p:E,um:He,m:$t,r:mn,mt:zs,mc:ee,pc:X,pbc:oe,n:ji,o:t};let Vs,js;return i&&([Vs,js]=i(Wt)),{render:gn,hydrate:Vs,createApp:nu(gn,Vs)}}function Ot({effect:t,update:i},e){t.allowRecurse=i.allowRecurse=e}function pu(t,i){return(!t||t&&!t.pendingBranch)&&i&&!i.persisted}function uo(t,i,e=!1){const s=t.children,r=i.children;if(R(s)&&R(r))for(let n=0;n<s.length;n++){const l=s[n];let o=r[n];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[n]=gt(r[n]),o.el=l.el),e||uo(l,o)),o.type===Ss&&(o.el=l.el)}}function mu(t){const i=t.slice(),e=[0];let s,r,n,l,o;const a=t.length;for(s=0;s<a;s++){const c=t[s];if(c!==0){if(r=e[e.length-1],t[r]<c){i[s]=r,e.push(s);continue}for(n=0,l=e.length-1;n<l;)o=n+l>>1,t[e[o]]<c?n=o+1:l=o;c<t[e[n]]&&(n>0&&(i[s]=e[n-1]),e[n]=s)}}for(n=e.length,l=e[n-1];n-- >0;)e[n]=l,l=i[l];return e}const gu=t=>t.__isTeleport,Ge=Symbol.for("v-fgt"),Ss=Symbol.for("v-txt"),jt=Symbol.for("v-cmt"),Ks=Symbol.for("v-stc"),Li=[];let ze=null;function Ft(t=!1){Li.push(ze=t?null:[])}function bu(){Li.pop(),ze=Li[Li.length-1]||null}let Mi=1;function zn(t){Mi+=t}function ho(t){return t.dynamicChildren=Mi>0?ze||ti:null,bu(),Mi>0&&ze&&ze.push(t),t}function ni(t,i,e,s,r,n){return ho(J(t,i,e,s,r,n,!0))}function _u(t,i,e,s,r){return ho(Qe(t,i,e,s,r,!0))}function yu(t){return t?t.__v_isVNode===!0:!1}function wi(t,i){return t.type===i.type&&t.key===i.key}const $s="__vInternal",fo=({key:t})=>t??null,ts=({ref:t,ref_key:i,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?ne(t)||be(t)||F(t)?{i:Le,r:t,k:i,f:!!e}:t:null);function J(t,i=null,e=null,s=0,r=null,n=t===Ge?0:1,l=!1,o=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:i,key:i&&fo(i),ref:i&&ts(i),scopeId:xs,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Le};return o?(Vr(a,e),n&128&&t.normalize(a)):e&&(a.shapeFlag|=ne(e)?8:16),Mi>0&&!l&&ze&&(a.patchFlag>0||n&6)&&a.patchFlag!==32&&ze.push(a),a}const Qe=vu;function vu(t,i=null,e=null,s=0,r=null,n=!1){if((!t||t===Pc)&&(t=jt),yu(t)){const o=ci(t,i,!0);return e&&Vr(o,e),Mi>0&&!n&&ze&&(o.shapeFlag&6?ze[ze.indexOf(t)]=o:ze.push(o)),o.patchFlag|=-2,o}if(Lu(t)&&(t=t.__vccOpts),i){i=wu(i);let{class:o,style:a}=i;o&&!ne(o)&&(i.class=vs(o)),Y(a)&&(Vl(a)&&!R(a)&&(a=ue({},a)),i.style=$r(a))}const l=ne(t)?1:Mc(t)?128:gu(t)?64:Y(t)?4:F(t)?2:0;return J(t,i,e,s,r,l,n,!0)}function wu(t){return t?Vl(t)||$s in t?ue({},t):t:null}function ci(t,i,e=!1){const{props:s,ref:r,patchFlag:n,children:l}=t,o=i?Tu(s||{},i):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:o,key:o&&fo(o),ref:i&&i.ref?e&&r?R(r)?r.concat(ts(i)):[r,ts(i)]:ts(i):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:i&&t.type!==Ge?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ci(t.ssContent),ssFallback:t.ssFallback&&ci(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Cu(t=" ",i=0){return Qe(Ss,null,t,i)}function Vn(t="",i=!1){return i?(Ft(),_u(jt,null,t)):Qe(jt,null,t)}function Ye(t){return t==null||typeof t=="boolean"?Qe(jt):R(t)?Qe(Ge,null,t.slice()):typeof t=="object"?gt(t):Qe(Ss,null,String(t))}function gt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ci(t)}function Vr(t,i){let e=0;const{shapeFlag:s}=t;if(i==null)i=null;else if(R(i))e=16;else if(typeof i=="object")if(s&65){const r=i.default;r&&(r._c&&(r._d=!1),Vr(t,r()),r._c&&(r._d=!0));return}else{e=32;const r=i._;!r&&!($s in i)?i._ctx=Le:r===3&&Le&&(Le.slots._===1?i._=1:(i._=2,t.patchFlag|=1024))}else F(i)?(i={default:i,_ctx:Le},e=32):(i=String(i),s&64?(e=16,i=[Cu(i)]):e=8);t.children=i,t.shapeFlag|=e}function Tu(...t){const i={};for(let e=0;e<t.length;e++){const s=t[e];for(const r in s)if(r==="class")i.class!==s.class&&(i.class=vs([i.class,s.class]));else if(r==="style")i.style=$r([i.style,s.style]);else if(gs(r)){const n=i[r],l=s[r];l&&n!==l&&!(R(n)&&n.includes(l))&&(i[r]=n?[].concat(n,l):l)}else r!==""&&(i[r]=s[r])}return i}function Xe(t,i,e,s=null){je(t,i,7,[e,s])}const Eu=ro();let xu=0;function Au(t,i,e){const s=t.type,r=(i?i.appContext:t.appContext)||Eu,n={uid:xu++,vnode:t,type:s,parent:i,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Wa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:lo(s,r),emitsOptions:Kl(s,r),emit:null,emitted:null,propsDefaults:K,inheritAttrs:s.inheritAttrs,ctx:K,data:K,props:K,attrs:K,slots:K,refs:K,setupState:K,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=i?i.root:n,n.emit=Sc.bind(null,n),t.ce&&t.ce(n),n}let ae=null,jr,qt,jn="__VUE_INSTANCE_SETTERS__";(qt=rr()[jn])||(qt=rr()[jn]=[]),qt.push(t=>ae=t),jr=t=>{qt.length>1?qt.forEach(i=>i(t)):qt[0](t)};const ui=t=>{jr(t),t.scope.on()},Nt=()=>{ae&&ae.scope.off(),jr(null)};function po(t){return t.vnode.shapeFlag&4}let Di=!1;function Su(t,i=!1){Di=i;const{props:e,children:s}=t.vnode,r=po(t);ou(t,e,r,i),uu(t,s);const n=r?$u(t,i):void 0;return Di=!1,n}function $u(t,i){const e=t.type;t.accessCache=Object.create(null),t.proxy=jl(new Proxy(t.ctx,Zc));const{setup:s}=e;if(s){const r=t.setupContext=s.length>1?Ou(t):null;ui(t),mi();const n=yt(s,t,0,[t.props,r]);if(gi(),Nt(),El(n)){if(n.then(Nt,Nt),i)return n.then(l=>{Bn(t,l,i)}).catch(l=>{Ts(l,t,0)});t.asyncDep=n}else Bn(t,n,i)}else mo(t,i)}function Bn(t,i,e){F(i)?t.type.__ssrInlineRender?t.ssrRender=i:t.render=i:Y(i)&&(t.setupState=Bl(i)),mo(t,e)}let Hn;function mo(t,i,e){const s=t.type;if(!t.render){if(!i&&Hn&&!s.render){const r=s.template||Nr(t).template;if(r){const{isCustomElement:n,compilerOptions:l}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,c=ue(ue({isCustomElement:n,delimiters:o},l),a);s.render=Hn(r,c)}}t.render=s.render||Ve}{ui(t),mi();try{Qc(t)}finally{gi(),Nt()}}}function Iu(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(i,e){return Te(t,"get","$attrs"),i[e]}}))}function Ou(t){const i=e=>{t.exposed=e||{}};return{get attrs(){return Iu(t)},slots:t.slots,emit:t.emit,expose:i}}function Is(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Bl(jl(t.exposed)),{get(i,e){if(e in i)return i[e];if(e in ki)return ki[e](t)},has(i,e){return e in i||e in ki}}))}function ku(t,i=!0){return F(t)?t.displayName||t.name:t.name||i&&t.__name}function Lu(t){return F(t)&&"__vccOpts"in t}const Uu=(t,i)=>vc(t,i,Di),Pu=Symbol.for("v-scx"),Ru=()=>es(Pu),Mu="3.3.8",Du="http://www.w3.org/2000/svg",Pt=typeof document<"u"?document:null,Wn=Pt&&Pt.createElement("template"),Fu={insert:(t,i,e)=>{i.insertBefore(t,e||null)},remove:t=>{const i=t.parentNode;i&&i.removeChild(t)},createElement:(t,i,e,s)=>{const r=i?Pt.createElementNS(Du,t):Pt.createElement(t,e?{is:e}:void 0);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Pt.createTextNode(t),createComment:t=>Pt.createComment(t),setText:(t,i)=>{t.nodeValue=i},setElementText:(t,i)=>{t.textContent=i},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Pt.querySelector(t),setScopeId(t,i){t.setAttribute(i,"")},insertStaticContent(t,i,e,s,r,n){const l=e?e.previousSibling:i.lastChild;if(r&&(r===n||r.nextSibling))for(;i.insertBefore(r.cloneNode(!0),e),!(r===n||!(r=r.nextSibling)););else{Wn.innerHTML=s?`<svg>${t}</svg>`:t;const o=Wn.content;if(s){const a=o.firstChild;for(;a.firstChild;)o.appendChild(a.firstChild);o.removeChild(a)}i.insertBefore(o,e)}return[l?l.nextSibling:i.firstChild,e?e.previousSibling:i.lastChild]}},Nu=Symbol("_vtc");function zu(t,i,e){const s=t[Nu];s&&(i=(i?[i,...s]:[...s]).join(" ")),i==null?t.removeAttribute("class"):e?t.setAttribute("class",i):t.className=i}const Vu=Symbol("_vod");function ju(t,i,e){const s=t.style,r=ne(e);if(e&&!r){if(i&&!ne(i))for(const n in i)e[n]==null&&gr(s,n,"");for(const n in e)gr(s,n,e[n])}else{const n=s.display;r?i!==e&&(s.cssText=e):i&&t.removeAttribute("style"),Vu in t&&(s.display=n)}}const Xn=/\s*!important$/;function gr(t,i,e){if(R(e))e.forEach(s=>gr(t,i,s));else if(e==null&&(e=""),i.startsWith("--"))t.setProperty(i,e);else{const s=Bu(t,i);Xn.test(e)?t.setProperty(pi(s),e.replace(Xn,""),"important"):t[s]=e}}const qn=["Webkit","Moz","ms"],Gs={};function Bu(t,i){const e=Gs[i];if(e)return e;let s=tt(i);if(s!=="filter"&&s in t)return Gs[i]=s;s=ys(s);for(let r=0;r<qn.length;r++){const n=qn[r]+s;if(n in t)return Gs[i]=n}return i}const Kn="http://www.w3.org/1999/xlink";function Hu(t,i,e,s,r){if(s&&i.startsWith("xlink:"))e==null?t.removeAttributeNS(Kn,i.slice(6,i.length)):t.setAttributeNS(Kn,i,e);else{const n=ja(i);e==null||n&&!Sl(e)?t.removeAttribute(i):t.setAttribute(i,n?"":e)}}function Wu(t,i,e,s,r,n,l){if(i==="innerHTML"||i==="textContent"){s&&l(s,r,n),t[i]=e??"";return}const o=t.tagName;if(i==="value"&&o!=="PROGRESS"&&!o.includes("-")){t._value=e;const c=o==="OPTION"?t.getAttribute("value"):t.value,u=e??"";c!==u&&(t.value=u),e==null&&t.removeAttribute(i);return}let a=!1;if(e===""||e==null){const c=typeof t[i];c==="boolean"?e=Sl(e):e==null&&c==="string"?(e="",a=!0):c==="number"&&(e=0,a=!0)}try{t[i]=e}catch{}a&&t.removeAttribute(i)}function Rt(t,i,e,s){t.addEventListener(i,e,s)}function Xu(t,i,e,s){t.removeEventListener(i,e,s)}const Gn=Symbol("_vei");function qu(t,i,e,s,r=null){const n=t[Gn]||(t[Gn]={}),l=n[i];if(s&&l)l.value=s;else{const[o,a]=Ku(i);if(s){const c=n[i]=Ju(s,r);Rt(t,o,c,a)}else l&&(Xu(t,o,l,a),n[i]=void 0)}}const Yn=/(?:Once|Passive|Capture)$/;function Ku(t){let i;if(Yn.test(t)){i={};let s;for(;s=t.match(Yn);)t=t.slice(0,t.length-s[0].length),i[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):pi(t.slice(2)),i]}let Ys=0;const Gu=Promise.resolve(),Yu=()=>Ys||(Gu.then(()=>Ys=0),Ys=Date.now());function Ju(t,i){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;je(Zu(s,e.value),i,5,[s])};return e.value=t,e.attached=Yu(),e}function Zu(t,i){if(R(i)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},i.map(s=>r=>!r._stopped&&s&&s(r))}else return i}const Jn=/^on[a-z]/,Qu=(t,i,e,s,r=!1,n,l,o,a)=>{i==="class"?zu(t,s,r):i==="style"?ju(t,e,s):gs(i)?xr(i)||qu(t,i,e,s,l):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):eh(t,i,s,r))?Wu(t,i,s,n,l,o,a):(i==="true-value"?t._trueValue=s:i==="false-value"&&(t._falseValue=s),Hu(t,i,s,r))};function eh(t,i,e,s){return s?!!(i==="innerHTML"||i==="textContent"||i in t&&Jn.test(i)&&F(e)):i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&t.tagName==="INPUT"||i==="type"&&t.tagName==="TEXTAREA"||Jn.test(i)&&ne(e)?!1:i in t}const cs=t=>{const i=t.props["onUpdate:modelValue"]||!1;return R(i)?e=>Zi(i,e):i};function th(t){t.target.composing=!0}function Zn(t){const i=t.target;i.composing&&(i.composing=!1,i.dispatchEvent(new Event("input")))}const li=Symbol("_assign"),Qn={created(t,{modifiers:{lazy:i,trim:e,number:s}},r){t[li]=cs(r);const n=s||r.props&&r.props.type==="number";Rt(t,i?"change":"input",l=>{if(l.target.composing)return;let o=t.value;e&&(o=o.trim()),n&&(o=sr(o)),t[li](o)}),e&&Rt(t,"change",()=>{t.value=t.value.trim()}),i||(Rt(t,"compositionstart",th),Rt(t,"compositionend",Zn),Rt(t,"change",Zn))},mounted(t,{value:i}){t.value=i??""},beforeUpdate(t,{value:i,modifiers:{lazy:e,trim:s,number:r}},n){if(t[li]=cs(n),t.composing||document.activeElement===t&&t.type!=="range"&&(e||s&&t.value.trim()===i||(r||t.type==="number")&&sr(t.value)===i))return;const l=i??"";t.value!==l&&(t.value=l)}},ih={deep:!0,created(t,i,e){t[li]=cs(e),Rt(t,"change",()=>{const s=t._modelValue,r=sh(t),n=t.checked,l=t[li];if(R(s)){const o=$l(s,r),a=o!==-1;if(n&&!a)l(s.concat(r));else if(!n&&a){const c=[...s];c.splice(o,1),l(c)}}else if(bs(s)){const o=new Set(s);n?o.add(r):o.delete(r),l(o)}else l(go(t,n))})},mounted:el,beforeUpdate(t,i,e){t[li]=cs(e),el(t,i,e)}};function el(t,{value:i,oldValue:e},s){t._modelValue=i,R(i)?t.checked=$l(i,s.props.value)>-1:bs(i)?t.checked=i.has(s.props.value):i!==e&&(t.checked=ws(i,go(t,!0)))}function sh(t){return"_value"in t?t._value:t.value}function go(t,i){const e=i?"_trueValue":"_falseValue";return e in t?t[e]:i}const rh=["ctrl","shift","alt","meta"],nh={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,i)=>rh.some(e=>t[`${e}Key`]&&!i.includes(e))},lh=(t,i)=>(e,...s)=>{for(let r=0;r<i.length;r++){const n=nh[i[r]];if(n&&n(e,i))return}return t(e,...s)},oh=ue({patchProp:Qu},Fu);let tl;function ah(){return tl||(tl=du(oh))}const ch=(...t)=>{const i=ah().createApp(...t),{mount:e}=i;return i.mount=s=>{const r=uh(s);if(!r)return;const n=i._component;!F(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.innerHTML="";const l=e(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},i};function uh(t){return ne(t)?document.querySelector(t):t}const hh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAMAAAC7m5rvAAAC8VBMVEUAAADOdCvMbSfMbCXYfCLRZxrUciDefxvafiHScyLtoiDihRvUYhHggBjafCTVeCXmfxDjeg/adRjhgx7UZhXVgCjRZxfwrinqniHzsjXwpzPbaw7YZw7dfRrZdBndjzHfjDDQXxTbgCDRYRPCXyD2sy/tpyHztTXtlyHgdxDsoCDdbw7yyD/cbg7kkiLifhjkiRzjkCDumi3kiR3jhxvrnjDVZA/nrz3poTHkkyvmlC/fgh3glDLfoz3Zqk7PXxPdsVH75EL4zDTmgxLzuTH44Ur20kP1vzTidw/zrzLgcw/plh70zEHrlB/khBnxnirvvTXz3FTvnS7ooSrx21jxpzDvsjbnmifwvTfsnirccRLtujzhiR7cdxjqly7hix7mqTfqvT3njSjTYQ/nw0bQXhHfs0jWcBzYpEHmwVrht1zywT33szb41kDoixjywj/0xTHz41P341j33kDxwT/0rzXztDfpkhz34FrzuDjxpyvfeBbzsyvvxD/w4G7uxjnnnjTs0kvu227qz2DVYw7qzWrs02zpzmvpzWXbexzynBPvnRP/5lL/6mP+40L82DT/7or/7Hf+3TT+3jb/8an/8Jv+4Df82jXxmBL60jHxnhP92zT71jL3zi/1wSn0vifyoBP3yi36yCvyoSPzpBj61DL5zzD80i/0uyXypSP3tSLyrx7xpxr4vjL80C72yS33ty36xSn4vCTzuCPztSL2sB/0qRvvoRbrihD5wzf91jH8viz2sir1rirzsR/1rB3xpRnvoBT84VT/6U7+6T78yDP7zCz1xCr5wyj2syDyrR3xqhvynBLukRLwkxH/8bL/74//7X3/62r+61P730L+4Tv+6Dr5yzr8zTn4ujb4zC71xSz5wCf3uSPvmyL62k/95Dv+5Tj+4Tb7xTH3uTHysyP1tyLvqyLvoB3woxb/8bH/63T/6V3+51b57Ev1y0f760T4vjj60Db2xSv1xSv3vibumRn61z74zS72yS7yqSUyEDIhAAAAinRSTlMABAoHEg4WUj4a7rdPSSgf/fhtXTsjI/vz7s/JroNfSzszMS0U+/r07+fl3Nra0MnEvaKgk5GRjX15c25cVCkcF/78+/r28/Ly8O/s4+PZ1dPPyca+urm4tK2qo5mSjoqJdXVoX1ZJRT80Dv7+/fn48e3s7Ovi4ODf3dnW1b+pp5uakImDcGRWSziMx6UIAAAEk0lEQVRIx63SZVRaYRjA8YcUZ3fPXHd3d3d3d3d34Ta2sU0EBwgIgiLClGHr7Bmzu2O67vy0e91kMi5nB89+X+Cee/73Ofd9Lvx3BCK0x+YL0B4L9+FBf6PfvNkI+jv37t080BvxQFLRuK2gr3U+dXSfM6CvuSEiUcheMvzD1ktjoQ1r+w6IzsOgje1XRmll5J77T2/DQStDMyLCxrTNyZ4/OtkNtAwpKJg07/J20ND6HMLVhZPGFZzCgRabyTV0vw8zh+BbhlmtXLJgwZIBI0xxaDx87ngavXDXKMCw1IcmkncwACAY9HN4W/0YUf22S29LEoDBDAkvktYTDxhcx4fIu1MAPPpNrH79Ku9lbu7LvFevH+/obYKDa0ckvOS1gIVwMq27B+BGdPiaeCPn7ouniBd3c24kFtitJIHpLEkXM8C03t4ECGsCa/Jv3W3jVn5SeT8iULouA2zkjoBbwy7Kz7mnISc/qcyIBFYU0MnArjYx99ZfchOLOC6Aw4EuZt3pSXm3teQl1XamgG4Dv9dev4EhsSigLx50sbWnF17HVFNnZwy6uLDphTcxFdY9MAIdcL2FNBb9vgb6b3doM7xA29ihlmBoLxRFRrJYrDuaWCwazc+vaQuMGDRaI9q2YsoPS7DunJISIoqk+aixEEgTGSkKSWm0BCvxxKWbW/eA39izuD5KbAAdm+Q8XkqIb4AfTQ2dI0IinrxxFZjwo+qLZ64bi36Jaw8Wl5QkR4lNwLKpIk0u55UJfX0DAgL8UMivr/AbT55WoQhajmbJH0qK96wgARCHH4pAMnRas0JRUZHG838gRMpfhMIyf17aZ4UkPRjJmqPqkyMcBpkBijByUadQsRUYf5FUKhSf2R9l/g9alfnLPrIVlZL08ObBYMCP7uQ4nAhqpqtnuYDn7vB0SWVlIIddLpP5o2QyWSqbE/gsPTwuLmsDuHTt7waa8O5A6qYMR8JngUiYmvqpvPxTaksUFhsXpxRM8AQKGbA4f1HGhYfHhoU9DORwOGw2hxP4MCw26IlSKRBQe+BBh00TBEpl3JOgILREhTUGPckIjhcIBFzVYNAF78TgCgTxwRkZaBqLJBnxzx8lcLlMJmO6LehkbE7lcrmPnsfHB6PQxtvbm0qlZqougm4EZxWVyuQyExIeIRKQBoFEmVk9vHRHtjCmRxYVCZlMbzV0VvZUa/AgAzbKbDNw75aFjlN3VAQj22ITkGcPA2zL+H1I4NlLxaByqUyqGkM13RhIffnHsTdgOC2myogIY5wtshjqJpORbe7kDkQjfnSoK2AZ2hAaU9XHFnDGThaqbEaLbJV5rw14sOmLVNLFmEs7JpUi3QlbAIL7YKduFubmFlN7ORuTAAz7VMWESiOm2IC2Ue8jpJ3mrG89L9IYa2tPMuH3hdV8u4aIiCGgBbe4tMsiV4J6dss/Akl9262/Q+lhQ63Mw3GQGw7UOhoNGDhwgNEq+MN0qONI7XPU3KZXV75YLOZv0Xx9G/iX/jHR0dFzQF+UmAZp6DDQm2OpdJoX6G1k6fuzoD+8w05TaIfV86E9zFxBp5/NVmVGSfWcJgAAAABJRU5ErkJggg==",dh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAMAAAC7m5rvAAAC+lBMVEUAAADszqfrx5r005X7yir/2ynvxD/00nH623TyxTHuwiv6zDHxxjz72F/rtG/XqyftwCn7yjD3xi/xpy7+2Tj4zD/wpT/onDy6fzX800zunDrxyED+z0TuxFHrpVGtekP51mH1zV/Rk1TRllj724L525X5xSj/3yHswBzipib7yirswSXxryvuwSTzy0b8zDHCjCjsoi7OkjD2rDf+3TP80zn/3TT90Tznqzi9hjL80ED2yUzswTvvwzf6z0L2y0HuxE7upkq4gUP60E730mXPlFf93Hj/4DDftj7+0SvtzFb431r7wzLUpzHWnCH/1y752lb641P2tCz+1THsvy73xTT/3ij74EbswDb2wzniukX1tTLswTf3yDX8zzvzoy6/iyr0xzHalS/90D3swivwxlHxrTTRizDswjv1rkHwsDz2y17vpzjjqUO1fi7txDP+1U/z01/ruFLOlDr94m2veDb+4Enwx1W0fkHal0zyrFXjnE37zDPvxTr22WfyzEnyy0X7zTn10lj3zD3vxz3uwzb40UzxxTb/9YL322v11V35zj/212PzzUzyyT37zTb/9H/+7Hv+6Xn95nj11mD00FXxyULwyED3yTH/8H//73z101r31Vnzz1D3yzr533H41FX2zkn40Ef/1Eb4zkP70D/+3Dn0yDn0yDT/93n/7Hb64nT+6XH33W7/32X2zkT5z0Lxxzn3yjf/1TTuwTP0xjHuwyj/+X7/6XX+427/+Wz/7Wf+52f/9WP53WH42GD20VL30lH10FD/6Ez2z0r/5kP/2j/+0Tn/4Dj+2zDzxSv/73b/+XL63mz/7WL/417/4Fb/3U30z03600v0zUf60UX50EX+3UT/4UP0y0L+0kH1yj75zTz7zzf/0TXuxDLtxC7/zi38zC3uwC39ySb/94L/5GL/3F/+6Fv/2lf/71X+5FT911T/3lP/11P/703/7Ef/1kX/5T77zzv+2Df9zjPetS/2xyv1wyX+8G//8G7tz1L10T7kvTkB2fgKAAAAfHRSTlMABAcL/v5tIRX48uR6NBH++vjw14iDdWZgVFNRQTw7OS0mIhsaEf79/Pf16unh2tfUzbq1ta2loaCglY+Og25hWkRAPTswJv77+/r49/f19PPx7ujl5OPi397d0tDOyMjHvb22trCmpKGJh4OBeHZxcGpVVVRTSklHNi8nbTO62gAABAVJREFUSMedlnVQG0EUxmnaBAp1d3d3d3d3d3eXeEIuxl2ElFiBphAjNJCQ4NBCkVJXKBSvu3tnupe0U6Xc9s39t/Ob79tv3749j3KLNIbk8T+1s1uVav/DbWZ23l4RHqswWOvs2rgCPLc2ubDDGk9orlq3JK6zc2NortmM5IAibwq00U0JGm5Rh6GwXLWFFgXNWaMKrFy9+wJGodO7MazcXLniCOLs2hKSGxAv9gtAslZCbm9kepiCGWnMGg6Hta6lFh9FjQ6ftnCtstgkUKBI1rthcHLrEoMUTIND6QPX1lseyoV+Nw3Kdg2hsPppMv+UY4FKZV8orNEZmVhxmmNTdvKCwshSOvsYJ1BZqSGcmhujUvtD7S1TSte4sO4w2MbnagGOYdROMEfQ+5k0XHg6RMSilrQhTlXskigVaAD2CitpQRw7VPOcXCDkhUSwqJVGQ9zTTEkYXcvThQKsCWGKVPu5OlwczLshYuVDYCPbxUkFwmDe9VcYdrsq8RzTouV0YfDV6yDJ2+MID8opiaogsRZgoQBrS3Rny9OiZQJ/NtjaLYzqQzhGapwqjK45pYsAYthqohZnPePLw8XaUzq8Sag7PDz2EEilVe2XJmkQHeToUqsEEvGcv7886nBP/TlVmACI8UJEIha2DB+VfWbuKker5+s43KLwJE8XwrnFwlyjq+r4yVv/NWkP1tbH8WXhdCH75GmrFWA13f3f72XSgNZlTsf6XXLO8WVBdH/2ySvHrCKOjTrIvdKifVrCot1/Fxy7qjTVJPlGXbPmcQJtNb8/xnXap36Y1GtUhT+h9R31iXdUcpw66sdg3swLtCnrfl/1mpeZGn9+wooGrUg/uWvdoFfH/IfRfLX8PE4xAIXmGYzdfzTWPnJmzoWz5k9TewzctndU8+bNDzQY2GNaUfaFaL5KBpIXurSOoKjBUOvnG1qHfCb1/keTxJLE+PK2evXqb30/P4o33QFQrIDur1G4qAA00lh5+C+d2o+sz3l0Id5iVqslEvDx+XyJShoTC/zhUsBhAMoF1G9vt1cfsj778qWLFxMsZ8+azTEx5hhLbOyJpGQN2y3F5dIikcp1f4/Nq+8ZfXr25ctPLl28ezfhBKh795K1WnYKUAL+uDQaglSu8mfYFetMt79OT39x/MWTSw+ePn3w+HHwqZSUKwwmgICUr2+UN+WvR9twtt1uL8jIPY7XVR6Pd+2a3zclGsDmlDV32gyaaC8oLsjIyM2NiLihs6Kom/EFVWPIP16nqv1LiovfZISGijgcjgFBcHfAXlSNDeXM4ZZ1fd7kYyyb0mF0IJFAKqq0dMHQlkT+jQcvrfXu/fssB4IURnkvGdKURHgEezYdQaFQRjT1LONJ+gppu+TmIgry8AAAAABJRU5ErkJggg==";var fh=Object.defineProperty,ph=(t,i,e)=>i in t?fh(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e,Br=(t,i,e)=>(ph(t,typeof i!="symbol"?i+"":i,e),e);function mh(t){let i=e=>{var s;for(let r in e)((s=e[r])==null?void 0:s.constructor)===Object&&(e[r]=i(e[r]));return{...e}};return i(t)}var Z=class{constructor(t){t.constructor===Object?this.store=mh(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,i){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+i)}read(t){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(Z.warn("read",t),null):this.store[t]}has(t){return this._storeIsProxy?this.store[t]!==void 0:this.store.hasOwnProperty(t)}add(t,i,e=!1){!e&&Object.keys(this.store).includes(t)||(this.store[t]=i,this.notify(t))}pub(t,i){if(!this._storeIsProxy&&!this.store.hasOwnProperty(t)){Z.warn("publish",t);return}this.store[t]=i,this.notify(t)}multiPub(t){for(let i in t)this.pub(i,t[i])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(i=>{i(this.store[t])})}sub(t,i,e=!0){return!this._storeIsProxy&&!this.store.hasOwnProperty(t)?(Z.warn("subscribe",t),null):(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(i),e&&i(this.store[t]),{remove:()=>{this.callbackMap[t].delete(i),this.callbackMap[t].size||delete this.callbackMap[t]},callback:i})}static registerCtx(t,i=Symbol()){let e=Z.globalStore.get(i);return e?console.warn('State: context UID "'+i+'" already in use'):(e=new Z(t),Z.globalStore.set(i,e)),e}static deleteCtx(t){Z.globalStore.delete(t)}static getCtx(t,i=!0){return Z.globalStore.get(t)||(i&&console.warn('State: wrong context UID - "'+t+'"'),null)}};Z.globalStore=new Map;var N=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),bo="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",gh=bo.length-1,Hr=class{static generate(t="XXXXXXXXX-XXX"){let i="";for(let e=0;e<t.length;e++)i+=t[e]==="-"?t[e]:bo.charAt(Math.random()*gh);return i}};function _o(t,i,e){let s=!0,r,n=i.split(".");return n.forEach((l,o)=>{o<n.length-1?t=t[l]:r=l}),t?t[r]=e:s=!1,s}function bh(t){return t.split("-").map((i,e)=>i&&e?i[0].toUpperCase()+i.slice(1):i).join("").split("_").map((i,e)=>i&&e?i.toUpperCase():i).join("")}function _h(t,i){[...t.querySelectorAll(`[${N.REPEAT_ATTR}]`)].forEach(e=>{let s=e.getAttribute(N.REPEAT_ITEM_TAG_ATTR),r;if(s&&(r=window.customElements.get(s)),!r){r=class extends i.BaseComponent{constructor(){super(),s||(this.style.display="contents")}};let l=e.innerHTML;r.template=l,r.reg(s)}for(;e.firstChild;)e.firstChild.remove();let n=e.getAttribute(N.REPEAT_ATTR);i.sub(n,l=>{if(!l){for(;e.firstChild;)e.firstChild.remove();return}let o=[...e.children],a,c=u=>{u.forEach((p,b)=>{if(o[b])if(o[b].set$)setTimeout(()=>{o[b].set$(p)});else for(let y in p)o[b][y]=p[y];else{a||(a=new DocumentFragment);let y=new r;Object.assign(y.init$,p),a.appendChild(y)}}),a&&e.appendChild(a);let d=o.slice(u.length,o.length);for(let p of d)p.remove()};if(l.constructor===Array)c(l);else if(l.constructor===Object){let u=[];for(let d in l){let p=l[d];Object.defineProperty(p,"_KEY_",{value:d,enumerable:!0}),u.push(p)}c(u)}else console.warn("Symbiote repeat data type error:"),console.log(l)}),e.removeAttribute(N.REPEAT_ATTR),e.removeAttribute(N.REPEAT_ITEM_TAG_ATTR)})}var il="__default__";function yh(t,i){if(i.shadowRoot)return;let e=[...t.querySelectorAll("slot")];if(!e.length)return;let s={};e.forEach(r=>{let n=r.getAttribute("name")||il;s[n]={slot:r,fr:document.createDocumentFragment()}}),i.initChildren.forEach(r=>{var n;let l=il;r instanceof Element&&r.hasAttribute("slot")&&(l=r.getAttribute("slot"),r.removeAttribute("slot")),(n=s[l])==null||n.fr.appendChild(r)}),Object.values(s).forEach(r=>{if(r.fr.childNodes.length)r.slot.parentNode.replaceChild(r.fr,r.slot);else if(r.slot.childNodes.length){let n=document.createDocumentFragment();n.append(...r.slot.childNodes),r.slot.parentNode.replaceChild(n,r.slot)}else r.slot.remove()})}function vh(t,i){[...t.querySelectorAll(`[${N.EL_REF_ATTR}]`)].forEach(e=>{let s=e.getAttribute(N.EL_REF_ATTR);i.ref[s]=e,e.removeAttribute(N.EL_REF_ATTR)})}function wh(t,i){[...t.querySelectorAll(`[${N.BIND_ATTR}]`)].forEach(e=>{let r=e.getAttribute(N.BIND_ATTR).split(";");[...e.attributes].forEach(n=>{if(n.name.startsWith("-")&&n.value){let l=bh(n.name.replace("-",""));r.push(l+":"+n.value),e.removeAttribute(n.name)}}),r.forEach(n=>{if(!n)return;let l=n.split(":").map(u=>u.trim()),o=l[0],a;o.indexOf(N.ATTR_BIND_PRFX)===0&&(a=!0,o=o.replace(N.ATTR_BIND_PRFX,""));let c=l[1].split(",").map(u=>u.trim());for(let u of c){let d;u.startsWith("!!")?(d="double",u=u.replace("!!","")):u.startsWith("!")&&(d="single",u=u.replace("!","")),i.sub(u,p=>{d==="double"?p=!!p:d==="single"&&(p=!p),a?(p==null?void 0:p.constructor)===Boolean?p?e.setAttribute(o,""):e.removeAttribute(o):e.setAttribute(o,p):_o(e,o,p)||(e[N.SET_LATER_KEY]||(e[N.SET_LATER_KEY]=Object.create(null)),e[N.SET_LATER_KEY][o]=p)})}}),e.removeAttribute(N.BIND_ATTR)})}var is="{{",$i="}}",Ch="skip-text";function Th(t){let i,e=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:r=>{var n;return!((n=r.parentElement)!=null&&n.hasAttribute(Ch))&&r.textContent.includes(is)&&r.textContent.includes($i)&&1}});for(;i=s.nextNode();)e.push(i);return e}var Eh=function(t,i){Th(t).forEach(s=>{let r=[],n;for(;s.textContent.includes($i);)s.textContent.startsWith(is)?(n=s.textContent.indexOf($i)+$i.length,s.splitText(n),r.push(s)):(n=s.textContent.indexOf(is),s.splitText(n)),s=s.nextSibling;r.forEach(l=>{let o=l.textContent.replace(is,"").replace($i,"");l.textContent="",i.sub(o,a=>{l.textContent=a})})})},xh=[_h,yh,vh,wh,Eh],us="'",hi='"',Ah=/\\([0-9a-fA-F]{1,6} ?)/g;function Sh(t){return(t[0]===hi||t[0]===us)&&(t[t.length-1]===hi||t[t.length-1]===us)}function $h(t){return(t[0]===hi||t[0]===us)&&(t=t.slice(1)),(t[t.length-1]===hi||t[t.length-1]===us)&&(t=t.slice(0,-1)),t}function Ih(t){let i="",e="";for(var s=0;s<t.length;s++){const r=t[s+1];t[s]==="\\"&&r==='"'?(i+='\\"',s++):t[s]==='"'&&e!=="\\"?i+='\\"':i+=t[s],e=t[s]}return i}function Oh(t){let i=t;Sh(t)&&(i=$h(i),i=i.replace(Ah,(e,s)=>String.fromCodePoint(parseInt(s.trim(),16))),i=i.replaceAll(`\\
`,"\\n"),i=Ih(i),i=hi+i+hi);try{return JSON.parse(i)}catch{throw new Error(`Failed to parse CSS property value: ${i}. Original input: ${t}`)}}var sl=0,Kt=null,st=null,mt=class extends HTMLElement{constructor(){super(),Br(this,"updateCssData",()=>{var t;this.dropCssDataCache(),(t=this.__boundCssProps)==null||t.forEach(i=>{let e=this.getCssData(this.__extractCssName(i),!0);e!==null&&this.$[i]!==e&&(this.$[i]=e)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return mt}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,(t=this.initCallback)==null||t.call(this))}render(t,i=this.renderShadow){let e;if((i||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let r=this.getAttribute(N.USE_TPL);if(r){let n=this.getRootNode(),l=(n==null?void 0:n.querySelector(r))||document.querySelector(r);l?t=l.content.cloneNode(!0):console.warn(`Symbiote template "${r}" is not found...`)}}if(this.processInnerHtml)for(let r of this.tplProcessors)r(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(t==null?void 0:t.constructor)===DocumentFragment)e=t;else if((t==null?void 0:t.constructor)===String){let r=document.createElement("template");r.innerHTML=t,e=r.content.cloneNode(!0)}else this.constructor.__tpl&&(e=this.constructor.__tpl.content.cloneNode(!0));for(let r of this.tplProcessors)r(e,this)}let s=()=>{e&&(i&&this.shadowRoot.appendChild(e)||this.appendChild(e)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){i=!0;let r=document.createElement("link");r.rel="stylesheet",r.href=this.constructor.__shadowStylesUrl,r.onload=s,this.shadowRoot.prepend(r)}else s()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Hr.generate(),this.style.setProperty(N.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(N.CSS_CTX_PROP,!0)}get ctxName(){var t;let i=((t=this.getAttribute(N.CTX_NAME_ATTR))==null?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=i,i}get localCtx(){return this.__localCtx||(this.__localCtx=Z.registerCtx({},this)),this.__localCtx}get nodeCtx(){return Z.getCtx(this.ctxName,!1)||Z.registerCtx({},this.ctxName)}static __parseProp(t,i){let e,s;if(t.startsWith(N.EXT_DATA_CTX_PRFX))e=i.nodeCtx,s=t.replace(N.EXT_DATA_CTX_PRFX,"");else if(t.includes(N.NAMED_DATA_CTX_SPLTR)){let r=t.split(N.NAMED_DATA_CTX_SPLTR);e=Z.getCtx(r[0]),s=r[1]}else e=i.localCtx,s=t;return{ctx:e,name:s}}sub(t,i,e=!0){let s=n=>{this.isConnected&&i(n)},r=mt.__parseProp(t,this);r.ctx.has(r.name)?this.allSubs.add(r.ctx.sub(r.name,s,e)):window.setTimeout(()=>{this.allSubs.add(r.ctx.sub(r.name,s,e))})}notify(t){let i=mt.__parseProp(t,this);i.ctx.notify(i.name)}has(t){let i=mt.__parseProp(t,this);return i.ctx.has(i.name)}add(t,i,e=!1){let s=mt.__parseProp(t,this);s.ctx.add(s.name,i,e)}add$(t,i=!1){for(let e in t)this.add(e,t[e],i)}get $(){if(!this.__stateProxy){let t=Object.create(null);this.__stateProxy=new Proxy(t,{set:(i,e,s)=>{let r=mt.__parseProp(e,this);return r.ctx.pub(r.name,s),!0},get:(i,e)=>{let s=mt.__parseProp(e,this);return s.ctx.read(s.name)}})}return this.__stateProxy}set$(t,i=!1){for(let e in t){let s=t[e];i||![String,Number,Boolean].includes(s==null?void 0:s.constructor)?this.$[e]=s:this.$[e]!==s&&(this.$[e]=s)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(N.CTX_OWNER_ATTR)&&this.getAttribute(N.CTX_OWNER_ATTR)!=="false"}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let i of Object.values(t))Object.keys(this.init$).includes(i)||(this.init$[i]="");for(let i in this.init$)if(i.startsWith(N.EXT_DATA_CTX_PRFX))this.nodeCtx.add(i.replace(N.EXT_DATA_CTX_PRFX,""),this.init$[i],this.__ctxOwner);else if(i.includes(N.NAMED_DATA_CTX_SPLTR)){let e=i.split(N.NAMED_DATA_CTX_SPLTR),s=e[0].trim(),r=e[1].trim();if(s&&r){let n=Z.getCtx(s,!1);n||(n=Z.registerCtx({},s)),n.add(r,this.init$[i])}}else this.localCtx.add(i,this.init$[i]);for(let i in this.cssInit$)this.bindCssData(i,this.cssInit$[i]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let i=(t=this.getAttribute(N.CTX_NAME_ATTR))==null?void 0:t.trim();if(i&&this.style.setProperty(N.CSS_CTX_PROP,`'${i}'`),this.__initDataCtx(),this[N.SET_LATER_KEY]){for(let e in this[N.SET_LATER_KEY])_o(this,e,this[N.SET_LATER_KEY][e]);delete this[N.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let e of xh)this.addTemplateProcessor(e);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let e=this.getRootNode();if(!e)return;if(e==null?void 0:e.querySelector(`link[${N.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`)){this.render();return}let r=this.constructor.__rootStylesLink.cloneNode(!0);r.setAttribute(N.ROOT_STYLE_ATTR_NAME,this.constructor.is),r.onload=()=>{this.render()},e.nodeType===Node.DOCUMENT_NODE?e.head.appendChild(r):e.prepend(r)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);st==null||st.delete(this.updateCssData),st!=null&&st.size||(Kt==null||Kt.disconnect(),Kt=null,st=null)},100)))}static reg(t,i=!1){t||(sl++,t=`${N.AUTO_TAG_PRFX}-${sl}`),this.__tag=t;let e=window.customElements.get(t);if(e){!i&&e!==this&&console.warn([`Element with tag name "${t}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join(`
`));return}window.customElements.define(t,i?class extends this{}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,i,e){var s;if(i===e)return;let r=(s=this.constructor.__attrDesc)==null?void 0:s[t];r?this.__dataCtxInitialized?this.$[r]=e:this.init$[r]=e:this[t]=e}getCssData(t,i=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let e=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=Oh(e)}catch{!i&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((i,e)=>e===0?"":i).join("--")}__initStyleAttrObserver(){st||(st=new Set),st.add(this.updateCssData),Kt||(Kt=new MutationObserver(t=>{t[0].type==="attributes"&&st.forEach(i=>{i()})}),Kt.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,i=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let e=this.getCssData(this.__extractCssName(t),!0);e===null&&(e=i),this.add(t,e),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,i,e){let s="__"+t;this[s]=this[t],Object.defineProperty(this,t,{set:r=>{this[s]=r,e?window.setTimeout(()=>{i==null||i(r)}):i==null||i(r)},get:()=>this[s]}),this[t]=this[s]}static set shadowStyles(t){let i=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(i)}static set rootStyles(t){if(!this.__rootStylesLink){let i=new Blob([t],{type:"text/css"}),e=URL.createObjectURL(i),s=document.createElement("link");s.href=e,s.rel="stylesheet",this.__rootStylesLink=s}}},Os=mt;Br(Os,"template");function yo(t,i){for(let e in i)e.includes("-")?t.style.setProperty(e,i[e]):t.style[e]=i[e]}function kh(t,i){for(let e in i)i[e].constructor===Boolean?i[e]?t.setAttribute(e,""):t.removeAttribute(e):t.setAttribute(e,i[e])}function Wr(t={tag:"div"}){let i=document.createElement(t.tag);if(t.attributes&&kh(i,t.attributes),t.styles&&yo(i,t.styles),t.properties)for(let e in t.properties)i[e]=t.properties[e];return t.processors&&t.processors.forEach(e=>{e(i)}),t.children&&t.children.forEach(e=>{let s=Wr(e);i.appendChild(s)}),i}var vo="idb-store-ready",Lh="symbiote-db",Uh="symbiote-idb-update_",Ph=class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(vo,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return Uh+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,i){this.name=t,this.storeName=i,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=e=>{this.db=e.target.result,this.objStore=this.db.createObjectStore(i,{keyPath:"_key"}),this.objStore.transaction.oncomplete=s=>{this._notifyWhenReady(s)}},this.request.onsuccess=e=>{this.db=e.target.result,this._notifyWhenReady(e)},this.request.onerror=e=>{console.error(e)},this._subscriptionsMap={},this._updateHandler=e=>{e.key===this.name&&this._subscriptionsMap[e.newValue]&&this._subscriptionsMap[e.newValue].forEach(async r=>{r(await this.read(e.newValue))})},this._localUpdateHandler=e=>{this._updateHandler(e.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((s,r)=>{e.onsuccess=n=>{var l;(l=n.target.result)!=null&&l._value?s(n.target.result._value):(s(null),console.warn(`IDB: cannot read "${t}"`))},e.onerror=n=>{r(n)}})}write(t,i,e=!1){let s={_key:t,_value:i},n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(s);return new Promise((l,o)=>{n.onsuccess=a=>{e||this._notifySubscribers(t),l(a.target.result)},n.onerror=a=>{o(a)}})}delete(t,i=!1){let s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((r,n)=>{s.onsuccess=l=>{i||this._notifySubscribers(t),r(l)},s.onerror=l=>{n(l)}})}getAll(){let i=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((e,s)=>{i.onsuccess=r=>{let n=r.target.result;e(n.map(l=>l._value))},i.onerror=r=>{s(r)}})}subscribe(t,i){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let e=this._subscriptionsMap[t];return e.add(i),{remove:()=>{e.delete(i),e.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,wo.clear(this.name)}},wo=class{static get readyEventName(){return vo}static open(t=Lh,i="store"){let e=t+"/"+i;return this._reg[e]||(this._reg[e]=new Ph(t,i)),this._reg[e]}static clear(t){window.indexedDB.deleteDatabase(t);for(let i in this._reg)i.split("/")[0]===t&&delete this._reg[i]}};Br(wo,"_reg",Object.create(null));function $e(t,i){let e;const s=(...r)=>{clearTimeout(e),e=setTimeout(()=>t(...r),i)};return s.cancel=()=>{clearTimeout(e)},s}const Rh="--uploadcare-blocks-window-height",hs="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function Co(){return typeof window[hs]>"u"?!1:!!window[hs]}function Mh(){if(Co())return;const t=()=>{document.documentElement.style.setProperty(Rh,`${window.innerHeight}px`),window[hs]=!0},i=$e(t,100);return window.addEventListener("resize",i,{passive:!0}),t(),()=>{window[hs]=!1,window.removeEventListener("resize",i)}}const Dh=t=>t,br="{{",To="}}",rl="plural:";function _r(t,i,e={}){var l;let{openToken:s=br,closeToken:r=To,transform:n=Dh}=e;for(let o in i){let a=(l=i[o])==null?void 0:l.toString();t=t.replaceAll(s+o+r,typeof a=="string"?n(a):a)}return t}function Fh(t){const i=[];let e=t.indexOf(br);for(;e!==-1;){const s=t.indexOf(To,e),r=t.substring(e+2,s);if(r.startsWith(rl)){const n=t.substring(e+2,s).replace(rl,""),l=n.substring(0,n.indexOf("(")),o=n.substring(n.indexOf("(")+1,n.indexOf(")"));i.push({variable:r,pluralKey:l,countVariable:o})}e=t.indexOf(br,s)}return i}function nl(t){return Object.prototype.toString.call(t)==="[object Object]"}const Nh=/\W|_/g;function zh(t){return t.split(Nh).map((i,e)=>i.charAt(0)[e>0?"toUpperCase":"toLowerCase"]()+i.slice(1)).join("")}function ll(t,{ignoreKeys:i}={ignoreKeys:[]}){return Array.isArray(t)?t.map(e=>dt(e,{ignoreKeys:i})):t}function dt(t,{ignoreKeys:i}={ignoreKeys:[]}){if(Array.isArray(t))return ll(t,{ignoreKeys:i});if(!nl(t))return t;const e={};for(const s of Object.keys(t)){let r=t[s];if(i.includes(s)){e[s]=r;continue}nl(r)?r=dt(r,{ignoreKeys:i}):Array.isArray(r)&&(r=ll(r,{ignoreKeys:i})),e[zh(s)]=r}return e}const Vh=t=>new Promise(i=>setTimeout(i,t));function Eo({libraryName:t,libraryVersion:i,userAgent:e,publicKey:s="",integration:r=""}){const n="JavaScript";if(typeof e=="string")return e;if(typeof e=="function")return e({publicKey:s,libraryName:t,libraryVersion:i,languageName:n,integration:r});const l=[t,i,s].filter(Boolean).join("/"),o=[n,r].filter(Boolean).join("; ");return`${l} (${o})`}const jh={factor:2,time:100};function Bh(t,i=jh){let e=0;function s(r){const n=Math.round(i.time*i.factor**e);return r({attempt:e,retry:o=>Vh(o??n).then(()=>(e+=1,s(r)))})}return s(t)}class ks extends Error{constructor(e){super();m(this,"originalProgressEvent");this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,ks.prototype),this.originalProgressEvent=e}}const Ls=(t,i)=>{t&&(t.aborted?Promise.resolve().then(i):t.addEventListener("abort",()=>i(),{once:!0}))};class di extends Error{constructor(e="Request canceled"){super(e);m(this,"isCancel",!0);Object.setPrototypeOf(this,di.prototype)}}const Hh=500,xo=({check:t,interval:i=Hh,timeout:e,signal:s})=>new Promise((r,n)=>{let l,o;Ls(s,()=>{l&&clearTimeout(l),n(new di("Poll cancelled"))}),e&&(o=setTimeout(()=>{l&&clearTimeout(l),n(new di("Timed out"))},e));const a=()=>{try{Promise.resolve(t(s)).then(c=>{c?(o&&clearTimeout(o),r(c)):l=setTimeout(a,i)}).catch(c=>{o&&clearTimeout(o),n(c)})}catch(c){o&&clearTimeout(o),n(c)}};l=setTimeout(a,0)}),j={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:50*1024*1024,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:25*1024*1024,multipartChunkSize:5*1024*1024,multipartMinLastPartSize:1024*1024,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Us="application/octet-stream",Ao="original",Et=({method:t,url:i,data:e,headers:s={},signal:r,onProgress:n})=>new Promise((l,o)=>{const a=new XMLHttpRequest,c=(t==null?void 0:t.toUpperCase())||"GET";let u=!1;a.open(c,i,!0),s&&Object.entries(s).forEach(d=>{const[p,b]=d;typeof b<"u"&&!Array.isArray(b)&&a.setRequestHeader(p,b)}),a.responseType="text",Ls(r,()=>{u=!0,a.abort(),o(new di)}),a.onload=()=>{if(a.status!=200)o(new Error(`Error ${a.status}: ${a.statusText}`));else{const d={method:c,url:i,data:e,headers:s||void 0,signal:r,onProgress:n},p=a.getAllResponseHeaders().trim().split(/[\r\n]+/),b={};p.forEach(function(P){const U=P.split(": "),k=U.shift(),$=U.join(": ");k&&typeof k<"u"&&(b[k]=$)});const y=a.response,E=a.status;l({request:d,data:y,headers:b,status:E})}},a.onerror=d=>{u||o(new ks(d))},n&&typeof n=="function"&&(a.upload.onprogress=d=>{d.lengthComputable?n({isComputable:!0,value:d.loaded/d.total}):n({isComputable:!1})}),e?a.send(e):a.send()});function Wh(t,...i){return t}const Xh=({name:t})=>t?[t]:[],qh=Wh;var Kh=()=>new FormData;const So=t=>!1,Ps=t=>typeof Blob<"u"&&t instanceof Blob,Rs=t=>typeof File<"u"&&t instanceof File,Ms=t=>!!t&&typeof t=="object"&&!Array.isArray(t)&&"uri"in t&&typeof t.uri=="string",bi=t=>Ps(t)||Rs(t)||So()||Ms(t),Gh=t=>typeof t=="string"||typeof t=="number"||typeof t>"u",Yh=t=>!!t&&typeof t=="object"&&!Array.isArray(t),Jh=t=>!!t&&typeof t=="object"&&"data"in t&&bi(t.data);function Zh(t,i,e){if(Jh(e)){const{name:s,contentType:r}=e,n=qh(e.data,s,r??Us),l=Xh({name:s,contentType:r});t.push([i,n,...l])}else if(Yh(e))for(const[s,r]of Object.entries(e))typeof r<"u"&&t.push([`${i}[${s}]`,String(r)]);else Gh(e)&&e&&t.push([i,e.toString()])}function Qh(t){const i=[];for(const[e,s]of Object.entries(t))Zh(i,e,s);return i}function Xr(t){const i=Kh(),e=Qh(t);for(const s of e){const[r,n,...l]=s;i.append(r,n,...l)}return i}class Ee extends Error{constructor(e,s,r,n,l){super();m(this,"isCancel");m(this,"code");m(this,"request");m(this,"response");m(this,"headers");this.name="UploadClientError",this.message=e,this.code=s,this.request=r,this.response=n,this.headers=l,Object.setPrototypeOf(this,Ee.prototype)}}const ed=t=>{const i=new URLSearchParams;for(const[e,s]of Object.entries(t))s&&typeof s=="object"&&!Array.isArray(s)?Object.entries(s).filter(r=>r[1]??!1).forEach(r=>i.set(`${e}[${r[0]}]`,String(r[1]))):Array.isArray(s)?s.forEach(r=>{i.append(`${e}[]`,r)}):typeof s=="string"&&s?i.set(e,s):typeof s=="number"&&i.set(e,s.toString());return i.toString()},at=(t,i,e)=>{const s=new URL(t);return s.pathname=(s.pathname+i).replace("//","/"),e&&(s.search=ed(e)),s.toString()};var td="6.10.0";const id="UploadcareUploadClient",sd=td;function Bt(t){return Eo({libraryName:id,libraryVersion:sd,...t})}const rd="RequestThrottledError",ol=15e3,nd=1e3;function ld(t){const{headers:i}=t||{};if(!i||typeof i["retry-after"]!="string")return ol;const e=parseInt(i["retry-after"],10);return Number.isFinite(e)?e*1e3:ol}function xt(t,i){const{retryThrottledRequestMaxTimes:e,retryNetworkErrorMaxTimes:s}=i;return Bh(({attempt:r,retry:n})=>t().catch(l=>{if("response"in l&&(l==null?void 0:l.code)===rd&&r<e)return n(ld(l));if(l instanceof ks&&r<s)return n((r+1)*nd);throw l}))}const $o=t=>{let i="";return(Ps(t)||Rs(t)||Ms(t))&&(i=t.type),i||Us},Io=t=>{let i="";return Rs(t)&&t.name?i=t.name:Ps(t)||So()?i="":Ms(t)&&t.name&&(i=t.name),i||Ao};function qr(t){return typeof t>"u"||t==="auto"?"auto":t?"1":"0"}function od(t,{publicKey:i,fileName:e,contentType:s,baseURL:r=j.baseURL,secureSignature:n,secureExpire:l,store:o,signal:a,onProgress:c,source:u="local",integration:d,userAgent:p,retryThrottledRequestMaxTimes:b=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=j.retryNetworkErrorMaxTimes,metadata:E}){return xt(()=>Et({method:"POST",url:at(r,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:d,userAgent:p})},data:Xr({file:{data:t,name:e||Io(t),contentType:s||$o(t)},UPLOADCARE_PUB_KEY:i,UPLOADCARE_STORE:qr(o),signature:n,expire:l,source:u,metadata:E}),signal:a,onProgress:c}).then(({data:P,headers:U,request:k})=>{const $=dt(JSON.parse(P));if("error"in $)throw new Ee($.error.content,$.error.errorCode,k,$,U);return $}),{retryNetworkErrorMaxTimes:y,retryThrottledRequestMaxTimes:b})}var yr;(function(t){t.Token="token",t.FileInfo="file_info"})(yr||(yr={}));function ad(t,{publicKey:i,baseURL:e=j.baseURL,store:s,fileName:r,checkForUrlDuplicates:n,saveUrlForRecurrentUploads:l,secureSignature:o,secureExpire:a,source:c="url",signal:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=j.retryNetworkErrorMaxTimes,metadata:E}){return xt(()=>Et({method:"POST",headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:d,userAgent:p})},url:at(e,"/from_url/",{jsonerrors:1,pub_key:i,source_url:t,store:qr(s),filename:r,check_URL_duplicates:n?1:void 0,save_URL_duplicates:l?1:void 0,signature:o,expire:a,source:c,metadata:E}),signal:u}).then(({data:P,headers:U,request:k})=>{const $=dt(JSON.parse(P));if("error"in $)throw new Ee($.error.content,$.error.errorCode,k,$,U);return $}),{retryNetworkErrorMaxTimes:y,retryThrottledRequestMaxTimes:b})}var Ce;(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"})(Ce||(Ce={}));const cd=t=>"status"in t&&t.status===Ce.Error;function ud(t,{publicKey:i,baseURL:e=j.baseURL,signal:s,integration:r,userAgent:n,retryThrottledRequestMaxTimes:l=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=j.retryNetworkErrorMaxTimes}={}){return xt(()=>Et({method:"GET",headers:i?{"X-UC-User-Agent":Bt({publicKey:i,integration:r,userAgent:n})}:void 0,url:at(e,"/from_url/status/",{jsonerrors:1,token:t}),signal:s}).then(({data:a,headers:c,request:u})=>{const d=dt(JSON.parse(a));if("error"in d&&!cd(d))throw new Ee(d.error.content,void 0,u,d,c);return d}),{retryNetworkErrorMaxTimes:o,retryThrottledRequestMaxTimes:l})}function hd(t,{publicKey:i,baseURL:e=j.baseURL,jsonpCallback:s,secureSignature:r,secureExpire:n,signal:l,source:o,integration:a,userAgent:c,retryThrottledRequestMaxTimes:u=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=j.retryNetworkErrorMaxTimes}){return xt(()=>Et({method:"POST",headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:a,userAgent:c})},url:at(e,"/group/",{jsonerrors:1,pub_key:i,files:t,callback:s,signature:r,expire:n,source:o}),signal:l}).then(({data:p,headers:b,request:y})=>{const E=dt(JSON.parse(p));if("error"in E)throw new Ee(E.error.content,E.error.errorCode,y,E,b);return E}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:u})}function Oo(t,{publicKey:i,baseURL:e=j.baseURL,signal:s,source:r,integration:n,userAgent:l,retryThrottledRequestMaxTimes:o=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=j.retryNetworkErrorMaxTimes}){return xt(()=>Et({method:"GET",headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:n,userAgent:l})},url:at(e,"/info/",{jsonerrors:1,pub_key:i,file_id:t,source:r}),signal:s}).then(({data:c,headers:u,request:d})=>{const p=dt(JSON.parse(c));if("error"in p)throw new Ee(p.error.content,p.error.errorCode,d,p,u);return p}),{retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a})}function dd(t,{publicKey:i,contentType:e,fileName:s,multipartChunkSize:r=j.multipartChunkSize,baseURL:n="",secureSignature:l,secureExpire:o,store:a,signal:c,source:u="local",integration:d,userAgent:p,retryThrottledRequestMaxTimes:b=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:y=j.retryNetworkErrorMaxTimes,metadata:E}){return xt(()=>Et({method:"POST",url:at(n,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:d,userAgent:p})},data:Xr({filename:s||Ao,size:t,content_type:e||Us,part_size:r,UPLOADCARE_STORE:qr(a),UPLOADCARE_PUB_KEY:i,signature:l,expire:o,source:u,metadata:E}),signal:c}).then(({data:P,headers:U,request:k})=>{const $=dt(JSON.parse(P));if("error"in $)throw new Ee($.error.content,$.error.errorCode,k,$,U);return $.parts=Object.keys($.parts).map(L=>$.parts[L]),$}),{retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y})}function fd(t,i,{contentType:e,signal:s,onProgress:r,retryThrottledRequestMaxTimes:n=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=j.retryNetworkErrorMaxTimes}){return xt(()=>Et({method:"PUT",url:i,data:t,onProgress:r,signal:s,headers:{"Content-Type":e||Us}}).then(o=>(r&&r({isComputable:!0,value:1}),o)).then(({status:o})=>({code:o})),{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:l})}function pd(t,{publicKey:i,baseURL:e=j.baseURL,source:s="local",signal:r,integration:n,userAgent:l,retryThrottledRequestMaxTimes:o=j.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=j.retryNetworkErrorMaxTimes}){return xt(()=>Et({method:"POST",url:at(e,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Bt({publicKey:i,integration:n,userAgent:l})},data:Xr({uuid:t,UPLOADCARE_PUB_KEY:i,source:s}),signal:r}).then(({data:c,headers:u,request:d})=>{const p=dt(JSON.parse(c));if("error"in p)throw new Ee(p.error.content,p.error.errorCode,d,p,u);return p}),{retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a})}function Kr(t,{publicKey:i,baseURL:e,source:s,integration:r,userAgent:n,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:o,signal:a,onProgress:c}){return xo({check:u=>Oo(t,{publicKey:i,baseURL:e,signal:u,source:s,integration:r,userAgent:n,retryThrottledRequestMaxTimes:l,retryNetworkErrorMaxTimes:o}).then(d=>d.isReady?d:(c&&c({isComputable:!0,value:1}),!1)),signal:a})}function md(t){return"defaultEffects"in t}class _i{constructor(i,{baseCDN:e=j.baseCDN,fileName:s}={}){m(this,"uuid");m(this,"name",null);m(this,"size",null);m(this,"isStored",null);m(this,"isImage",null);m(this,"mimeType",null);m(this,"cdnUrl",null);m(this,"s3Url",null);m(this,"originalFilename",null);m(this,"imageInfo",null);m(this,"videoInfo",null);m(this,"contentInfo",null);m(this,"metadata",null);m(this,"s3Bucket",null);m(this,"defaultEffects",null);const{uuid:r,s3Bucket:n}=i,l=at(e,`${r}/`),o=n?at(`https://${n}.s3.amazonaws.com/`,`${r}/${i.filename}`):null;this.uuid=r,this.name=s||i.filename,this.size=i.size,this.isStored=i.isStored,this.isImage=i.isImage,this.mimeType=i.mimeType,this.cdnUrl=l,this.originalFilename=i.originalFilename,this.imageInfo=i.imageInfo,this.videoInfo=i.videoInfo,this.contentInfo=i.contentInfo,this.metadata=i.metadata||null,this.s3Bucket=n||null,this.s3Url=o,md(i)&&(this.defaultEffects=i.defaultEffects)}}const gd=(t,{publicKey:i,fileName:e,baseURL:s,secureSignature:r,secureExpire:n,store:l,contentType:o,signal:a,onProgress:c,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,baseCDN:E,metadata:P})=>od(t,{publicKey:i,fileName:e,contentType:o,baseURL:s,secureSignature:r,secureExpire:n,store:l,signal:a,onProgress:c,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,metadata:P}).then(({file:U})=>Kr(U,{publicKey:i,baseURL:s,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,onProgress:c,signal:a})).then(U=>new _i(U,{baseCDN:E})),bd=(t,{publicKey:i,fileName:e,baseURL:s,signal:r,onProgress:n,source:l,integration:o,userAgent:a,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u,baseCDN:d})=>Oo(t,{publicKey:i,baseURL:s,signal:r,source:l,integration:o,userAgent:a,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u}).then(p=>new _i(p,{baseCDN:d,fileName:e})).then(p=>(n&&n({isComputable:!0,value:1}),p)),_d=(t,{signal:i}={})=>{let e=null,s=null;const r=t.map(()=>new AbortController),n=l=>()=>{s=l,r.forEach((o,a)=>a!==l&&o.abort())};return Ls(i,()=>{r.forEach(l=>l.abort())}),Promise.all(t.map((l,o)=>{const a=n(o);return Promise.resolve().then(()=>l({stopRace:a,signal:r[o].signal})).then(c=>(a(),c)).catch(c=>(e=c,null))})).then(l=>{if(s===null)throw e;return l[s]})};var yd=window.WebSocket;class vd{constructor(){m(this,"events",Object.create({}))}emit(i,e){var s;(s=this.events[i])==null||s.forEach(r=>r(e))}on(i,e){this.events[i]=this.events[i]||[],this.events[i].push(e)}off(i,e){e?this.events[i]=this.events[i].filter(s=>s!==e):this.events[i]=[]}}const wd=(t,i)=>t==="success"?{status:Ce.Success,...i}:t==="progress"?{status:Ce.Progress,...i}:{status:Ce.Error,...i};class Cd{constructor(i,e=3e4){m(this,"key");m(this,"disconnectTime");m(this,"ws");m(this,"queue",[]);m(this,"isConnected",!1);m(this,"subscribers",0);m(this,"emmitter",new vd);m(this,"disconnectTimeoutId",null);this.key=i,this.disconnectTime=e}connect(){if(this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),!this.isConnected&&!this.ws){const i=`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`;this.ws=new yd(i),this.ws.addEventListener("error",e=>{this.emmitter.emit("error",new Error(e.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(e=>this.send(e.event,e.data)),this.queue=[]}),this.ws.addEventListener("message",e=>{const s=JSON.parse(e.data.toString());switch(s.event){case"pusher:connection_established":{this.emmitter.emit("connected",void 0);break}case"pusher:ping":{this.send("pusher:pong",{});break}case"progress":case"success":case"fail":this.emmitter.emit(s.channel,wd(s.event,JSON.parse(s.data)))}})}}disconnect(){const i=()=>{var e;(e=this.ws)==null||e.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{i()},this.disconnectTime):i()}send(i,e){var r;const s=JSON.stringify({event:i,data:e});(r=this.ws)==null||r.send(s)}subscribe(i,e){this.subscribers+=1,this.connect();const s=`task-status-${i}`,r={event:"pusher:subscribe",data:{channel:s}};this.emmitter.on(s,e),this.isConnected?this.send(r.event,r.data):this.queue.push(r)}unsubscribe(i){this.subscribers-=1;const e=`task-status-${i}`,s={event:"pusher:unsubscribe",data:{channel:e}};this.emmitter.off(e),this.isConnected?this.send(s.event,s.data):this.queue=this.queue.filter(r=>r.data.channel!==e),this.subscribers===0&&this.disconnect()}onError(i){return this.emmitter.on("error",i),()=>this.emmitter.off("error",i)}}let Js=null;const Gr=t=>{if(!Js){const i=typeof window>"u"?0:3e4;Js=new Cd(t,i)}return Js},Td=t=>{Gr(t).connect()};function Ed({token:t,publicKey:i,baseURL:e,integration:s,userAgent:r,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:l,onProgress:o,signal:a}){return xo({check:c=>ud(t,{publicKey:i,baseURL:e,integration:s,userAgent:r,retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:l,signal:c}).then(u=>{switch(u.status){case Ce.Error:return new Ee(u.error,u.errorCode);case Ce.Waiting:return!1;case Ce.Unknown:return new Ee(`Token "${t}" was not found.`);case Ce.Progress:return o&&(u.total==="unknown"?o({isComputable:!1}):o({isComputable:!0,value:u.done/u.total})),!1;case Ce.Success:return o&&o({isComputable:!0,value:u.done/u.total}),u;default:throw new Error("Unknown status")}}),signal:a})}const xd=({token:t,pusherKey:i,signal:e,onProgress:s})=>new Promise((r,n)=>{const l=Gr(i),o=l.onError(n),a=()=>{o(),l.unsubscribe(t)};Ls(e,()=>{a(),n(new di("pusher cancelled"))}),l.subscribe(t,c=>{switch(c.status){case Ce.Progress:{s&&(c.total==="unknown"?s({isComputable:!1}):s({isComputable:!0,value:c.done/c.total}));break}case Ce.Success:{a(),s&&s({isComputable:!0,value:c.done/c.total}),r(c);break}case Ce.Error:a(),n(new Ee(c.msg,c.error_code))}})}),Ad=(t,{publicKey:i,fileName:e,baseURL:s,baseCDN:r,checkForUrlDuplicates:n,saveUrlForRecurrentUploads:l,secureSignature:o,secureExpire:a,store:c,signal:u,onProgress:d,source:p,integration:b,userAgent:y,retryThrottledRequestMaxTimes:E,pusherKey:P=j.pusherKey,metadata:U})=>Promise.resolve(Td(P)).then(()=>ad(t,{publicKey:i,fileName:e,baseURL:s,checkForUrlDuplicates:n,saveUrlForRecurrentUploads:l,secureSignature:o,secureExpire:a,store:c,signal:u,source:p,integration:b,userAgent:y,retryThrottledRequestMaxTimes:E,metadata:U})).catch(k=>{const $=Gr(P);return $==null||$.disconnect(),Promise.reject(k)}).then(k=>k.type===yr.FileInfo?k:_d([({signal:$})=>Ed({token:k.token,publicKey:i,baseURL:s,integration:b,userAgent:y,retryThrottledRequestMaxTimes:E,onProgress:d,signal:$}),({signal:$})=>xd({token:k.token,pusherKey:P,signal:$,onProgress:d})],{signal:u})).then(k=>{if(k instanceof Ee)throw k;return k}).then(k=>Kr(k.uuid,{publicKey:i,baseURL:s,integration:b,userAgent:y,retryThrottledRequestMaxTimes:E,onProgress:d,signal:u})).then(k=>new _i(k,{baseCDN:r})),Zs=new WeakMap,Sd=async t=>{if(Zs.has(t))return Zs.get(t);const i=await fetch(t.uri).then(e=>e.blob());return Zs.set(t,i),i},ko=async t=>{if(Rs(t)||Ps(t))return t.size;if(Ms(t))return(await Sd(t)).size;throw new Error("Unknown file type. Cannot determine file size.")},$d=(t,i=j.multipartMinFileSize)=>t>=i,Lo=t=>{const i="[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}",e=new RegExp(i);return!bi(t)&&e.test(t)},Yr=t=>{const i="^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$",e=new RegExp(i);return!bi(t)&&e.test(t)},Id=(t,i)=>new Promise((e,s)=>{const r=[];let n=!1,l=i.length;const o=[...i],a=()=>{const c=i.length-o.length,u=o.shift();u&&u().then(d=>{n||(r[c]=d,l-=1,l?a():e(r))}).catch(d=>{n=!0,s(d)})};for(let c=0;c<t;c++)a()}),Od=(t,i,e,s)=>{const r=s*i,n=Math.min(r+s,e);return t.slice(r,n)},kd=async(t,i,e)=>s=>Od(t,s,i,e),Ld=(t,i,{publicKey:e,contentType:s,onProgress:r,signal:n,integration:l,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a})=>fd(t,i,{publicKey:e,contentType:s,onProgress:r,signal:n,integration:l,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}),Ud=async(t,{publicKey:i,fileName:e,fileSize:s,baseURL:r,secureSignature:n,secureExpire:l,store:o,signal:a,onProgress:c,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,contentType:E,multipartChunkSize:P=j.multipartChunkSize,maxConcurrentRequests:U=j.maxConcurrentRequests,baseCDN:k,metadata:$})=>{const L=s??await ko(t);let le;const xe=(Q,ee)=>{if(!c)return;le||(le=Array(Q).fill(0));const he=oe=>oe.reduce((de,ft)=>de+ft,0);return oe=>{oe.isComputable&&(le[ee]=oe.value,c({isComputable:!0,value:he(le)/Q}))}};return E||(E=$o(t)),dd(L,{publicKey:i,contentType:E,fileName:e||Io(t),baseURL:r,secureSignature:n,secureExpire:l,store:o,signal:a,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,metadata:$}).then(async({uuid:Q,parts:ee})=>{const he=await kd(t,L,P);return Promise.all([Q,Id(U,ee.map((oe,de)=>()=>Ld(he(de),oe,{publicKey:i,contentType:E,onProgress:xe(ee.length,de),signal:a,integration:d,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y})))])}).then(([Q])=>pd(Q,{publicKey:i,baseURL:r,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y})).then(Q=>Q.isReady?Q:Kr(Q.uuid,{publicKey:i,baseURL:r,source:u,integration:d,userAgent:p,retryThrottledRequestMaxTimes:b,retryNetworkErrorMaxTimes:y,onProgress:c,signal:a})).then(Q=>new _i(Q,{baseCDN:k}))};async function Uo(t,{publicKey:i,fileName:e,baseURL:s=j.baseURL,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,contentType:y,multipartMinFileSize:E,multipartChunkSize:P,maxConcurrentRequests:U,baseCDN:k=j.baseCDN,checkForUrlDuplicates:$,saveUrlForRecurrentUploads:L,pusherKey:le,metadata:xe}){if(bi(t)){const Q=await ko(t);return $d(Q,E)?Ud(t,{publicKey:i,contentType:y,multipartChunkSize:P,fileSize:Q,fileName:e,baseURL:s,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:a,source:c,integration:u,userAgent:d,maxConcurrentRequests:U,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,baseCDN:k,metadata:xe}):gd(t,{publicKey:i,fileName:e,contentType:y,baseURL:s,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,baseCDN:k,metadata:xe})}if(Yr(t))return Ad(t,{publicKey:i,fileName:e,baseURL:s,baseCDN:k,checkForUrlDuplicates:$,saveUrlForRecurrentUploads:L,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,pusherKey:le,metadata:xe});if(Lo(t))return bd(t,{publicKey:i,fileName:e,baseURL:s,signal:o,onProgress:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,baseCDN:k});throw new TypeError(`File uploading from "${t}" is not supported`)}class Pd{constructor(i,{baseCDN:e=j.baseCDN}={}){m(this,"uuid");m(this,"filesCount");m(this,"totalSize");m(this,"isStored");m(this,"isImage");m(this,"cdnUrl");m(this,"files");m(this,"createdAt");m(this,"storedAt",null);this.uuid=i.id,this.filesCount=i.filesCount;const s=i.files.filter(Boolean);this.totalSize=Object.values(s).reduce((r,n)=>r+n.size,0),this.isStored=!!i.datetimeStored,this.isImage=!!Object.values(s).filter(r=>r.isImage).length,this.cdnUrl=i.cdnUrl,this.files=s.map(r=>new _i(r,{baseCDN:e})),this.createdAt=i.datetimeCreated,this.storedAt=i.datetimeStored}}const Rd=t=>{for(const i of t)if(!bi(i))return!1;return!0},Md=t=>{for(const i of t)if(!Lo(i))return!1;return!0},Dd=t=>{for(const i of t)if(!Yr(i))return!1;return!0};function Fd(t,{publicKey:i,fileName:e,baseURL:s=j.baseURL,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,contentType:y,multipartChunkSize:E=j.multipartChunkSize,baseCDN:P=j.baseCDN,checkForUrlDuplicates:U,saveUrlForRecurrentUploads:k,jsonpCallback:$}){if(!Rd(t)&&!Dd(t)&&!Md(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let L,le=!0;const xe=t.length,Q=(ee,he)=>{if(!a)return;L||(L=Array(ee).fill(0));const oe=de=>de.reduce((ft,Ht)=>ft+Ht)/ee;return de=>{if(!de.isComputable||!le){le=!1,a({isComputable:!1});return}L[he]=de.value,a({isComputable:!0,value:oe(L)})}};return Promise.all(t.map((ee,he)=>bi(ee)||Yr(ee)?Uo(ee,{publicKey:i,fileName:e,baseURL:s,secureSignature:r,secureExpire:n,store:l,signal:o,onProgress:Q(xe,he),source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b,contentType:y,multipartChunkSize:E,baseCDN:P,checkForUrlDuplicates:U,saveUrlForRecurrentUploads:k}).then(oe=>oe.uuid):ee)).then(ee=>hd(ee,{publicKey:i,baseURL:s,jsonpCallback:$,secureSignature:r,secureExpire:n,signal:o,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:b}).then(he=>new Pd(he,{baseCDN:P})).then(he=>(a&&a({isComputable:!0,value:1}),he)))}class Nd{constructor(i){m(this,"_concurrency",1);m(this,"_pending",[]);m(this,"_running",0);m(this,"_resolvers",new Map);m(this,"_rejectors",new Map);this._concurrency=i}_run(){const i=this._concurrency-this._running;for(let e=0;e<i;e++){const s=this._pending.shift();if(!s)return;const r=this._resolvers.get(s),n=this._rejectors.get(s);if(!r||!n)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,s().finally(()=>{this._resolvers.delete(s),this._rejectors.delete(s),this._running-=1,this._run()}).then(l=>r(l)).catch(l=>n(l))}}add(i){return new Promise((e,s)=>{this._resolvers.set(i,e),this._rejectors.set(i,s),this._pending.push(i),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(i){this._concurrency=i,this._run()}get concurrency(){return this._concurrency}}const Po=()=>({"*blocksRegistry":new Set}),Ro=t=>({...Po(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),Mo=t=>({...Ro(t),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new Nd(1)});function zd(t,i){[...t.querySelectorAll("[l10n]")].forEach(e=>{let s=e.getAttribute("l10n"),r="textContent";if(s.includes(":")){let l=s.split(":");r=l[0],s=l[1]}let n="l10n:"+s;i.__l10nKeys.push(n),i.add(n,s),i.sub(n,l=>{e[r]=i.l10n(l)}),e.removeAttribute("l10n")})}const ke=t=>`*cfg/${t}`,zt=t=>{var i;return(i=t.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g))==null?void 0:i.map(e=>e.toLowerCase()).join("-")},al=new Set;function Do(t){al.has(t)||(al.add(t),console.warn(t))}const Fo=(t,i)=>new Intl.PluralRules(t).select(i),No=({element:t,attribute:i,onSuccess:e,onTimeout:s,timeout:r=300})=>{const n=setTimeout(()=>{a.disconnect(),s()},r),l=c=>{const u=t.getAttribute(i);c.type==="attributes"&&c.attributeName===i&&u!==null&&(clearTimeout(n),a.disconnect(),e(u))},o=t.getAttribute(i);o!==null&&(clearTimeout(n),e(o));const a=new MutationObserver(c=>{const u=c[c.length-1];l(u)});a.observe(t,{attributes:!0,attributeFilter:[i]})},Qs="lr-";class ie extends Os{constructor(){super();m(this,"requireCtxName",!1);m(this,"allowCustomTemplate",!0);m(this,"init$",Po());m(this,"updateCtxCssData",()=>{let e=this.$["*blocksRegistry"];for(let s of e)s.isConnected&&s.updateCssData()});this.activityType=null,this.addTemplateProcessor(zd),this.__l10nKeys=[]}l10n(e,s={}){if(!e)return"";let r=this.getCssData("--l10n-"+e,!0)||e,n=Fh(r);for(let o of n)s[o.variable]=this.pluralize(o.pluralKey,Number(s[o.countVariable]));return _r(r,s)}pluralize(e,s){const r=this.l10n("locale-name")||"en-US",n=Fo(r,s);return this.l10n(`${e}__${n}`)}applyL10nKey(e,s){let r="l10n:"+e;this.$[r]=s,this.__l10nKeys.push(e)}hasBlockInCtx(e){let s=this.$["*blocksRegistry"];for(let r of s)if(e(r))return!0;return!1}setOrAddState(e,s){this.add$({[e]:s},!0)}setActivity(e){if(this.hasBlockInCtx(s=>s.activityType===e)){this.$["*currentActivity"]=e;return}console.warn(`Activity type "${e}" not found in the context`)}connectedCallback(){const e=this.constructor.className;e&&this.classList.toggle(`${Qs}${e}`,!0),Co()||(this._destroyInnerHeightTracker=Mh()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?No({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback()}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._destroyInnerHeightTracker)==null||e.call(this)}initCallback(){this.$["*blocksRegistry"].add(this)}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(e,s=2){let r=["B","KB","MB","GB","TB"],n=c=>this.getCssData("--l10n-unit-"+c.toLowerCase(),!0)||c;if(e===0)return`0 ${n(r[0])}`;let l=1024,o=s<0?0:s,a=Math.floor(Math.log(e)/Math.log(l));return parseFloat((e/l**a).toFixed(o))+" "+n(r[a])}proxyUrl(e){let s=this.cfg.secureDeliveryProxy;return s?_r(s,{previewUrl:e},{transform:r=>window.encodeURIComponent(r)}):e}parseCfgProp(e){return{ctx:this.nodeCtx,name:e.replace("*","")}}get cfg(){if(!this.__cfgProxy){let e=Object.create(null);this.__cfgProxy=new Proxy(e,{set:(s,r,n)=>{if(typeof r!="string")return!1;const l=ke(r);return this.$[l]=n,!0},get:(s,r)=>{const n=ke(r),l=this.parseCfgProp(n);return l.ctx.has(l.name)?l.ctx.read(l.name):(Do("Using CSS variables for configuration is deprecated. Please use `lr-config` instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.getCssData(`--cfg-${zt(r)}`))}})}return this.__cfgProxy}subConfigValue(e,s){const r=this.parseCfgProp(ke(e));r.ctx.has(r.name)?this.sub(ke(e),s):(this.bindCssData(`--cfg-${zt(e)}`),this.sub(`--cfg-${zt(e)}`,s))}static reg(e){if(!e){super.reg();return}super.reg(e.startsWith(Qs)?e:Qs+e)}}m(ie,"StateConsumerScope",null),m(ie,"className","");class Jr extends ie{constructor(){super();m(this,"_handleBackdropClick",()=>{this._closeDialog()});m(this,"_closeDialog",()=>{this.setOrAddState("*modalActive",!1)});m(this,"_handleDialogClose",()=>{this._closeDialog()});m(this,"_handleDialogMouseDown",e=>{this._mouseDownTarget=e.target});m(this,"_handleDialogMouseUp",e=>{e.target===this.ref.dialog&&e.target===this._mouseDownTarget&&this._closeDialog()});this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),typeof HTMLDialogElement=="function")this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let e=document.createElement("div");e.className="backdrop",this.appendChild(e),e.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",e=>{this.$.isOpen!==e&&(this.$.isOpen=e),e&&this.cfg.modalScrollLock?document.body.style.overflow="hidden":document.body.style.overflow=""}),this.subConfigValue("modalBackdropStrokes",e=>{e?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",e=>{e?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}m(Jr,"StateConsumerScope","modal");Jr.template=`
  <dialog ref="dialog">
    <slot></slot>
  </dialog>
`;const cl="active",Ci="___ACTIVITY_IS_ACTIVE___",Me=class Me extends ie{constructor(){super(...arguments);m(this,"historyTracked",!1);m(this,"init$",Ro(this));m(this,"_debouncedHistoryFlush",$e(this._historyFlush.bind(this),10))}_deactivate(){var s;let e=Me._activityRegistry[this.activityKey];this[Ci]=!1,this.removeAttribute(cl),(s=e==null?void 0:e.deactivateCallback)==null||s.call(e)}_activate(){var s;let e=Me._activityRegistry[this.activityKey];this.$["*historyBack"]=this.historyBack.bind(this),this[Ci]=!0,this.setAttribute(cl,""),(s=e==null?void 0:e.activateCallback)==null||s.call(e),this._debouncedHistoryFlush()}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",e=>{this.setAttribute("current-activity",e)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",e=>{this.activityType!==e&&this[Ci]?this._deactivate():this.activityType===e&&!this[Ci]&&this._activate(),e||(this.$["*history"]=[])}))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e.push(this.activityType),this.$["*history"]=e)}_isActivityRegistered(){return this.activityType&&!!Me._activityRegistry[this.activityKey]}get isActivityActive(){return this[Ci]}registerActivity(e,s={}){const{onActivate:r,onDeactivate:n}=s;Me._activityRegistry||(Me._activityRegistry=Object.create(null)),Me._activityRegistry[this.activityKey]={activateCallback:r,deactivateCallback:n}}unregisterActivity(){this.isActivityActive&&this._deactivate(),Me._activityRegistry[this.activityKey]=void 0}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity(),Object.keys(Me._activityRegistry).length===0&&(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let s=e.pop();for(;s===this.activityType;)s=e.pop();this.$["*currentActivity"]=s,this.$["*history"]=e,s||this.setOrAddState("*modalActive",!1)}}};m(Me,"_activityRegistry",Object.create(null));let D=Me;D.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const Vd=20,vr=24,Ii=34,zo=3,Je=zo/2,kt=1,Gi=100/3,z=1,ul=24,jd=6;function Jt(t,i){for(let e in i)t.setAttributeNS(null,e,i[e].toString())}function Pe(t,i={}){let e=document.createElementNS("http://www.w3.org/2000/svg",t);return Jt(e,i),e}function Bd(t,i,e){let{x:s,y:r,width:n,height:l}=t,o=i.includes("w")?0:1,a=i.includes("n")?0:1,c=[-1,1][o],u=[-1,1][a],d=[s+o*n+Je*c,r+a*l+Je*u-vr*e*u],p=[s+o*n+Je*c,r+a*l+Je*u],b=[s+o*n-vr*e*c+Je*c,r+a*l+Je*u];return{d:`M ${d[0]} ${d[1]} L ${p[0]} ${p[1]} L ${b[0]} ${b[1]}`,center:p}}function Hd(t,i,e){let{x:s,y:r,width:n,height:l}=t,o=["n","s"].includes(i)?.5:{w:0,e:1}[i],a=["w","e"].includes(i)?.5:{n:0,s:1}[i],c=[-1,1][o],u=[-1,1][a],d,p;["n","s"].includes(i)?(d=[s+o*n-Ii*e/2,r+a*l+Je*u],p=[s+o*n+Ii*e/2,r+a*l+Je*u]):(d=[s+o*n+Je*c,r+a*l-Ii*e/2],p=[s+o*n+Je*c,r+a*l+Ii*e/2]);let b=`M ${d[0]} ${d[1]} L ${p[0]} ${p[1]}`,y=[p[0]-(p[0]-d[0])/2,p[1]-(p[1]-d[1])/2];return{d:b,center:y}}function Wd(t){return t===""?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}function Xd({rect:t,delta:[i,e],imageBox:s}){return ds({...t,x:t.x+i,y:t.y+e},s)}function ds(t,i){let{x:e}=t,{y:s}=t;return t.x<i.x?e=i.x:t.x+t.width>i.x+i.width&&(e=i.x+i.width-t.width),t.y<i.y?s=i.y:t.y+t.height>i.y+i.height&&(s=i.y+i.height-t.height),{...t,x:e,y:s}}function qd({rect:t,delta:i,aspectRatio:e,imageBox:s}){const[,r]=i;let{y:n,width:l,height:o}=t;n+=r,o-=r,e&&(l=o*e);let a=t.x+t.width/2-l/2;return n<=s.y&&(n=s.y,o=t.y+t.height-n,e&&(l=o*e,a=t.x+t.width/2-l/2)),a<=s.x&&(a=s.x,n=t.y+t.height-o),a+l>=s.x+s.width&&(a=Math.max(s.x,s.x+s.width-l),l=s.x+s.width-a,e&&(o=l/e),n=t.y+t.height-o),o<z&&(o=z,e&&(l=o*e,a=t.x+t.width/2-l/2),n=t.y+t.height-o),l<z&&(l=z,e&&(o=l/e,a=t.x+t.width/2-l/2),n=t.y+t.height-o),{x:a,y:n,width:l,height:o}}function Kd({rect:t,delta:i,aspectRatio:e,imageBox:s}){const[r]=i;let{x:n,width:l,height:o}=t;n+=r,l-=r,e&&(o=l/e);let a=t.y+t.height/2-o/2;return n<=s.x&&(n=s.x,l=t.x+t.width-n,e&&(o=l/e,a=t.y+t.height/2-o/2)),a<=s.y&&(a=s.y,n=t.x+t.width-l),a+o>=s.y+s.height&&(a=Math.max(s.y,s.y+s.height-o),o=s.y+s.height-a,e&&(l=o*e),n=t.x+t.width-l),o<z&&(o=z,e&&(l=o*e),a=t.y+t.height/2-o/2,n=t.x+t.width-l),l<z&&(l=z,e&&(o=l/e),a=t.y+t.height/2-o/2,n=t.x+t.width-l),{x:n,y:a,width:l,height:o}}function Gd({rect:t,delta:i,aspectRatio:e,imageBox:s}){const[,r]=i;let{y:n,width:l,height:o}=t;o+=r,e&&(l=o*e);let a=t.x+t.width/2-l/2;return n+o>=s.y+s.height&&(o=s.y+s.height-n,e&&(l=o*e),a=t.x+t.width/2-l/2),a<=s.x&&(a=s.x,n=t.y),a+l>=s.x+s.width&&(a=Math.max(s.x,s.x+s.width-l),l=s.x+s.width-a,e&&(o=l/e),n=t.y),o<z&&(o=z,e&&(l=o*e),a=t.x+t.width/2-l/2),l<z&&(l=z,e&&(o=l/e),a=t.x+t.width/2-l/2),{x:a,y:n,width:l,height:o}}function Yd({rect:t,delta:i,aspectRatio:e,imageBox:s}){const[r]=i;let{x:n,width:l,height:o}=t;l+=r,e&&(o=l/e);let a=t.y+t.height/2-o/2;return n+l>=s.x+s.width&&(l=s.x+s.width-n,e&&(o=l/e),a=t.y+t.height/2-o/2),a<=s.y&&(a=s.y,n=t.x),a+o>=s.y+s.height&&(a=Math.max(s.y,s.y+s.height-o),o=s.y+s.height-a,e&&(l=o*e),n=t.x),o<z&&(o=z,e&&(l=o*e),a=t.y+t.height/2-o/2),l<z&&(l=z,e&&(o=l/e),a=t.y+t.height/2-o/2),{x:n,y:a,width:l,height:o}}function Jd({rect:t,delta:i,aspectRatio:e,imageBox:s}){let[r,n]=i,{x:l,y:o,width:a,height:c}=t;return l+r<s.x&&(r=s.x-l),o+n<s.y&&(n=s.y-o),l+=r,a-=r,o+=n,c-=n,e&&Math.abs(a/c)>e?(n=a/e-c,c+=n,o-=n,o<=s.y&&(c=c-(s.y-o),a=c*e,l=t.x+t.width-a,o=s.y)):e&&(r=c*e-a,a=a+r,l-=r,l<=s.x&&(a=a-(s.x-l),c=a/e,l=s.x,o=t.y+t.height-c)),c<z&&(c=z,e&&(a=c*e),l=t.x+t.width-a,o=t.y+t.height-c),a<z&&(a=z,e&&(c=a/e),l=t.x+t.width-a,o=t.y+t.height-c),{x:l,y:o,width:a,height:c}}function Zd({rect:t,delta:i,aspectRatio:e,imageBox:s}){let[r,n]=i,{x:l,y:o,width:a,height:c}=t;return l+a+r>s.x+s.width&&(r=s.x+s.width-l-a),o+n<s.y&&(n=s.y-o),a+=r,o+=n,c-=n,e&&Math.abs(a/c)>e?(n=a/e-c,c+=n,o-=n,o<=s.y&&(c=c-(s.y-o),a=c*e,l=t.x,o=s.y)):e&&(r=c*e-a,a+=r,l+a>=s.x+s.width&&(a=s.x+s.width-l,c=a/e,l=s.x+s.width-a,o=t.y+t.height-c)),c<z&&(c=z,e&&(a=c*e),o=t.y+t.height-c),a<z&&(a=z,e&&(c=a/e),o=t.y+t.height-c),{x:l,y:o,width:a,height:c}}function Qd({rect:t,delta:i,aspectRatio:e,imageBox:s}){let[r,n]=i,{x:l,y:o,width:a,height:c}=t;return l+r<s.x&&(r=s.x-l),o+c+n>s.y+s.height&&(n=s.y+s.height-o-c),l+=r,a-=r,c+=n,e&&Math.abs(a/c)>e?(n=a/e-c,c+=n,o+c>=s.y+s.height&&(c=s.y+s.height-o,a=c*e,l=t.x+t.width-a,o=s.y+s.height-c)):e&&(r=c*e-a,a+=r,l-=r,l<=s.x&&(a=a-(s.x-l),c=a/e,l=s.x,o=t.y)),c<z&&(c=z,e&&(a=c*e),l=t.x+t.width-a),a<z&&(a=z,e&&(c=a/e),l=t.x+t.width-a),{x:l,y:o,width:a,height:c}}function ef({rect:t,delta:i,aspectRatio:e,imageBox:s}){let[r,n]=i,{x:l,y:o,width:a,height:c}=t;return l+a+r>s.x+s.width&&(r=s.x+s.width-l-a),o+c+n>s.y+s.height&&(n=s.y+s.height-o-c),a+=r,c+=n,e&&Math.abs(a/c)>e?(n=a/e-c,c+=n,o+c>=s.y+s.height&&(c=s.y+s.height-o,a=c*e,l=t.x,o=s.y+s.height-c)):e&&(r=c*e-a,a+=r,l+a>=s.x+s.width&&(a=s.x+s.width-l,c=a/e,l=s.x+s.width-a,o=t.y)),c<z&&(c=z,e&&(a=c*e)),a<z&&(a=z,e&&(c=a/e)),{x:l,y:o,width:a,height:c}}function tf({direction:t,...i}){switch(t){case"n":return qd(i);case"w":return Kd(i);case"s":return Gd(i);case"e":return Yd(i);case"nw":return Jd(i);case"ne":return Zd(i);case"sw":return Qd(i);case"se":return ef(i);default:return i.rect}}function sf(t,[i,e]){return t.x<=i&&i<=t.x+t.width&&t.y<=e&&e<=t.y+t.height}function rf(t,i){return t.x>=i.x&&t.y>=i.y&&t.x+t.width<=i.x+i.width&&t.y+t.height<=i.y+i.height}function nf(t,i){return Math.abs(t.width/t.height-i)<.1}function Ti({width:t,height:i},e){let s=e/90%2!==0;return{width:s?i:t,height:s?t:i}}function lf(t,i,e){const s=t/i;let r,n;s>e?(r=Math.round(i*e),n=i):(r=t,n=Math.round(t/e));const l=Math.round((t-r)/2),o=Math.round((i-n)/2);return l+r>t&&(r=t-l),o+n>i&&(n=i-o),{x:l,y:o,width:r,height:n}}function ss(t){return{x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)}}function Zt(t,i,e){return Math.min(Math.max(t,i),e)}const Vo=t=>{if(!t)return[];const[i,e]=t.split(":").map(Number);if(!Number.isFinite(i)||!Number.isFinite(e)){console.error(`Invalid crop preset: ${t}`);return}return[{type:"aspect-ratio",width:i,height:e}]},bt=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"}),of=t=>t?t.split(",").map(i=>i.trim()):[],fs=t=>t?t.join(","):"",jo="blocks",Bo="0.29.1";function af(t){return Eo({...t,libraryName:jo,libraryVersion:Bo})}const Ho=t=>{if(typeof t!="string"||!t)return"";let i=t.trim();return i.startsWith("-/")?i=i.slice(2):i.startsWith("/")&&(i=i.slice(1)),i.endsWith("/")&&(i=i.slice(0,i.length-1)),i},Zr=(...t)=>t.filter(i=>typeof i=="string"&&i).map(i=>Ho(i)).join("/-/"),ct=(...t)=>{let i=Zr(...t);return i?`-/${i}/`:""};function Wo(t){let i=new URL(t),e=i.pathname+i.search+i.hash,s=e.lastIndexOf("http"),r=e.lastIndexOf("/"),n="";return s>=0?n=e.slice(s):r>=0&&(n=e.slice(r+1)),n}function cf(t){let i=new URL(t),{pathname:e}=i;const s=e.indexOf("/"),r=e.indexOf("/",s+1);return e.substring(s+1,r)}function uf(t){let i=Xo(t),e=new URL(i),s=e.pathname.indexOf("/-/");return s===-1?[]:e.pathname.substring(s).split("/-/").filter(Boolean).map(n=>Ho(n))}function Xo(t){let i=new URL(t),e=Wo(t),s=qo(e)?Ko(e).pathname:e;return i.pathname=i.pathname.replace(s,""),i.search="",i.hash="",i.toString()}function qo(t){return t.startsWith("http")}function Ko(t){let i=new URL(t);return{pathname:i.origin+i.pathname||"",search:i.search||"",hash:i.hash||""}}const Se=(t,i,e)=>{let s=new URL(Xo(t));if(e=e||Wo(t),s.pathname.startsWith("//")&&(s.pathname=s.pathname.replace("//","/")),qo(e)){let r=Ko(e);s.pathname=s.pathname+(i||"")+(r.pathname||""),s.search=r.search,s.hash=r.hash}else s.pathname=s.pathname+(i||"")+(e||"");return s.toString()},Fi=(t,i)=>{let e=new URL(t);return e.pathname=i+"/",e.toString()},ut=(t,i=",")=>t.trim().split(i).map(e=>e.trim()).filter(e=>e.length>0),rs=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],hl=t=>t?t.filter(i=>typeof i=="string").map(i=>ut(i)).flat():[],Go=(t,i)=>i.some(e=>e.endsWith("*")?(e=e.replace("*",""),t.startsWith(e)):t===e),hf=(t,i)=>i.some(e=>e.startsWith(".")?t.toLowerCase().endsWith(e.toLowerCase()):!1),wr=t=>{let i=t==null?void 0:t.type;return i?Go(i,rs):!1},qe=1e3,Lt=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),Ei=t=>Math.ceil(t*100)/100,df=(t,i=Lt.AUTO)=>{const e=i===Lt.AUTO;if(i===Lt.BYTE||e&&t<qe**1){const s=Fo("en-US",t),r={one:"byte",other:"bytes"}[s];return`${t} ${r}`}return i===Lt.KB||e&&t<qe**2?`${Ei(t/qe**1)} KB`:i===Lt.MB||e&&t<qe**3?`${Ei(t/qe**2)} MB`:i===Lt.GB||e&&t<qe**4?`${Ei(t/qe**3)} GB`:i===Lt.TB||e&&t<qe**5?`${Ei(t/qe**4)} TB`:`${Ei(t/qe**5)} PB`},De={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CLOUD_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT",DONE_FLOW:"DONE_FLOW",INIT_FLOW:"INIT_FLOW"};class Fe{constructor(i){this.ctx=i.ctx,this.type=i.type,this.data=i.data}}class Oe{static eName(i){return"LR_"+i}static emit(i,e=window,s=!0){let r=()=>{e.dispatchEvent(new CustomEvent(this.eName(i.type),{detail:i}))};if(!s){r();return}let n=i.type+i.ctx;this._timeoutStore[n]&&window.clearTimeout(this._timeoutStore[n]),this._timeoutStore[n]=window.setTimeout(()=>{r(),delete this._timeoutStore[n]},20)}}m(Oe,"_timeoutStore",Object.create(null));const dl="[Typed State] Wrong property name: ",ff="[Typed State] Wrong property type: ";class pf{constructor(i,e){this.__typedSchema=i,this.__ctxId=e||Hr.generate(),this.__schema=Object.keys(i).reduce((s,r)=>(s[r]=i[r].value,s),{}),this.__data=Z.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(i,e){if(!this.__typedSchema.hasOwnProperty(i)){console.warn(dl+i);return}let s=this.__typedSchema[i];if((e==null?void 0:e.constructor)===s.type||e instanceof s.type||s.nullable&&e===null){this.__data.pub(i,e);return}console.warn(ff+i)}setMultipleValues(i){for(let e in i)this.setValue(e,i[e])}getValue(i){if(!this.__typedSchema.hasOwnProperty(i)){console.warn(dl+i);return}return this.__data.read(i)}subscribe(i,e){return this.__data.sub(i,e)}remove(){Z.deleteCtx(this.__ctxId)}}class mf{constructor(i){this.__typedSchema=i.typedSchema,this.__ctxId=i.ctxName||Hr.generate(),this.__data=Z.registerCtx({},this.__ctxId),this.__watchList=i.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let e=Object.create(null);this.__notifyObservers=(s,r)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),e[s]||(e[s]=new Set),e[s].add(r),this.__observeTimeout=window.setTimeout(()=>{Object.keys(e).length!==0&&(this.__propertyObservers.forEach(n=>{n({...e})}),e=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let i=new Set(this.__added),e=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const s of this.__collectionObservers)s==null||s([...this.__items],i,e)})}observeCollection(i){return this.__collectionObservers.add(i),this.notify(),()=>{this.unobserveCollection(i)}}unobserveCollection(i){this.__collectionObservers.delete(i)}add(i){let e=new pf(this.__typedSchema);for(let s in i)e.setValue(s,i[s]);return this.__data.add(e.uid,e),this.__added.add(e),this.__watchList.forEach(s=>{this.__subsMap[e.uid]||(this.__subsMap[e.uid]=[]),this.__subsMap[e.uid].push(e.subscribe(s,()=>{this.__notifyObservers(s,e.uid)}))}),this.__items.add(e.uid),this.notify(),e}read(i){return this.__data.read(i)}readProp(i,e){return this.read(i).getValue(e)}publishProp(i,e,s){this.read(i).setValue(e,s)}remove(i){this.__removed.add(this.__data.read(i)),this.__items.delete(i),this.notify(),this.__data.pub(i,null),delete this.__subsMap[i]}clearAll(){this.__items.forEach(i=>{this.remove(i)})}observeProperties(i){return this.__propertyObservers.add(i),()=>{this.unobserveProperties(i)}}unobserveProperties(i){this.__propertyObservers.delete(i)}findItems(i){let e=[];return this.__items.forEach(s=>{let r=this.read(s);i(r)&&e.push(s)}),e}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){Z.deleteCtx(this.__data),this.__propertyObservers=null,this.__collectionObservers=null;for(let i in this.__subsMap)this.__subsMap[i].forEach(e=>{e.remove()}),delete this.__subsMap[i]}}const gf=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},validationMultipleLimitMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:_i,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silentUpload:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0}});class G extends D{constructor(){super(...arguments);m(this,"couldBeUploadCollectionOwner",!1);m(this,"isUploadCollectionOwner",!1);m(this,"init$",Mo(this));m(this,"__initialUploadMetadata",null);m(this,"_validators",[this._validateMultipleLimit.bind(this),this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this)]);m(this,"_debouncedRunValidators",$e(this._runValidators.bind(this),100));m(this,"_flushOutputItems",$e(()=>{const e=this.getOutputData();e.length===this.uploadCollection.size&&(Oe.emit(new Fe({type:De.DATA_OUTPUT,ctx:this.ctxName,data:e})),this.$["*outputData"]=e)},100));m(this,"_handleCollectonUpdate",(e,s,r)=>{var n;this._runValidators();for(let l of r)(n=l==null?void 0:l.getValue("abortController"))==null||n.abort(),l==null||l.setValue("abortController",null),URL.revokeObjectURL(l==null?void 0:l.getValue("thumbUrl"));this.$["*uploadList"]=e.map(l=>({uid:l})),this._flushOutputItems()});m(this,"_handleCollectionPropertiesUpdate",e=>{this._flushOutputItems();const s=this.uploadCollection,r=[...new Set(Object.values(e).map(n=>[...n]).flat())].map(n=>s.read(n)).filter(Boolean);for(const n of r)this._runValidatorsForEntry(n);if(e.uploadProgress){let n=0,l=s.findItems(a=>!a.getValue("uploadError"));l.forEach(a=>{n+=s.readProp(a,"uploadProgress")});let o=Math.round(n/l.length);this.$["*commonProgress"]=o,Oe.emit(new Fe({type:De.UPLOAD_PROGRESS,ctx:this.ctxName,data:o}),void 0,o===100)}if(e.fileInfo){this.cfg.cropPreset&&this.setInitialCrop();let n=s.findItems(o=>!!o.getValue("fileInfo")),l=s.findItems(o=>!!o.getValue("uploadError")||!!o.getValue("validationErrorMsg"));if(s.size-l.length===n.length){let o=this.getOutputData(a=>!!a.getValue("fileInfo")&&!a.getValue("silentUpload"));o.length>0&&Oe.emit(new Fe({type:De.UPLOAD_FINISH,ctx:this.ctxName,data:o}))}}e.uploadError&&s.findItems(l=>!!l.getValue("uploadError")).forEach(l=>{Oe.emit(new Fe({type:De.UPLOAD_ERROR,ctx:this.ctxName,data:s.readProp(l,"uploadError")}),void 0,!1)}),e.validationErrorMsg&&s.findItems(l=>!!l.getValue("validationErrorMsg")).forEach(l=>{Oe.emit(new Fe({type:De.VALIDATION_ERROR,ctx:this.ctxName,data:s.readProp(l,"validationErrorMsg")}),void 0,!1)}),e.cdnUrlModifiers&&s.findItems(l=>!!l.getValue("cdnUrlModifiers")).forEach(l=>{Oe.emit(new Fe({type:De.CLOUD_MODIFICATION,ctx:this.ctxName,data:Z.getCtx(l).store}),void 0,!1)})})}setUploadMetadata(e){Do("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=e:this.__initialUploadMetadata=e}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let s=new mf({typedSchema:gf,watchList:["uploadProgress","fileInfo","uploadError","validationErrorMsg","validationMultipleLimitMsg","cdnUrlModifiers"]});this.add("*uploadCollection",s)}const e=()=>this.hasBlockInCtx(s=>s instanceof G?s.isUploadCollectionOwner&&s.isConnected&&s!==this:!1);this.couldBeUploadCollectionOwner&&!e()&&(this.isUploadCollectionOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectonUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxLocalFileSizeBytes",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMin",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMax",()=>this._debouncedRunValidators()),this.subConfigValue("multiple",()=>this._debouncedRunValidators()),this.subConfigValue("imgOnly",()=>this._debouncedRunValidators()),this.subConfigValue("accept",()=>this._debouncedRunValidators())),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata),this.subConfigValue("maxConcurrentRequests",s=>{this.$["*uploadQueue"].concurrency=Number(s)||1})}destroyCallback(){var e,s;super.destroyCallback(),this.isUploadCollectionOwner&&((e=this._unobserveCollectionProperties)==null||e.call(this),(s=this._unobserveCollection)==null||s.call(this))}addFileFromUrl(e,{silent:s,fileName:r,source:n}={}){this.uploadCollection.add({externalUrl:e,fileName:r??null,silentUpload:s??!1,source:n??bt.API})}addFileFromUuid(e,{silent:s,fileName:r,source:n}={}){this.uploadCollection.add({uuid:e,fileName:r??null,silentUpload:s??!1,source:n??bt.API})}addFileFromObject(e,{silent:s,fileName:r,source:n,fullPath:l}={}){this.uploadCollection.add({file:e,isImage:wr(e),mimeType:e.type,fileName:r??e.name,fileSize:e.size,silentUpload:s??!1,source:n??bt.API,fullPath:l??null})}addFiles(e){console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),e.forEach(s=>{this.uploadCollection.add({file:s,isImage:wr(s),mimeType:s.type,fileName:s.name,fileSize:s.size})})}uploadAll(){this.$["*uploadTrigger"]={}}openSystemDialog(e={}){let s=fs(hl([this.cfg.accept??"",...this.cfg.imgOnly?rs:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,e.captureCamera?(this.fileInput.capture="",this.fileInput.accept=fs(rs)):this.fileInput.accept=s,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(r=>this.addFileFromObject(r,{source:bt.LOCAL})),this.$["*currentActivity"]=D.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let e=[];return this.cfg.sourceList&&(e=ut(this.cfg.sourceList)),e}initFlow(e=!1){var s;if(this.uploadCollection.size>0&&!e)this.set$({"*currentActivity":D.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(((s=this.sourceList)==null?void 0:s.length)===1){let r=this.sourceList[0];r==="local"?(this.$["*currentActivity"]=D.activities.UPLOAD_LIST,this==null||this.openSystemDialog()):(Object.values(G.extSrcList).includes(r)?this.set$({"*currentActivityParams":{externalSourceType:r},"*currentActivity":D.activities.EXTERNAL}):this.$["*currentActivity"]=r,this.setOrAddState("*modalActive",!0))}else this.set$({"*currentActivity":D.activities.START_FROM}),this.setOrAddState("*modalActive",!0);Oe.emit(new Fe({type:De.INIT_FLOW,ctx:this.ctxName}),void 0,!1)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1),Oe.emit(new Fe({type:De.DONE_FLOW,ctx:this.ctxName}),void 0,!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(e){const s=this.cfg.imgOnly,r=this.cfg.accept,n=hl([...s?rs:[],r]);if(!n.length)return;const l=e.getValue("mimeType"),o=e.getValue("fileName");if(!l||!o)return;const a=Go(l,n),c=hf(o,n);if(!a&&!c)return this.l10n("file-type-not-allowed")}_validateMaxSizeLimit(e){const s=this.cfg.maxLocalFileSizeBytes,r=e.getValue("fileSize");if(s&&r&&r>s)return this.l10n("files-max-size-limit-error",{maxFileSize:df(s)})}_validateMultipleLimit(e){const s=this.uploadCollection.items(),r=s.indexOf(e.uid),n=this.cfg.multiple?this.cfg.multipleMin:1,l=this.cfg.multiple?this.cfg.multipleMax:1;if(n&&s.length<n)return this.l10n("files-count-minimum",{count:n});if(l&&r>=l)return this.l10n("files-count-allowed",{count:l})}_validateIsImage(e){const s=this.cfg.imgOnly,r=e.getValue("isImage");if(!(!s||r)&&!(!e.getValue("fileInfo")&&e.getValue("externalUrl"))&&!(!e.getValue("fileInfo")&&!e.getValue("mimeType")))return this.l10n("images-only-accepted")}_runValidatorsForEntry(e){for(const s of this._validators){const r=s(e);if(r){e.setValue("validationErrorMsg",r);return}}e.setValue("validationErrorMsg",null)}_runValidators(){for(const e of this.uploadCollection.items())setTimeout(()=>{const s=this.uploadCollection.read(e);s&&this._runValidatorsForEntry(s)})}setInitialCrop(){const e=Vo(this.cfg.cropPreset);if(e){const[s]=e,r=this.uploadCollection.findItems(n=>{var l;return n.getValue("fileInfo")&&n.getValue("isImage")&&!((l=n.getValue("cdnUrlModifiers"))!=null&&l.includes("/crop/"))}).map(n=>this.uploadCollection.read(n));for(const n of r){const l=n.getValue("fileInfo"),{width:o,height:a}=l.imageInfo,c=s.width/s.height,u=lf(o,a,c),d=ct(`crop/${u.width}x${u.height}/${u.x},${u.y}`,"preview");n.setMultipleValues({cdnUrlModifiers:d,cdnUrl:Se(n.getValue("cdnUrl"),d)}),this.uploadCollection.size===1&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(p=>p.activityType===D.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=n,this.$["*currentActivity"]=D.activities.CLOUD_IMG_EDIT)}}}async getMetadataFor(e){const s=this.cfg.metadata??this.$["*uploadMetadata"];if(typeof s=="function"){const r=this.getOutputItem(e);return await s(r)}return s}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:af,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(e){const s=Z.getCtx(e).store,r=s.fileInfo||{name:s.fileName,originalFilename:s.fileName,size:s.fileSize,isImage:s.isImage,mimeType:s.mimeType};return{...r,file:s.file,externalUrl:s.externalUrl,cdnUrlModifiers:s.cdnUrlModifiers,cdnUrl:s.cdnUrl??r.cdnUrl??null,validationErrorMessage:s.validationErrorMsg,uploadError:s.uploadError,isUploaded:!!s.uuid&&!!s.fileInfo,isValid:!s.validationErrorMsg&&!s.uploadError,fullPath:s.fullPath,uploadProgress:s.uploadProgress}}getOutputData(e){return(e?this.uploadCollection.findItems(e):this.uploadCollection.items()).map(n=>this.getOutputItem(n))}}G.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"});G.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...G.extSrcList});const Ie={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0};function bf(t,i){if(typeof i=="number")return Ie[t]!==i?`${t}/${i}`:"";if(typeof i=="boolean")return i&&Ie[t]!==i?`${t}`:"";if(t==="filter"){if(!i||Ie[t]===i.amount)return"";let{name:e,amount:s}=i;return`${t}/${e}/${s}`}if(t==="crop"){if(!i)return"";let{dimensions:e,coords:s}=i;return`${t}/${e.join("x")}/${s.join(",")}`}return""}const Yo=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Ds(t){return Zr(...Yo.filter(i=>typeof t[i]<"u"&&t[i]!==null).map(i=>{let e=t[i];return bf(i,e)}).filter(i=>!!i))}const Jo=Zr("format/auto","progressive/yes"),rt=([t])=>typeof t<"u"?Number(t):void 0,fl=()=>!0,_f=([t,i])=>({name:t,amount:typeof i<"u"?Number(i):100}),yf=([t,i])=>({dimensions:ut(t,"x").map(Number),coords:ut(i).map(Number)}),vf={enhance:rt,brightness:rt,exposure:rt,gamma:rt,contrast:rt,saturation:rt,vibrance:rt,warmth:rt,filter:_f,mirror:fl,flip:fl,rotate:rt,crop:yf};function wf(t){let i={};for(let e of t){let[s,...r]=e.split("/");if(!Yo.includes(s))continue;const n=vf[s],l=n(r);i[s]=l}return i}const ge=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),et=[ge.CROP,ge.TUNING,ge.FILTERS],Cf=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],Tf=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],Ef=["rotate","mirror","flip"],fi=Object.freeze({brightness:{zero:Ie.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:Ie.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:Ie.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:Ie.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:Ie.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:Ie.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:Ie.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:Ie.enhance,range:[0,100],keypointsNumber:1},filter:{zero:Ie.filter,range:[0,100],keypointsNumber:1}}),xf="https://ucarecdn.com",Af="https://upload.uploadcare.com",Sf="https://social.uploadcare.com",Qt={pubkey:"",multiple:!0,multipleMin:0,multipleMax:0,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:fs(et),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:xf,baseUrl:Af,socialBaseUrl:Sf,secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",metadata:null},_e=t=>String(t),Ke=t=>{const i=Number(t);if(Number.isNaN(i))throw new Error(`Invalid number: "${t}"`);return i},re=t=>{if(typeof t>"u"||t===null)return!1;if(typeof t=="boolean")return t;if(t==="true"||t==="")return!0;if(t==="false")return!1;throw new Error(`Invalid boolean: "${t}"`)},$f=t=>t==="auto"?t:re(t),If={pubkey:_e,multiple:re,multipleMin:Ke,multipleMax:Ke,confirmUpload:re,imgOnly:re,accept:_e,externalSourcesPreferredTypes:_e,store:$f,cameraMirror:re,sourceList:_e,maxLocalFileSizeBytes:Ke,thumbSize:Ke,showEmptyList:re,useLocalImageEditor:re,useCloudImageEditor:re,cloudImageEditorTabs:_e,removeCopyright:re,cropPreset:_e,modalScrollLock:re,modalBackdropStrokes:re,sourceListWrap:re,remoteTabSessionKey:_e,cdnCname:_e,baseUrl:_e,socialBaseUrl:_e,secureSignature:_e,secureExpire:_e,secureDeliveryProxy:_e,retryThrottledRequestMaxTimes:Ke,multipartMinFileSize:Ke,multipartChunkSize:Ke,maxConcurrentRequests:Ke,multipartMaxConcurrentRequests:Ke,multipartMaxAttempts:Ke,checkForUrlDuplicates:re,saveUrlForRecurrentUploads:re,groupOutput:re,userAgentIntegration:_e},Of=(t,i)=>{if(!(typeof i>"u"||i===null))try{return If[t](i)}catch(e){return console.error(`Invalid value for config key "${t}".`,e),Qt[t]}},ps=Object.keys(Qt),kf=["metadata"],Lf=t=>kf.includes(t),ms=ps.filter(t=>!Lf(t)),Uf={...Object.fromEntries(ms.map(t=>[zt(t),t])),...Object.fromEntries(ms.map(t=>[t.toLowerCase(),t]))},Pf={...Object.fromEntries(ps.map(t=>[zt(t),ke(t)])),...Object.fromEntries(ps.map(t=>[t.toLowerCase(),ke(t)]))};class Zo extends ie{constructor(){super();m(this,"ctxOwner",!0);m(this,"requireCtxName",!0);this.init$={...this.init$,...Object.fromEntries(Object.entries(Qt).map(([e,s])=>[ke(e),s]))}}initCallback(){super.initCallback();const e=this;for(const s of ms)this.sub(ke(s),r=>{r!==Qt[s]&&(e[s]=r)},!1);for(const s of ps){let r="__"+s;e[r]=e[s],Object.defineProperty(this,s,{set:n=>{if(e[r]=n,ms.includes(s)){const l=[...new Set([zt(s),s.toLowerCase()])];for(const o of l)typeof n>"u"||n===null?this.removeAttribute(o):this.setAttribute(o,n.toString())}this.$[ke(s)]!==n&&(typeof n>"u"||n===null?this.$[ke(s)]=Qt[s]:this.$[ke(s)]=n)},get:()=>this.$[ke(s)]}),typeof e[s]<"u"&&e[s]!==null&&(e[s]=e[r])}}attributeChangedCallback(e,s,r){if(s===r)return;const n=Uf[e],o=Of(n,r)??Qt[n],a=this;a[n]=o}}Zo.bindAttributes(Pf);class Qr extends ie{constructor(){super(...arguments);m(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",e=>{if(!e)return;let s=this.getCssData(`--icon-${e}`);s&&(this.$.path=s)}),this.sub("path",e=>{if(!e)return;e.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=e):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${e}"></path>`)}),this.sub("size",e=>{this.$.viewBox=`0 0 ${e} ${e}`})}}Qr.template=`
  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>
`;Qr.bindAttributes({name:"name",size:"size"});const Rf="https://ucarecdn.com",ei=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:Rf},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),Mf=t=>[...new Set(t)],Oi="--lr-img-",pl="unresolved",Gt=2,Yt=3,ml=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Qo=Object.create(null);var Tl;for(let t in ei)Qo[Oi+t]=((Tl=ei[t])==null?void 0:Tl.default)||"";class Df extends Os{constructor(){super(...arguments);m(this,"cssInit$",Qo)}$$(e){return this.$[Oi+e]}set$$(e){for(let s in e)this.$[Oi+s]=e[s]}sub$$(e,s){this.sub(Oi+e,r=>{r===null||r===""||s(r)})}_fmtAbs(e){return!e.includes("//")&&!ml&&(e=new URL(e,document.baseURI).href),e}_getCdnModifiers(e=""){return ct(e&&`resize/${e}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||ei.format.default}`,`quality/${this.$$("quality")||ei.quality.default}`)}_getUrlBase(e=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(ml&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let s=this._getCdnModifiers(e);if(this.$$("src").startsWith(this.$$("cdn-cname")))return Se(this.$$("src"),s);if(this.$$("cdn-cname")&&this.$$("uuid"))return this._proxyUrl(Se(Fi(this.$$("cdn-cname"),this.$$("uuid")),s));if(this.$$("uuid"))return this._proxyUrl(Se(Fi(this.$$("cdn-cname"),this.$$("uuid")),s));if(this.$$("proxy-cname"))return this._proxyUrl(Se(this.$$("proxy-cname"),s,this._fmtAbs(this.$$("src"))));if(this.$$("pubkey"))return this._proxyUrl(Se(`https://${this.$$("pubkey")}.ucr.io/`,s,this._fmtAbs(this.$$("src"))))}_proxyUrl(e){return this.$$("secure-delivery-proxy")?_r(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:r=>window.encodeURIComponent(r)}):e}_getElSize(e,s=1,r=!0){let n=e.getBoundingClientRect(),l=s*Math.round(n.width),o=r?"":s*Math.round(n.height);return l||o?`${l||""}x${o||""}`:null}_setupEventProxy(e){let s=n=>{n.stopPropagation();let l=new Event(n.type,n);this.dispatchEvent(l)},r=["load","error"];for(let n of r)e.addEventListener(n,s)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(pl,""),this.img.onload=()=>{this.img.removeAttribute(pl)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(e=>{ei[e.name]||this.img.setAttribute(e.name,e.value)})}get breakpoints(){return this.$$("breakpoints")?Mf(ut(this.$$("breakpoints")).map(e=>Number(e))):null}renderBg(e){let s=new Set;this.breakpoints?this.breakpoints.forEach(n=>{s.add(`url("${this._getUrlBase(n+"x")}") ${n}w`),this.$$("hi-res-support")&&s.add(`url("${this._getUrlBase(n*Gt+"x")}") ${n*Gt}w`),this.$$("ultra-res-support")&&s.add(`url("${this._getUrlBase(n*Yt+"x")}") ${n*Yt}w`)}):(s.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&s.add(`url("${this._getUrlBase(this._getElSize(e,Gt))}") ${Gt}x`),this.$$("ultra-res-support")&&s.add(`url("${this._getUrlBase(this._getElSize(e,Yt))}") ${Yt}x`));let r=`image-set(${[...s].join(", ")})`;e.style.setProperty("background-image",r),e.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach(s=>{e.add(this._getUrlBase(s+"x")+` ${s}w`),this.$$("hi-res-support")&&e.add(this._getUrlBase(s*Gt+"x")+` ${s*Gt}w`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(s*Yt+"x")+` ${s*Yt}w`)}):(e.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(e=>{this.$$("intersection")?this.initIntersection(e,()=>{this.renderBg(e)}):this.renderBg(e)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(e,s){let r={root:null,rootMargin:"0px"};this._isnObserver=new IntersectionObserver(n=>{n.forEach(l=>{l.isIntersecting&&(s(),this._isnObserver.unobserve(e))})},r),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(e=>{this._isnObserver.unobserve(e)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(ei)}attributeChangedCallback(e,s,r){window.setTimeout(()=>{this.$[Oi+e]=r})}}class Ff extends Df{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",i=>{this.$$("is-background-for")||(this.img.loading=i?"lazy":"eager")})}}class en extends G{constructor(){super(),this.init$={...this.init$,"*simpleButtonText":"",withDropZone:!0,onClick:()=>{this.initFlow()}}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",i=>{typeof i>"u"||(this.$.withDropZone=re(i))}),this.subConfigValue("multiple",i=>{this.$["*simpleButtonText"]=i?this.l10n("upload-files"):this.l10n("upload-file")})}}en.template=`
  <lr-drop-area set="@disabled: !withDropZone">
    <button type="button" set="onclick: onClick">
      <lr-icon name="upload"></lr-icon>
      <span>{{*simpleButtonText}}</span>
      <slot></slot>
      <div class="visual-drop-area"></div>
    </button>
  </lr-drop-area>
`;en.bindAttributes({dropzone:null});class Nf extends D{constructor(){super(...arguments);m(this,"historyTracked",!0);m(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function zf(t){return new Promise(i=>{typeof window.FileReader!="function"&&i(!1);try{let e=new FileReader;e.onerror=()=>{i(!0)};let s=r=>{r.type!=="loadend"&&e.abort(),i(!1)};e.onloadend=s,e.onprogress=s,e.readAsDataURL(t)}catch{i(!1)}})}function Vf(t,i){return new Promise(e=>{let s=0;const r=[],n=o=>{o||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),e(null)),o.isFile?(s++,o.file(a=>{s--;const c=new File([a],a.name,{type:a.type||i});r.push({type:"file",file:c,fullPath:o.fullPath}),s===0&&e(r)})):o.isDirectory&&l(o.createReader())};let l=o=>{s++,o.readEntries(a=>{s--;for(let c of a)n(c);s===0&&e(r)})};n(t)})}function jf(t){const i=[],e=[];for(let s=0;s<t.items.length;s++){let r=t.items[s];if(r)if(r.kind==="file"){const n=r.type;if(typeof r.webkitGetAsEntry=="function"||typeof r.getAsEntry=="function"){let o=typeof r.webkitGetAsEntry=="function"?r.webkitGetAsEntry():r.getAsEntry();e.push(Vf(o,n).then(a=>{a&&i.push(...a)}));continue}const l=r.getAsFile();l&&e.push(zf(l).then(o=>{o||i.push({type:"file",file:l})}))}else r.kind==="string"&&r.type.match("^text/uri-list")&&e.push(new Promise(n=>{r.getAsString(l=>{i.push({type:"url",url:l}),n(void 0)})}))}return Promise.all(e).then(()=>i)}const we={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let gl=["focus"],Bf=100,er=new Map;function Hf(t,i){let e=Math.max(Math.min(t[0],i.x+i.width),i.x),s=Math.max(Math.min(t[1],i.y+i.height),i.y);return Math.sqrt((t[0]-e)*(t[0]-e)+(t[1]-s)*(t[1]-s))}function bl(t){let i=0,e=document.body,s=new Set,r=y=>s.add(y),n=we.INACTIVE,l=y=>{t.shouldIgnore()&&y!==we.INACTIVE||(n!==y&&s.forEach(E=>E(y)),n=y)},o=()=>i>0;r(y=>t.onChange(y));let a=()=>{i=0,l(we.INACTIVE)},c=()=>{i+=1,n===we.INACTIVE&&l(we.ACTIVE)},u=()=>{i-=1,o()||l(we.INACTIVE)},d=y=>{y.preventDefault(),i=0,l(we.INACTIVE)},p=y=>{if(t.shouldIgnore())return;o()||(i+=1);let E=[y.x,y.y],P=t.element.getBoundingClientRect(),U=Math.floor(Hf(E,P)),k=U<Bf,$=y.composedPath().includes(t.element);er.set(t.element,U);let L=Math.min(...er.values())===U;$&&L?(y.preventDefault(),l(we.OVER)):l(k&&L?we.NEAR:we.ACTIVE)},b=async y=>{if(t.shouldIgnore())return;y.preventDefault();let E=await jf(y.dataTransfer);t.onItems(E),l(we.INACTIVE)};return e.addEventListener("drop",d),e.addEventListener("dragleave",u),e.addEventListener("dragenter",c),e.addEventListener("dragover",p),t.element.addEventListener("drop",b),gl.forEach(y=>{window.addEventListener(y,a)}),()=>{er.delete(t.element),e.removeEventListener("drop",d),e.removeEventListener("dragleave",u),e.removeEventListener("dragenter",c),e.removeEventListener("dragover",p),t.element.removeEventListener("drop",b),gl.forEach(y=>{window.removeEventListener(y,a)})}}class tn extends G{constructor(){super(),this.init$={...this.init$,state:we.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null}}isActive(){if(!this.$.isEnabled)return!1;const i=this.getBoundingClientRect(),e=i.width>0&&i.height>0,s=i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth),r=window.getComputedStyle(this),n=r.visibility!=="hidden"&&r.display!=="none";return e&&n&&s}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("disabled",e=>{this.set$({isEnabled:!re(e)})}),this.defineAccessor("clickable",e=>{this.set$({isClickable:re(e)})}),this.defineAccessor("with-icon",e=>{this.set$({withIcon:re(e)})}),this.defineAccessor("fullscreen",e=>{this.set$({isFullscreen:re(e)})}),this.defineAccessor("text",e=>{typeof e=="string"?this.set$({text:this.l10n(e)||e}):this.set$({text:this.l10n("drop-files-here")})}),this._destroyDropzone=bl({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:e=>{this.$.state=e},onItems:e=>{e.length&&(e.forEach(s=>{s.type==="url"?this.addFileFromUrl(s.url,{source:bt.DROP_AREA}):s.type==="file"&&this.addFileFromObject(s.file,{source:bt.DROP_AREA,fullPath:s.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":D.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let i=this.ref["content-wrapper"];i&&(this._destroyContentWrapperDropzone=bl({element:i,onChange:e=>{var r;const s=(r=Object.entries(we).find(([,n])=>n===e))==null?void 0:r[0].toLowerCase();s&&i.setAttribute("drag-state",s)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",e=>{var r;const s=(r=Object.entries(we).find(([,n])=>n===e))==null?void 0:r[0].toLowerCase();s&&this.setAttribute("drag-state",s)}),this.subConfigValue("sourceList",e=>{const s=ut(e);this.$.isEnabled=s.includes(G.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",e=>{this.toggleAttribute("hidden",!e)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()?!0:this.$.isFullscreen?[...this.$["lr-drop-area/targets"]].filter(s=>s!==this).filter(s=>s.isActive()).length>0:!1}_couldHandleFiles(){let i=this.cfg.multiple,e=this.cfg.multipleMax,s=this.uploadCollection.size;return!(i&&e&&s>=e||!i&&s>0)}destroyCallback(){var i,e,s,r;super.destroyCallback(),(e=(i=this.$["lr-drop-area/targets"])==null?void 0:i.remove)==null||e.call(i,this),(s=this._destroyDropzone)==null||s.call(this),(r=this._destroyContentWrapperDropzone)==null||r.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}tn.template=`
  <slot>
    <div data-default-slot hidden></div>
    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">
      <div class="icon-container" set="@hidden: !withIcon">
        <lr-icon name="default"></lr-icon>
        <lr-icon name="arrow-down"></lr-icon>
      </div>
      <span class="text">{{text}}</span>
    </div>
  </slot>
`;tn.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});const Wf="src-type-";class sn extends G{constructor(){super(...arguments);m(this,"_registeredTypes",{});m(this,"init$",{...this.init$,iconName:"default"})}initTypes(){this.registerType({type:G.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:G.sourceTypes.URL,activity:D.activities.URL,textKey:"from-url"}),this.registerType({type:G.sourceTypes.CAMERA,activity:D.activities.CAMERA,onClick:()=>{var s=document.createElement("input").capture!==void 0;return s&&this.openSystemDialog({captureCamera:!0}),!s}}),this.registerType({type:"draw",activity:D.activities.DRAW,icon:"edit-draw"});for(let e of Object.values(G.extSrcList))this.registerType({type:e,activity:D.activities.EXTERNAL,activityParams:{externalSourceType:e}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",e=>{e&&this.applyType(e)})}registerType(e){this._registeredTypes[e.type]=e}getType(e){return this._registeredTypes[e]}applyType(e){const s=this._registeredTypes[e];if(!s){console.warn("Unsupported source type: "+e);return}const{textKey:r=e,icon:n=e,activity:l,onClick:o,activityParams:a={}}=s;this.applyL10nKey("src-type",`${Wf}${r}`),this.$.iconName=n,this.onclick=c=>{(o?o(c):!!l)&&this.set$({"*currentActivityParams":a,"*currentActivity":l})}}}sn.template=`
  <lr-icon set="@name: iconName"></lr-icon>
  <div class="txt" l10n="src-type"></div>
`;sn.bindAttributes({type:null});class Xf extends ie{initCallback(){super.initCallback(),this.subConfigValue("sourceList",i=>{let e=ut(i),s="";e.forEach(r=>{s+=`<lr-source-btn type="${r}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=s:this.outerHTML=s})}}function ea(t){let i=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(i)}function qf(t="#fff",i="rgba(0, 0, 0, .1)"){return ea(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
    <rect x="0" y="0" width="20" height="20" fill="${t}" />
    <rect x="0" y="0" width="10" height="10" fill="${i}" />
    <rect x="10" y="10" width="10" height="10" fill="${i}" />
  </svg>`)}function Cr(t="hsl(209, 21%, 65%)",i=32,e=32){return ea(`
  <svg width="${i}" height="${e}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>
  </svg>
  `)}function Kf(t,i=40){if(t.type==="image/svg+xml")return URL.createObjectURL(t);let e=document.createElement("canvas"),s=e.getContext("2d"),r=new Image,n=new Promise((l,o)=>{r.onload=()=>{let a=r.height/r.width;a>1?(e.width=i,e.height=i*a):(e.height=i,e.width=i/a),s.fillStyle="rgb(240, 240, 240)",s.fillRect(0,0,e.width,e.height),s.drawImage(r,0,0,e.width,e.height),e.toBlob(c=>{if(!c){o();return}let u=URL.createObjectURL(c);l(u)})},r.onerror=a=>{o(a)}});return r.src=URL.createObjectURL(t),n}const pe=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3),LIMIT_OVERFLOW:Symbol(4)});class Vt extends G{constructor(){super();m(this,"pauseRender",!0);m(this,"_entrySubs",new Set);m(this,"_entry",null);m(this,"_isIntersecting",!1);m(this,"_debouncedGenerateThumb",$e(this._generateThumbnail.bind(this),100));m(this,"_debouncedCalculateState",$e(this._calculateState.bind(this),100));m(this,"_renderedOnce",!1);this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,isLimitOverflow:!1,state:pe.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.hasBlockInCtx(e=>e.activityType===D.activities.DETAILS)?this.$["*currentActivity"]=D.activities.DETAILS:this.$["*currentActivity"]=D.activities.CLOUD_IMG_EDIT},onRemove:()=>{let e=this._entry.getValue("uuid");if(e){let s=this.getOutputData(r=>r.getValue("uuid")===e);Oe.emit(new Fe({type:De.REMOVE,ctx:this.ctxName,data:s}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let e of this._entrySubs)e.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(e){let[s]=e;this._isIntersecting=s.isIntersecting,s.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),s.intersectionRatio===0?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let e=this._entry,s=pe.IDLE;e.getValue("uploadError")||e.getValue("validationErrorMsg")?s=pe.FAILED:e.getValue("validationMultipleLimitMsg")?s=pe.LIMIT_OVERFLOW:e.getValue("isUploading")?s=pe.UPLOADING:e.getValue("fileInfo")&&(s=pe.FINISHED),this.$.state=s}async _generateThumbnail(){var s;if(!this._entry)return;let e=this._entry;if(e.getValue("fileInfo")&&e.getValue("isImage")){let r=this.cfg.thumbSize,n=this.proxyUrl(Se(Fi(this.cfg.cdnCname,this._entry.getValue("uuid")),ct(e.getValue("cdnUrlModifiers"),`scale_crop/${r}x${r}/center`))),l=e.getValue("thumbUrl");l!==n&&(e.setValue("thumbUrl",n),l!=null&&l.startsWith("blob:")&&URL.revokeObjectURL(l));return}if(!e.getValue("thumbUrl"))if((s=e.getValue("file"))!=null&&s.type.includes("image"))try{let r=await Kf(e.getValue("file"),this.cfg.thumbSize);e.setValue("thumbUrl",r)}catch{let n=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Cr(n))}else{let r=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon");e.setValue("thumbUrl",Cr(r))}}_subEntry(e,s){let r=this._entry.subscribe(e,n=>{this.isConnected&&s(n)});this._entrySubs.add(r)}_handleEntryId(e){var r;this._reset();let s=(r=this.uploadCollection)==null?void 0:r.read(e);this._entry=s,s&&(this._subEntry("uploadProgress",n=>{this.$.progressValue=n}),this._subEntry("fileName",n=>{this.$.itemName=n||s.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",n=>{this.$.itemName=s.getValue("fileName")||n||this.l10n("file-no-name")}),this._subEntry("uuid",n=>{this._debouncedCalculateState(),n&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",n=>{this.$.thumbUrl=n?`url(${n})`:""}),this._subEntry("validationMultipleLimitMsg",()=>this._debouncedCalculateState()),this._subEntry("validationErrorMsg",()=>this._debouncedCalculateState()),this._subEntry("uploadError",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",e=>{this._handleEntryId(e)}),this.sub("state",e=>{this._handleState(e)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{Vt.activeInstances.forEach(e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",e=>{e&&setTimeout(()=>this.isConnected&&this.upload())}),Vt.activeInstances.add(this)}_handleState(e){var s,r,n;this.set$({isFailed:e===pe.FAILED,isLimitOverflow:e===pe.LIMIT_OVERFLOW,isUploading:e===pe.UPLOADING,isFinished:e===pe.FINISHED,progressVisible:e===pe.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&((s=this._entry)==null?void 0:s.getValue("isImage"))&&((r=this._entry)==null?void 0:r.getValue("cdnUrl")),errorText:((n=this._entry.getValue("uploadError"))==null?void 0:n.message)||this._entry.getValue("validationErrorMsg")||this._entry.getValue("validationMultipleLimitMsg")}),e===pe.FAILED||e===pe.LIMIT_OVERFLOW?this.$.badgeIcon="badge-error":e===pe.FINISHED&&(this.$.badgeIcon="badge-success"),e===pe.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),Vt.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),(e=this._observer)==null||e.disconnect()}async upload(){var n,l;let e=this._entry;if(!this.uploadCollection.read(e.uid)||e.getValue("fileInfo")||e.getValue("isUploading")||e.getValue("uploadError")||e.getValue("validationErrorMsg")||e.getValue("validationMultipleLimitMsg"))return;const s=this.cfg.multiple?this.cfg.multipleMax:1;if(s&&this.uploadCollection.size>s)return;let r=this.getOutputData(o=>!o.getValue("fileInfo"));Oe.emit(new Fe({type:De.UPLOAD_START,ctx:this.ctxName,data:r})),this._debouncedCalculateState(),e.setValue("isUploading",!0),e.setValue("uploadError",null),e.setValue("validationErrorMsg",null),e.setValue("validationMultipleLimitMsg",null),!e.getValue("file")&&e.getValue("externalUrl")&&(this.$.progressUnknown=!0);try{let o=new AbortController;e.setValue("abortController",o);const a=async()=>{const u=this.getUploadClientOptions();return Uo(e.getValue("file")||e.getValue("externalUrl")||e.getValue("uuid"),{...u,fileName:e.getValue("fileName"),source:e.getValue("source"),onProgress:d=>{if(d.isComputable){let p=d.value*100;e.setValue("uploadProgress",p)}this.$.progressUnknown=!d.isComputable},signal:o.signal,metadata:await this.getMetadataFor(e.uid)})};let c=await this.$["*uploadQueue"].add(a);e.setMultipleValues({fileInfo:c,isUploading:!1,fileName:c.originalFilename,fileSize:c.size,isImage:c.isImage,mimeType:((l=(n=c.contentInfo)==null?void 0:n.mime)==null?void 0:l.mime)??c.mimeType,uuid:c.uuid,cdnUrl:c.cdnUrl}),e===this._entry&&this._debouncedCalculateState()}catch(o){console.warn("Upload error",o),e.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),e===this._entry&&this._debouncedCalculateState(),o instanceof Ee?o.isCancel||e.setValue("uploadError",o):e.setValue("uploadError",new Error("Unexpected error"))}}}Vt.template=`
  <div
    class="inner"
    set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @limit-overflow: isLimitOverflow; @focused: isFocused"
  >
    <div class="thumb" set="style.backgroundImage: thumbUrl">
      <div class="badge">
        <lr-icon set="@name: badgeIcon"></lr-icon>
      </div>
    </div>
    <div class="file-name-wrapper">
      <span class="file-name" set="@title: itemName">{{itemName}}</span>
      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>
    </div>
    <div class="file-actions">
      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">
        <lr-icon name="edit-file"></lr-icon>
      </button>
      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">
        <lr-icon name="remove-file"></lr-icon>
      </button>
      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">
        <lr-icon name="upload"></lr-icon>
      </button>
    </div>
    <lr-progress-bar
      class="progress-bar"
      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"
    >
    </lr-progress-bar>
  </div>
`;Vt.activeInstances=new Set;class Gf{constructor(){m(this,"caption","");m(this,"text","");m(this,"iconName","");m(this,"isError",!1)}}class ta extends ie{constructor(){super(...arguments);m(this,"init$",{...this.init$,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}})}initCallback(){super.initCallback(),this.sub("*message",e=>{e?(this.setAttribute("active",""),this.set$({captionTxt:e.caption||"",msgTxt:e.text||"",iconName:e.isError?"error":"info"}),e.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}ta.template=`
  <div class="heading">
    <lr-icon set="@name: iconName"></lr-icon>
    <div class="caption">{{captionTxt}}</div>
    <button type="button" set="onclick: onClose">
      <lr-icon name="close"></lr-icon>
    </button>
  </div>
  <div class="msg">{{msgTxt}}</div>
`;class ia extends G{constructor(){super();m(this,"couldBeUploadCollectionOwner",!0);m(this,"historyTracked",!0);m(this,"activityType",D.activities.UPLOAD_LIST);m(this,"_debouncedHandleCollectionUpdate",$e(()=>{var e;this.isConnected&&(this._updateUploadsState(),this._updateCountLimitMessage(),((e=this.$["*uploadList"])==null?void 0:e.length)===0&&!this.cfg.showEmptyList&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},0));this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.uploadAll(),this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let e=this.getOutputData(s=>!!s.getValue("fileInfo"));Oe.emit(new Fe({type:De.REMOVE,ctx:this.ctxName,data:e})),this.uploadCollection.clearAll()}}}_validateFilesCount(){let e=!!this.cfg.multiple,s=e?this.cfg.multipleMin??0:1,r=e?this.cfg.multipleMax??0:1,n=this.uploadCollection.size,l=s?n<s:!1,o=r?n>r:!1;return{passed:!l&&!o,tooFew:l,tooMany:o,min:s,max:r,exact:r===n}}_updateCountLimitMessage(){let e=this.uploadCollection.size,s=this._validateFilesCount();if(e&&!s.passed){let r=new Gf,n=s.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";r.caption=this.l10n("files-count-limit-error-title"),r.text=this.l10n(n,{min:s.min,max:s.max,total:e}),r.isError=!0,this.set$({"*message":r})}else this.set$({"*message":null})}_updateUploadsState(){let e=this.uploadCollection.items(),r={total:e.length,succeed:0,uploading:0,failed:0,limitOverflow:0};for(let b of e){let y=this.uploadCollection.read(b);y.getValue("fileInfo")&&!y.getValue("validationErrorMsg")&&(r.succeed+=1),y.getValue("isUploading")&&(r.uploading+=1),(y.getValue("validationErrorMsg")||y.getValue("uploadError"))&&(r.failed+=1),y.getValue("validationMultipleLimitMsg")&&(r.limitOverflow+=1)}const{passed:n,tooMany:l,exact:o}=this._validateFilesCount(),a=r.failed===0&&r.limitOverflow===0;let c=!1,u=!1,d=!1;r.total-r.succeed-r.uploading-r.failed>0&&n?c=!0:(u=!0,d=r.total===r.succeed&&n&&a),this.set$({doneBtnVisible:u,doneBtnEnabled:d,uploadBtnVisible:c,addMoreBtnEnabled:r.total===0||!l&&!o,addMoreBtnVisible:!o||this.cfg.multiple,headerText:this._getHeaderText(r)})}_getHeaderText(e){const s=r=>{const n=e[r];return this.l10n(`header-${r}`,{count:n})};return e.uploading>0?s("uploading"):e.failed>0?s("failed"):e.succeed>0?s("succeed"):s("total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMin",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMax",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",e=>{var s;((s=this.uploadCollection)==null?void 0:s.size)===0&&!this.cfg.showEmptyList&&e===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",e=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:e.length>0}),this.cfg.confirmUpload||this.add$({"*uploadTrigger":{}},!0)})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._debouncedHandleCollectionUpdate)}}ia.template=`
  <lr-activity-header>
    <span class="header-text">{{headerText}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="no-files" set="@hidden: hasFiles">
    <slot name="empty"><span l10n="no-files"></span></slot>
  </div>

  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>

  <div class="toolbar">
    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>
    <div class="toolbar-spacer"></div>
    <button
      type="button"
      class="add-more-btn secondary-btn"
      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"
    >
      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>
    </button>
    <button
      type="button"
      class="upload-btn primary-btn"
      set="@hidden: !uploadBtnVisible; onclick: onUpload;"
      l10n="upload"
    ></button>
    <button
      type="button"
      class="done-btn primary-btn"
      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"
      l10n="done"
    ></button>
  </div>

  <lr-drop-area ghost></lr-drop-area>
`;class sa extends G{constructor(){super(...arguments);m(this,"activityType",D.activities.URL);m(this,"init$",{...this.init$,importDisabled:!0,onUpload:e=>{e.preventDefault();let s=this.ref.input.value;this.addFileFromUrl(s,{source:bt.URL_TAB}),this.$["*currentActivity"]=D.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:e=>{let s=e.target.value;this.set$({importDisabled:!s})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}sa.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon name="url"></lr-icon>
      <span l10n="caption-from-url"></span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <form class="content">
    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />
    <button
      type="submit"
      class="url-upload-btn primary-btn"
      set="onclick: onUpload; @disabled: importDisabled"
    ></button>
  </form>
`;const _l=()=>typeof navigator.permissions<"u";class ra extends G{constructor(){super(...arguments);m(this,"activityType",D.activities.CAMERA);m(this,"_unsubPermissions",null);m(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:_l(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:e=>{this._selectedCameraId=e.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}});m(this,"_onActivate",()=>{_l()&&this._subscribePermissions(),this._capture()});m(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()});m(this,"_handlePermissionsChange",()=>{this._capture()});m(this,"_setPermissionsState",$e(e=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized",e==="granted"),e==="granted"?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):e==="prompt"?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}async _subscribePermissions(){try{(await navigator.permissions.query({name:"camera"})).addEventListener("change",this._handlePermissionsChange)}catch(e){console.log("Failed to use permissions API. Fallback to manual request mode.",e),this._capture()}}async _capture(){let e={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};this._selectedCameraId&&(e.video.deviceId={exact:this._selectedCameraId}),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d");try{this._setPermissionsState("prompt");let s=await navigator.mediaDevices.getUserMedia(e);s.addEventListener("inactive",()=>{this._setPermissionsState("denied")}),this.$.video=s,this._capturing=!0,this._setPermissionsState("granted")}catch(s){this._setPermissionsState("denied"),this.$.originalErrorMessage=s.message}}_stopCapture(){var e;this._capturing&&((e=this.$.video)==null||e.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let e=Date.now(),s=`camera-${e}.png`;this._canvas.toBlob(r=>{let n=new File([r],s,{lastModified:e,type:"image/png"});this.addFileFromObject(n,{source:bt.CAMERA}),this.set$({"*currentActivity":D.activities.UPLOAD_LIST})})}async initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:this._onActivate,onDeactivate:this._onDeactivate}),this.subConfigValue("cameraMirror",e=>{this.$.videoTransformCss=e?"scaleX(-1)":null});try{let s=(await navigator.mediaDevices.enumerateDevices()).filter(r=>r.kind==="videoinput").map((r,n)=>({text:r.label.trim()||`${this.l10n("caption-camera")} ${n+1}`,value:r.deviceId}));s.length>1&&(this.$.cameraSelectOptions=s,this.$.cameraSelectHidden=!1)}catch{}}}ra.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div set="@hidden: !cameraSelectHidden">
      <lr-icon name="camera"></lr-icon>
      <span l10n="caption-camera"></span>
    </div>
    <lr-select
      class="camera-select"
      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"
    >
    </lr-select>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <video
      autoplay
      playsinline
      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"
      ref="video"
    ></video>
    <div class="message-box" set="@hidden: messageHidden">
      <span>{{l10nMessage}}</span>
      <span>{{originalErrorMessage}}</span>
      <button
        type="button"
        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"
        l10n="camera-permissions-request"
      ></button>
    </div>
    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">
      <lr-icon name="camera"></lr-icon>
    </button>
  </div>
`;class Yf extends G{constructor(){super(...arguments);m(this,"requireCtxName",!0)}}class na extends G{constructor(){super(...arguments);m(this,"activityType",D.activities.DETAILS);m(this,"pauseRender",!0);m(this,"init$",{...this.init$,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=D.activities.CLOUD_IMG_EDIT)}})}showNonImageThumb(){let e=window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),s=Cr(e,108,108);this.ref.filePreview.setImageUrl(s),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",e=>{if(!e)return;this._entrySubs?this._entrySubs.forEach(n=>{this._entrySubs.delete(n),n.remove()}):this._entrySubs=new Set,this.entry=e;let s=e.getValue("file");if(s){this._file=s;let n=wr(this._file);n&&!e.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),n||this.showNonImageThumb()}let r=(n,l)=>{this._entrySubs.add(this.entry.subscribe(n,l))};r("fileName",n=>{this.$.fileName=n,this.$.onNameInput=()=>{let l=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:l}),this.entry.setValue("fileName",l)}}),r("fileSize",n=>{this.$.fileSize=Number.isFinite(n)?this.fileSizeFmt(n):this.l10n("file-size-unknown")}),r("uploadError",n=>{this.$.errorTxt=n==null?void 0:n.message}),r("externalUrl",n=>{n&&(this.entry.getValue("uuid")||this.showNonImageThumb())}),r("cdnUrl",n=>{const l=this.cfg.useCloudImageEditor&&n&&this.entry.getValue("isImage");if(n&&this.ref.filePreview.clear(),this.set$({cdnUrl:n,cloudEditBtnHidden:!l}),n&&this.entry.getValue("isImage")){let o=Se(n,ct("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(o))}})})}}na.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span l10n="caption-edit-file"></span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <lr-tabs tab-list="tab-view, tab-details">
      <div tab-ctx="tab-details" class="details">
        <div class="info-block">
          <div class="info-block_name" l10n="file-name"></div>
          <input
            name="name-input"
            ref="file_name_input"
            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"
            type="text"
          />
        </div>

        <div class="info-block">
          <div class="info-block_name" l10n="file-size"></div>
          <div>{{fileSize}}</div>
        </div>

        <div class="info-block">
          <div class="info-block_name" l10n="cdn-url"></div>
          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>
        </div>

        <div>{{errorTxt}}</div>
      </div>

      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>
    </lr-tabs>

    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">
      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">
        <lr-icon name="edit"></lr-icon>
        <span l10n="edit-image"></span>
      </button>
      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">
        <lr-icon name="remove"></lr-icon>
        <span l10n="remove-from-list"></span>
      </button>
      <div></div>
      <button type="button" class="back-btn primary-btn" set="onclick: onBack">
        <span l10n="ok"></span>
      </button>
    </div>
  </div>
`;class Jf{constructor(){m(this,"captionL10nStr","confirm-your-action");m(this,"messageL10Str","are-you-sure");m(this,"confirmL10nStr","yes");m(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}class la extends D{constructor(){super(...arguments);m(this,"activityType",D.activities.CONFIRMATION);m(this,"_defaults",new Jf);m(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",e=>{e&&this.set$({"*currentActivity":D.activities.CONFIRMATION,activityCaption:this.l10n(e.captionL10nStr),messageTxt:this.l10n(e.messageL10Str),confirmBtnTxt:this.l10n(e.confirmL10nStr),denyBtnTxt:this.l10n(e.denyL10nStr),onDeny:()=>{e.denyAction()},onConfirm:()=>{e.confirmAction()}})})}}la.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <span>{{activityCaption}}</span>
    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>

  <div class="message">{{messageTxt}}</div>
  <div class="toolbar">
    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>
    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>
  </div>
`;class oa extends G{constructor(){super(...arguments);m(this,"init$",{...this.init$,visible:!1,unknown:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let e=this.uploadCollection.items().some(s=>this.uploadCollection.read(s).getValue("isUploading"));this.$.visible=e}),this.sub("visible",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",e=>{this.$.value=e})}destroyCallback(){var e;super.destroyCallback(),(e=this._unobserveCollection)==null||e.call(this)}}oa.template=`
  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>
`;class aa extends ie{constructor(){super(...arguments);m(this,"_value",0);m(this,"_unknownMode",!1);m(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",e=>{e!==void 0&&(this._value=e,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",e=>{this.ref.line.classList.toggle("progress--hidden",!e)}),this.defineAccessor("unknown",e=>{this._unknownMode=e,this.ref.line.classList.toggle("progress--unknown",e)})}}aa.template=' <div ref="line" class="progress"></div> ';const Tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";class rn extends ie{constructor(){super();m(this,"init$",{...this.init$,checkerboard:!1,src:Tt})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${qf()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(e){this.$.src=e.src}setImageFile(e){let s=URL.createObjectURL(e);this.$.src=s,this._lastObjectUrl=s}setImageUrl(e){this.$.src=e}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Tt}}rn.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ';rn.bindAttributes({checkerboard:"checkerboard"});const yl="--cfg-ctx-name";class At extends ie{get cfgCssCtxName(){return this.getCssData(yl,!0)}get cfgCtxName(){var e;const i=((e=this.getAttribute("ctx-name"))==null?void 0:e.trim())||this.cfgCssCtxName||this.__cachedCfgCtxName;return this.__cachedCfgCtxName=i,i}connectedCallback(){var i;if(!this.connectedOnce){const e=(i=this.getAttribute("ctx-name"))==null?void 0:i.trim();e&&this.style.setProperty(yl,`'${e}'`)}super.connectedCallback()}parseCfgProp(i){return{...super.parseCfgProp(i),ctx:Z.getCtx(this.cfgCtxName)}}}function ca(...t){return t.reduce((i,e)=>{if(typeof e=="string")return i[e]=!0,i;for(let s of Object.keys(e))i[s]=e[s];return i},{})}function Be(...t){let i=ca(...t);return Object.keys(i).reduce((e,s)=>(i[s]&&e.push(s),e),[]).join(" ")}function Zf(t,...i){let e=ca(...i);for(let s of Object.keys(e))t.classList.toggle(s,e[s])}const Qf=t=>{if(!t)return et;const i=of(t).filter(e=>et.includes(e));return i.length===0?et:i};function ep(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":et,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Tt,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:fs(et),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let i=t.querySelectorAll("img");for(let e of i){let s=e.src;e.src=Tt,e.src=s}t.$["*networkProblems"]=!1},"*on.apply":i=>{if(!i)return;let e=t.$["*originalUrl"],s=ct(Ds(i),"preview"),r=Se(e,s),n={originalUrl:e,cdnUrlModifiers:s,cdnUrl:r,transformations:i};t.dispatchEvent(new CustomEvent("apply",{detail:n,bubbles:!0,composed:!0})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const tp=`
  <div class="wrapper wrapper_desktop">
    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">
      <div class="network_problems_content">
        <div class="network_problems_icon">
          <lr-icon size="20" name="sad"></lr-icon>
        </div>
        <div class="network_problems_text">Network error</div>
      </div>
      <div class="network_problems_footer">
        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <div class="viewport">
      <div class="file_type_outer">
        <div class="file_type">{{fileType}}</div>
      </div>
      <div class="image_container" ref="img-container-el">
        <img src="${Tt}" class="image image_visible_from_editor" ref="img-el" />
        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>
        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>
      </div>
      <div class="info_pan">{{msg}}</div>
    </div>
    <div class="toolbar">
      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
      <div class="toolbar_content toolbar_content__editor">
        <lr-editor-toolbar></lr-editor-toolbar>
      </div>
    </div>
  </div>
`;class yi extends At{constructor(){super();m(this,"_debouncedShowLoader",$e(this._showLoader.bind(this),300));this.init$={...this.init$,...ep(this)}}get ctxName(){return this.autoCtxName}_showLoader(e){this.$.showLoader=e}_waitForSize(){return new Promise((s,r)=>{const n=setTimeout(()=>{r(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),l=new ResizeObserver(([o])=>{o.contentRect.width>0&&o.contentRect.height>0&&(s(),clearTimeout(n),l.disconnect())});l.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async updateImage(){if(await this._waitForSize(),this.$["*tabId"]===ge.CROP?this.$["*cropperEl"].deactivate({reset:!0}):this.$["*faderEl"].deactivate(),this.$["*editorTransformations"]={},this.$.cdnUrl){let e=cf(this.$.cdnUrl);this.$["*originalUrl"]=Fi(this.$.cdnUrl,e);let s=uf(this.$.cdnUrl),r=wf(s);this.$["*editorTransformations"]=r}else if(this.$.uuid)this.$["*originalUrl"]=Fi(this.cfg.cdnCname,this.$.uuid);else throw new Error("No UUID nor CDN URL provided");try{const e=Se(this.$["*originalUrl"],ct("json")),s=await fetch(e).then(l=>l.json()),{width:r,height:n}=s;this.$["*imageSize"]={width:r,height:n},this.$["*tabId"]===ge.CROP?this.$["*cropperEl"].activate(this.$["*imageSize"]):this.$["*faderEl"].activate({url:this.$["*originalUrl"]})}catch(e){e&&console.error("Failed to load image info",e)}}async initEditor(){try{await this._waitForSize()}catch(e){this.isConnected&&console.error(e.message);return}this.ref["img-el"].addEventListener("load",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$.src!==Tt&&(this.$["*networkProblems"]=!1)}),this.ref["img-el"].addEventListener("error",()=>{this._imgLoading=!1,this._debouncedShowLoader(!1),this.$["*networkProblems"]=!0}),this.sub("src",e=>{let s=this.ref["img-el"];s.src!==e&&(this._imgLoading=!0,s.src=e||Tt)}),this.sub("cropPreset",e=>{this.$["*cropPresetList"]=Vo(e)}),this.sub("tabs",e=>{this.$["*tabList"]=Qf(e)}),this.sub("*tabId",e=>{this.ref["img-el"].className=Be("image",{image_hidden_to_cropper:e===ge.CROP,image_hidden_effects:e!==ge.CROP})}),this.classList.add("editor_ON"),this.sub("*networkProblems",e=>{this.$["presence.networkProblems"]=e,this.$["presence.modalCaption"]=!e}),this.sub("*editorTransformations",e=>{if(Object.keys(e).length===0)return;let s=this.$["*originalUrl"],r=ct(Ds(e),"preview"),n=Se(s,r),l={originalUrl:s,cdnUrlModifiers:r,cdnUrl:n,transformations:e};this.dispatchEvent(new CustomEvent("change",{detail:l,bubbles:!0,composed:!0}))},!1),this.sub("uuid",e=>e&&this.updateImage()),this.sub("cdnUrl",e=>e&&this.updateImage())}}m(yi,"className","cloud-image-editor");yi.template=tp;yi.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});class ua extends At{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(i){let e=this.$["*imageBox"];if(!e)return;if(i===""&&e.height<=z&&e.width<=z)return!0;let s=e.height<=z&&(i.includes("n")||i.includes("s")),r=e.width<=z&&(i.includes("e")||i.includes("w"));return s||r}_createBackdrop(){let i=this.$["*cropBox"];if(!i)return;let{x:e,y:s,width:r,height:n}=i,l=this.ref["svg-el"],o=Pe("mask",{id:"backdrop-mask"}),a=Pe("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=Pe("rect",{x:e,y:s,width:r,height:n,fill:"black"});o.appendChild(a),o.appendChild(c);let u=Pe("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});l.appendChild(u),l.appendChild(o),this._backdropMask=o,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let i=this.$["*cropBox"];if(!i)return;let{x:e,y:s,width:r,height:n}=i;this._backdropMaskInner&&Jt(this._backdropMaskInner,{x:e,y:s,width:r,height:n})}_updateFrame(){let i=this.$["*cropBox"];if(!(!i||!this._frameGuides||!this._frameThumbs)){for(let e of Object.values(this._frameThumbs)){let{direction:s,pathNode:r,interactionNode:n,groupNode:l}=e,o=s==="",a=s.length===2,{x:c,y:u,width:d,height:p}=i;if(o){const y={x:c+d/3,y:u+p/3,width:d/3,height:p/3};Jt(n,y)}else{const y=Zt(Math.min(d,p)/(vr*2+Ii)/2,0,1);let{d:E,center:P}=a?Bd(i,s,y):Hd(i,s,y);const U=Math.max(ul*Zt(Math.min(d,p)/ul/3,0,1),jd);Jt(n,{x:P[0]-U,y:P[1]-U,width:U*2,height:U*2}),Jt(r,{d:E})}let b=this._shouldThumbBeDisabled(s);l.setAttribute("class",Be("thumb",{"thumb--hidden":b,"thumb--visible":!b}))}Jt(this._frameGuides,{x:i.x-kt*.5,y:i.y-kt*.5,width:i.width+kt,height:i.height+kt})}}_createThumbs(){const i={};for(let e=0;e<3;e++)for(let s=0;s<3;s++){let r=`${["n","","s"][e]}${["w","","e"][s]}`,n=Pe("g");n.classList.add("thumb"),n.setAttribute("with-effects","");let l=Pe("rect",{fill:"transparent"}),o=Pe("path",{stroke:"currentColor",fill:"none","stroke-width":zo});n.appendChild(o),n.appendChild(l),i[r]={direction:r,pathNode:o,interactionNode:l,groupNode:n},l.addEventListener("pointerdown",this._handlePointerDown.bind(this,r))}return i}_createGuides(){let i=Pe("svg"),e=Pe("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":kt,"stroke-opacity":.5});i.appendChild(e);for(let s=1;s<=2;s++){let r=Pe("line",{x1:`${Gi*s}%`,y1:"0%",x2:`${Gi*s}%`,y2:"100%",stroke:"#000000","stroke-width":kt,"stroke-opacity":.3});i.appendChild(r)}for(let s=1;s<=2;s++){let r=Pe("line",{x1:"0%",y1:`${Gi*s}%`,x2:"100%",y2:`${Gi*s}%`,stroke:"#000000","stroke-width":kt,"stroke-opacity":.3});i.appendChild(r)}return i.classList.add("guides","guides--semi-hidden"),i}_createFrame(){let i=this.ref["svg-el"],e=document.createDocumentFragment(),s=this._createGuides();e.appendChild(s);let r=this._createThumbs();for(let{groupNode:n}of Object.values(r))e.appendChild(n);i.appendChild(e),this._frameThumbs=r,this._frameGuides=s}_handlePointerDown(i,e){if(!this._frameThumbs)return;let s=this._frameThumbs[i];if(this._shouldThumbBeDisabled(i))return;let r=this.$["*cropBox"],{x:n,y:l}=this.ref["svg-el"].getBoundingClientRect(),o=e.x-n,a=e.y-l;this.$.dragging=!0,this._draggingThumb=s,this._dragStartPoint=[o,a],this._dragStartCrop={...r}}_handlePointerUp_(i){this._updateCursor(),this.$.dragging&&(i.stopPropagation(),i.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(i){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;i.stopPropagation(),i.preventDefault();let e=this.ref["svg-el"],{x:s,y:r}=e.getBoundingClientRect(),n=i.x-s,l=i.y-r,o=n-this._dragStartPoint[0],a=l-this._dragStartPoint[1],{direction:c}=this._draggingThumb;const u=this._calcCropBox(c,[o,a]);u&&(this.$["*cropBox"]=u)}_calcCropBox(i,e){var c;const[s,r]=e;let n=this.$["*imageBox"],l=this._dragStartCrop??this.$["*cropBox"];const o=(c=this.$["*cropPresetList"])==null?void 0:c[0],a=o?o.width/o.height:void 0;if(i===""?l=Xd({rect:l,delta:[s,r],imageBox:n}):l=tf({rect:l,delta:[s,r],direction:i,aspectRatio:a,imageBox:n}),!Object.values(l).every(u=>Number.isFinite(u)&&u>=0)){console.error("CropFrame is trying to create invalid rectangle",{payload:l});return}return ds(ss(l),this.$["*imageBox"])}_handleSvgPointerMove_(i){if(!this._frameThumbs)return;let e=Object.values(this._frameThumbs).find(s=>{if(this._shouldThumbBeDisabled(s.direction))return!1;let n=s.interactionNode.getBoundingClientRect(),l={x:n.x,y:n.y,width:n.width,height:n.height};return sf(l,[i.x,i.y])});this._hoverThumb=e,this._updateCursor()}_updateCursor(){let i=this._hoverThumb;this.ref["svg-el"].style.cursor=i?Wd(i.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(i){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:e})=>e).forEach(e=>{e.setAttribute("class",Be("thumb",{"thumb--hidden":!i,"thumb--visible":i}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",i=>{i&&(this._guidesHidden=i.height<=z||i.width<=z,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",i=>{this._frameGuides&&this._frameGuides.setAttribute("class",Be({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&i,"guides--semi-hidden":!this._guidesHidden&&!i}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}ua.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ';class Fs extends At{constructor(){super(...arguments);m(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.sub("title",e=>{this._titleEl&&(this._titleEl.style.display=e?"block":"none")}),this.sub("active",e=>{this.className=Be({active:e,not_active:!e})}),this.sub("on.click",e=>{this.onclick=e})}}Fs.template=`
  <div class="before"></div>
  <lr-icon size="20" set="@name: icon;"></lr-icon>
  <div class="title" ref="title-el">{{title}}</div>
`;function ip(t){let i=t+90;return i=i>=360?0:i,i}function sp(t,i){return t==="rotate"?ip(i):["mirror","flip"].includes(t)?!i:null}class ha extends Fs{initCallback(){super.initCallback(),this.defineAccessor("operation",i=>{i&&(this._operation=i,this.$.icon=i)}),this.$["on.click"]=i=>{let e=this.$["*cropperEl"].getValue(this._operation),s=sp(this._operation,e);this.$["*cropperEl"].setValue(this._operation,s)}}}const xi={FILTER:"filter",COLOR_OPERATION:"color_operation"},vt="original";class da extends At{constructor(){super(...arguments);m(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":e=>{this.$["*faderEl"].set(e),this.$.value=e}})}setOperation(e,s){this._controlType=e==="filter"?xi.FILTER:xi.COLOR_OPERATION,this._operation=e,this._iconName=e,this._title=e.toUpperCase(),this._filter=s,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===vt?void 0:this.$.value,filter:this._filter===vt?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:e,zero:s}=fi[this._operation],[r,n]=e;this.$.min=r,this.$.max=n,this.$.zero=s;let l=this.$["*editorTransformations"][this._operation];if(this._controlType===xi.FILTER){let o=n;if(l){let{name:a,amount:c}=l;o=a===this._filter?c:n}this.$.value=o,this.$.defaultValue=o}if(this._controlType===xi.COLOR_OPERATION){let o=typeof l<"u"?l:s;this.$.value=o,this.$.defaultValue=o}}apply(){let e;this._controlType===xi.FILTER?this._filter===vt?e=null:e={name:this._filter,amount:this.$.value}:e=this.$.value;let s={...this.$["*editorTransformations"],[this._operation]:e};this.$["*editorTransformations"]=s}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",e=>{this._originalUrl=e}),this.sub("value",e=>{let s=`${this._filter||this._operation} ${e}`;this.$["*operationTooltip"]=s})}}da.template=`
  <lr-slider-ui
    ref="slider-el"
    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"
  ></lr-slider-ui>
`;function nn(t){let i=new Image;return{promise:new Promise((r,n)=>{i.src=t,i.onload=r,i.onerror=n}),image:i,cancel:()=>{i.naturalWidth===0&&(i.src=Tt)}}}function Tr(t){let i=[];for(let n of t){let l=nn(n);i.push(l)}let e=i.map(n=>n.image);return{promise:Promise.allSettled(i.map(n=>n.promise)),images:e,cancel:()=>{i.forEach(n=>{n.cancel()})}}}class ln extends Fs{constructor(){super(...arguments);m(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let e=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),s=window.devicePixelRatio,r=Math.ceil(s*e),n=s>=2?"lightest":"normal",l=100,o={...this.$["*editorTransformations"]};return o[this._operation]=this._filter!==vt?{name:this._filter,amount:l}:void 0,Se(this._originalUrl,ct(Jo,Ds(o),`quality/${n}`,`scale_crop/${r}x${r}/center`))}_observerCallback(e,s){if(e[0].isIntersecting){let n=this.proxyUrl(this._previewSrc()),l=this.ref["preview-el"],{promise:o,cancel:a}=nn(n);this._cancelPreload=a,o.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{l.style.backgroundImage=`url(${n})`,l.setAttribute("loaded",""),s.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=s=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",s=>{this._operation="filter",this._filter=s,this.$.isOriginal=s===vt,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]});let e=this.$["*originalUrl"];this._originalUrl=e,this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",s=>{this.$.active=s&&s===this._filter}),this.sub("isOriginal",s=>{this.$.iconSize=s?40:20}),this.sub("active",s=>{if(this.$.isOriginal)return;let r=this.ref["icon-el"];r.style.opacity=s?"1":"0";let n=this.ref["preview-el"];s?n.style.opacity="0":n.style.backgroundImage&&(n.style.opacity="1")}),this.sub("*networkProblems",s=>{if(!s){let r=this.proxyUrl(this._previewSrc()),n=this.ref["preview-el"];n.style.backgroundImage&&(n.style.backgroundImage="none",n.style.backgroundImage=`url(${r})`)}})}destroyCallback(){var e;super.destroyCallback(),(e=this._observer)==null||e.disconnect(),this._cancelPreload&&this._cancelPreload()}}ln.template=`
  <div class="before"></div>
  <div class="preview" ref="preview-el"></div>
  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>
`;class fa extends Fs{constructor(){super(...arguments);m(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.$.title=this.l10n(e))}),this.sub("*editorTransformations",e=>{if(!this._operation)return;let{zero:s}=fi[this._operation],r=e[this._operation],n=typeof r<"u"?r!==s:!1;this.$.active=n})}}const rp=(t,i)=>{let e,s,r;return(...n)=>{e?(clearTimeout(s),s=setTimeout(()=>{Date.now()-r>=i&&(t(...n),r=Date.now())},Math.max(i-(Date.now()-r),0))):(t(...n),r=Date.now(),e=!0)}};function np(t,i){let e={};for(let s of i){let r=t[s];(t.hasOwnProperty(s)||r!==void 0)&&(e[s]=r)}return e}function on(t,i,e){let r=window.devicePixelRatio,n=Math.min(Math.ceil(i*r),3e3),l=r>=2?"lightest":"normal";return Se(t,ct(Jo,Ds(e),`quality/${l}`,`stretch/off/-/resize/${n}x`))}function lp(t){return t?[({dimensions:e,coords:s})=>[...e,...s].every(r=>Number.isInteger(r)&&Number.isFinite(r)),({dimensions:e,coords:s})=>e.every(r=>r>0)&&s.every(r=>r>=0)].every(e=>e(t)):!0}class pa extends At{constructor(){super(),this.init$={...this.init$,image:null,"*padding":Vd,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=$e(this._commit.bind(this),300),this._handleResizeThrottled=rp(this._handleResize.bind(this),100),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let i=this.$["*editorTransformations"],e=np(i,Object.keys(this.$["*operations"])),s={...this.$["*operations"],...e};this.$["*operations"]=s}_initCanvas(){let i=this.ref["canvas-el"],e=i.getContext("2d"),s=this.offsetWidth,r=this.offsetHeight,n=window.devicePixelRatio;i.style.width=`${s}px`,i.style.height=`${r}px`,i.width=s*n,i.height=r*n,e==null||e.scale(n,n),this._canvas=i,this._ctx=e}_alignImage(){if(!this._isActive||!this.$.image)return;let i=this.$.image,e=this.$["*padding"],s=this.$["*operations"],{rotate:r}=s,n={width:this.offsetWidth,height:this.offsetHeight},l=Ti({width:i.naturalWidth,height:i.naturalHeight},r),o;if(l.width>n.width-e*2||l.height>n.height-e*2){let a=l.width/l.height,c=n.width/n.height;if(a>c){let u=n.width-e*2,d=u/a,p=0+e,b=e+(n.height-e*2)/2-d/2;o={x:p,y:b,width:u,height:d}}else{let u=n.height-e*2,d=u*a,p=e+(n.width-e*2)/2-d/2,b=0+e;o={x:p,y:b,width:d,height:u}}}else{let{width:a,height:c}=l,u=e+(n.width-e*2)/2-a/2,d=e+(n.height-e*2)/2-c/2;o={x:u,y:d,width:a,height:c}}this.$["*imageBox"]=ss(o)}_alignCrop(){var d;let i=this.$["*cropBox"],e=this.$["*imageBox"],s=this.$["*operations"],{rotate:r}=s,n=this.$["*editorTransformations"].crop,{width:l,x:o,y:a}=this.$["*imageBox"];if(n){let{dimensions:[p,b],coords:[y,E]}=n,{width:P}=Ti(this._imageSize,r),U=l/P;i=ds(ss({x:o+y*U,y:a+E*U,width:p*U,height:b*U}),this.$["*imageBox"])}const c=(d=this.$["*cropPresetList"])==null?void 0:d[0],u=c?c.width/c.height:void 0;if(!rf(i,e)||u&&!nf(i,u)){const p=e.width/e.height;let b=e.width,y=e.height;u&&(p>u?b=Math.min(e.height*u,e.width):y=Math.min(e.width/u,e.height)),i={x:e.x+e.width/2-b/2,y:e.y+e.height/2-y/2,width:b,height:y}}this.$["*cropBox"]=ds(ss(i),this.$["*imageBox"])}_drawImage(){let i=this._ctx;if(!i)return;let e=this.$.image,s=this.$["*imageBox"],r=this.$["*operations"],{mirror:n,flip:l,rotate:o}=r,a=Ti({width:s.width,height:s.height},o);i.save(),i.translate(s.x+s.width/2,s.y+s.height/2),i.rotate(o*Math.PI*-1/180),i.scale(n?-1:1,l?-1:1),i.drawImage(e,-a.width/2,-a.height/2,a.width,a.height),i.restore()}_draw(){if(!this._isActive||!this.$.image||!this._canvas||!this._ctx)return;let i=this._canvas;this._ctx.clearRect(0,0,i.width,i.height),this._drawImage()}_animateIn({fromViewer:i}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Be({active_from_viewer:i,active_from_editor:!i,inactive_to_editor:!1})}))}_getCropDimensions(){let i=this.$["*cropBox"],e=this.$["*imageBox"],s=this.$["*operations"],{rotate:r}=s,{width:n,height:l}=e,{width:o,height:a}=Ti(this._imageSize,r),{width:c,height:u}=i,d=n/o,p=l/a;return[Zt(Math.round(c/d),1,o),Zt(Math.round(u/p),1,a)]}_getCropTransformation(){let i=this.$["*cropBox"],e=this.$["*imageBox"],s=this.$["*operations"],{rotate:r}=s,{width:n,height:l,x:o,y:a}=e,{width:c,height:u}=Ti(this._imageSize,r),{x:d,y:p}=i,b=n/c,y=l/u,E=this._getCropDimensions(),P={dimensions:E,coords:[Zt(Math.round((d-o)/b),0,c-E[0]),Zt(Math.round((p-a)/y),0,u-E[1])]};if(!lp(P)){console.error("Cropper is trying to create invalid crop object",{payload:P});return}if(!(E[0]===c&&E[1]===u))return P}_commit(){if(!this.isConnected)return;let i=this.$["*operations"],{rotate:e,mirror:s,flip:r}=i,n=this._getCropTransformation(),o={...this.$["*editorTransformations"],crop:n,rotate:e,mirror:s,flip:r};this.$["*editorTransformations"]=o}setValue(i,e){console.log(`Apply cropper operation [${i}=${e}]`),this.$["*operations"]={...this.$["*operations"],[i]:e},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(i){return this.$["*operations"][i]}async activate(i,{fromViewer:e}={}){if(!this._isActive){this._isActive=!0,this._imageSize=i,this.removeEventListener("transitionend",this._reset);try{this.$.image=await this._waitForImage(this.$["*originalUrl"],this.$["*editorTransformations"]),this._syncTransformations(),this._animateIn({fromViewer:e})}catch(s){console.error("Failed to activate cropper",{error:s})}this._observer=new ResizeObserver(([s])=>{s.contentRect.width>0&&s.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeThrottled()}),this._observer.observe(this)}}deactivate({reset:i=!1}={}){var e;this._isActive&&(!i&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Be({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),(e=this._observer)==null||e.disconnect())}_transitionToCrop(){let i=this._getCropDimensions(),e=Math.min(this.offsetWidth,i[0])/this.$["*cropBox"].width,s=Math.min(this.offsetHeight,i[1])/this.$["*cropBox"].height,r=Math.min(e,s),n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,l=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${r}) translate(${(this.offsetWidth/2-n)/r}px, ${(this.offsetHeight/2-l)/r}px)`,this.style.transformOrigin=`${n}px ${l}px`}_transitionToImage(){let i=this.$["*cropBox"].x+this.$["*cropBox"].width/2,e=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${i}px ${e}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(i,e){let s=this.offsetWidth;e={...e,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let r=this.proxyUrl(on(i,s,e)),{promise:n,cancel:l,image:o}=nn(r),a=this._handleImageLoading(r);return o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=l,n.then(()=>o).catch(c=>(console.error("Failed to load image",{error:c}),this.$["*networkProblems"]=!0,Promise.resolve(o)))}_handleImageLoading(i){let e="crop",s=this.$["*loadingOperations"];return s.get(e)||s.set(e,new Map),s.get(e).get(i)||(s.set(e,s.get(e).set(i,!0)),this.$["*loadingOperations"]=s),()=>{var r;(r=s==null?void 0:s.get(e))!=null&&r.has(i)&&(s.get(e).delete(i),this.$["*loadingOperations"]=s)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",i=>{i||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var i;super.destroyCallback(),(i=this._observer)==null||i.disconnect()}}pa.template=`
  <canvas class="canvas" ref="canvas-el"></canvas>
  <lr-crop-frame ref="frame-el"></lr-crop-frame>
`;function vl(t,i,e){let s=Array(e);e--;for(let r=e;r>=0;r--)s[r]=Math.ceil((r*i+(e-r)*t)/e);return s}function op(t){return t.reduce((i,e,s)=>s<t.length-1?[...i,[e,t[s+1]]]:i,[])}function ap(t,i,e){let s=op(t).find(([r,n])=>r<=i&&i<=n);return t.map(r=>{let n=Math.abs(s[0]-s[1]),l=Math.abs(i-s[0])/n;return s[0]===r?i>e?1:1-l:s[1]===r?i>=e?l:1:0})}function cp(t,i){return t.map((e,s)=>e<i?t.length-s:s)}function wl(t,i){let e=fi[t].keypointsNumber,{range:s,zero:r}=fi[t];return[...new Set([...vl(s[0],r,e+1),...vl(r,s[1],e+1),r,i])].sort((n,l)=>n-l)}class up extends At{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=$e(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(i){let e=this._operation,s=this.$["*loadingOperations"];return s.get(e)||s.set(e,new Map),s.get(e).get(i)||(s.set(e,s.get(e).set(i,!0)),this.$["*loadingOperations"]=s),()=>{var r;(r=s==null?void 0:s.get(e))!=null&&r.has(i)&&(s.get(e).delete(i),this.$["*loadingOperations"]=s)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let i of this._keypoints){let{image:e}=i;e&&(e.style.opacity=i.opacity.toString(),e.style.zIndex=i.zIndex.toString())}})}_imageSrc({url:i=this._url,filter:e=this._filter,operation:s,value:r}={}){let n={...this._transformations};s&&(n[s]=e?{name:e,amount:r}:r);let l=this.offsetWidth;return this.proxyUrl(on(i,l,n))}_constructKeypoint(i,e){return{src:this._imageSrc({operation:i,value:e}),image:null,opacity:0,zIndex:0,value:e}}_isSame(i,e){return this._operation===i&&this._filter===e}_addKeypoint(i,e,s){let r=()=>!this._isSame(i,e)||this._value!==s||!!this._keypoints.find(a=>a.value===s);if(r())return;let n=this._constructKeypoint(i,s),l=new Image;l.src=n.src;let o=this._handleImageLoading(n.src);l.addEventListener("load",o,{once:!0}),l.addEventListener("error",o,{once:!0}),n.image=l,l.classList.add("fader-image"),l.addEventListener("load",()=>{if(r())return;let a=this._keypoints,c=a.findIndex(d=>d.value>s),u=c<a.length?a[c].image:null;!this._container||u&&!this._container.contains(u)||(a.splice(c,0,n),this._container.insertBefore(l,u),this._update(i,s))},{once:!0}),l.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(i){i=typeof i=="string"?parseInt(i,10):i,this._update(this._operation,i),this._addKeypointDebounced(this._operation,this._filter,i)}_update(i,e){this._operation=i,this._value=e;let{zero:s}=fi[i],r=this._keypoints.map(o=>o.value),n=ap(r,e,s),l=cp(r,s);for(let[o,a]of Object.entries(this._keypoints))a.opacity=n[o],a.zIndex=l[o];this._flush()}_createPreviewImage(){let i=new Image;return i.classList.add("fader-image","fader-image--preview"),i.style.opacity="0",i}async _initNodes(){let i=document.createDocumentFragment();this._previewImage=this._previewImage||this._createPreviewImage(),!this.contains(this._previewImage)&&i.appendChild(this._previewImage);let e=document.createElement("div");i.appendChild(e);let s=this._keypoints.map(c=>c.src),{images:r,promise:n,cancel:l}=Tr(s);r.forEach(c=>{let u=this._handleImageLoading(c.src);c.addEventListener("load",u),c.addEventListener("error",u)}),this._cancelLastImages=()=>{l(),this._cancelLastImages=void 0};let o=this._operation,a=this._filter;await n,this._isActive&&this._isSame(o,a)&&(this._container&&this._container.remove(),this._container=e,this._keypoints.forEach((c,u)=>{let d=r[u];d.classList.add("fader-image"),c.image=d,this._container.appendChild(d)}),this.appendChild(i),this._flush())}setTransformations(i){if(this._transformations=i,this._previewImage){let e=this._imageSrc(),s=this._handleImageLoading(e);this._previewImage.src=e,this._previewImage.addEventListener("load",s,{once:!0}),this._previewImage.addEventListener("error",s,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:i,filter:e,operation:s,value:r}){this._cancelBatchPreload&&this._cancelBatchPreload();let l=wl(s,r).map(a=>this._imageSrc({url:i,filter:e,operation:s,value:a})),{cancel:o}=Tr(l);this._cancelBatchPreload=o}_setOriginalSrc(i){let e=this._previewImage||this._createPreviewImage();if(!this.contains(e)&&this.appendChild(e),this._previewImage=e,e.src===i){e.style.opacity="1",e.style.transform="scale(1)",this.className=Be({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1});return}e.style.opacity="0";let s=this._handleImageLoading(i);e.addEventListener("error",s,{once:!0}),e.src=i,e.addEventListener("load",()=>{s(),e&&(e.style.opacity="1",e.style.transform="scale(1)",this.className=Be({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),e.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:i,operation:e,value:s,filter:r,fromViewer:n}){if(this._isActive=!0,this._hidden=!1,this._url=i,this._operation=e||"initial",this._value=s,this._filter=r,this._fromViewer=n,typeof s!="number"&&!r){let o=this._imageSrc({operation:e,value:s});this._setOriginalSrc(o),this._container&&this._container.remove();return}this._keypoints=wl(e,s).map(o=>this._constructKeypoint(e,o)),this._update(e,s),this._initNodes()}deactivate({hide:i=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),i&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Be({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}const hp=1;class ma extends At{initCallback(){super.initCallback(),this.addEventListener("wheel",i=>{i.preventDefault();let{deltaY:e,deltaX:s}=i;Math.abs(s)>hp?this.scrollLeft+=s:this.scrollLeft+=e})}}ma.template=" <slot></slot> ";function dp(t){return`
    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${t}; styles: presence.tabToggleStyles;">
      <lr-btn-ui
        theme="boring"
        ref="tab-toggle-${t}"
        data-id="${t}"
        icon="${t}"
        tabindex="0"
        set="onclick: on.clickTab;"
      >
      </lr-btn-ui>
    </lr-presence-toggle>
  `}function fp(t){return`
    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">
      <lr-editor-scroller hidden-scrollbar>
        <div class="controls-list_align">
          <div class="controls-list_inner" ref="controls-list-${t}"></div>
        </div>
      </lr-editor-scroller>
    </lr-presence-toggle>
  `}class ga extends At{constructor(){super();m(this,"_updateInfoTooltip",$e(()=>{var l,o;const e=this.$["*editorTransformations"],s=this.$["*currentOperation"];let r="",n=!1;if(this.$["*tabId"]===ge.FILTERS)if(n=!0,this.$["*currentFilter"]&&((l=e==null?void 0:e.filter)==null?void 0:l.name)===this.$["*currentFilter"]){let a=((o=e==null?void 0:e.filter)==null?void 0:o.amount)||100;r=this.l10n(this.$["*currentFilter"])+" "+a}else r=this.l10n(vt);else if(this.$["*tabId"]===ge.TUNING&&s){n=!0;let a=(e==null?void 0:e[s])||fi[s].zero;r=s+" "+a}n&&(this.$["*operationTooltip"]=r),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",n)},0));this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":vt,"*currentOperation":null,"*tabId":ge.CROP,showLoader:!1,filters:Tf,colorOperations:Cf,cropOperations:Ef,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{const s=e.currentTarget.getAttribute("data-id");s&&this._activateTab(s,{fromViewer:!1})}},this._debouncedShowLoader=$e(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===ge.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(e){let s=new fa;return s.operation=e,s}_createFilterControl(e){let s=new ln;return s.filter=e,s}_createToggleControl(e){let s=new ha;return s.operation=e,s}_renderControlsList(e){let s=this.ref[`controls-list-${e}`],r=document.createDocumentFragment();e===ge.CROP?this.$.cropOperations.forEach(n=>{let l=this._createToggleControl(n);r.appendChild(l)}):e===ge.FILTERS?[vt,...this.$.filters].forEach(n=>{let l=this._createFilterControl(n);r.appendChild(l)}):e===ge.TUNING&&this.$.colorOperations.forEach(n=>{let l=this._createOperationControl(n);r.appendChild(l)}),[...r.children].forEach((n,l)=>{l===r.childNodes.length-1&&n.classList.add("controls-list_last-item")}),s.innerHTML="",s.appendChild(r)}_activateTab(e,{fromViewer:s}){this.$["*tabId"]=e,e===ge.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:s})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:s}),this.$["*cropperEl"].deactivate());for(let r of et){let n=r===e,l=this.ref[`tab-toggle-${r}`];l.active=n,n?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=n}}_unmountTabControls(e){let s=this.ref[`controls-list-${e}`];s&&(s.innerHTML="")}_syncTabIndicator(){let e=this.ref[`tab-toggle-${this.$["*tabId"]}`],s=this.ref["tabs-indicator"];s.style.transform=`translateX(${e.offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let e=this.$["*imgContainerEl"].offsetWidth,s=this.proxyUrl(on(this.$["*originalUrl"],e,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:r}=Tr([s]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",e=>{e&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",e=>{var r;let s=(r=e==null?void 0:e.filter)==null?void 0:r.name;this.$["*currentFilter"]!==s&&(this.$["*currentFilter"]=s)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)}),this.sub("*loadingOperations",e=>{let s=!1;for(let[,r]of e.entries()){if(s)break;for(let[,n]of r.entries())if(n){s=!0;break}}this._debouncedShowLoader(s)}),this.sub("*showSlider",e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e}),this.sub("*tabList",e=>{this.$["presence.tabToggles"]=e.length>1;for(const s of et){this.$[`presence.tabToggle.${s}`]=e.includes(s);const r=this.ref[`tab-toggle-${s}`];r.style.gridColumn=e.indexOf(s)+1}e.includes(this.$["*tabId"])||this._activateTab(e[0],{fromViewer:!1})}),this._updateInfoTooltip()}}ga.template=`
  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>
  <div class="info-tooltip_container">
    <div class="info-tooltip_wrapper">
      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>
    </div>
  </div>
  <div class="toolbar-container">
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">
      <div class="tab-content-row">${et.map(fp).join("")}</div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>
        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">
          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>
          ${et.map(dp).join("")}
        </lr-presence-toggle>
        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">
      <div class="slider">
        <lr-editor-slider ref="slider-el"></lr-editor-slider>
      </div>
      <div class="controls-row">
        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>
        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>
      </div>
    </lr-presence-toggle>
  </div>
`;class an extends ie{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",i=>{i?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Be("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",i=>{this._iconSingle=!this.$.text,this._iconHidden=!i,this.$.iconCss=this._iconCss()}),this.sub("theme",i=>{i!=="custom"&&(this.className=i)}),this.sub("text",i=>{this._iconSingle=!1}),this.setAttribute("role","button"),this.tabIndex===-1&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(i){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}an.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"});an.template=`
  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>
  <div class="text">{{text}}</div>
`;class ba extends ie{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let i=this.ref["line-el"];i.style.transition="initial",i.style.opacity="0",i.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",i=>{typeof i=="boolean"&&(i?this._start():this._stop())})}_start(){this._active=!0;let{width:i}=this.getBoundingClientRect(),e=this.ref["line-el"];e.style.transition="transform 1s",e.style.opacity="1",e.style.transform=`translateX(${i}px)`,e.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}ba.template=`
  <div class="inner">
    <div class="line" ref="line-el"></div>
  </div>
`;const Yi={transition:"transition",visible:"visible",hidden:"hidden"};class _a extends ie{constructor(){super(),this._visible=!1,this._visibleStyle=Yi.visible,this._hiddenStyle=Yi.hidden,this._externalTransitions=!1,this.defineAccessor("styles",i=>{i&&(this._externalTransitions=!0,this._visibleStyle=i.visible,this._hiddenStyle=i.hidden)}),this.defineAccessor("visible",i=>{typeof i=="boolean"&&(this._visible=i,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",Zf(this,{[Yi.transition]:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add(Yi.transition),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}_a.template=" <slot></slot> ";class ya extends ie{constructor(){super();m(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let e=parseInt(this.ref["input-el"].value,10);this._updateValue(e),this.$.onInput&&this.$.onInput(e)},"on.sliderChange":()=>{let e=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(e)}});this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",s=>{this.$.disabled=s}),this.defineAccessor("min",s=>{this.$.min=s}),this.defineAccessor("max",s=>{this.$.max=s}),this.defineAccessor("defaultValue",s=>{this.$.defaultValue=s,this.ref["input-el"].value=s,this._updateValue(s)}),this.defineAccessor("zero",s=>{this._zero=s}),this.defineAccessor("onInput",s=>{s&&(this.$.onInput=s)}),this.defineAccessor("onChange",s=>{s&&(this.$.onChange=s)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let s=parseInt(this.ref["input-el"].value,10);this._updateValue(s)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let s=parseInt(this.ref["input-el"].value,10);this._updateValue(s)},0),this.sub("disabled",s=>{let r=this.ref["input-el"];s?r.setAttribute("disabled","disabled"):r.removeAttribute("disabled")});let e=this.ref["input-el"];e.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),e.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(e){this._updateZeroDot(e);let{width:s}=this.getBoundingClientRect(),l=100/(this.$.max-this.$.min)*(e-this.$.min)*(s-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${l}px)`})}_updateZeroDot(e){if(!this._zeroDotEl)return;e===this._zero?this._zeroDotEl.style.opacity="0":this._zeroDotEl.style.opacity="0.2";let{width:s}=this.getBoundingClientRect(),l=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(s-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${l}px)`})}_updateSteps(){let s=this.ref["steps-el"],{width:r}=s.getBoundingClientRect(),n=Math.ceil(r/2),l=Math.ceil(n/15)-2;if(this._stepsCount===l)return;let o=document.createDocumentFragment(),a=document.createElement("div"),c=document.createElement("div");a.className="minor-step",c.className="border-step",o.appendChild(c);for(let d=0;d<l;d++)o.appendChild(a.cloneNode());o.appendChild(c.cloneNode());for(let d=0;d<l;d++)o.appendChild(a.cloneNode());o.appendChild(c.cloneNode());let u=document.createElement("div");u.className="zero-dot",o.appendChild(u),this._zeroDotEl=u,s.innerHTML="",s.appendChild(o),this._stepsCount=l}destroyCallback(){var e;(e=this._observer)==null||e.disconnect()}}ya.template=`
  <div class="steps" ref="steps-el"></div>
  <div ref="thumb-el" class="thumb"></div>
  <input
    class="input"
    type="range"
    ref="input-el"
    tabindex="0"
    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"
  />
`;class pp extends G{constructor(){super();m(this,"activityType",D.activities.CLOUD_IMG_EDIT);this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",e=>{e&&(this.entry=e,this.entry.subscribe("cdnUrl",s=>{s&&(this.$.cdnUrl=s)}))}),this.subConfigValue("cropPreset",e=>{this._instance&&this._instance.getAttribute("crop-preset")!==e&&this._instance.setAttribute("crop-preset",e)}),this.subConfigValue("cloudImageEditorTabs",e=>{this._instance&&this._instance.getAttribute("tabs")!==e&&this._instance.setAttribute("tabs",e)})}handleApply(e){if(!this.entry)return;let s=e.detail;this.entry.setMultipleValues({cdnUrl:s.cdnUrl,cdnUrlModifiers:s.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const e=new yi,s=this.$.cdnUrl,r=this.cfg.cropPreset,n=this.cfg.cloudImageEditorTabs;e.setAttribute("ctx-name",this.ctxName),e.setAttribute("cdn-url",s),r&&e.setAttribute("crop-preset",r),n&&e.setAttribute("tabs",n),e.addEventListener("apply",l=>this.handleApply(l)),e.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(e),this._mounted=!0,this._instance=e}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const mp=function(t){return t.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},gp=function(t,i="i"){const e=t.split("*").map(mp);return new RegExp("^"+e.join(".+")+"$",i)};let bp=t=>Object.keys(t).reduce((e,s)=>{let r=t[s],n=Object.keys(r).reduce((l,o)=>{let a=r[o];return l+`${o}: ${a};`},"");return e+`${s}{${n}}`},"");function _p({textColor:t,backgroundColor:i,linkColor:e,linkColorHover:s,shadeColor:r}){let n=`solid 1px ${r}`;return bp({body:{color:t,"background-color":i},".side-bar":{background:"inherit","border-right":n},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:r},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":n},".list-table-body .list-items":{"border-bottom":n},".bread-crumbs a":{color:e},".bread-crumbs a:hover":{color:s},".main-content.loading":{background:`${i} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":r},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:e},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:s},".side-bar-menu a":{color:e},".side-bar-menu a:hover":{color:s},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:s},".source-vk .side-bar-menu a":{color:e},".source-vk .side-bar-menu a:hover":{color:s,background:"none"}})}let wt={};window.addEventListener("message",t=>{let i;try{i=JSON.parse(t.data)}catch{return}if((i==null?void 0:i.type)in wt){let e=wt[i.type];for(let[s,r]of e)t.source===s&&r(i)}});const yp=function(t,i,e){t in wt||(wt[t]=[]),wt[t].push([i,e])},vp=function(t,i){t in wt&&(wt[t]=wt[t].filter(e=>e[0]!==i))};function wp(t){let i=[];for(let[e,s]of Object.entries(t))s==null||typeof s=="string"&&s.length===0||i.push(`${e}=${encodeURIComponent(s)}`);return i.join("&")}class va extends G{constructor(){super();m(this,"activityType",D.activities.EXTERNAL);m(this,"_iframe",null);m(this,"updateCssData",()=>{this.isActivityActive&&(this._inheritedUpdateCssData(),this.applyStyles())});m(this,"_inheritedUpdateCssData",this.updateCssData);this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,onDone:()=>{for(const e of this.$.selectedList){const s=this.extractUrlFromMessage(e),{filename:r}=e,{externalSourceType:n}=this.activityParams;this.addFileFromUrl(s,{fileName:r,source:n})}this.$["*currentActivity"]=D.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:e}=this.activityParams;this.set$({activityCaption:`${e==null?void 0:e[0].toUpperCase()}${e==null?void 0:e.slice(1)}`,activityIcon:e}),this.mountIframe()}}),this.sub("*currentActivity",e=>{e!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",e=>{this.$.counter=e.length})}extractUrlFromMessage(e){if(e.alternatives){const s=ut(this.cfg.externalSourcesPreferredTypes);for(const r of s){const n=gp(r);for(const[l,o]of Object.entries(e.alternatives))if(n.test(l))return o}}return e.url}sendMessage(e){var s,r;(r=(s=this._iframe)==null?void 0:s.contentWindow)==null||r.postMessage(JSON.stringify(e),"*")}async handleFileSelected(e){this.$.selectedList=[...this.$.selectedList,e]}handleIframeLoad(){this.applyStyles()}getCssValue(e){return window.getComputedStyle(this).getPropertyValue(e).trim()}applyStyles(){let e={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:_p(e)})}remoteUrl(){var o,a;let e=this.cfg.pubkey,s=(!1).toString(),{externalSourceType:r}=this.activityParams,n={lang:((a=(o=this.getCssData("--l10n-locale-name"))==null?void 0:o.split("-"))==null?void 0:a[0])||"en",public_key:e,images_only:s,pass_window_open:!1,session_key:this.cfg.remoteTabSessionKey},l=new URL(this.cfg.socialBaseUrl);return l.pathname=`/window3/${r}`,l.search=wp(n),l.toString()}mountIframe(){let e=Wr({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});e.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(e),yp("file-selected",e.contentWindow,this.handleFileSelected.bind(this)),this._iframe=e,this.$.selectedList=[]}unmountIframe(){this._iframe&&vp("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}va.template=`
  <lr-activity-header>
    <button type="button" class="mini-btn" set="onclick: *historyBack">
      <lr-icon name="back"></lr-icon>
    </button>
    <div>
      <lr-icon set="@name: activityIcon"></lr-icon>
      <span>{{activityCaption}}</span>
    </div>
    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">
      <lr-icon name="close"></lr-icon>
    </button>
  </lr-activity-header>
  <div class="content">
    <div ref="iframeWrapper" class="iframe-wrapper"></div>
    <div class="toolbar">
      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>
      <div></div>
      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>
      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">
        <lr-icon name="check"></lr-icon>
      </button>
    </div>
  </div>
`;class cn extends ie{setCurrentTab(i){if(!i)return;[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(s=>{s.getAttribute("tab-ctx")===i?s.removeAttribute("hidden"):s.setAttribute("hidden","")});for(let s in this._tabMap)s===i?this._tabMap[s].setAttribute("current",""):this._tabMap[s].removeAttribute("current")}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",i=>{if(!i)return;ut(i).forEach(s=>{let r=Wr({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(s)}}});r.textContent=this.l10n(s),this.ref.row.appendChild(r),this._tabMap[s]=r})}),this.defineAccessor("default",i=>{this.setCurrentTab(i)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}cn.bindAttributes({"tab-list":null,default:null});cn.template=`
  <div ref="row" class="tabs-row"></div>
  <div ref="context" class="tabs-context">
    <slot></slot>
  </div>
`;class Ns extends G{constructor(){super();m(this,"processInnerHtml",!0);m(this,"requireCtxName",!0);this.init$={...this.init$,output:null}}get dict(){return Ns.dict}get validationInput(){return this._validationInputElement}initCallback(){if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer);let e=document.createElement("input");e.type="text",e.name="__UPLOADCARE_VALIDATION_INPUT__",e.required=this.hasAttribute(this.dict.INPUT_REQUIRED),e.tabIndex=-1,yo(e,{opacity:0,height:0,width:0}),this.appendChild(e),this._validationInputElement=e}this.sub("output",e=>{var s;if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:e}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&this._dynamicInputsContainer){this._dynamicInputsContainer.innerHTML="";let r=[],n=[];Array.isArray(e)?(r=e.map(l=>l.cdnUrl),n=e):e!=null&&e.files&&(r=e.groupData?[e.groupData.cdnUrl]:[],n=e.files);for(let l of r){let o=document.createElement("input");o.type="hidden",o.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,o.value=l??"",this._dynamicInputsContainer.appendChild(o)}if(this._validationInputElement){this._validationInputElement.value=r.length?"__VALUE__":"";const l=n.find(u=>!u.isValid),o=(l==null?void 0:l.validationErrorMessage)??((s=l==null?void 0:l.uploadError)==null?void 0:s.message);let a=this.$["*message"];a=a!=null&&a.isError?`${a.caption}. ${a.text}`:void 0;const c=o??a;c?this._validationInputElement.setCustomValidity(c):this._validationInputElement.setCustomValidity("")}}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(e)},!1),this.sub(this.dict.SRC_CTX_KEY,async e=>{if(!e||!e.length){this.$.output=null;return}if(this.cfg.groupOutput||this.hasAttribute(this.dict.GROUP_ATTR)){if(!e.every(o=>o.isUploaded&&o.isValid)){this.$.output={groupData:void 0,files:e};return}const r=this.getUploadClientOptions(),n=e.map(o=>o.uuid+(o.cdnUrlModifiers?`/${o.cdnUrlModifiers}`:"")),l=await Fd(n,r);this.$.output={groupData:l,files:e}}else this.$.output=e},!1)}}Ns.dict=Object.freeze({SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"});class Cp extends D{}class wa extends ie{constructor(){super(...arguments);m(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:e=>{var s;e.preventDefault(),e.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=((s=this.$.options.find(r=>r.value==this.value))==null?void 0:s.text)||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",e=>{var r;this.$.currentText=((r=e==null?void 0:e[0])==null?void 0:r.text)||"";let s="";e==null||e.forEach(n=>{s+=`<option value="${n.value}">${n.text}</option>`}),this.$.selectHtml=s})}}wa.template=`
  <button>
    {{currentText}}
    <lr-icon name="select"></lr-icon>
    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>
  </button>
`;const ye={PLAY:"play",PAUSE:"pause",FS_ON:"fullscreen-on",FS_OFF:"fullscreen-off",VOL_ON:"unmute",VOL_OFF:"mute",CAP_ON:"captions",CAP_OFF:"captions-off"},Cl={requestFullscreen:t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},exitFullscreen:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};class lt extends ie{constructor(){super(...arguments);m(this,"init$",{...this.init$,src:"",ppIcon:ye.PLAY,fsIcon:ye.FS_ON,volIcon:ye.VOL_ON,capIcon:ye.CAP_OFF,totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:e=>{let s=parseFloat(e.currentTarget.$.value);this.setVolume(s)},progressClicked:e=>{let s=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(e.offsetX/s.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?Cl.exitFullscreen():Cl.requestFullscreen(this)}toggleCaptions(){this.$.capIcon===ye.CAP_OFF?(this.$.capIcon=ye.CAP_ON,this._video.textTracks[0].mode="showing",window.localStorage.setItem(lt.is+":captions","1")):(this.$.capIcon=ye.CAP_OFF,this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(lt.is+":captions"))}toggleSound(){this.$.volIcon===ye.VOL_ON?(this.$.volIcon=ye.VOL_OFF,this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon=ye.VOL_ON,this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(e){window.localStorage.setItem(lt.is+":volume",e);let s=e?e/100:0;this._video.volume=s}get progress(){return this.ref.progress}_getUrl(e){return e.includes("/")?e:`https://ucarecdn.com/${e}/`}_desc2attrs(e){let s=[];for(let r in e){let n=r==="src"?this._getUrl(e[r]):e[r];s.push(`${r}="${n}"`)}return s.join(" ")}_timeFmt(e){let s=new Date(Math.round(e)*1e3);return[s.getMinutes(),s.getSeconds()].map(r=>r<10?"0"+r:r).join(":")}_initTracks(){[...this._video.textTracks].forEach(e=>{e.mode="hidden"}),window.localStorage.getItem(lt.is+":captions")&&this.toggleCaptions()}_castAttributes(){let e=["autoplay","loop","muted"];[...this.attributes].forEach(s=>{e.includes(s.name)&&this._video.setAttribute(s.name,s.value)})}initCallback(){super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon=ye.PAUSE,this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon=ye.PLAY,this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",s=>{console.log(s),document.fullscreenElement===this?this.$.fsIcon=ye.FS_OFF:this.$.fsIcon=ye.FS_ON}),this.sub("src",s=>{if(!s)return;let r=this._getUrl(s);this._video.src=r}),this.sub("video",async s=>{if(!s)return;let r=await(await window.fetch(this._getUrl(s))).json();r.poster&&(this._video.poster=this._getUrl(r.poster));let n="";r==null||r.sources.forEach(l=>{n+=`<source ${this._desc2attrs(l)} />`}),r.tracks&&(r.tracks.forEach(l=>{n+=`<track ${this._desc2attrs(l)} />`}),this.$.hasSubtitles=!0),this._video.innerHTML+=n,this._initTracks(),console.log(r)}),this._video.addEventListener("loadedmetadata",s=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",s=>{let r=Math.round(100*(this._video.currentTime/this._video.duration));this.$.progressCssWidth=r+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let e=window.localStorage.getItem(lt.is+":volume");if(e){let s=parseFloat(e);this.setVolume(s),this.$.volumeValue=s}}}lt.template=`
  <div class="video-wrapper">
    <video ref="video" preload="metadata" crossorigin="anonymous"></video>
  </div>

  <div class="toolbar">
    <div class="progress" ref="progress" set -onclick="progressClicked">
      <div class="bar" set -style.width="progressCssWidth"></div>
    </div>

    <div class="tb-block">
      <button set -onclick="onPP">
        <lr-icon set -@name="ppIcon"></lr-icon>
      </button>
      <div class="timer">{{currentTime}} / {{totalTime}}</div>
    </div>

    <div class="tb-block">
      <button set -onclick="onCap" -@hidden="!hasSubtitles">
        <lr-icon set -@name="capIcon"></lr-icon>
      </button>

      <button set -onclick="onMute">
        <lr-icon set -@name="volIcon"></lr-icon>
      </button>

      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>

      <button set -onclick="onFs">
        <lr-icon set -@name="fsIcon"></lr-icon>
      </button>
    </div>
  </div>
`;lt.bindAttributes({video:"video",src:"src"});const Tp="css-src";function un(t){return class extends t{constructor(){super(...arguments);m(this,"renderShadow",!0);m(this,"pauseRender",!0);m(this,"requireCtxName",!0)}shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden",""),No({element:this,attribute:Tp,onSuccess:e=>{this.attachShadow({mode:"open"});let s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=e,s.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.prepend(s)},onTimeout:()=>{console.error("Attribute `css-src` is required and it is not set. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/")}})}}}class Ca extends un(ie){}class Ta extends ie{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",i=>{this.toggleAttribute("hidden",!!i)})}}m(Ta,"template",`
    <a
      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"
      target="_blank noopener"
      class="credits"
      >Powered by Uploadcare</a
    >
  `);class hn extends Ca{constructor(){super(...arguments);m(this,"requireCtxName",!0);m(this,"init$",Mo(this));m(this,"_template",null)}static set template(e){this._template=e+"<slot></slot>"}static get template(){return this._template}}class dn extends hn{}dn.template=`
  <lr-simple-btn></lr-simple-btn>

  <lr-modal strokes block-body-scrolling>
    <lr-start-from>
      <lr-drop-area with-icon clickable></lr-drop-area>
      <lr-source-list wrap></lr-source-list>
      <lr-copyright></lr-copyright>
    </lr-start-from>
    <lr-upload-list></lr-upload-list>
    <lr-camera-source></lr-camera-source>
    <lr-url-source></lr-url-source>
    <lr-external-source></lr-external-source>
    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>
  </lr-modal>

  <lr-message-box></lr-message-box>
  <lr-progress-bar-common></lr-progress-bar-common>
`;class Ea extends hn{constructor(){super(...arguments);m(this,"pauseRender",!0)}shadowReadyCallback(){const e=this.ref.uBlock;this.sub("*currentActivity",s=>{s||(this.$["*currentActivity"]=e.initActivity||D.activities.START_FROM)}),this.sub("*uploadList",s=>{(s==null?void 0:s.length)>0?this.$["*currentActivity"]=D.activities.UPLOAD_LIST:this.$["*currentActivity"]=e.initActivity||D.activities.START_FROM}),this.subConfigValue("sourceList",s=>{s!=="local"&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",s=>{s!==!1&&(this.cfg.confirmUpload=!1)})}}Ea.template=`
  <lr-start-from>
    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-message-box></lr-message-box>
`;class xa extends hn{shadowReadyCallback(){const i=this.ref.uBlock;this.sub("*currentActivity",e=>{e||(this.$["*currentActivity"]=i.initActivity||D.activities.START_FROM)}),this.sub("*uploadList",e=>{((e==null?void 0:e.length)>0&&this.$["*currentActivity"]===i.initActivity||D.activities.START_FROM)&&(this.$["*currentActivity"]=D.activities.UPLOAD_LIST)})}}xa.template=` <lr-start-from>
    <lr-drop-area with-icon clickable></lr-drop-area>
    <lr-source-list wrap></lr-source-list>
    <lr-copyright></lr-copyright>
  </lr-start-from>
  <lr-upload-list ref="uBlock"></lr-upload-list>
  <lr-camera-source></lr-camera-source>
  <lr-url-source></lr-url-source>
  <lr-external-source></lr-external-source>
  <lr-message-box></lr-message-box>
  <lr-progress-bar></lr-progress-bar>
  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>`;class Ep extends un(yi){shadowReadyCallback(){this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}async initEditor(){this.__shadowReady&&await super.initEditor()}}function fn(t){for(let i in t){let e=[...i].reduce((s,r)=>(r.toUpperCase()===r&&(r="-"+r.toLowerCase()),s+=r),"");e.startsWith("-")&&(e=e.replace("-","")),e.startsWith("lr-")||(e="lr-"+e),t[i].reg&&t[i].reg(e)}}const tr="LR";async function xp(t,i=!1){return new Promise((e,s)=>{if(typeof document!="object"){e(null);return}if(typeof window=="object"&&window[tr]){e(window[tr]);return}let r=document.createElement("script");r.async=!0,r.src=t,r.onerror=()=>{s()},r.onload=()=>{let n=window[tr];i&&fn(n),e(n)},document.head.appendChild(r)})}const Ap=Object.freeze(Object.defineProperty({__proto__:null,ActivityBlock:D,ActivityHeader:Cp,BaseComponent:Os,Block:ie,CameraSource:ra,CloudImageEditor:Ep,CloudImageEditorActivity:pp,CloudImageEditorBlock:yi,Config:Zo,ConfirmationDialog:la,Copyright:Ta,CropFrame:ua,Data:Z,DataOutput:Ns,DropArea:tn,EditorCropButtonControl:ha,EditorFilterControl:ln,EditorImageCropper:pa,EditorImageFader:up,EditorOperationControl:fa,EditorScroller:ma,EditorSlider:da,EditorToolbar:ga,ExternalSource:va,FileItem:Vt,FilePreview:rn,FileUploaderInline:xa,FileUploaderMinimal:Ea,FileUploaderRegular:dn,Icon:Qr,Img:Ff,LineLoaderUi:ba,LrBtnUi:an,MessageBox:ta,Modal:Jr,PACKAGE_NAME:jo,PACKAGE_VERSION:Bo,PresenceToggle:_a,ProgressBar:aa,ProgressBarCommon:oa,Select:wa,ShadowWrapper:Ca,SimpleBtn:en,SliderUi:ya,SourceBtn:sn,SourceList:Xf,StartFrom:Nf,Tabs:cn,UploadCtxProvider:Yf,UploadDetails:na,UploadList:ia,UploaderBlock:G,UrlSource:sa,Video:lt,connectBlocksFrom:xp,registerBlocks:fn,shadowed:un,toKebabCase:zt},Symbol.toStringTag,{value:"Module"})),Sp="/blocks-examples/vue-uploader/assets/lr-file-uploader-regular.min-dfb1c951.css",$p=`:host lr-simple-btn button{height:auto;padding:10px 12px!important;font-family:monospace;line-height:1;font-size:16px;border:1px solid var(--ui-control-border-color-default);border-radius:8px;background:var(--ui-control-background-color);box-shadow:0 0 16px 0 var(--ui-control-box-shadow-color);color:var(--ui-control-text-color)}:host lr-simple-btn lr-icon{display:none}:host lr-simple-btn button:hover,:host lr-simple-btn button:focus{background:var(--ui-control-background-color);outline:3px solid var(--ui-control-outline-color-focus)}:host lr-simple-btn button:active{border-color:var(--ui-control-border-color-focus)}
`;const Aa=(t,i)=>{const e=t.__vccOpts||t;for(const[s,r]of i)e[s]=r;return e};dn.shadowStyles=$p;fn(Ap);const Ip={props:{uploaderClassName:String,files:{type:Array,required:!0},theme:{validator(t){return["light","dark"].includes(t)}}},emits:["update:files"],data(){return{blocksStyles:Sp,uploadedFiles:[]}},methods:{resetUploaderState(){this.$refs.ctxProviderRef.uploadCollection.clearAll()},handleRemoveClick(t){this.$emit("update:files",this.files.filter(i=>i.uuid!==t))},handleUploadEvent(t){var i;(i=t.detail)!=null&&i.data&&(this.uploadedFiles=t.detail.data)},handleDoneFlow(){this.resetUploaderState(),this.$emit("update:files",[...this.files,...this.uploadedFiles]),this.uploadedFiles=[]}},mounted(){window.addEventListener("LR_DATA_OUTPUT",this.handleUploadEvent),window.addEventListener("LR_DONE_FLOW",this.handleDoneFlow)},beforeUnmount(){window.removeEventListener("LR_DATA_OUTPUT",this.handleUploadEvent),window.removeEventListener("LR_DONE_FLOW",this.handleDoneFlow)}},Op=t=>(Gl("data-v-0e1ffa72"),t=t(),Yl(),t),kp={class:"root"},Lp=Op(()=>J("lr-config",{"ctx-name":"my-uploader",pubkey:"demopublickey",multiple:"",sourceList:"local, url, camera, dropbox, gdrive",confirmUpload:"",removeCopyright:"",imgOnly:""},null,-1)),Up=["css-src"],Pp={"ctx-name":"my-uploader",ref:"ctxProviderRef"},Rp={class:"previews"},Mp=["src","alt","title"],Dp=["onClick"];function Fp(t,i,e,s,r,n){return Ft(),ni("div",kp,[Lp,J("lr-file-uploader-regular",{"ctx-name":"my-uploader","css-src":r.blocksStyles,class:vs([e.uploaderClassName,{"dark-mode-enabled":e.theme==="dark"}])},null,10,Up),J("lr-upload-ctx-provider",Pp,null,512),J("div",Rp,[(Ft(!0),ni(Ge,null,Jc(e.files,l=>(Ft(),ni("div",{class:"preview",key:l.cdnUrl},[J("img",{class:"preview-image",src:`${l.cdnUrl}/-/preview/-/resize/x200/`,width:"100",alt:l.originalFilename,title:l.originalFilename},null,8,Mp),J("button",{class:"preview-remove-button",type:"button",onClick:o=>n.handleRemoveClick(l.uuid)},"×",8,Dp)]))),128))])])}const Np=Aa(Ip,[["render",Fp],["__scopeId","data-v-0e1ffa72"]]),ir={title:"A Romantic Weekend Getaway in Paris",text:`Paris, often referred to as the "City of Love" and the "City of Lights," is a dream destination for many travelers around the world. With its rich history, stunning architecture, delectable cuisine, and an unmistakable romantic atmosphere, Paris offers an unforgettable experience. In this blog post, we'll take you on a journey through our recent weekend trip to Paris, where we gazed at the iconic Eiffel Tower, indulged in heavenly croissants, and immersed ourselves in the city's captivating charm.

# Day 1: Arrival in the City of Love

...`,photos:[{uuid:"add046ce-95e3-4454-bccd-65e3e648c472",name:"arthurhumeau3xwdarHxHqIunsplash.jpg",size:1657550,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/add046ce-95e3-4454-bccd-65e3e648c472/",s3Url:null,originalFilename:"arthur-humeau-3xwdarHxHqI-unsplash.jpg",imageInfo:{dpi:[72,72],width:2400,format:"JPEG",height:3600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:2400,format:"JPEG",height:3600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100},{uuid:"9732c6a8-7199-418d-9e02-2a384a953363",name:"bharatpatilWR5_Ev_bhIunsplash.jpg",size:974188,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/9732c6a8-7199-418d-9e02-2a384a953363/",s3Url:null,originalFilename:"bharat-patil-WR5_Ev_bh-I-unsplash.jpg",imageInfo:{dpi:[72,72],width:2400,format:"JPEG",height:1600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:2400,format:"JPEG",height:1600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100},{uuid:"7708b679-644d-40ba-8b53-5d91bac5125d",name:"chriskaridisnnzkZNYWHaUunsplash.jpg",size:535450,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/7708b679-644d-40ba-8b53-5d91bac5125d/",s3Url:null,originalFilename:"chris-karidis-nnzkZNYWHaU-unsplash.jpg",imageInfo:{dpi:[72,72],width:2400,format:"JPEG",height:1596,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:2400,format:"JPEG",height:1596,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100},{uuid:"695dd86e-6095-4e04-9dab-89c082fdba57",name:"earthDXuxHw3S5akunsplash.jpg",size:673331,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/695dd86e-6095-4e04-9dab-89c082fdba57/",s3Url:null,originalFilename:"earth-DXuxHw3S5ak-unsplash.jpg",imageInfo:{dpi:[72,72],width:1600,format:"JPEG",height:2e3,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:1600,format:"JPEG",height:2e3,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100},{uuid:"8cbf5c6f-2e3b-4ad4-8321-2c2a7a7200cd",name:"johntownerHf4Ap1ef40unsplash.jpg",size:1868140,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/8cbf5c6f-2e3b-4ad4-8321-2c2a7a7200cd/",s3Url:null,originalFilename:"john-towner-Hf4Ap1-ef40-unsplash.jpg",imageInfo:{dpi:[72,72],width:2400,format:"JPEG",height:3438,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:2400,format:"JPEG",height:3438,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100},{uuid:"69ebc69c-f24a-481c-a71f-ecf8fe4f80be",name:"sebastiengabrielgyUVNafCIG8unsplash.jpg",size:1021096,isStored:!0,isImage:!0,mimeType:"image/jpeg",cdnUrl:"https://ucarecdn.com/69ebc69c-f24a-481c-a71f-ecf8fe4f80be/",s3Url:null,originalFilename:"sebastien-gabriel-gyUVNafCIG8-unsplash.jpg",imageInfo:{dpi:[72,72],width:2400,format:"JPEG",height:3600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null},videoInfo:null,contentInfo:{mime:{mime:"image/jpeg",type:"image",subtype:"jpeg"},image:{dpi:[72,72],width:2400,format:"JPEG",height:3600,sequence:!1,colorMode:"RGB",orientation:null,geoLocation:null,datetimeOriginal:null}},metadata:{},s3Bucket:null,defaultEffects:null,file:null,externalUrl:null,cdnUrlModifiers:null,validationErrorMessage:null,uploadError:null,isUploaded:!0,isValid:!0,fullPath:null,uploadProgress:100}]};const zp={components:{FileUploader:Np},data(){return{title:ir.title,text:ir.text,photos:ir.photos,sentFormObject:null,theme:"light",sunImage:hh,moonImage:dh}},methods:{handleFormSubmit(){this.sentFormObject={title:this.title,text:this.text,photos:this.photos}}},watch:{theme:{handler(){document.body.classList.remove("theme--light"),document.body.classList.remove("theme--dark"),document.body.classList.add(`theme--${this.theme}`)},immediate:!0}}},zi=t=>(Gl("data-v-5a63569d"),t=t(),Yl(),t),Vp={class:"app"},jp={class:"header"},Bp=zi(()=>J("h1",{class:"view-title"},"New blog post",-1)),Hp={class:"theme-toggle"},Wp=["src","alt"],Xp={class:"field"},qp=zi(()=>J("label",{class:"label",for:"title"},"Title",-1)),Kp={class:"field"},Gp=zi(()=>J("label",{class:"label",for:"text"},"Text",-1)),Yp={class:"field"},Jp=zi(()=>J("p",{class:"label"},"Photos",-1)),Zp=zi(()=>J("div",{class:"field"},[J("button",{class:"button",type:"submit"},"Publish")],-1)),Qp={key:1,class:"result"};function em(t,i,e,s,r,n){const l=Uc("FileUploader");return Ft(),ni("div",Vp,[J("header",jp,[Bp,J("label",Hp,[Xs(J("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=o=>r.theme=o),"true-value":"light","false-value":"dark"},null,512),[[ih,r.theme]]),J("img",{src:r.theme==="light"?r.sunImage:r.moonImage,width:"18",height:"18",alt:`Switch to ${r.theme==="light"?"dark":"light"} theme`},null,8,Wp)])]),r.sentFormObject?Vn("",!0):(Ft(),ni("form",{key:0,class:"form",onSubmit:i[4]||(i[4]=lh((...o)=>n.handleFormSubmit&&n.handleFormSubmit(...o),["prevent"]))},[J("div",Xp,[qp,Xs(J("input",{class:"input",type:"text",id:"title","onUpdate:modelValue":i[1]||(i[1]=o=>r.title=o)},null,512),[[Qn,r.title]])]),J("div",Kp,[Gp,Xs(J("textarea",{class:"input",id:"text",rows:"10","onUpdate:modelValue":i[2]||(i[2]=o=>r.text=o)},null,512),[[Qn,r.text]])]),J("div",Yp,[Jp,Qe(l,{"uploader-class-name":"file-uploader",files:r.photos,"onUpdate:files":i[3]||(i[3]=o=>r.photos=o),theme:r.theme},null,8,["files","theme"])]),Zp],32)),r.sentFormObject?(Ft(),ni("pre",Qp,[J("code",null,Ha(JSON.stringify(r.sentFormObject,null,2)),1)])):Vn("",!0)])}const tm=Aa(zp,[["render",em],["__scopeId","data-v-5a63569d"]]);ch(tm).mount("#app");
