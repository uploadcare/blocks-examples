"use strict";var W1=Object.defineProperty,q1=Object.defineProperties,Y1=Object.getOwnPropertyDescriptors,b_=Object.getOwnPropertySymbols,Q1=Object.prototype.hasOwnProperty,K1=Object.prototype.propertyIsEnumerable,Nc=(Re,ve,Ie)=>ve in Re?W1(Re,ve,{enumerable:!0,configurable:!0,writable:!0,value:Ie}):Re[ve]=Ie,E=(Re,ve)=>{for(var Ie in ve||(ve={}))Q1.call(ve,Ie)&&Nc(Re,Ie,ve[Ie]);if(b_)for(var Ie of b_(ve))K1.call(ve,Ie)&&Nc(Re,Ie,ve[Ie]);return Re},R=(Re,ve)=>q1(Re,Y1(ve)),v=(Re,ve,Ie)=>(Nc(Re,"symbol"!=typeof ve?ve+"":ve,Ie),Ie);(self.webpackChunkangular_uploader=self.webpackChunkangular_uploader||[]).push([[179],{567:(Re,ve,Ie)=>{var v_,Wr={};function Oo(t){return"function"==typeof t}Ie.r(Wr),Ie.d(Wr,{ActivityBlock:()=>j,ActivityHeader:()=>c1,BaseComponent:()=>wo,Block:()=>ne,CameraSource:()=>Vx,CloudEditor:()=>pc,CloudImageEditor:()=>n1,ConfirmationDialog:()=>zx,Copyright:()=>d_,CropFrame:()=>E1,Data:()=>te,DataOutput:()=>u1,DropArea:()=>Jy,EditorCropButtonControl:()=>_c,EditorFilterControl:()=>Dc,EditorImageCropper:()=>x1,EditorImageFader:()=>P1,EditorOperationControl:()=>Cc,EditorScroller:()=>O1,EditorSlider:()=>S1,EditorToolbar:()=>__,ExternalSource:()=>l1,FileItem:()=>Un,FilePreview:()=>r_,FileUploaderInline:()=>g1,FileUploaderMinimal:()=>p1,FileUploaderRegular:()=>h1,Icon:()=>jy,Img:()=>Tx,LineLoaderUi:()=>B1,LrBtnUi:()=>Ec,MessageBox:()=>Ox,Modal:()=>En,PresenceToggle:()=>V1,ProgressBar:()=>Wx,ProgressBarCommon:()=>Gx,Select:()=>d1,ShadowWrapper:()=>c_,SimpleBtn:()=>Ix,SliderUi:()=>U1,SourceBtn:()=>e_,SourceList:()=>Px,StartFrom:()=>Sx,Tabs:()=>gc,UploadCtxProvider:()=>Ux,UploadDetails:()=>jx,UploadList:()=>$x,UploaderBlock:()=>ie,UrlSource:()=>Bx,Video:()=>u_,connectBlocksFrom:()=>j1,registerBlocks:()=>Tc});let Lo=!1;const mt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else Lo&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Lo=t},get useDeprecatedSynchronousErrorHandling(){return Lo}};function zn(t){setTimeout(()=>{throw t},0)}const Xi={closed:!0,next(t){},error(t){if(mt.useDeprecatedSynchronousErrorHandling)throw t;zn(t)},complete(){}},D_=Array.isArray||(t=>t&&"number"==typeof t.length);function Rc(t){return null!==t&&"object"==typeof t}const Zi=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class de{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:i,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof de)n.remove(this);else if(null!==n)for(let o=0;o<n.length;++o)n[o].remove(this);if(Oo(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(o){e=o instanceof Zi?Fc(o.errors):[o]}}if(D_(s)){let o=-1,a=s.length;for(;++o<a;){const l=s[o];if(Rc(l))try{l.unsubscribe()}catch(u){e=e||[],u instanceof Zi?e=e.concat(Fc(u.errors)):e.push(u)}}}if(e)throw new Zi(e)}add(e){let n=e;if(!e)return de.EMPTY;switch(typeof e){case"function":n=new de(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof de)){const s=n;n=new de,n._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof de){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function Fc(t){return t.reduce((e,n)=>e.concat(n instanceof Zi?n.errors:n),[])}de.EMPTY=((t=new de).closed=!0,t);const Ji="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class qe extends de{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Xi;break;case 1:if(!e){this.destination=Xi;break}if("object"==typeof e){e instanceof qe?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new Pc(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new Pc(this,e,n,r)}}[Ji](){return this}static create(e,n,r){const i=new qe(e,n,r);return i.syncErrorThrowable=!1,i}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class Pc extends qe{constructor(e,n,r,i){super(),this._parentSubscriber=e;let s,o=this;Oo(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==Xi&&(o=Object.create(n),Oo(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=i}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;mt.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=mt;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):zn(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;zn(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);mt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),mt.useDeprecatedSynchronousErrorHandling)throw r;zn(r)}}__tryOrSetError(e,n,r){if(!mt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(i){return mt.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=i,e.syncErrorThrown=!0,!0):(zn(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const qr="function"==typeof Symbol&&Symbol.observable||"@@observable";function kc(t){return t}let Be=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const{operator:s}=this,o=function w_(t,e,n){if(t){if(t instanceof qe)return t;if(t[Ji])return t[Ji]()}return t||e||n?new qe(t,e,n):new qe(Xi)}(n,r,i);if(o.add(s?s.call(o,this.source):this.source||mt.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),mt.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){mt.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function C_(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof qe?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=Lc(r))((i,s)=>{let o;o=this.subscribe(a=>{try{n(a)}catch(l){s(l),o&&o.unsubscribe()}},s,i)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[qr](){return this}pipe(...n){return 0===n.length?this:function Oc(t){return 0===t.length?kc:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Lc(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Lc(t){if(t||(t=mt.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const Yr=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class E_ extends de{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class $c extends qe{constructor(e){super(e),this.destination=e}}let $o=(()=>{class t extends Be{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Ji](){return new $c(this)}lift(n){const r=new Bc(this,this);return r.operator=n,r}next(n){if(this.closed)throw new Yr;if(!this.isStopped){const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].next(n)}}error(n){if(this.closed)throw new Yr;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,i=r.length,s=r.slice();for(let o=0;o<i;o++)s[o].error(n);this.observers.length=0}complete(){if(this.closed)throw new Yr;this.isStopped=!0;const{observers:n}=this,r=n.length,i=n.slice();for(let s=0;s<r;s++)i[s].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new Yr;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new Yr;return this.hasError?(n.error(this.thrownError),de.EMPTY):this.isStopped?(n.complete(),de.EMPTY):(this.observers.push(n),new E_(this,n))}asObservable(){const n=new Be;return n.source=this,n}}return t.create=(e,n)=>new Bc(e,n),t})();class Bc extends $o{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):de.EMPTY}}class S_{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new A_(e,this.project,this.thisArg))}}class A_ extends qe{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Vc=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},es=function x_(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Uc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function jc(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const Hc=t=>{if(t&&"function"==typeof t[qr])return(t=>e=>{const n=t[qr]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(Uc(t))return Vc(t);if(jc(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zn),e))(t);if(t&&"function"==typeof t[es])return(t=>e=>{const n=t[es]();for(;;){let r;try{r=n.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${Rc(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function zc(t,e){return new Be(n=>{const r=new de;let i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}class V_ extends qe{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class U_ extends qe{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function Gc(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(Gc((i,s)=>function B_(t,e){return e?function $_(t,e){if(null!=t){if(function O_(t){return t&&"function"==typeof t[qr]}(t))return function F_(t,e){return new Be(n=>{const r=new de;return r.add(e.schedule(()=>{const i=t[qr]();r.add(i.subscribe({next(s){r.add(e.schedule(()=>n.next(s)))},error(s){r.add(e.schedule(()=>n.error(s)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(jc(t))return function P_(t,e){return new Be(n=>{const r=new de;return r.add(e.schedule(()=>t.then(i=>{r.add(e.schedule(()=>{n.next(i),r.add(e.schedule(()=>n.complete()))}))},i=>{r.add(e.schedule(()=>n.error(i)))}))),r})}(t,e);if(Uc(t))return zc(t,e);if(function L_(t){return t&&"function"==typeof t[es]}(t)||"string"==typeof t)return function k_(t,e){if(!t)throw new Error("Iterable cannot be null");return new Be(n=>{const r=new de;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[es](),r.add(e.schedule(function(){if(n.closed)return;let s,o;try{const a=i.next();s=a.value,o=a.done}catch(a){return void n.error(a)}o?n.complete():(n.next(s),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof Be?t:new Be(Hc(t))}(t(i,s)).pipe(function I_(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new S_(t,e))}}((o,a)=>e(i,o,s,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new H_(t,n)))}class H_{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new z_(e,this.project,this.concurrent))}}class z_ extends U_{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(n)}_innerSub(e){const n=new V_(this),r=this.destination;r.add(n);const i=function j_(t,e){if(e.closed)return;if(t instanceof Be)return t.subscribe(e);let n;try{n=Hc(t)(e)}catch(r){e.error(r)}return n}(e,n);i!==n&&r.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Wc(){return function(e){return e.lift(new Y_(e))}}class Y_{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const i=new Q_(e,r),s=n.subscribe(i);return i.closed||(i.connection=r.connect()),s}}class Q_ extends qe{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,i=e._connection;this.connection=null,i&&(!r||i===r)&&i.unsubscribe()}}class K_ extends Be{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new de,e.add(this.source.subscribe(new Z_(this.getSubject(),this))),e.closed&&(this._connection=null,e=de.EMPTY)),e}refCount(){return Wc()(this)}}const X_=(()=>{const t=K_.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Z_ extends $c{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}class tv{constructor(e,n){this.subjectFactory=e,this.selector=n}call(e,n){const{selector:r}=this,i=this.subjectFactory(),s=r(i).subscribe(e);return s.add(n.subscribe(i)),s}}function nv(){return new $o}function Q(t){for(let e in t)if(t[e]===Q)return e;throw Error("Could not find renamed property on target object.")}function W(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(W).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Vo(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const iv=Q({__forward_ref__:Q});function Uo(t){return t.__forward_ref__=Uo,t.toString=function(){return W(this())},t}function F(t){return function qc(t){return"function"==typeof t&&t.hasOwnProperty(iv)&&t.__forward_ref__===Uo}(t)?t():t}class z extends Error{constructor(e,n){super(function jo(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function A(t){return"string"==typeof t?t:null==t?"":String(t)}function Se(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():A(t)}function ts(t,e){const n=e?` in ${e}`:"";throw new z(-201,`No provider for ${Se(t)} found${n}`)}function Qe(t,e){null==t&&function K(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function oe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ho(t){return Yc(t,ns)||Yc(t,Kc)}function Yc(t,e){return t.hasOwnProperty(e)?t[e]:null}function Qc(t){return t&&(t.hasOwnProperty(zo)||t.hasOwnProperty(dv))?t[zo]:null}const ns=Q({\u0275prov:Q}),zo=Q({\u0275inj:Q}),Kc=Q({ngInjectableDef:Q}),dv=Q({ngInjectorDef:Q});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let Go;function fn(t){const e=Go;return Go=t,e}function Xc(t,e,n){const r=Ho(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void ts(W(t),"Injector")}function hn(t){return{toString:t}.toString()}var yt=(()=>((yt=yt||{})[yt.OnPush=0]="OnPush",yt[yt.Default=1]="Default",yt))(),Pt=(()=>(function(t){t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom"}(Pt||(Pt={})),Pt))();const hv="undefined"!=typeof globalThis&&globalThis,pv="undefined"!=typeof window&&window,gv="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Y=hv||"undefined"!=typeof global&&global||pv||gv,Wn={},X=[],rs=Q({\u0275cmp:Q}),Wo=Q({\u0275dir:Q}),qo=Q({\u0275pipe:Q}),Zc=Q({\u0275mod:Q}),Zt=Q({\u0275fac:Q}),Qr=Q({__NG_ELEMENT_ID__:Q});let mv=0;function Yo(t){return hn(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===yt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||X,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Pt.Emulated,id:"c",styles:t.styles||X,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,s=t.features,o=t.pipes;return r.id+=mv++,r.inputs=nd(t.inputs,n),r.outputs=nd(t.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Jc):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(ed):null,r})}function Jc(t){return Ae(t)||function pn(t){return t[Wo]||null}(t)}function ed(t){return function Nn(t){return t[qo]||null}(t)}const td={};function Kr(t){return hn(()=>{const e={type:t.type,bootstrap:t.bootstrap||X,declarations:t.declarations||X,imports:t.imports||X,exports:t.exports||X,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(td[t.id]=t.type),e})}function nd(t,e){if(null==t)return Wn;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const st=Yo;function Ae(t){return t[rs]||null}function ot(t,e){const n=t[Zc]||null;if(!n&&!0===e)throw new Error(`Type ${W(t)} does not have '\u0275mod' property.`);return n}const P=11,J=20;function kt(t){return Array.isArray(t)&&"object"==typeof t[1]}function vt(t){return Array.isArray(t)&&!0===t[1]}function Xo(t){return 0!=(8&t.flags)}function as(t){return 2==(2&t.flags)}function ls(t){return 1==(1&t.flags)}function bt(t){return null!==t.template}function Cv(t){return 0!=(512&t[2])}function kn(t,e){return t.hasOwnProperty(Zt)?t[Zt]:null}class Tv{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function id(t){return t.type.prototype.ngOnChanges&&(t.setInput=Sv),Iv}function Iv(){const t=od(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Wn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Sv(t,e,n,r){const i=od(t)||function Av(t,e){return t[sd]=e}(t,{previous:Wn,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new Tv(l&&l.currentValue,e,o===Wn),t[r]=e}const sd="__ngSimpleChanges__";function od(t){return t[sd]||null}let na;function le(t){return!!t.listen}const ad={createRenderer:(t,e)=>function ra(){return void 0!==na?na:"undefined"!=typeof document?document:void 0}()};function pe(t){for(;Array.isArray(t);)t=t[0];return t}function ut(t,e){return pe(e[t.index])}function ia(t,e){return t.data[e]}function Xe(t,e){const n=e[t];return kt(n)?n:n[0]}function sa(t){return 128==(128&t[2])}function gn(t,e){return null==e?null:t[e]}function ud(t){t[18]=0}function oa(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const M={lFrame:_d(null),bindingsEnabled:!0};function dd(){return M.bindingsEnabled}function _(){return M.lFrame.lView}function H(){return M.lFrame.tView}function be(){let t=fd();for(;null!==t&&64===t.type;)t=t.parent;return t}function fd(){return M.lFrame.currentTNode}function Ot(t,e){const n=M.lFrame;n.currentTNode=t,n.isParent=e}function aa(){return M.lFrame.isParent}function Wv(t,e){const n=M.lFrame;n.bindingIndex=n.bindingRootIndex=t,ua(e)}function ua(t){M.lFrame.currentDirectiveIndex=t}function da(t){M.lFrame.currentQueryIndex=t}function Yv(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function md(t,e,n){if(n&N.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&N.Host||(i=Yv(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=M.lFrame=yd();return r.currentTNode=e,r.lView=t,!0}function fs(t){const e=yd(),n=t[1];M.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function yd(){const t=M.lFrame,e=null===t?null:t.child;return null===e?_d(t):e}function _d(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function vd(){const t=M.lFrame;return M.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const bd=vd;function hs(){const t=vd();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pe(){return M.lFrame.selectedIndex}function mn(t){M.lFrame.selectedIndex=t}function ue(){const t=M.lFrame;return ia(t.tView,t.selectedIndex)}function ps(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function gs(t,e,n){Dd(t,e,3,n)}function ms(t,e,n,r){(3&t[2])===n&&Dd(t,e,n,r)}function fa(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Dd(t,e,n,r){const s=null!=r?r:-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<s||-1==s)&&(rb(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function rb(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ti{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ys(t,e,n){const r=le(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];pa(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Cd(t){return 3===t||4===t||6===t}function pa(t){return 64===t.charCodeAt(0)}function _s(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||wd(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function wd(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ed(t){return-1!==t}function Jn(t){return 32767&t}function er(t,e){let n=function lb(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let ga=!0;function vs(t){const e=ga;return ga=t,e}let ub=0;function ri(t,e){const n=ya(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ma(r.data,t),ma(e,null),ma(r.blueprint,null));const i=bs(t,e),s=t.injectorIndex;if(Ed(i)){const o=Jn(i),a=er(i,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function ma(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ya(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function bs(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const s=i[1],o=s.type;if(r=2===o?s.declTNode:1===o?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Ds(t,e,n){!function cb(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qr)&&(r=n[Qr]),null==r&&(r=n[Qr]=ub++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Sd(t,e,n){if(n&N.Optional)return t;ts(e,"NodeInjector")}function Ad(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=fn(void 0);try{return i?i.get(e,r,n&N.Optional):Xc(e,r,n&N.Optional)}finally{fn(s)}}return Sd(r,e,n)}function Md(t,e,n,r=N.Default,i){if(null!==t){const s=function pb(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Qr)?t[Qr]:void 0;return"number"==typeof e?e>=0?255&e:fb:e}(n);if("function"==typeof s){if(!md(e,t,r))return r&N.Host?Sd(i,n,r):Ad(e,n,r,i);try{const o=s(r);if(null!=o||r&N.Optional)return o;ts(n)}finally{bd()}}else if("number"==typeof s){let o=null,a=ya(t,e),l=-1,u=r&N.Host?e[16][6]:null;for((-1===a||r&N.SkipSelf)&&(l=-1===a?bs(t,e):e[a+8],-1!==l&&Rd(r,!1)?(o=e[1],a=Jn(l),e=er(l,e)):a=-1);-1!==a;){const c=e[1];if(Nd(s,a,c.data)){const d=hb(a,e,n,o,r,u);if(d!==xd)return d}l=e[a+8],-1!==l&&Rd(r,e[1].data[a+8]===u)&&Nd(s,a,e)?(o=c,a=Jn(l),e=er(l,e)):a=-1}}}return Ad(e,n,r,i)}const xd={};function fb(){return new tr(be(),_())}function hb(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=function Cs(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,c=s>>20,f=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&bt(h)&&h.type===n)return l}return null}(a,o,n,null==r?as(a)&&ga:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==c?ii(e,o,c,a):xd}function ii(t,e,n,r){let i=t[n];const s=e.data;if(function ib(t){return t instanceof ti}(i)){const o=i;o.resolving&&function sv(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new z(-200,`Circular dependency in DI detected for ${t}${n}`)}(Se(s[n]));const a=vs(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?fn(o.injectImpl):null;md(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function nb(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=id(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&fn(l),vs(a),o.resolving=!1,bd()}}return i}function Nd(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Rd(t,e){return!(t&N.Self||t&N.Host&&e)}class tr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Md(this._tNode,this._lView,e,r,n)}}const rr="__parameters__";function sr(t,e,n){return hn(()=>{const r=function ba(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(rr)?l[rr]:Object.defineProperty(l,rr,{value:[]})[rr];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class q{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Lt(t,e){t.forEach(n=>Array.isArray(n)?Lt(n,e):e(n))}function Pd(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ws(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const li={},Ea="__NG_DI_FLAG__",Ts="ngTempTokenPath",Ib=/\n/gm,Bd="__source",Ab=Q({provide:String,useValue:Q});let ui;function Vd(t){const e=ui;return ui=t,e}function Mb(t,e=N.Default){if(void 0===ui)throw new z(203,"");return null===ui?Xc(t,void 0,e):ui.get(t,e&N.Optional?null:void 0,e)}function Z(t,e=N.Default){return(function fv(){return Go}()||Mb)(F(t),e)}const xb=Z;function Ta(t){const e=[];for(let n=0;n<t.length;n++){const r=F(t[n]);if(Array.isArray(r)){if(0===r.length)throw new z(900,"");let i,s=N.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Nb(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(Z(i,s))}else e.push(Z(r))}return e}function ci(t,e){return t[Ea]=e,t.prototype[Ea]=e,t}function Nb(t){return t[Ea]}const Is=ci(sr("Optional"),8),Ss=ci(sr("SkipSelf"),4);class Qd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Jb=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,eD=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var ge=(()=>((ge=ge||{})[ge.NONE=0]="NONE",ge[ge.HTML=1]="HTML",ge[ge.STYLE=2]="STYLE",ge[ge.SCRIPT=3]="SCRIPT",ge[ge.URL=4]="URL",ge[ge.RESOURCE_URL=5]="RESOURCE_URL",ge))();function Pa(t){const e=function pi(){const t=_();return t&&t[12]}();return e?e.sanitize(ge.URL,t)||"":function fi(t,e){const n=function Qb(t){return t instanceof Qd&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?function _n(t){return t instanceof Qd?t.changingThisBreaksApplicationSecurity:t}(t):function Ns(t){return(t=String(t)).match(Jb)||t.match(eD)?t:"unsafe:"+t}(A(t))}const of="__ngContext__";function xe(t,e){t[of]=e}function Oa(t){const e=function gi(t){return t[of]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function $a(t){return t.ngOriginalError}function wD(t,...e){t.error(...e)}class mi{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=function CD(t){return t&&t.ngErrorLogger||wD}(e);r(this._console,"ERROR",e),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&$a(e);for(;n&&$a(n);)n=$a(n);return n||null}}const FD=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Y))();function Bt(t){return t instanceof Function?t():t}var Je=(()=>((Je=Je||{})[Je.Important=1]="Important",Je[Je.DashCase=2]="DashCase",Je))();function Va(t,e){return undefined(t,e)}function yi(t){const e=t[3];return vt(e)?e[3]:e}function Ua(t){return gf(t[13])}function ja(t){return gf(t[4])}function gf(t){for(;null!==t&&!vt(t);)t=t[4];return t}function cr(t,e,n,r,i){if(null!=r){let s,o=!1;vt(r)?s=r:kt(r)&&(o=!0,r=r[0]);const a=pe(r);0===t&&null!==n?null==i?Df(e,n,a):On(e,n,a,i||null,!0):1===t&&null!==n?On(e,n,a,i||null,!0):2===t?function Af(t,e,n){const r=Fs(t,e);r&&function qD(t,e,n,r){le(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function KD(t,e,n,r,i){const s=n[7];s!==pe(n)&&cr(e,t,r,s,i);for(let a=10;a<n.length;a++){const l=n[a];_i(l[1],l,t,e,r,s)}}(e,t,s,n,i)}}function za(t,e,n){if(le(t))return t.createElement(e,n);{const r=null!==n?function Rv(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function yf(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,oa(i,-1)),n.splice(r,1)}function Ga(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&yf(i,r),e>0&&(t[n-1][4]=r[4]);const s=ws(t,10+e);!function BD(t,e){_i(t,e,e[P],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function _f(t,e){if(!(256&e[2])){const n=e[P];le(n)&&n.destroyNode&&_i(t,e,n,3,null,null),function jD(t){let e=t[13];if(!e)return Wa(t[1],t);for(;e;){let n=null;if(kt(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)kt(e)&&Wa(e[1],e),e=e[3];null===e&&(e=t),kt(e)&&Wa(e[1],e),n=e&&e[4]}e=n}}(e)}}function Wa(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function WD(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof ti)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function GD(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):pe(e[o]),l=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?a.removeEventListener(n[s],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&le(e[P])&&e[P].destroy();const n=e[17];if(null!==n&&vt(e[3])){n!==e[3]&&yf(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function vf(t,e,n){return function bf(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===Pt.None||i===Pt.Emulated)return null}return ut(r,n)}(t,e.parent,n)}function On(t,e,n,r,i){le(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Df(t,e,n){le(t)?t.appendChild(e,n):e.appendChild(n)}function Cf(t,e,n,r,i){null!==r?On(t,e,n,r,i):Df(t,e,n)}function Fs(t,e){return le(t)?t.parentNode(e):e.parentNode}let Tf=function Ef(t,e,n){return 40&t.type?ut(t,n):null};function Ps(t,e,n,r){const i=vf(t,r,e),s=e[P],a=function wf(t,e,n){return Tf(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Cf(s,i,n[l],a,!1);else Cf(s,i,n,a,!1)}function ks(t,e){if(null!==e){const n=e.type;if(3&n)return ut(e,t);if(4&n)return Ya(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return ks(t,r);{const i=t[e.index];return vt(i)?Ya(-1,i):pe(i)}}if(32&n)return Va(e,t)()||pe(t[e.index]);{const r=Sf(t,e);return null!==r?Array.isArray(r)?r[0]:ks(yi(t[16]),r):ks(t,e.next)}}return null}function Sf(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ya(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return ks(r,i)}return e[7]}function Qa(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&xe(pe(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Qa(t,e,n.child,r,i,s,!1),cr(e,t,i,a,s);else if(32&l){const u=Va(n,r);let c;for(;c=u();)cr(e,t,i,c,s);cr(e,t,i,a,s)}else 16&l?Mf(t,e,r,n,i,s):cr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function _i(t,e,n,r,i,s){Qa(n,r,t.firstChild,e,i,s,!1)}function Mf(t,e,n,r,i,s){const o=n[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)cr(e,t,i,l[u],s);else Qa(t,e,l,o[3],i,s,!0)}function xf(t,e,n){le(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ka(t,e,n){le(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Nf(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const Rf="ng-template";function ZD(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Nf(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Ff(t){return 4===t.type&&t.value!==Rf}function JD(t,e,n){return e===(4!==t.type||n?t.value:Rf)}function eC(t,e,n){let r=4;const i=t.attrs||[],s=function rC(t){for(let e=0;e<t.length;e++)if(Cd(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!JD(t,l,n)||""===l&&1===e.length){if(Dt(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!ZD(t.attrs,u,n)){if(Dt(r))return!1;o=!0}continue}const d=tC(8&r?"class":l,i,Ff(t),n);if(-1===d){if(Dt(r))return!1;o=!0;continue}if(""!==u){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Nf(h,u,0)||2&r&&u!==f){if(Dt(r))return!1;o=!0}}}}else{if(!o&&!Dt(r)&&!Dt(l))return!1;if(o&&Dt(l))continue;o=!1,r=l|1&r}}return Dt(r)||o}function Dt(t){return 0==(1&t)}function tC(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function iC(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Pf(t,e,n=!1){for(let r=0;r<e.length;r++)if(eC(t,e[r],n))return!0;return!1}function kf(t,e){return t?":not("+e.trim()+")":e}function oC(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Dt(o)&&(e+=kf(s,i),i=""),r=o,s=s||!Dt(r);n++}return""!==i&&(e+=kf(s,i)),e}const x={};function Lf(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&gs(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ms(e,s,0,n)}mn(n)}function Yf(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];da(i),o.contentQueries(2,e[s],s)}}}function vi(t,e,n,r,i,s,o,a,l,u){const c=e.blueprint.slice();return c[0]=i,c[2]=140|r,ud(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[P]=a||t&&t[P],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function dr(t,e,n,r,i){let s=t.data[e];if(null===s)s=function ll(t,e,n,r,i){const s=fd(),o=aa(),l=t.data[e]=function EC(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(t,e,n,r,i),function Gv(){return M.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ei(){const t=M.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ot(s,!0),s}function fr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bi(t,e,n){fs(e);try{const r=t.viewQuery;null!==r&&yl(1,r,n);const i=t.template;null!==i&&Qf(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Yf(t,e),t.staticViewQueries&&yl(2,t.viewQuery,n);const s=t.components;null!==s&&function DC(t,e){for(let n=0;n<e.length;n++)jC(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,hs()}}function hr(t,e,n,r){const i=e[2];if(256!=(256&i)){fs(e);try{ud(e),function hd(t){return M.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Qf(t,e,n,2,r);const o=3==(3&i);if(o){const u=t.preOrderCheckHooks;null!==u&&gs(e,u,null)}else{const u=t.preOrderHooks;null!==u&&ms(e,u,0,null),fa(e,0)}if(function VC(t){for(let e=Ua(t);null!==e;e=ja(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(1024&i[2])&&oa(s,1),i[2]|=1024}}}(e),function BC(t){for(let e=Ua(t);null!==e;e=ja(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];sa(r)&&hr(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&Yf(t,e),o){const u=t.contentCheckHooks;null!==u&&gs(e,u)}else{const u=t.contentHooks;null!==u&&ms(e,u,1),fa(e,1)}!function vC(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)mn(~i);else{const s=i,o=n[++r],a=n[++r];Wv(o,s),a(2,e[s])}}}finally{mn(-1)}}(t,e);const a=t.components;null!==a&&function bC(t,e){for(let n=0;n<e.length;n++)UC(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&yl(2,l,r),o){const u=t.viewCheckHooks;null!==u&&gs(e,u)}else{const u=t.viewHooks;null!==u&&ms(e,u,2),fa(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-73,1024&e[2]&&(e[2]&=-1025,oa(e[3],-1))}finally{hs()}}}function CC(t,e,n,r){const i=e[10],o=function ld(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&bi(t,e,r),hr(t,e,n,r)}finally{!o&&i.end&&i.end()}}function Qf(t,e,n,r,i){const s=Pe(),o=2&r;try{mn(-1),o&&e.length>J&&Lf(t,e,J,!1),n(r,i)}finally{mn(s)}}function ul(t,e,n){!dd()||(function NC(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||ri(n,e),xe(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],u=bt(l);u&&OC(e,n,l);const c=ii(e,t,a,n);xe(c,e),null!==o&&LC(0,a-i,c,l,0,o),u&&(Xe(n.index,e)[8]=c)}}(t,e,n,ut(n,e)),128==(128&n.flags)&&function RC(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,a=function qv(){return M.lFrame.currentDirectiveIndex}();try{mn(o);for(let l=r;l<i;l++){const u=t.data[l],c=e[l];ua(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&ih(u,c)}}finally{mn(-1),ua(a)}}(t,e,n))}function cl(t,e,n=ut){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Xf(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Bs(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Bs(t,e,n,r,i,s,o,a,l,u){const c=J+r,d=c+i,f=function wC(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:x);return n}(c,d),h="function"==typeof u?u():u;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function th(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function et(t,e,n,r,i,s,o,a){const l=ut(e,n);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(ph(t,n,c,r,i),as(e)&&function SC(t,e){const n=Xe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function IC(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,le(s)?s.setProperty(l,r,i):pa(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function dl(t,e,n,r){let i=!1;if(dd()){const s=function FC(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Pf(n,o.selectors,!1)&&(i||(i=[]),Ds(ri(n,e),t,o.type),bt(o)?(sh(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,oh(n,t.data.length,s.length);for(let c=0;c<s.length;c++){const d=s[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=fr(t,e,s.length,null);for(let c=0;c<s.length;c++){const d=s[c];n.mergedAttrs=_s(n.mergedAttrs,d.hostAttrs),ah(t,n,e,u,d),kC(u,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const f=d.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!l&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),u++}!function TC(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],d=c.inputs,f=null===s||Ff(e)?null:$C(d,s);o.push(f),a=th(d,u,a),l=th(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(t,n)}o&&function PC(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new z(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=_s(n.mergedAttrs,n.attrs),i}function rh(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const l=~e.index;(function xC(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function ih(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function sh(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function kC(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;bt(e)&&(n[""]=t)}}function oh(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ah(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=kn(i.type)),o=new ti(s,bt(i),null);t.blueprint[r]=o,n[r]=o,rh(t,e,0,r,fr(t,n,i.hostVars,x),i)}function OC(t,e,n){const r=ut(e,t),i=Xf(n),s=t[10],o=Vs(t,vi(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function LC(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],d=o[l++];null!==a?r.setInput(n,d,u,c):n[c]=d}}}function $C(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function lh(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function UC(t,e){const n=Xe(e,t);if(sa(n)){const r=n[1];80&n[2]?hr(r,n,r.template,n[8]):n[5]>0&&hl(n)}}function hl(t){for(let r=Ua(t);null!==r;r=ja(r))for(let i=10;i<r.length;i++){const s=r[i];if(1024&s[2]){const o=s[1];hr(o,s,o.template,s[8])}else s[5]>0&&hl(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Xe(n[r],t);sa(i)&&i[5]>0&&hl(i)}}function jC(t,e){const n=Xe(e,t),r=n[1];(function HC(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),bi(r,n,n[8])}function Vs(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function pl(t){for(;t;){t[2]|=64;const e=yi(t);if(Cv(t)&&!e)return t;t=e}return null}function uh(t){!function gl(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Oa(n),i=r[1];CC(i,r,i.template,n)}}(t[8])}function yl(t,e,n){da(0),e(t,n)}const GC=(()=>Promise.resolve(null))();function ch(t){return t[7]||(t[7]=[])}function dh(t){return t.cleanup||(t.cleanup=[])}function hh(t,e){const n=t[9],r=n?n.get(mi,null):null;r&&r.handleError(e)}function ph(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Us(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Vo(i,a):2==s&&(r=Vo(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const _l=new q("INJECTOR",-1);class gh{get(e,n=li){if(n===li){const r=new Error(`NullInjectorError: No provider for ${W(e)}!`);throw r.name="NullInjectorError",r}return n}}const vl=new q("Set Injector scope."),Di={},YC={};let bl;function mh(){return void 0===bl&&(bl=new gh),bl}function yh(t,e=null,n=null,r){const i=_h(t,e,n,r);return i._resolveInjectorDefTypes(),i}function _h(t,e=null,n=null,r){return new QC(t,n,e||mh(),r)}class QC{constructor(e,n,r,i=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const s=[];n&&Lt(n,a=>this.processProvider(a,e,n)),Lt([e],a=>this.processInjectorType(a,[],s)),this.records.set(_l,pr(void 0,this));const o=this.records.get(vl);this.scope=null!=o?o.value:null,this.source=i||("object"==typeof e?null:W(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=li,r=N.Default){this.assertNotDestroyed();const i=Vd(this),s=fn(void 0);try{if(!(r&N.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function rw(t){return"function"==typeof t||"object"==typeof t&&t instanceof q}(e)&&Ho(e);a=l&&this.injectableDefInScope(l)?pr(Dl(e),Di):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&N.Self?mh():this.parent).get(e,n=r&N.Optional&&n===li?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Ts]=o[Ts]||[]).unshift(W(e)),i)throw o;return function Rb(t,e,n,r){const i=t[Ts];throw e[Bd]&&i.unshift(e[Bd]),t.message=function Fb(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=W(e);if(Array.isArray(e))i=e.map(W).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):W(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ib,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Ts]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{fn(s),Vd(i)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,i)=>e.push(W(i))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new z(205,!1)}processInjectorType(e,n,r){if(!(e=F(e)))return!1;let i=Qc(e);const s=null==i&&e.ngModule||void 0,o=void 0===s?e:s,a=-1!==r.indexOf(o);if(void 0!==s&&(i=Qc(s)),null==i)return!1;if(null!=i.imports&&!a){let c;r.push(o);try{Lt(i.imports,d=>{this.processInjectorType(d,n,r)&&(void 0===c&&(c=[]),c.push(d))})}finally{}if(void 0!==c)for(let d=0;d<c.length;d++){const{ngModule:f,providers:h}=c[d];Lt(h,p=>this.processProvider(p,f,h||X))}}this.injectorDefTypes.add(o);const l=kn(o)||(()=>new o);this.records.set(o,pr(l,Di));const u=i.providers;if(null!=u&&!a){const c=e;Lt(u,d=>this.processProvider(d,c,u))}return void 0!==s&&void 0!==e.providers}processProvider(e,n,r){let i=gr(e=F(e))?e:F(e&&e.provide);const s=function XC(t,e,n){return bh(t)?pr(void 0,t.useValue):pr(function vh(t,e,n){let r;if(gr(t)){const i=F(t);return kn(i)||Dl(i)}if(bh(t))r=()=>F(t.useValue);else if(function JC(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Ta(t.deps||[]));else if(function ZC(t){return!(!t||!t.useExisting)}(t))r=()=>Z(F(t.useExisting));else{const i=F(t&&(t.useClass||t.provide));if(!function tw(t){return!!t.deps}(t))return kn(i)||Dl(i);r=()=>new i(...Ta(t.deps))}return r}(t),Di)}(e);if(gr(e)||!0!==e.multi)this.records.get(i);else{let o=this.records.get(i);o||(o=pr(void 0,Di,!0),o.factory=()=>Ta(o.multi),this.records.set(i,o)),i=e,o.multi.push(e)}this.records.set(i,s)}hydrate(e,n){return n.value===Di&&(n.value=YC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function nw(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=F(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Dl(t){const e=Ho(t),n=null!==e?e.factory:kn(t);if(null!==n)return n;if(t instanceof q)throw new z(204,!1);if(t instanceof Function)return function KC(t){const e=t.length;if(e>0)throw function ai(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new z(204,!1);const n=function uv(t){const e=t&&(t[ns]||t[Kc]);if(e){const n=function cv(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new z(204,!1)}function pr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bh(t){return null!==t&&"object"==typeof t&&Ab in t}function gr(t){return"function"==typeof t}let Ut=(()=>{class t{static create(n,r){var i;if(Array.isArray(n))return yh({name:""},r,n,"");{const s=null!==(i=n.name)&&void 0!==i?i:"";return yh({name:s},n.parent,n.providers,s)}}}return t.THROW_IF_NOT_FOUND=li,t.NULL=new gh,t.\u0275prov=oe({token:t,providedIn:"any",factory:()=>Z(_l)}),t.__NG_ELEMENT_ID__=-1,t})();function dw(t,e){ps(Oa(t)[1],be())}let js=null;function mr(){if(!js){const t=Y.Symbol;if(t&&t.iterator)js=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(js=r)}}}return js}function Ci(t){return!!function Tl(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&mr()in t)}function Ne(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vr(t,e,n,r,i,s){const a=function Ln(t,e,n,r){const i=Ne(t,e,n);return Ne(t,e+1,r)||i}(t,function Jt(){return M.lFrame.bindingIndex}(),n,i);return function en(t){const e=M.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2),a?e+A(n)+r+A(i)+s:x}function B(t,e=N.Default){const n=_();return null===n?Z(t,e):Md(be(),n,F(t),e)}function xl(t,e,n){const r=_();return Ne(r,function Zn(){return M.lFrame.bindingIndex++}(),e)&&et(H(),ue(),r,t,e,r[P],n,!1),xl}function Nl(t,e,n,r,i){const o=i?"class":"style";ph(t,n,e.inputs[o],o,r)}function Ei(t,e,n,r){const i=_(),s=H(),o=J+t,a=i[P],l=i[o]=za(a,e,function tb(){return M.lFrame.currentNamespace}()),u=s.firstCreatePass?function Gw(t,e,n,r,i,s,o){const a=e.consts,u=dr(e,t,2,i,gn(a,s));return dl(e,n,u,gn(a,o)),null!==u.attrs&&Us(u,u.attrs,!1),null!==u.mergedAttrs&&Us(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Ot(u,!0);const c=u.mergedAttrs;null!==c&&ys(a,l,c);const d=u.classes;null!==d&&Ka(a,l,d);const f=u.styles;return null!==f&&xf(a,l,f),64!=(64&u.flags)&&Ps(s,i,l,u),0===function $v(){return M.lFrame.elementDepthCount}()&&xe(l,i),function Bv(){M.lFrame.elementDepthCount++}(),ls(u)&&(ul(s,i,u),function Kf(t,e,n){if(Xo(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,u,i)),null!==r&&cl(i,u),Ei}function Ti(){let t=be();aa()?function la(){M.lFrame.isParent=!1}():(t=t.parent,Ot(t,!1));const e=t;!function Vv(){M.lFrame.elementDepthCount--}();const n=H();return n.firstCreatePass&&(ps(n,t),Xo(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function ob(t){return 0!=(16&t.flags)}(e)&&Nl(n,e,_(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ab(t){return 0!=(32&t.flags)}(e)&&Nl(n,e,_(),e.stylesWithoutHost,!1),Ti}function Rl(t,e,n,r){return Ei(t,e,n,r),Ti(),Rl}function kl(t){return!!t&&"function"==typeof t.then}const Yw=function np(t){return!!t&&"function"==typeof t.subscribe};function Ol(t,e,n,r){const i=_(),s=H(),o=be();return function ip(t,e,n,r,i,s,o,a){const l=ls(r),c=t.firstCreatePass&&dh(t),d=e[8],f=ch(e);let h=!0;if(3&r.type||a){const y=ut(r,e),D=a?a(y):y,g=f.length,b=a?S=>a(pe(S[r.index])):r.index;if(le(n)){let S=null;if(!a&&l&&(S=function Qw(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=s,S.__ngLastListenerFn__=s,h=!1;else{s=Ll(r,e,d,s,!1);const O=n.listen(D,i,s);f.push(s,O),c&&c.push(i,b,g,g+1)}}else s=Ll(r,e,d,s,!0),D.addEventListener(i,s,o),f.push(s),c&&c.push(i,b,g,o)}else s=Ll(r,e,d,s,!1);const p=r.outputs;let m;if(h&&null!==p&&(m=p[i])){const y=m.length;if(y)for(let D=0;D<y;D+=2){const G=e[m[D]][m[D+1]].subscribe(s),Te=f.length;f.push(s,G),c&&c.push(i,r.index,Te,-(Te+1))}}}(s,i,i[P],o,t,e,!!n,r),Ol}function sp(t,e,n,r){try{return!1!==n(r)}catch(i){return hh(t,i),!1}}function Ll(t,e,n,r,i){return function s(o){if(o===Function)return r;const a=2&t.flags?Xe(t.index,e):e;0==(32&e[2])&&pl(a);let l=sp(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)l=sp(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Bl(t,e,n,r,i,s,o){const a=_(),l=vr(a,e,n,r,i,s);return l!==x&&et(H(),ue(),a,t,l,a[P],o,!1),Bl}const Ws="en-US";let Xp=Ws;class Cg{}class j0{resolveComponentFactory(e){throw function U0(t){const e=Error(`No component factory found for ${W(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let Xs=(()=>{class t{}return t.NULL=new j0,t})();function H0(){return xr(be(),_())}function xr(t,e){return new Nr(ut(t,e))}let Nr=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=H0,t})();class Eg{}let q0=(()=>{class t{}return t.\u0275prov=oe({token:t,providedIn:"root",factory:()=>null}),t})();class Yl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Y0=new Yl("13.3.11"),Ql={};function Zs(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(pe(s)),vt(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&Zs(l[1],l,u,r)}const o=n.type;if(8&o)Zs(t,e,n.child,r);else if(32&o){const a=Va(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Sf(e,n);if(Array.isArray(a))r.push(...a);else{const l=yi(e[16]);Zs(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ni{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Zs(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(vt(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ga(e,r),ws(n,r))}this._attachedToViewContainer=!1}_f(this._lView[1],this._lView)}onDestroy(e){!function eh(t,e,n,r){const i=ch(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&dh(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){pl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function ml(t,e,n){const r=e[10];r.begin&&r.begin();try{hr(t,e,t.template,n)}catch(i){throw hh(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new z(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function UD(t,e){_i(t,e,e[P],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new z(902,"");this._appRef=e}}class Q0 extends Ni{constructor(e){super(e),this._view=e}detectChanges(){uh(this._view)}checkNoChanges(){}get context(){return null}}class Ig extends Xs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ae(e);return new Kl(n,this.ngModule)}}function Sg(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class Kl extends Cg{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function aC(t){return t.map(oC).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Sg(this.componentDef.inputs)}get outputs(){return Sg(this.componentDef.outputs)}create(e,n,r,i){const s=(i=i||this.ngModule)?function X0(t,e){return{get:(n,r,i)=>{const s=t.get(n,Ql,i);return s!==Ql||r===Ql?s:e.get(n,r,i)}}}(e,i.injector):e,o=s.get(Eg,ad),a=s.get(q0,null),l=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=r?function Jf(t,e,n){if(le(t))return t.selectRootElement(e,n===Pt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(l,r,this.componentDef.encapsulation):za(o.createRenderer(null,this.componentDef),u,function K0(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),d=this.componentDef.onPush?576:528,f=function Nh(t,e){return{components:[],scheduler:t||FD,clean:GC,playerHandler:e||null,flags:0}}(),h=Bs(0,null,null,1,0,null,null,null,null,null),p=vi(null,h,f,d,null,null,o,l,a,s);let m,y;fs(p);try{const D=function Mh(t,e,n,r,i,s){const o=n[1];n[20]=t;const l=dr(o,20,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&(Us(l,u,!0),null!==t&&(ys(i,t,u),null!==l.classes&&Ka(i,t,l.classes),null!==l.styles&&xf(i,t,l.styles)));const c=r.createRenderer(t,e),d=vi(n,Xf(e),null,e.onPush?64:16,n[20],l,r,c,s||null,null);return o.firstCreatePass&&(Ds(ri(l,n),o,e.type),sh(o,l),oh(l,n.length,1)),Vs(n,d),n[20]=d}(c,this.componentDef,p,o,l);if(c)if(r)ys(l,c,["ng-version",Y0.full]);else{const{attrs:g,classes:b}=function lC(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Dt(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);g&&ys(l,c,g),b&&b.length>0&&Ka(l,c,b.join(" "))}if(y=ia(h,J),void 0!==n){const g=y.projection=[];for(let b=0;b<this.ngContentSelectors.length;b++){const S=n[b];g.push(null!=S?Array.from(S):null)}}m=function xh(t,e,n,r,i){const s=n[1],o=function MC(t,e,n){const r=be();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ah(t,r,e,fr(t,e,1,null),n));const i=ii(e,t,r.directiveStart,r);xe(i,e);const s=ut(r,e);return s&&xe(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(l=>l(o,e)),e.contentQueries){const l=be();e.contentQueries(1,o,l.directiveStart)}const a=be();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(mn(a.index),rh(n[1],a,0,a.directiveStart,a.directiveEnd,e),ih(e,o)),o}(D,this.componentDef,p,f,[dw]),bi(h,p,null)}finally{hs()}return new J0(this.componentType,m,xr(y,p),p,y)}}class J0 extends class V0{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new Q0(i),this.componentType=e}get injector(){return new tr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Rr{}const Fr=new Map;class xg extends Rr{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ig(this);const r=ot(e);this._bootstrapComponents=Bt(r.bootstrap),this._r3Injector=_h(e,n,[{provide:Rr,useValue:this},{provide:Xs,useValue:this.componentFactoryResolver}],W(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=Ut.THROW_IF_NOT_FOUND,r=N.Default){return e===Ut||e===Rr||e===_l?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xl extends class tT{}{constructor(e){super(),this.moduleType=e,null!==ot(e)&&function nT(t){const e=new Set;!function n(r){const i=ot(r,!0),s=i.id;null!==s&&(function Ag(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${W(e)} vs ${W(e.name)}`)}(s,Fr.get(s),r),Fr.set(s,r));const o=Bt(i.imports);for(const a of o)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new xg(this.moduleType,e)}}function Zl(t){return e=>{setTimeout(t,void 0,e)}}const rn=class bT extends $o{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var i,s,o;let a=e,l=n||(()=>null),u=r;if(e&&"object"==typeof e){const d=e;a=null===(i=d.next)||void 0===i?void 0:i.bind(d),l=null===(s=d.error)||void 0===s?void 0:s.bind(d),u=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}this.__isAsync&&(l=Zl(l),a&&(a=Zl(a)),u&&(u=Zl(u)));const c=super.subscribe({next:a,error:l,complete:u});return e instanceof de&&e.add(c),c}};Symbol;let sn=(()=>{class t{}return t.__NG_ELEMENT_ID__=ET,t})();const CT=sn,wT=class extends CT{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=vi(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(n)),bi(n,r,e),new Ni(r)}};function ET(){return function Js(t,e){return 4&t.type?new wT(e,t,xr(t,e)):null}(be(),_())}let Gt=(()=>{class t{}return t.__NG_ELEMENT_ID__=TT,t})();function TT(){return function $g(t,e){let n;const r=e[t.index];if(vt(r))n=r;else{let i;if(8&t.type)i=pe(r);else{const s=e[P];i=s.createComment("");const o=ut(t,e);On(s,Fs(s,o),i,function YD(t,e){return le(t)?t.nextSibling(e):e.nextSibling}(s,o),!1)}e[t.index]=n=lh(r,e,i,t),Vs(e,n)}return new Og(n,t,e)}(be(),_())}const IT=Gt,Og=class extends IT{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return xr(this._hostTNode,this._hostLView)}get injector(){return new tr(this._hostTNode,this._hostLView)}get parentInjector(){const e=bs(this._hostTNode,this._hostLView);if(Ed(e)){const n=er(e,this._hostLView),r=Jn(e);return new tr(n[1].data[r+8],n)}return new tr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=Lg(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const i=e.createEmbeddedView(n||{});return this.insert(i,r),i}createComponent(e,n,r,i,s){const o=e&&!function oi(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.ngModuleRef}const l=o?e:new Kl(Ae(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const f=(o?u:this.parentInjector).get(Rr,null);f&&(s=f)}const c=l.create(u,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,n){const r=e._lView,i=r[1];if(function Lv(t){return vt(t[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],f=new Og(d,d[6],d[3]);f.detach(f.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function HD(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],Pd(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function zD(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,r,o,s);const a=Ya(s,o),l=r[P],u=Fs(l,o[7]);return null!==u&&function VD(t,e,n,r,i,s){r[0]=i,r[6]=e,_i(t,r,n,1,i,s)}(i,o[6],l,r,u,a),e.attachToViewContainerRef(),Pd(eu(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=Lg(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);r&&(ws(eu(this._lContainer),n),_f(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ga(this._lContainer,n);return r&&null!=ws(eu(this._lContainer),n)?new Ni(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function Lg(t){return t[8]}function eu(t){return t[8]||(t[8]=[])}function no(...t){}const om=new q("Application Initializer");let du=(()=>{class t{constructor(n){this.appInits=n,this.resolve=no,this.reject=no,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(kl(s))n.push(s);else if(Yw(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Z(om,8))},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ki=new q("AppId",{providedIn:"root",factory:function am(){return`${fu()}${fu()}${fu()}`}});function fu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const lm=new q("Platform Initializer"),um=new q("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),nI=new q("appBootstrapListener"),Dn=new q("LocaleId",{providedIn:"root",factory:()=>xb(Dn,N.Optional|N.SkipSelf)||function rI(){return"undefined"!=typeof $localize&&$localize.locale||Ws}()}),aI=(()=>Promise.resolve(0))();function hu(t){"undefined"==typeof Zone?aI.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class je{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function lI(){let t=Y.requestAnimationFrame,e=Y.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function dI(t){const e=()=>{!function cI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Y,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,gu(t),t.isCheckStableRunning=!0,pu(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),gu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return cm(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),dm(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return cm(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),dm(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,gu(t),pu(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!je.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(je.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,uI,no,no);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const uI={};function pu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function gu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function cm(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function dm(t){t._nesting--,pu(t)}class fI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}let mu=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{je.assertNotInAngularZone(),hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Z(je))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})(),hI=(()=>{class t{constructor(){this._applications=new Map,yu.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return yu.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();class pI{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let yu=new pI,Bn=null;const fm=new q("AllowMultipleToken"),hm=new q("PlatformOnDestroy");function pm(t,e,n=[]){const r=`Platform: ${e}`,i=new q(r);return(s=[])=>{let o=_u();if(!o||o.injector.get(fm,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function _I(t){if(Bn&&!Bn.get(fm,!1))throw new z(400,"");Bn=t;const e=t.get(gm),n=t.get(lm,null);n&&n.forEach(r=>r())}(function bI(t=[],e){return Ut.create({name:e,providers:[{provide:vl,useValue:"platform"},{provide:hm,useValue:()=>Bn=null},...t]})}(a,r))}return function vI(t){const e=_u();if(!e)throw new z(401,"");return e}()}}function _u(){var t;return null!==(t=null==Bn?void 0:Bn.get(gm))&&void 0!==t?t:null}let gm=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function DI(t,e){let n;return n="noop"===t?new fI:("zone.js"===t?void 0:t)||new je({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),l=[{provide:je,useValue:a}];return a.run(()=>{const u=Ut.create({providers:l,parent:this.injector,name:n.moduleType.name}),c=n.create(u),d=c.injector.get(mi,null);if(!d)throw new z(402,"");return a.runOutsideAngular(()=>{const f=a.onError.subscribe({next:h=>{d.handleError(h)}});c.onDestroy(()=>{vu(this._modules,c),f.unsubscribe()})}),function CI(t,e,n){try{const r=n();return kl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(d,a,()=>{const f=c.injector.get(du);return f.runInitializers(),f.donePromise.then(()=>(function HE(t){Qe(t,"Expected localeId to be defined"),"string"==typeof t&&(Xp=t.toLowerCase().replace(/_/g,"-"))}(c.injector.get(Dn,Ws)||Ws),this._moduleDoBootstrap(c),c))})})}bootstrapModule(n,r=[]){const i=mm({},r);return function mI(t,e,n){const r=new Xl(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(ym);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new z(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new z(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(hm,null);null==n||n(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Z(Ut))},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function mm(t,e){return Array.isArray(e)?e.reduce(mm,t):Object.assign(Object.assign({},t),e)}let ym=(()=>{class t{constructor(n,r,i,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Be(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new Be(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{je.assertNotInAngularZone(),hu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{je.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function q_(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return function T_(t){return t&&"function"==typeof t.schedule}(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof Be?t[0]:function G_(t=Number.POSITIVE_INFINITY){return Gc(kc,t)}(e)(function W_(t,e){return e?zc(t,e):new Be(Vc(t))}(t,n))}(o,a.pipe(function rv(){return t=>Wc()(function ev(t,e){return function(r){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return r.lift(new tv(i,e));const s=Object.create(r,X_);return s.source=r,s.subjectFactory=i,s}}(nv)(t))}()))}bootstrap(n,r){if(!this._initStatus.done)throw new z(405,"");let i;i=n instanceof Cg?n:this._injector.get(Xs).resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function yI(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Rr),a=i.create(Ut.NULL,[],r||i.selector,s),l=a.location.nativeElement,u=a.injector.get(mu,null),c=u&&a.injector.get(hI);return u&&c&&c.registerApplication(l,u),a.onDestroy(()=>{this.detachView(a.hostView),vu(this.components,a),c&&c.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new z(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;vu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(nI,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Z(je),Z(Ut),Z(mi),Z(du))},t.\u0275prov=oe({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let vm=!0;class Em{constructor(){}supports(e){return Ci(e)}create(e){return new FI(e)}}const RI=(t,e)=>e;class FI{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||RI}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<Im(r,i,s)?n:r,a=Im(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;c<=p&&p<u&&(s[f]=h+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Ci(e))throw new z(900,"");return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function Dw(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[mr()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new PI(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new Tm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class PI{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kI{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Tm{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new kI,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Im(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Am(){return new so([new Em])}let so=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||Am()),deps:[[t,new Ss,new Is]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new z(901,"")}}return t.\u0275prov=oe({token:t,providedIn:"root",factory:Am}),t})();const VI=pm(null,"core",[]);let UI=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Z(ym))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Gn({}),t})(),oo=null;function Li(){return oo}const Wt=new q("DocumentToken");class FS{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vm=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new FS(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Um(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Um(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(B(Gt),B(sn),B(so))},t.\u0275dir=st({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function Um(t,e){t.context.$implicit=e.item}let lA=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t}),t.\u0275inj=Gn({}),t})();class Lu extends class pA extends class zI{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function HI(t){oo||(oo=t)}(new Lu)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function gA(){return Vi=Vi||document.querySelector("base"),Vi?Vi.getAttribute("href"):null}();return null==n?null:function mA(t){yo=yo||document.createElement("a"),yo.setAttribute("href",t);const e=yo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Vi=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xS(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let yo,Vi=null;const qm=new q("TRANSITION_ID"),_A=[{provide:om,useFactory:function yA(t,e,n){return()=>{n.get(du).donePromise.then(()=>{const r=Li(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[qm,Wt,Ut],multi:!0}];class $u{static init(){!function gI(t){yu=t}(new $u)}addToWindow(e){Y.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Y.getAllAngularTestabilities=()=>e.getAllTestabilities(),Y.getAllAngularRootElements=()=>e.getAllRootElements(),Y.frameworkStabilizers||(Y.frameworkStabilizers=[]),Y.frameworkStabilizers.push(r=>{const i=Y.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const i=e.getTestability(n);return null!=i?i:r?Li().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let vA=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();const _o=new q("EventManagerPlugins");let vo=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Z(_o),Z(je))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();class Ym{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Li().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let Qm=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})(),Ui=(()=>{class t extends Qm{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Km),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Km))}}return t.\u0275fac=function(n){return new(n||t)(Z(Wt))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();function Km(t){Li().remove(t)}const Bu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vu=/%COMP%/g;function bo(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?bo(t,i,n):(i=i.replace(Vu,t),n.push(i))}return n}function Jm(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Uu=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ju(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Pt.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new TA(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case Pt.ShadowDom:return new IA(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=bo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Z(vo),Z(Ui),Z(ki))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();class ju{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Bu[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Bu[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Bu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Je.DashCase|Je.Important)?e.style.setProperty(n,r,i&Je.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Je.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Jm(r)):this.eventManager.addEventListener(e,n,Jm(r))}}class TA extends ju{constructor(e,n,r,i){super(e),this.component=r;const s=bo(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function CA(t){return"_ngcontent-%COMP%".replace(Vu,t)}(i+"-"+r.id),this.hostAttr=function wA(t){return"_nghost-%COMP%".replace(Vu,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class IA extends ju{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=bo(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let SA=(()=>{class t extends Ym{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Z(Wt))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();const ty=["alt","control","meta","shift"],MA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ny={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let NA=(()=>{class t extends Ym{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Li().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if(ty.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function RA(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ny.hasOwnProperty(e)&&(e=ny[e]))}return MA[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ty.forEach(s=>{s!=i&&xA[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Z(Wt))},t.\u0275prov=oe({token:t,factory:t.\u0275fac}),t})();const OA=pm(VI,"browser",[{provide:um,useValue:"browser"},{provide:lm,useValue:function FA(){Lu.makeCurrent(),$u.init()},multi:!0},{provide:Wt,useFactory:function kA(){return function Fv(t){na=t}(document),document},deps:[]}]),LA=[{provide:vl,useValue:"root"},{provide:mi,useFactory:function PA(){return new mi},deps:[]},{provide:_o,useClass:SA,multi:!0,deps:[Wt,je,um]},{provide:_o,useClass:NA,multi:!0,deps:[Wt]},{provide:Uu,useClass:Uu,deps:[vo,Ui,ki]},{provide:Eg,useExisting:Uu},{provide:Qm,useExisting:Ui},{provide:Ui,useClass:Ui,deps:[Wt]},{provide:mu,useClass:mu,deps:[je]},{provide:vo,useClass:vo,deps:[_o,je]},{provide:class hA{},useClass:vA,deps:[]}];let $A=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:ki,useValue:n.appId},{provide:qm,useExisting:ki},_A]}}}return t.\u0275fac=function(n){return new(n||t)(Z(t,12))},t.\u0275mod=Kr({type:t}),t.\u0275inj=Gn({providers:LA,imports:[lA,UI]}),t})();function sy(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function _e(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){sy(s,r,i,o,a,"next",l)}function a(l){sy(s,r,i,o,a,"throw",l)}o(void 0)})}}"undefined"!=typeof window&&window;var QA=Object.defineProperty,zu=(t,e,n)=>(((t,e,n)=>{e in t?QA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n),te=class{constructor(t){t.constructor===Object?this.store=function XA(t){let e=n=>{var r;for(let i in n)(null==(r=n[i])?void 0:r.constructor)===Object&&(n[i]=e(n[i]));return E({},n)};return e(t)}(t):(this._storeIsProxy=!0,this.store=t),this.callbackMap=Object.create(null)}static warn(t,e){console.warn(`Symbiote Data: cannot ${t}. Prop name: `+e)}read(t){return this._storeIsProxy||this.store.hasOwnProperty(t)?this.store[t]:(te.warn("read",t),null)}has(t){return this._storeIsProxy?void 0!==this.store[t]:this.store.hasOwnProperty(t)}add(t,e,n=!1){!n&&Object.keys(this.store).includes(t)||(this.store[t]=e,this.notify(t))}pub(t,e){this._storeIsProxy||this.store.hasOwnProperty(t)?(this.store[t]=e,this.notify(t)):te.warn("publish",t)}multiPub(t){for(let e in t)this.pub(e,t[e])}notify(t){this.callbackMap[t]&&this.callbackMap[t].forEach(e=>{e(this.store[t])})}sub(t,e,n=!0){return this._storeIsProxy||this.store.hasOwnProperty(t)?(this.callbackMap[t]||(this.callbackMap[t]=new Set),this.callbackMap[t].add(e),n&&e(this.store[t]),{remove:()=>{this.callbackMap[t].delete(e),this.callbackMap[t].size||delete this.callbackMap[t]},callback:e}):(te.warn("subscribe",t),null)}static registerCtx(t,e=Symbol()){let n=te.globalStore.get(e);return n?console.warn('State: context UID "'+e+'" already in use'):(n=new te(t),te.globalStore.set(e,n)),n}static deleteCtx(t){te.globalStore.delete(t)}static getCtx(t,e=!0){return te.globalStore.get(t)||(e&&console.warn('State: wrong context UID - "'+t+'"'),null)}};te.globalStore=new Map;var L=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),oy="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",ZA=oy.length-1,Gu=class{static generate(t="XXXXXXXXX-XXX"){let e="";for(let n=0;n<t.length;n++)e+="-"===t[n]?t[n]:oy.charAt(Math.random()*ZA);return e}};function ay(t,e,n){let i,r=!0,s=e.split(".");return s.forEach((o,a)=>{a<s.length-1?t=t[o]:i=o}),t?t[i]=n:r=!1,r}var ly="__default__",ji="}}",aM=[function eM(t,e){[...t.querySelectorAll(`[${L.REPEAT_ATTR}]`)].forEach(n=>{let i,r=n.getAttribute(L.REPEAT_ITEM_TAG_ATTR);for(r&&(i=window.customElements.get(r)),i||(i=class extends e.BaseComponent{constructor(){super(),r||(this.style.display="contents")}},i.template=n.innerHTML,i.reg(r));n.firstChild;)n.firstChild.remove();let s=n.getAttribute(L.REPEAT_ATTR);e.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let l,a=[...n.children],u=c=>{c.forEach((f,h)=>{if(a[h])if(a[h].set$)setTimeout(()=>{a[h].set$(f)});else for(let p in f)a[h][p]=f[p];else{l||(l=new DocumentFragment);let p=new i;Object.assign(p.init$,f),l.appendChild(p)}}),l&&n.appendChild(l);let d=a.slice(c.length,a.length);for(let f of d)f.remove()};if(o.constructor===Array)u(o);else if(o.constructor===Object){let c=[];for(let d in o){let f=o[d];Object.defineProperty(f,"_KEY_",{value:d,enumerable:!0}),c.push(f)}u(c)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(L.REPEAT_ATTR),n.removeAttribute(L.REPEAT_ITEM_TAG_ATTR)})},function tM(t,e){if(e.shadowRoot)return;let n=[...t.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||ly;r[s]={slot:i,fr:document.createDocumentFragment()}}),e.initChildren.forEach(i=>{var s;let o=ly;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),null==(s=r[o])||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})},function nM(t,e){[...t.querySelectorAll(`[${L.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(L.EL_REF_ATTR);e.ref[r]=n,n.removeAttribute(L.EL_REF_ATTR)})},function rM(t,e){[...t.querySelectorAll(`[${L.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(L.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=function JA(t){return t.split("-").map((e,n)=>e&&n?e[0].toUpperCase()+e.slice(1):e).join("").split("_").map((e,n)=>e&&n?e.toUpperCase():e).join("")}(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let l,o=s.split(":").map(c=>c.trim()),a=o[0];0===a.indexOf(L.ATTR_BIND_PRFX)&&(l=!0,a=a.replace(L.ATTR_BIND_PRFX,""));let u=o[1].split(",").map(c=>c.trim());for(let c of u){let d;c.startsWith("!!")?(d="double",c=c.replace("!!","")):c.startsWith("!")&&(d="single",c=c.replace("!","")),e.sub(c,f=>{"double"===d?f=!!f:"single"===d&&(f=!f),l?(null==f?void 0:f.constructor)===Boolean?f?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,f):ay(n,a,f)||(n[L.SET_LATER_KEY]||(n[L.SET_LATER_KEY]=Object.create(null)),n[L.SET_LATER_KEY][a]=f)})}}),n.removeAttribute(L.BIND_ATTR)})},function(t,e){(function sM(t){let e,n=[],r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!(null==(s=i.parentElement)?void 0:s.hasAttribute("skip-text"))&&i.textContent.includes("{{")&&i.textContent.includes(ji)&&1}});for(;e=r.nextNode();)n.push(e);return n})(t).forEach(r=>{let s,i=[];for(;r.textContent.includes(ji);)r.textContent.startsWith("{{")?(s=r.textContent.indexOf(ji)+ji.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf("{{"),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace("{{","").replace(ji,"");o.textContent="",e.sub(a,l=>{o.textContent=l})})})}],lM=/\\([0-9a-fA-F]{1,6} ?)/g,uy=0,Or=null,an=null,wn=class extends HTMLElement{constructor(){super(),zu(this,"updateCssData",()=>{var t;this.dropCssDataCache(),null==(t=this.__boundCssProps)||t.forEach(e=>{let n=this.getCssData(this.__extractCssName(e),!0);null!==n&&this.$[e]!==n&&(this.$[e]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return wn}initCallback(){}__initCallback(){var t;this.__initialized||(this.__initialized=!0,null==(t=this.initCallback)||t.call(this))}render(t,e=this.renderShadow){let n;if((e||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(L.USE_TPL);if(i){let s=this.getRootNode(),o=(null==s?void 0:s.querySelector(i))||document.querySelector(i);o?t=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(t||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),(null==t?void 0:t.constructor)===DocumentFragment)n=t;else if((null==t?void 0:t.constructor)===String){let i=document.createElement("template");i.innerHTML=t,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(e&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){e=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(t){this.tplProcessors.add(t)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Gu.generate(),this.style.setProperty(L.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(L.CSS_CTX_PROP,!0)}get ctxName(){var t;let e=(null==(t=this.getAttribute(L.CTX_NAME_ATTR))?void 0:t.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=e,e}get localCtx(){return this.__localCtx||(this.__localCtx=te.registerCtx({},this)),this.__localCtx}get nodeCtx(){return te.getCtx(this.ctxName,!1)||te.registerCtx({},this.ctxName)}static __parseProp(t,e){let n,r;if(t.startsWith(L.EXT_DATA_CTX_PRFX))n=e.nodeCtx,r=t.replace(L.EXT_DATA_CTX_PRFX,"");else if(t.includes(L.NAMED_DATA_CTX_SPLTR)){let i=t.split(L.NAMED_DATA_CTX_SPLTR);n=te.getCtx(i[0]),r=i[1]}else n=e.localCtx,r=t;return{ctx:n,name:r}}sub(t,e,n=!0){let r=s=>{!this.isConnected||e(s)},i=wn.__parseProp(t,this);i.ctx.has(t)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(t){let e=wn.__parseProp(t,this);e.ctx.notify(e.name)}has(t){let e=wn.__parseProp(t,this);return e.ctx.has(e.name)}add(t,e,n=!1){let r=wn.__parseProp(t,this);r.ctx.add(r.name,e,n)}add$(t,e=!1){for(let n in t)this.add(n,t[n],e)}get $(){return this.__stateProxy||(this.__stateProxy=new Proxy(Object.create(null),{set:(e,n,r)=>{let i=wn.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(e,n)=>{let r=wn.__parseProp(n,this);return r.ctx.read(r.name)}})),this.__stateProxy}set$(t,e=!1){for(let n in t){let r=t[n];(e||![String,Number,Boolean].includes(null==r?void 0:r.constructor)||this.$[n]!==r)&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(L.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(L.CTX_OWNER_ATTR)}__initDataCtx(){let t=this.constructor.__attrDesc;if(t)for(let e of Object.values(t))Object.keys(this.init$).includes(e)||(this.init$[e]="");for(let e in this.init$)if(e.startsWith(L.EXT_DATA_CTX_PRFX))this.nodeCtx.add(e.replace(L.EXT_DATA_CTX_PRFX,""),this.init$[e],this.__ctxOwner);else if(e.includes(L.NAMED_DATA_CTX_SPLTR)){let n=e.split(L.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=te.getCtx(r,!1);s||(s=te.registerCtx({},r)),s.add(i,this.init$[e])}}else this.localCtx.add(e,this.init$[e]);for(let e in this.cssInit$)this.bindCssData(e,this.cssInit$[e]);this.__dataCtxInitialized=!0}connectedCallback(){var t;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let e=null==(t=this.getAttribute(L.CTX_NAME_ATTR))?void 0:t.trim();if(e&&this.style.setProperty(L.CSS_CTX_PROP,`'${e}'`),this.__initDataCtx(),this[L.SET_LATER_KEY]){for(let n in this[L.SET_LATER_KEY])ay(this,n,this[L.SET_LATER_KEY][n]);delete this[L.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of aM)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(null==n?void 0:n.querySelector(`link[${L.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`))return void this.render();let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(L.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){!this.connectedOnce||(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let t of this.allSubs)t.remove(),this.allSubs.delete(t);for(let t of this.tplProcessors)this.tplProcessors.delete(t);null==an||an.delete(this.updateCssData),(null==an?void 0:an.size)||(null==Or||Or.disconnect(),Or=null,an=null)},100)))}static reg(t,e=!1){t||(uy++,t=`${L.AUTO_TAG_PRFX}-${uy}`),this.__tag=t,window.customElements.get(t)?console.warn(`${t} - is already in "customElements" registry`):window.customElements.define(t,e?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(t){this.observedAttributes=Object.keys(t),this.__attrDesc=t}attributeChangedCallback(t,e,n){var r;if(e===n)return;let i=null==(r=this.constructor.__attrDesc)?void 0:r[t];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[t]=n}getCssData(t,e=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(t)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(t).trim();try{this.__cssDataCache[t]=function fM(t){let e=t;(function uM(t){return!('"'!==t[0]&&"'"!==t[0]||'"'!==t[t.length-1]&&"'"!==t[t.length-1])})(t)&&(e=function cM(t){return('"'===t[0]||"'"===t[0])&&(t=t.slice(1)),('"'===t[t.length-1]||"'"===t[t.length-1])&&(t=t.slice(0,-1)),t}(e),e=e.replace(lM,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),e=e.replaceAll("\\\n","\\n"),e=function dM(t){let e="",n="";for(var r=0;r<t.length;r++){const i=t[r+1];"\\"===t[r]&&'"'===i?(e+='\\"',r++):e+='"'===t[r]&&"\\"!==n?'\\"':t[r],n=t[r]}return e}(e),e='"'+e+'"');try{return JSON.parse(e)}catch(n){throw new Error(`Failed to parse CSS property value: ${e}. Original input: ${t}`)}}(n)}catch(r){!e&&console.warn(`CSS Data error: ${t}`),this.__cssDataCache[t]=null}}return this.__cssDataCache[t]}__extractCssName(t){return t.split("--").map((e,n)=>0===n?"":e).join("--")}__initStyleAttrObserver(){an||(an=new Set),an.add(this.updateCssData),Or||(Or=new MutationObserver(t=>{"attributes"===t[0].type&&an.forEach(e=>{e()})}),Or.observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}))}bindCssData(t,e=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(t);let n=this.getCssData(this.__extractCssName(t),!0);null===n&&(n=e),this.add(t,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(t,e,n){let r="__"+t;this[r]=this[t],Object.defineProperty(this,t,{set:i=>{this[r]=i,n?window.setTimeout(()=>{null==e||e(i)}):null==e||e(i)},get:()=>this[r]}),this[t]=this[r]}static set shadowStyles(t){let e=new Blob([t],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(e)}static set rootStyles(t){if(!this.__rootStylesLink){let e=new Blob([t],{type:"text/css"}),n=URL.createObjectURL(e),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},wo=wn;zu(wo,"template");var Wu=class{static _print(t){console.warn(t)}static setDefaultTitle(t){this.defaultTitle=t}static setRoutingMap(t){Object.assign(this.appMap,t);for(let e in this.appMap)this.defaultRoute||!0!==this.appMap[e].default?!this.errorRoute&&!0===this.appMap[e].error&&(this.errorRoute=e):this.defaultRoute=e}static set routingEventName(t){this.__routingEventName=t}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let t={route:null,options:{}};return window.location.search.split(this.separator).forEach(n=>{if(n.includes("?"))t.route=n.replace("?","");else if(n.includes("=")){let r=n.split("=");t.options[r[0]]=decodeURI(r[1])}else t.options[n]=!0}),t}static notify(){let t=this.readAddressBar(),e=this.appMap[t.route];if(e&&e.title&&(document.title=e.title),null===t.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!e&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!e&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!e)return void this._print(`Route "${t.route}" not found...`);let n=new CustomEvent(Wu.routingEventName,{detail:{route:t.route,options:Object.assign(e||{},t.options)}});window.dispatchEvent(n)}static reflect(t,e={}){let n=this.appMap[t];if(!n)return void this._print("Wrong route: "+t);let r="?"+t;for(let s in e)r+=!0===e[s]?this.separator+s:this.separator+s+`=${e[s]}`;let i=n.title||this.defaultTitle||"";window.history.pushState(null,i,r),document.title=i}static applyRoute(t,e={}){this.reflect(t,e),this.notify()}static setSeparator(t){this._separator=t}static get separator(){return this._separator||"&"}static createRouterData(t,e){this.setRoutingMap(e);let n=te.registerCtx({route:null,options:null,title:null},t);return window.addEventListener(this.routingEventName,r=>{var i;n.multiPub({route:r.detail.route,options:r.detail.options,title:(null==(i=r.detail.options)?void 0:i.title)||this.defaultTitle||""})}),Wu.notify(),this.initPopstateListener(),n}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function qu(t={tag:"div"}){let e=document.createElement(t.tag);if(t.attributes&&function pM(t,e){for(let n in e)e[n].constructor===Boolean?e[n]?t.setAttribute(n,""):t.removeAttribute(n):t.setAttribute(n,e[n])}(e,t.attributes),t.styles&&function hM(t,e){for(let n in e)n.includes("-")?t.style.setProperty(n,e[n]):t.style[n]=e[n]}(e,t.styles),t.properties)for(let n in t.properties)e[n]=t.properties[n];return t.processors&&t.processors.forEach(n=>{n(e)}),t.children&&t.children.forEach(n=>{let r=qu(n);e.appendChild(r)}),e}Wu.appMap=Object.create(null);var cy="idb-store-ready",dy=class{static get readyEventName(){return cy}static open(t="symbiote-db",e="store"){let n=t+"/"+e;return this._reg[n]||(this._reg[n]=new class{_notifyWhenReady(t=null){window.dispatchEvent(new CustomEvent(cy,{detail:{dbName:this.name,storeName:this.storeName,event:t}}))}get _updEventName(){return"symbiote-idb-update_"+this.name}_getUpdateEvent(t){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:t}})}_notifySubscribers(t){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,t),window.dispatchEvent(this._getUpdateEvent(t))}constructor(t,e){var n=this;this.name=t,this.storeName=e,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=r=>{this.db=r.target.result,this.objStore=this.db.createObjectStore(e,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=r=>{this.db=r.target.result,this._notifyWhenReady(r)},this.request.onerror=r=>{console.error(r)},this._subscriptionsMap={},this._updateHandler=r=>{r.key===this.name&&this._subscriptionsMap[r.newValue]&&this._subscriptionsMap[r.newValue].forEach(function(){var s=_e(function*(o){o(yield n.read(r.newValue))});return function(o){return s.apply(this,arguments)}}())},this._localUpdateHandler=r=>{this._updateHandler(r.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(t){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(t);return new Promise((r,i)=>{n.onsuccess=s=>{var o;(null==(o=s.target.result)?void 0:o._value)?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${t}"`))},n.onerror=s=>{i(s)}})}write(t,e,n=!1){let r={_key:t,_value:e},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(t),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(t,e=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(t);return new Promise((i,s)=>{r.onsuccess=o=>{e||this._notifySubscribers(t),i(o)},r.onerror=o=>{s(o)}})}getAll(){let e=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{e.onsuccess=i=>{n(i.target.result.map(o=>o._value))},e.onerror=i=>{r(i)}})}subscribe(t,e){this._subscriptionsMap[t]||(this._subscriptionsMap[t]=new Set);let n=this._subscriptionsMap[t];return n.add(e),{remove:()=>{n.delete(e),n.size||delete this._subscriptionsMap[t]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,dy.clear(this.name)}}(t,e)),this._reg[n]}static clear(t){window.indexedDB.deleteDatabase(t);for(let e in this._reg)e.split("/")[0]===t&&delete this._reg[e]}};zu(dy,"_reg",Object.create(null));const _M=t=>t,Yu="{{",fy="}}",hy="plural:";function Qu(t,e,n={}){var o;let{openToken:r=Yu,closeToken:i=fy,transform:s=_M}=n;for(let a in e){let l=null==(o=e[a])?void 0:o.toString();t=t.replaceAll(r+a+i,"string"==typeof l?s(l):l)}return t}function bM(t,e){[...t.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n"),i="textContent";if(r.includes(":")){let o=r.split(":");i=o[0],r=o[1]}let s="l10n:"+r;e.__l10nKeys.push(s),e.add(s,r),e.sub(s,o=>{n[i]=e.l10n(o)}),n.removeAttribute("l10n")})}const py=()=>({"*blocksRegistry":new Set}),gy=t=>R(E({},py()),{"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{t.set$({"*modalActive":!1,"*currentActivity":""})}}),my=t=>R(E({},gy(t)),{"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null});function Lr(t,e){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}const Eo="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function yy(){return void 0!==window[Eo]&&!!window[Eo]}class ne extends wo{constructor(){super(),v(this,"allowCustomTemplate",!0),v(this,"ctxInit",py()),v(this,"init$",this.ctxInit),this.activityType=null,this.addTemplateProcessor(bM),this.__l10nKeys=[]}l10n(e,n={}){if(!e)return"";let r=this.getCssData("--l10n-"+e,!0)||e,i=function vM(t){const e=[];let n=t.indexOf(Yu);for(;-1!==n;){const r=t.indexOf(fy,n),i=t.substring(n+2,r);if(i.startsWith(hy)){const s=t.substring(n+2,r).replace(hy,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));e.push({variable:i,pluralKey:o,countVariable:a})}n=t.indexOf(Yu,r)}return e}(r);for(let o of i)n[o.variable]=this.pluralize(o.pluralKey,Number(n[o.countVariable]));return Qu(r,n)}pluralize(e,n){const r=this.l10n("locale-name")||"en-US",i=new Intl.PluralRules(r).select(n);return this.l10n(`${e}__${i}`)}applyL10nKey(e,n){this.$["l10n:"+e]=n,this.__l10nKeys.push(e)}findBlockInCtx(e){let n=this.$["*blocksRegistry"];for(let r of n)if(e(r))return!0;return!1}setForCtxTarget(e,n,r){this.findBlockInCtx(i=>i.constructor.StateConsumerScope===e)&&(this.$[n]=r)}setActivity(e){this.findBlockInCtx(n=>n.activityType===e)?this.$["*currentActivity"]=e:console.warn(`Activity type "${e}" not found in the context`)}connectedCallback(){if(yy()||(this._destroyInnerHeightTracker=function CM(){if(yy())return;const t=()=>{document.documentElement.style.setProperty("--uploadcare-blocks-window-height",`${window.innerHeight}px`),window[Eo]=!0},e=Lr(t,100);return window.addEventListener("resize",e,{passive:!0}),t(),()=>{window[Eo]=!1,window.removeEventListener("resize",e)}}()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.isConnected&&this.__ctxOwner){let e=te.getCtx(this.ctxName,!1);e&&(e.store=E({},this.ctxInit))}super.connectedCallback()}disconnectedCallback(){var e;super.disconnectedCallback(),null==(e=this._destroyInnerHeightTracker)||e.call(this)}initCallback(){this.$["*blocksRegistry"].add(this)}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(e,n=2){let r=["B","KB","MB","GB","TB"],i=l=>this.getCssData("--l10n-unit-"+l.toLowerCase(),!0)||l;if(0===e)return`0 ${i(r[0])}`;let o=n<0?0:n,a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/1024**a).toFixed(o))+" "+i(r[a])}proxyUrl(e){let n=this.getCssData("--cfg-secure-delivery-proxy",!0);return n?Qu(n,{previewUrl:e},{transform:r=>window.encodeURIComponent(r)}):e}static reg(e){e?super.reg(e.startsWith("lr-")?e:"lr-"+e):super.reg()}}v(ne,"StateConsumerScope",null);let En=(()=>{const e=class extends ne{constructor(){super(...arguments),v(this,"_handleBackdropClick",()=>{this._closeDialog()}),v(this,"_closeDialog",()=>{this.setForCtxTarget(e.StateConsumerScope,"*modalActive",!1)}),v(this,"_handleDialogClose",()=>{this._closeDialog()}),v(this,"_handleDialogClick",r=>{r.target===this.ref.dialog&&this._closeDialog()}),v(this,"init$",R(E({},this.ctxInit),{"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose})),v(this,"cssInit$",{"--cfg-modal-backdrop-strokes":0})}show(){var r,i;null==(i=(r=this.ref.dialog).showModal)||i.call(r)}hide(){var r,i;null==(i=(r=this.ref.dialog).close)||i.call(r)}initCallback(){if(super.initCallback(),"function"==typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("click",this._handleDialogClick);else{this.setAttribute("dialog-fallback","");let r=document.createElement("div");r.className="backdrop",this.appendChild(r),r.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",r=>{this.$.isOpen!==r&&(this.$.isOpen=r),r&&this.getCssData("--cfg-modal-scroll-lock")?document.body.style.overflow="hidden":document.body.style.overflow=null}),this.sub("--cfg-modal-backdrop-strokes",r=>{r?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",r=>{r?(this.show(),this.ref.dialog.setAttribute("open","")):(this.hide(),this.ref.dialog.removeAttribute("open"))})}destroyCallback(){super.destroyCallback(),this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("click",this._handleDialogClick)}};let t=e;return v(t,"StateConsumerScope","modal"),t.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n',t})();const Hi="___ACTIVITY_IS_ACTIVE___",Gr=class extends ne{constructor(){super(...arguments),v(this,"historyTracked",!1),v(this,"ctxInit",gy(this)),v(this,"_debouncedHistoryFlush",Lr(this._historyFlush.bind(this),10))}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",e=>{this.setAttribute("current-activity",e)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",e=>{var i,s;let r=Gr._activityRegistry[this.ctxName+this.activityType];this.activityType!==e&&this[Hi]?(this[Hi]=!1,this.removeAttribute("active"),null==(i=null==r?void 0:r.deactivateCallback)||i.call(r)):this.activityType===e&&!this[Hi]&&(this.$["*historyBack"]=this.historyBack.bind(this),this[Hi]=!0,this.setAttribute("active",""),null==(s=null==r?void 0:r.activateCallback)||s.call(r),this._debouncedHistoryFlush()),e||(this.$["*history"]=[])}))}_historyFlush(){let e=this.$["*history"];e&&(e.length>10&&(e=e.slice(e.length-11,e.length-1)),this.historyTracked&&e.push(this.activityType),this.$["*history"]=e)}get isActivityActive(){return this[Hi]}registerActivity(e,n={}){const{onActivate:r,onDeactivate:i}=n;Gr._activityRegistry||(Gr._activityRegistry=Object.create(null)),Gr._activityRegistry[this.ctxName+e]={activateCallback:r,deactivateCallback:i}}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let e=this.$["*history"];if(e){let n=e.pop();for(;n===this.activityType;)n=e.pop();this.$["*currentActivity"]=n,this.$["*history"]=e,n||this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!1)}}};let j=Gr;v(j,"_activityRegistry",Object.create(null)),j.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const To=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],by=t=>t?t.map(e=>null==e?void 0:e.split(",")).flat().filter(e=>"string"==typeof e&&e).map(e=>e.trim()):[],Dy=(t,e)=>e.some(n=>n.endsWith("*")?(n=n.replace("*",""),t.startsWith(n)):t===n),Ku=t=>{let e=null==t?void 0:t.type;return!!e&&Dy(e,To)};function Cy(t){return"[object Object]"===Object.prototype.toString.call(t)}const wM=/\W|_/g;function EM(t){return t.split(wM).map((e,n)=>e.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+e.slice(1)).join("")}function wy(t,{ignoreKeys:e}={ignoreKeys:[]}){return Array.isArray(t)?t.map(n=>qt(n,{ignoreKeys:e})):t}function qt(t,{ignoreKeys:e}={ignoreKeys:[]}){if(Array.isArray(t))return wy(t,{ignoreKeys:e});if(!Cy(t))return t;const n={};for(const r of Object.keys(t)){let i=t[r];e.includes(r)?n[r]=i:(Cy(i)?i=qt(i,{ignoreKeys:e}):Array.isArray(i)&&(i=wy(i,{ignoreKeys:e})),n[EM(r)]=i)}return n}function Ey({libraryName:t,libraryVersion:e,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";return"string"==typeof n?n:"function"==typeof n?n({publicKey:r,libraryName:t,libraryVersion:e,languageName:s,integration:i}):`${[t,e,r].filter(Boolean).join("/")} (${[s,i].filter(Boolean).join("; ")})`}const IM={factor:2,time:100};class Io extends Error{constructor(e){super(),this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,Io.prototype),this.originalProgressEvent=e}}const So=(t,e)=>{t&&(t.aborted?Promise.resolve().then(e):t.addEventListener("abort",()=>e(),{once:!0}))};class $r extends Error{constructor(e="Request canceled"){super(e),this.isCancel=!0,Object.setPrototypeOf(this,$r.prototype)}}const Ty=({check:t,interval:e=500,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;So(r,()=>{o&&clearTimeout(o),s(new $r("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new $r("Timed out"))},n));const l=()=>{try{Promise.resolve(t(r)).then(u=>{u?(a&&clearTimeout(a),i(u)):o=setTimeout(l,e)}).catch(u=>{a&&clearTimeout(a),s(u)})}catch(u){a&&clearTimeout(a),s(u)}};o=setTimeout(l,0)}),U_baseCDN="https://ucarecdn.com",U_baseURL="https://upload.uploadcare.com",U_retryThrottledRequestMaxTimes=1,U_retryNetworkErrorMaxTimes=3,U_multipartMinFileSize=26214400,U_multipartChunkSize=5242880,U_maxConcurrentRequests=4,U_pusherKey="79ae88bd931ea68464d9",Xu="application/octet-stream",Iy="original",ln=({method:t,url:e,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,u=(null==t?void 0:t.toUpperCase())||"GET";let c=!1;l.open(u,e,!0),r&&Object.entries(r).forEach(d=>{const[f,h]=d;void 0!==h&&!Array.isArray(h)&&l.setRequestHeader(f,h)}),l.responseType="text",So(i,()=>{c=!0,l.abort(),a(new $r)}),l.onload=()=>{if(200!=l.status)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const d={method:u,url:e,data:n,headers:r||void 0,signal:i,onProgress:s},f=l.getAllResponseHeaders().trim().split(/[\r\n]+/),h={};f.forEach(function(y){const D=y.split(": "),g=D.shift(),b=D.join(": ");g&&void 0!==g&&(h[g]=b)}),o({request:d,data:l.response,headers:h,status:l.status})}},l.onerror=d=>{c||a(new Io(d))},s&&"function"==typeof s&&(l.upload.onprogress=d=>{s(d.lengthComputable?{isComputable:!0,value:d.loaded/d.total}:{isComputable:!1})}),n?l.send(n):l.send()}),Ao=t=>"undefined"!=typeof Blob&&t instanceof Blob,Mo=t=>"undefined"!=typeof File&&t instanceof File,Zu=t=>"undefined"!=typeof Buffer&&t instanceof Buffer,xo=t=>!!t&&"object"==typeof t&&!Array.isArray(t)&&"uri"in t&&"string"==typeof t.uri,zi=t=>Ao(t)||Mo(t)||Zu(t)||xo(t);function OM(t,e,n){if((t=>!!t&&"object"==typeof t&&"data"in t&&zi(t.data))(n)){const{name:r,contentType:i}=n,s=function MM(t,...e){return t}(n.data),o=(({name:t})=>t?[t]:[])({name:r,contentType:i});t.push([e,s,...o])}else if((t=>!!t&&"object"==typeof t&&!Array.isArray(t))(n))for(const[r,i]of Object.entries(n))void 0!==i&&t.push([`${e}[${r}]`,String(i)]);else(t=>"string"==typeof t||"number"==typeof t||void 0===t)(n)&&n&&t.push([e,n.toString()])}function Ju(t){const e=new FormData,n=function LM(t){const e=[];for(const[n,r]of Object.entries(t))OM(e,n,r);return e}(t);for(const r of n){const[i,s,...o]=r;e.append(i,s,...o)}return e}class ze extends Error{constructor(e,n,r,i,s){super(),this.name="UploadClientError",this.message=e,this.code=n,this.request=r,this.response=i,this.headers=s,Object.setPrototypeOf(this,ze.prototype)}}const Yt=(t,e,n)=>{const r=new URL(t);return r.pathname=(r.pathname+e).replace("//","/"),n&&(r.search=(t=>{const e=new URLSearchParams;for(const[n,r]of Object.entries(t))r&&"object"==typeof r&&!Array.isArray(r)?Object.entries(r).filter(i=>{var s;return null!=(s=i[1])&&s}).forEach(i=>e.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{e.append(`${n}[]`,i)}):"string"==typeof r&&r?e.set(n,r):"number"==typeof r&&e.set(n,r.toString());return e.toString()})(n)),r.toString()};function Tn(t){return Ey(E({libraryName:"UploadcareUploadClient",libraryVersion:"6.2.1"},t))}function un(t,e){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=e;return function SM(t,e=IM){let n=0;return function r(i){const s=Math.round(e.time*e.factor**n);return i({attempt:n,retry:a=>(t=>new Promise(e=>setTimeout(e,t)))(null!=a?a:s).then(()=>(n+=1,r(i)))})}(t)}(({attempt:i,retry:s})=>t().catch(o=>{if("response"in o&&"RequestThrottledError"===(null==o?void 0:o.code)&&i<n)return s(function zM(t){const{headers:e}=t||{};if(!e||"string"!=typeof e["retry-after"])return 15e3;const n=parseInt(e["retry-after"],10);return Number.isFinite(n)?1e3*n:15e3}(o));if(o instanceof Io&&i<r)return s(1e3*(i+1));throw o}))}const Ay=t=>{let e="";return(Ao(t)||Mo(t)||xo(t))&&(e=t.type),e||Xu},My=t=>{let e="";return Mo(t)&&t.name?e=t.name:Ao(t)||Zu(t)?e="":xo(t)&&t.name&&(e=t.name),e||Iy};function ec(t){return void 0===t||"auto"===t?"auto":t?"1":"0"}var No=(()=>(function(t){t.Token="token",t.FileInfo="file_info"}(No||(No={})),No))();var $e=(()=>(function(t){t.Unknown="unknown",t.Waiting="waiting",t.Progress="progress",t.Error="error",t.Success="success"}($e||($e={})),$e))();function tc(t,{publicKey:e,baseURL:n=U_baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=U_retryNetworkErrorMaxTimes}){return un(()=>ln({method:"GET",headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:s,userAgent:o})},url:Yt(n,"/info/",{jsonerrors:1,pub_key:e,file_id:t,source:i}),signal:r}).then(({data:u,headers:c,request:d})=>{const f=qt(JSON.parse(u));if("error"in f)throw new ze(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function nc({file:t,publicKey:e,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:u}){return Ty({check:c=>tc(t,{publicKey:e,baseURL:n,signal:c,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(d=>d.isReady?d:(u&&u({isComputable:!0,value:1}),!1)),signal:l})}class Gi{constructor(e,{baseCDN:n=U_baseCDN,fileName:r}={}){this.name=null,this.size=null,this.isStored=null,this.isImage=null,this.mimeType=null,this.cdnUrl=null,this.s3Url=null,this.originalFilename=null,this.imageInfo=null,this.videoInfo=null,this.contentInfo=null,this.metadata=null,this.s3Bucket=null;const{uuid:i,s3Bucket:s}=e,o=Yt(n,`${i}/`),a=s?Yt(`https://${s}.s3.amazonaws.com/`,`${i}/${e.filename}`):null;this.uuid=i,this.name=r||e.filename,this.size=e.size,this.isStored=e.isStored,this.isImage=e.isImage,this.mimeType=e.mimeType,this.cdnUrl=o,this.originalFilename=e.originalFilename,this.imageInfo=e.imageInfo,this.videoInfo=e.videoInfo,this.contentInfo=e.contentInfo,this.metadata=e.metadata||null,this.s3Bucket=s||null,this.s3Url=a}}const qM=(t,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:m,metadata:y})=>function xy(t,{publicKey:e,fileName:n,contentType:r,baseURL:i=U_baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=U_retryNetworkErrorMaxTimes,metadata:m}){return un(()=>ln({method:"POST",url:Yt(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:d,userAgent:f})},data:Ju({file:{data:t,name:n||My(t),contentType:r||Ay(t)},UPLOADCARE_PUB_KEY:e,UPLOADCARE_STORE:ec(a),signature:s,expire:o,source:c,metadata:m}),signal:l,onProgress:u}).then(({data:y,headers:D,request:g})=>{const b=qt(JSON.parse(y));if("error"in b)throw new ze(b.error.content,b.error.errorCode,g,b,D);return b}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(t,{publicKey:e,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,metadata:y}).then(({file:D})=>nc({file:D,publicKey:e,baseURL:r,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,onProgress:u,signal:l})).then(D=>new Gi(D,{baseCDN:m})),YM=(t,{publicKey:e,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c,baseCDN:d})=>tc(t,{publicKey:e,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c}).then(f=>new Gi(f,{baseCDN:d,fileName:n})).then(f=>(s&&s({isComputable:!0,value:1}),f));var KM=window.WebSocket;class XM{constructor(){this.events=Object.create({})}emit(e,n){var r;null==(r=this.events[e])||r.forEach(i=>i(n))}on(e,n){this.events[e]=this.events[e]||[],this.events[e].push(n)}off(e,n){this.events[e]=n?this.events[e].filter(r=>r!==n):[]}}class JM{constructor(e,n=3e4){this.ws=void 0,this.queue=[],this.isConnected=!1,this.subscribers=0,this.emmitter=new XM,this.disconnectTimeoutId=null,this.key=e,this.disconnectTime=n}connect(){this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),this.isConnected||this.ws||(this.ws=new KM(`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(r.channel,((t,e)=>E("success"===t?{status:$e.Success}:"progress"===t?{status:$e.Progress}:{status:$e.Error},e))(r.event,JSON.parse(r.data)))}}))}disconnect(){const e=()=>{var n;null==(n=this.ws)||n.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{e()},this.disconnectTime):e()}send(e,n){var i;const r=JSON.stringify({event:e,data:n});null==(i=this.ws)||i.send(r)}subscribe(e,n){this.subscribers+=1,this.connect();const r=`task-status-${e}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(e){this.subscribers-=1;const n=`task-status-${e}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),0===this.subscribers&&this.disconnect()}onError(e){return this.emmitter.on("error",e),()=>this.emmitter.off("error",e)}}let rc=null;const ic=t=>{if(!rc){const e="undefined"==typeof window?0:3e4;rc=new JM(t,e)}return rc},rx=(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,onProgress:d,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:m,pusherKey:y=U_pusherKey,metadata:D})=>Promise.resolve((t=>{ic(t).connect()})(y)).then(()=>function Ny(t,{publicKey:e,baseURL:n=U_baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:u="url",signal:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=U_retryNetworkErrorMaxTimes,metadata:m}){return un(()=>ln({method:"POST",headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:d,userAgent:f})},url:Yt(n,"/from_url/",{jsonerrors:1,pub_key:e,source_url:t,store:ec(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:u,metadata:m}),signal:c}).then(({data:y,headers:D,request:g})=>{const b=qt(JSON.parse(y));if("error"in b)throw new ze(b.error.content,b.error.errorCode,g,b,D);return b}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(t,{publicKey:e,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:m,metadata:D})).catch(g=>{const b=ic(y);return null==b||b.disconnect(),Promise.reject(g)}).then(g=>g.type===No.FileInfo?g:((t,{signal:e}={})=>{let n=null,r=null;const i=t.map(()=>new AbortController);return So(e,()=>{i.forEach(o=>o.abort())}),Promise.all(t.map((o,a)=>{const l=(o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())})(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(u=>(l(),u)).catch(u=>(n=u,null))})).then(o=>{if(null===r)throw n;return o[r]})})([({signal:b})=>function tx({token:t,publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return Ty({check:u=>function Ry(t,{publicKey:e,baseURL:n=U_baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=U_retryNetworkErrorMaxTimes}={}){return un(()=>ln({method:"GET",headers:e?{"X-UC-User-Agent":Tn({publicKey:e,integration:i,userAgent:s})}:void 0,url:Yt(n,"/from_url/status/",{jsonerrors:1,token:t}),signal:r}).then(({data:l,headers:u,request:c})=>{const d=qt(JSON.parse(l));if("error"in d&&!(t=>"status"in t&&t.status===$e.Error)(d))throw new ze(d.error.content,void 0,c,d,u);return d}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}(t,{publicKey:e,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:u}).then(c=>{switch(c.status){case $e.Error:return new ze(c.error,c.errorCode);case $e.Waiting:return!1;case $e.Unknown:return new ze(`Token "${t}" was not found.`);case $e.Progress:return a&&a("unknown"===c.total?{isComputable:!1}:{isComputable:!0,value:c.done/c.total}),!1;case $e.Success:return a&&a({isComputable:!0,value:c.done/c.total}),c;default:throw new Error("Unknown status")}}),signal:l})}({token:g.token,publicKey:e,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:m,onProgress:d,signal:b}),({signal:b})=>(({token:t,pusherKey:e,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=ic(e),a=o.onError(s),l=()=>{a(),o.unsubscribe(t)};So(n,()=>{l(),s(new $r("pusher cancelled"))}),o.subscribe(t,u=>{switch(u.status){case $e.Progress:r&&r("unknown"===u.total?{isComputable:!1}:{isComputable:!0,value:u.done/u.total});break;case $e.Success:l(),r&&r({isComputable:!0,value:u.done/u.total}),i(u);break;case $e.Error:l(),s(new ze(u.msg,u.error_code))}})}))({token:g.token,pusherKey:y,signal:b,onProgress:d})],{signal:c})).then(g=>{if(g instanceof ze)throw g;return g}).then(g=>nc({file:g.uuid,publicKey:e,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:m,onProgress:d,signal:c})).then(g=>new Gi(g,{baseCDN:i})),sc=new WeakMap,ix=function(){var t=_e(function*(e){if(sc.has(e))return sc.get(e);const n=yield fetch(e.uri).then(r=>r.blob());return sc.set(e,n),n});return function(n){return t.apply(this,arguments)}}(),Ly=function(){var t=_e(function*(e){if(Zu(e))return e.length;if(Mo(e)||Ao(e))return e.size;if(xo(e))return(yield ix(e)).size;throw new Error("Unknown file type. Cannot determine file size.")});return function(n){return t.apply(this,arguments)}}(),sx=(t,e=U_multipartMinFileSize)=>t>=e,$y=t=>{const n=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!zi(t)&&n.test(t)},By=t=>{const n=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!zi(t)&&n.test(t)},ox=(t,e)=>new Promise((n,r)=>{const i=[];let s=!1,o=e.length;const a=[...e],l=()=>{const u=e.length-a.length,c=a.shift();c&&c().then(d=>{s||(i[u]=d,o-=1,o?l():n(i))}).catch(d=>{s=!0,r(d)})};for(let u=0;u<t;u++)l()}),lx=function(){var t=_e(function*(e,n,r){return i=>((t,e,n,r)=>{const i=r*e,s=Math.min(i+r,n);return t.slice(i,s)})(e,i,n,r)});return function(n,r,i){return t.apply(this,arguments)}}(),cx=function(){var t=_e(function*(e,{publicKey:n,fileName:r,fileSize:i,baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,onProgress:c,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:m,contentType:y,multipartChunkSize:D=U_multipartChunkSize,maxConcurrentRequests:g=U_maxConcurrentRequests,baseCDN:b,metadata:S}){const O=null!=i?i:yield Ly(e);let G;const Te=(se,it)=>{if(!c)return;G||(G=Array(se).fill(0));const Kt=gt=>gt.reduce((Hn,xn)=>Hn+xn,0);return gt=>{!gt.isComputable||(G[it]=gt.value,c({isComputable:!0,value:Kt(G)/se}))}};return y||(y=Ay(e)),function Py(t,{publicKey:e,contentType:n,fileName:r,multipartChunkSize:i=U_multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=U_retryNetworkErrorMaxTimes,metadata:m}){return un(()=>ln({method:"POST",url:Yt(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:d,userAgent:f})},data:Ju({filename:r||Iy,size:t,content_type:n||Xu,part_size:i,UPLOADCARE_STORE:ec(l),UPLOADCARE_PUB_KEY:e,signature:o,expire:a,source:c,metadata:m}),signal:u}).then(({data:y,headers:D,request:g})=>{const b=qt(JSON.parse(y));if("error"in b)throw new ze(b.error.content,b.error.errorCode,g,b,D);return b.parts=Object.keys(b.parts).map(S=>b.parts[S]),b}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p})}(O,{publicKey:n,contentType:y,fileName:r||My(e),baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:m,metadata:S}).then(function(){var se=_e(function*({uuid:it,parts:Kt}){const gt=yield lx(e,O,D);return Promise.all([it,ox(g,Kt.map((Hn,xn)=>()=>((t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>function ky(t,e,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=U_retryNetworkErrorMaxTimes}){return un(()=>ln({method:"PUT",url:e,data:t,onProgress:i,signal:r,headers:{"Content-Type":n||Xu}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}(t,e,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}))(gt(xn),Hn,{publicKey:n,contentType:y,onProgress:Te(Kt.length,xn),signal:u,integration:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:m})))])});return function(it){return se.apply(this,arguments)}}()).then(([se])=>function Oy(t,{publicKey:e,baseURL:n=U_baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=U_retryNetworkErrorMaxTimes}){return un(()=>ln({method:"POST",url:Yt(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:s,userAgent:o})},data:Ju({uuid:t,UPLOADCARE_PUB_KEY:e,source:r}),signal:i}).then(({data:u,headers:c,request:d})=>{const f=qt(JSON.parse(u));if("error"in f)throw new ze(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}(se,{publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:m})).then(se=>se.isReady?se:nc({file:se.uuid,publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:m,onProgress:c,signal:u})).then(se=>new Gi(se,{baseCDN:b}))});return function(n,r){return t.apply(this,arguments)}}();function oc(t,e){return ac.apply(this,arguments)}function ac(){return ac=_e(function*(t,{publicKey:e,fileName:n,baseURL:r=U_baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartMinFileSize:m,multipartChunkSize:y,maxConcurrentRequests:D,baseCDN:g=U_baseCDN,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:S,pusherKey:O,metadata:G}){if(zi(t)){const Te=yield Ly(t);return sx(Te,m)?cx(t,{publicKey:e,contentType:p,multipartChunkSize:y,fileSize:Te,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,maxConcurrentRequests:D,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:g,metadata:G}):qM(t,{publicKey:e,fileName:n,contentType:p,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:g,metadata:G})}if(By(t))return rx(t,{publicKey:e,fileName:n,baseURL:r,baseCDN:g,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:S,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,pusherKey:O,metadata:G});if($y(t))return YM(t,{publicKey:e,fileName:n,baseURL:r,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:g});throw new TypeError(`File uploading from "${t}" is not supported`)}),ac.apply(this,arguments)}class dx{constructor(e,n){this.storedAt=null,this.uuid=e.id,this.filesCount=e.filesCount,this.totalSize=Object.values(e.files).reduce((r,i)=>r+i.size,0),this.isStored=!!e.datetimeStored,this.isImage=!!Object.values(e.files).filter(r=>r.isImage).length,this.cdnUrl=e.cdnUrl,this.files=n,this.createdAt=e.datetimeCreated,this.storedAt=e.datetimeStored}}function Vy(t,{publicKey:e,fileName:n,baseURL:r=U_baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:m=U_multipartChunkSize,baseCDN:y=U_baseCDN,jsonpCallback:D}){if(!(t=>{for(const e of t)if(!zi(e))return!1;return!0})(t)&&!(t=>{for(const e of t)if(!By(e))return!1;return!0})(t)&&!(t=>{for(const e of t)if(!$y(e))return!1;return!0})(t))throw new TypeError(`Group uploading from "${t}" is not supported`);let g,b=!0;const S=t.length,O=(G,Te)=>{if(!l)return;g||(g=Array(G).fill(0));const se=it=>it.reduce((Kt,gt)=>Kt+gt)/G;return it=>{if(!it.isComputable||!b)return b=!1,void l({isComputable:!1});g[Te]=it.value,l({isComputable:!0,value:se(g)})}};return Promise.all(t.map((G,Te)=>oc(G,{publicKey:e,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:O(S,Te),source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:m,baseCDN:y}))).then(G=>function Fy(t,{publicKey:e,baseURL:n=U_baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:u,retryThrottledRequestMaxTimes:c=U_retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=U_retryNetworkErrorMaxTimes}){return un(()=>ln({method:"POST",headers:{"X-UC-User-Agent":Tn({publicKey:e,integration:l,userAgent:u})},url:Yt(n,"/group/",{jsonerrors:1,pub_key:e,files:t,callback:r,signature:i,expire:s,source:a}),signal:o}).then(({data:f,headers:h,request:p})=>{const m=qt(JSON.parse(f));if("error"in m)throw new ze(m.error.content,m.error.errorCode,p,m,h);return m}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:c})}(G.map(se=>se.uuid),{publicKey:e,baseURL:r,jsonpCallback:D,secureSignature:i,secureExpire:s,signal:a,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h}).then(se=>new dx(se,G)).then(se=>(l&&l({isComputable:!0,value:1}),se)))}const gx=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null},fileSize:{type:Number,value:null},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:Gi,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0}});function _x(t){return Ey(R(E({},t),{libraryName:"blocks",libraryVersion:"0.15.2"}))}const Uy="[Typed State] Wrong property name: ";class bx{constructor(e,n){this.__typedSchema=e,this.__ctxId=n||Gu.generate(),this.__schema=Object.keys(e).reduce((r,i)=>(r[i]=e[i].value,r),{}),this.__data=te.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(e,n){if(!this.__typedSchema.hasOwnProperty(e))return void console.warn(Uy+e);let r=this.__typedSchema[e];(null==n?void 0:n.constructor)===r.type||n instanceof r.type||r.nullable&&null===n?this.__data.pub(e,n):console.warn("[Typed State] Wrong property type: "+e)}setMultipleValues(e){for(let n in e)this.setValue(n,e[n])}getValue(e){if(this.__typedSchema.hasOwnProperty(e))return this.__data.read(e);console.warn(Uy+e)}subscribe(e,n){return this.__data.sub(e,n)}remove(){te.deleteCtx(this.__ctxId)}}class Dx{constructor(e){this.__typedSchema=e.typedSchema,this.__ctxId=e.ctxName||Gu.generate(),this.__data=te.registerCtx({},this.__ctxId),this.__watchList=e.watchList||[],this.__handler=e.handler||null,this.__subsMap=Object.create(null),this.__observers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{this.__observers.forEach(s=>{s(E({},n))}),n=Object.create(null)})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{var r;let e=this.__added,n=this.__removed;this.__added.clear(),this.__removed.clear(),null==(r=this.__handler)||r.call(this,[...this.__items],e,n)})}add(e){let n=new bx(this.__typedSchema);for(let r in e)n.setValue(r,e[r]);return this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),this.__items.add(n.uid),this.notify(),n}read(e){return this.__data.read(e)}readProp(e,n){return this.read(e).getValue(n)}publishProp(e,n,r){this.read(e).setValue(n,r)}remove(e){this.__removed.add(this.__data.read(e)),this.__items.delete(e),this.notify(),this.__data.pub(e,null),delete this.__subsMap[e]}clearAll(){this.__items.forEach(e=>{this.remove(e)})}observe(e){this.__observers.add(e)}unobserve(e){this.__observers.delete(e)}findItems(e){let n=[];return this.__items.forEach(r=>{let i=this.read(r);e(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){te.deleteCtx(this.__data),this.__observers=null;for(let e in this.__subsMap)this.__subsMap[e].forEach(n=>{n.remove()}),delete this.__subsMap[e]}}const tt={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CDN_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT"};class cn{constructor(e){this.ctx=e.ctx,this.type=e.type,this.data=e.data}}class Mt{static eName(e){return"LR_"+e}static emit(e,n=window,r=!0){let i=()=>{n.dispatchEvent(new CustomEvent(this.eName(e.type),{detail:e}))};if(!r)return void i();let s=e.type+e.ctx;this._timeoutStore[s]&&window.clearTimeout(this._timeoutStore[s]),this._timeoutStore[s]=window.setTimeout(()=>{i(),delete this._timeoutStore[s]},20)}}v(Mt,"_timeoutStore",Object.create(null));class ie extends j{constructor(){super(...arguments),v(this,"ctxInit",my(this)),v(this,"__initialUploadMetadata",null),v(this,"_handleCollectionUpdate",e=>{let n=this.uploadCollection;if(e.uploadProgress){let r=0,i=n.findItems(o=>!o.getValue("uploadError"));i.forEach(o=>{r+=n.readProp(o,"uploadProgress")});let s=Math.round(r/i.length);this.$["*commonProgress"]=s,Mt.emit(new cn({type:tt.UPLOAD_PROGRESS,ctx:this.ctxName,data:s}),void 0,100===s)}if(e.uuid){let r=n.findItems(s=>!!s.getValue("uuid")),i=n.findItems(s=>!!s.getValue("uploadError")||!!s.getValue("validationErrorMsg"));if(n.size-i.length===r.length){let s=this.getOutputData(o=>!!o.getValue("uuid"));Mt.emit(new cn({type:tt.UPLOAD_FINISH,ctx:this.ctxName,data:s}))}}e.uploadError&&n.findItems(i=>!!i.getValue("uploadError")).forEach(i=>{Mt.emit(new cn({type:tt.UPLOAD_ERROR,ctx:this.ctxName,data:n.readProp(i,"uploadError")}),void 0,!1)}),e.validationErrorMsg&&n.findItems(i=>!!i.getValue("validationErrorMsg")).forEach(i=>{Mt.emit(new cn({type:tt.VALIDATION_ERROR,ctx:this.ctxName,data:n.readProp(i,"validationErrorMsg")}),void 0,!1)}),e.cdnUrlModifiers&&n.findItems(i=>!!i.getValue("cdnUrlModifiers")).forEach(i=>{Mt.emit(new cn({type:tt.CDN_MODIFICATION,ctx:this.ctxName,data:te.getCtx(i).store}),void 0,!1)})})}setUploadMetadata(e){this.connectedOnce?this.$["*uploadMetadata"]=e:this.__initialUploadMetadata=e}initCallback(){super.initCallback(),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}destroyCallback(){super.destroyCallback();let e=this.$["*blocksRegistry"];e.has(this)&&(this.uploadCollection.unobserve(this._handleCollectionUpdate),e.delete(this))}addFiles(e){e.forEach(n=>{this.uploadCollection.add({file:n,isImage:Ku(n),mimeType:n.type,fileName:n.name,fileSize:n.size})})}openSystemDialog(e={}){let n=by([this.getCssData("--cfg-accept"),...this.getCssData("--cfg-img-only")?To:[]]).join(",");this.getCssData("--cfg-accept")&&!!this.getCssData("--cfg-img-only")&&console.warn("There could be a mistake.\nBoth `--cfg-accept` and `--cfg-img-only` parameters are set.\nThe value of `--cfg-accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=!!this.getCssData("--cfg-multiple"),e.captureCamera?(this.fileInput.capture="",this.fileInput.accept=To.join(",")):this.fileInput.accept=n,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{this.addFiles([...this.fileInput.files]),this.$["*currentActivity"]=j.activities.UPLOAD_LIST,this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let e=null;return this.getCssData("--cfg-source-list")&&(e=this.getCssData("--cfg-source-list").split(",").map(n=>n.trim())),e}initFlow(e=!1){var n,r;if((null==(n=this.$["*uploadList"])?void 0:n.length)&&!e)this.set$({"*currentActivity":j.activities.UPLOAD_LIST}),this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!0);else if(1===(null==(r=this.sourceList)?void 0:r.length)){let i=this.sourceList[0];"local"===i?(this.$["*currentActivity"]=j.activities.UPLOAD_LIST,null==this||this.openSystemDialog()):(Object.values(ie.extSrcList).includes(i)?this.set$({"*currentActivityParams":{externalSourceType:i},"*currentActivity":j.activities.EXTERNAL}):this.$["*currentActivity"]=i,this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!0))}else this.set$({"*currentActivity":j.activities.START_FROM}),this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!0)}cancelFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!1)}get uploadCollection(){if(!this.has("*uploadCollection")){let e=new Dx({typedSchema:gx,watchList:["uploadProgress","uuid","uploadError","validationErrorMsg","cdnUrlModifiers"],handler:(n,r,i)=>{var s;for(let o of i)null==(s=null==o?void 0:o.getValue("abortController"))||s.abort(),null==o||o.setValue("abortController",null),URL.revokeObjectURL(null==o?void 0:o.getValue("thumbUrl"));this.$["*uploadList"]=n.map(o=>({uid:o}))}});e.observe(this._handleCollectionUpdate),this.add("*uploadCollection",e)}return this.$["*uploadCollection"]}getUploadClientOptions(){let e=this.getCssData("--cfg-store",!0),n={store:null===e?void 0:!!e,publicKey:this.getCssData("--cfg-pubkey"),baseCDN:this.getCssData("--cfg-cdn-cname"),baseURL:this.getCssData("--cfg-base-url"),userAgent:_x,integration:this.getCssData("--cfg-user-agent-integration"),secureSignature:this.getCssData("--cfg-secure-signature"),secureExpire:this.getCssData("--cfg-secure-expire"),retryThrottledRequestMaxTimes:this.getCssData("--cfg-retry-throttled-request-max-times"),multipartMinFileSize:this.getCssData("--cfg-multipart-min-file-size"),multipartChunkSize:this.getCssData("--cfg-multipart-chunk-size"),maxConcurrentRequests:this.getCssData("--cfg-max-concurrent-requests"),multipartMaxAttempts:this.getCssData("--cfg-multipart-max-attempts"),checkForUrlDuplicates:!!this.getCssData("--cfg-check-for-url-duplicates"),saveUrlForRecurrentUploads:!!this.getCssData("--cfg-save-url-for-recurrent-uploads"),metadata:this.$["*uploadMetadata"]};return console.log("Upload client options:",n),n}getOutputData(e){let n=[];return this.uploadCollection.findItems(e).forEach(i=>{let s=te.getCtx(i).store,o=s.fileInfo||{name:s.fileName,fileSize:s.fileSize,isImage:s.isImage,mimeType:s.mimeType},a=R(E({},o),{cdnUrlModifiers:s.cdnUrlModifiers,cdnUrl:s.cdnUrl||o.cdnUrl});n.push(a)}),n}}ie.sourceTypes=Object.freeze(E({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw"},ie.extSrcList)),ie.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),Object.values(tt).forEach(t=>{let e=Mt.eName(t);window.addEventListener(e,n=>{if([tt.UPLOAD_FINISH,tt.REMOVE,tt.CDN_MODIFICATION].includes(n.detail.type)){let i=te.getCtx(n.detail.ctx),s=i.read("uploadCollection"),o=[];s.items().forEach(a=>{let l=te.getCtx(a).store,u=l.fileInfo;if(u){let c=R(E({},u),{cdnUrlModifiers:l.cdnUrlModifiers,cdnUrl:l.cdnUrl||u.cdnUrl});o.push(c)}}),Mt.emit(new cn({type:tt.DATA_OUTPUT,ctx:n.detail.ctx,data:o})),i.pub("outputData",o)}})});let jy=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{name:"",path:"",size:"24",viewBox:""}))}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{n&&(n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`))}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}return t.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>\n',t})();jy.bindAttributes({name:"name",size:"size"});const Hy=t=>{if("string"!=typeof t||!t)return"";let e=t.trim();return e.startsWith("-/")?e=e.slice(2):e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,e.length-1)),e},lc=(...t)=>t.filter(e=>"string"==typeof e&&e).map(e=>Hy(e)).join("/-/"),In=(...t)=>{let e=lc(...t);return e?`-/${e}/`:""};function zy(t){let e=new URL(t),n=e.pathname+e.search+e.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function Gy(t){let e=new URL(t),n=zy(t),r=Wy(n)?qy(n).pathname:n;return e.pathname=e.pathname.replace(r,""),e.search="",e.hash="",e.toString()}function Wy(t){return t.startsWith("http")}function qy(t){let e=new URL(t);return{pathname:e.origin+e.pathname||"",search:e.search||"",hash:e.hash||""}}const xt=(t,e,n)=>{let r=new URL(Gy(t));if(n=n||zy(t),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),Wy(n)){let i=qy(n);r.pathname=r.pathname+(e||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(e||"")+(n||"");return r.toString()},Wi=(t,e)=>{let n=new URL(t);return n.pathname=e+"/",n.toString()},Br=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),qi="--lr-img-",Yy="unresolved",Qy=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Ky=Object.create(null);for(let t in Br)Ky[qi+t]=(null==(v_=Br[t])?void 0:v_.default)||"";class Ex extends wo{constructor(){super(...arguments),v(this,"cssInit$",Ky)}$$(e){return this.$[qi+e]}set$$(e){for(let n in e)this.$[qi+n]=e[n]}sub$$(e,n){this.sub(qi+e,r=>{null===r||""===r||n(r)})}_fmtAbs(e){return!e.includes("//")&&!Qy&&(e=new URL(e,document.baseURI).href),e}_getCdnModifiers(e=""){return In(e&&`resize/${e}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||Br.format.default}`,`quality/${this.$$("quality")||Br.quality.default}`)}_getUrlBase(e=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Qy&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let n=this._getCdnModifiers(e);return this.$$("src").startsWith(this.$$("cdn-cname"))?xt(this.$$("src"),n):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(xt(Wi(this.$$("cdn-cname"),this.$$("uuid")),n)):this.$$("proxy-cname")?this._proxyUrl(xt(this.$$("proxy-cname"),n,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(xt(`https://${this.$$("pubkey")}.ucr.io/`,n,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(e){return this.$$("secure-delivery-proxy")?Qu(this.$$("secure-delivery-proxy"),{previewUrl:e},{transform:r=>window.encodeURIComponent(r)}):e}_getElSize(e,n=1,r=!0){let i=e.getBoundingClientRect(),s=n*Math.round(i.width),o=r?"":n*Math.round(i.height);return s||o?`${s||""}x${o||""}`:null}_setupEventProxy(e){let n=i=>{i.stopPropagation();let s=new Event(i.type,i);this.dispatchEvent(s)},r=["load","error"];for(let i of r)e.addEventListener(i,n)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(Yy,""),this.img.onload=()=>{this.img.removeAttribute(Yy)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(e=>{Br[e.name]||this.img.setAttribute(e.name,e.value)})}get breakpoints(){if(this.$$("breakpoints")){let e=new Set;return this.$$("breakpoints").split(",").forEach(n=>{e.add(parseFloat(n.trim()))}),e}return null}renderBg(e){let n=new Set;this.breakpoints?this.breakpoints.forEach(i=>{n.add(`url("${this._getUrlBase(i+"x")}") ${i}w`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(2*i+"x")}") ${2*i}w`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(3*i+"x")}") ${3*i}w`)}):(n.add(`url("${this._getUrlBase(this._getElSize(e))}") 1x`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(e,2))}") 2x`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(e,3))}") 3x`));let r=`image-set(${[...n].join(", ")})`;e.style.setProperty("background-image",r),e.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let e=new Set;return this.breakpoints?this.breakpoints.forEach(n=>{e.add(this._getUrlBase(n+"x")+` ${n}w`),this.$$("hi-res-support")&&e.add(this._getUrlBase(2*n+"x")+` ${2*n}w`),this.$$("ultra-res-support")&&e.add(this._getUrlBase(3*n+"x")+` ${3*n}w`)}):(e.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&e.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...e].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(e=>{this.$$("intersection")?this.initIntersection(e,()=>{this.renderBg(e)}):this.renderBg(e)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(e,n){this._isnObserver=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting&&(n(),this._isnObserver.unobserve(e))})},{root:null,rootMargin:"0px"}),this._isnObserver.observe(e),this._observed||(this._observed=new Set),this._observed.add(e)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(e=>{this._isnObserver.unobserve(e)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(Br)}attributeChangedCallback(e,n,r){window.setTimeout(()=>{this.$[qi+e]=r})}}class Tx extends Ex{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",e=>{this.$$("is-background-for")||(this.img.loading=e?"lazy":"eager")})}}let Ix=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{"*simpleButtonText":"",onClick:()=>{this.initFlow()}}))}initCallback(){super.initCallback(),this.bindCssData("--cfg-multiple"),this.sub("--cfg-multiple",n=>{this.$["*simpleButtonText"]=this.l10n(n?"upload-files":"upload-file")})}}return t.template='\n  <lr-drop-area>\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span>{{*simpleButtonText}}</span>\n      <slot></slot>\n      <div class="visual-drop-area"></div>\n    </button>\n  </lr-drop-area>\n',t})();class Sx extends j{constructor(){super(...arguments),v(this,"historyTracked",!0),v(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function Ax(t){return new Promise(e=>{"function"!=typeof window.FileReader&&e(!1);try{let n=new FileReader;n.onerror=()=>{e(!0)};let r=i=>{"loadend"!==i.type&&n.abort(),e(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(t)}catch(n){e(!1)}})}function Mx(t){return new Promise(e=>{let n=0,r=[],i=o=>{o||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),e(null)),o.isFile?(n++,o.file(a=>{n--,r.push(a),0===n&&e(r)})):o.isDirectory&&s(o.createReader())},s=o=>{n++,o.readEntries(a=>{n--;for(let l of a)i(l);0===n&&e(r)})};i(t)})}const Ge={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Xy=["focus"],uc=new Map;function Zy(t){let e=0,n=document.body,r=new Set,s=Ge.INACTIVE,o=h=>{t.shouldIgnore()&&h!==Ge.INACTIVE||(s!==h&&r.forEach(p=>p(h)),s=h)};r.add(h=>t.onChange(h));let a=()=>{e=0,o(Ge.INACTIVE)},l=()=>{e+=1,s===Ge.INACTIVE&&o(Ge.ACTIVE)},u=()=>{e-=1,e>0||o(Ge.INACTIVE)},c=h=>{h.preventDefault(),e=0,o(Ge.INACTIVE)},d=h=>{h.preventDefault();let p=[h.x,h.y],m=t.element.getBoundingClientRect(),y=Math.floor(function Rx(t,e){let n=Math.max(Math.min(t[0],e.x+e.width),e.x),r=Math.max(Math.min(t[1],e.y+e.height),e.y);return Math.sqrt((t[0]-n)*(t[0]-n)+(t[1]-r)*(t[1]-r))}(p,m)),D=y<100,g=h.composedPath().includes(t.element);uc.set(t.element,y);let b=Math.min(...uc.values())===y;o(g&&b?Ge.OVER:D&&b?Ge.NEAR:Ge.ACTIVE)},f=function(){var h=_e(function*(p){p.preventDefault();let m=yield function xx(t){let e=[],n=[];for(let r=0;r<t.items.length;r++){let i=t.items[r];if(i)if("file"===i.kind){if("function"==typeof i.webkitGetAsEntry||"function"==typeof i.getAsEntry){let o="function"==typeof i.webkitGetAsEntry?i.webkitGetAsEntry():i.getAsEntry();n.push(Mx(o).then(a=>{e.push(...a)}));continue}let s=i.getAsFile();n.push(Ax(s).then(o=>{o||e.push(s)}))}else"string"===i.kind&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{e.push(o),s()})}))}return Promise.all(n).then(()=>e)}(p.dataTransfer);t.onItems(m),o(Ge.INACTIVE)});return function(m){return h.apply(this,arguments)}}();return n.addEventListener("drop",c),n.addEventListener("dragleave",u),n.addEventListener("dragenter",l),n.addEventListener("dragover",d),t.element.addEventListener("drop",f),Xy.forEach(h=>{window.addEventListener(h,a)}),()=>{uc.delete(t.element),n.removeEventListener("drop",c),n.removeEventListener("dragleave",u),n.removeEventListener("dragenter",l),n.removeEventListener("dragover",d),t.element.removeEventListener("drop",f),Xy.forEach(h=>{window.removeEventListener(h,a)})}}let Jy=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{state:Ge.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null}))}isActive(){const n=this.getBoundingClientRect(),r=n.width>0&&n.height>0,i=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),s=window.getComputedStyle(this);return r&&"hidden"!==s.visibility&&"none"!==s.display&&i}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("clickable",r=>{this.set$({isClickable:"string"==typeof r})}),this.defineAccessor("with-icon",r=>{this.set$({withIcon:"string"==typeof r})}),this.defineAccessor("fullscreen",r=>{this.set$({isFullscreen:"string"==typeof r})}),this.defineAccessor("text",r=>{this.set$(r?{text:this.l10n(r)||r}:{text:this.l10n("drop-files-here")})}),this._destroyDropzone=Zy({element:this,shouldIgnore:()=>this._isDisabled(),onChange:r=>{this.$.state=r},onItems:r=>{if(!r.length)return;let i=this.getCssData("--cfg-multiple"),s=this.getCssData("--cfg-multiple-max"),o=this.uploadCollection.size;i&&s?r=r.slice(0,s-o-1):i||(r=r.slice(0,o>0?0:1)),r.forEach(a=>{if("string"==typeof a)return void this.uploadCollection.add({externalUrl:a});let l=Ku(a);this.uploadCollection.add({file:a,isImage:l,mimeType:a.type,fileName:a.name,fileSize:a.size})}),this.uploadCollection.size&&(this.set$({"*currentActivity":j.activities.UPLOAD_LIST}),this.setForCtxTarget(En.StateConsumerScope,"*modalActive",!0))}});let n=this.ref["content-wrapper"];n&&(this._destroyContentWrapperDropzone=Zy({element:n,onChange:r=>{var s;const i=null==(s=Object.entries(Ge).find(([,o])=>o===r))?void 0:s[0].toLowerCase();i&&n.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._isDisabled()})),this.sub("state",r=>{var s;const i=null==(s=Object.entries(Ge).find(([,o])=>o===r))?void 0:s[0].toLowerCase();i&&this.setAttribute("drag-state",i)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_isDisabled(){return!this._couldHandleFiles()||!!this.$.isFullscreen&&[...this.$["lr-drop-area/targets"]].filter(i=>i!==this).filter(i=>i.isActive()).length>0}_couldHandleFiles(){let n=this.getCssData("--cfg-multiple"),r=this.getCssData("--cfg-multiple-max"),i=this.uploadCollection.size;return!(n&&r&&i>=r||!n&&i>0)}destroyCallback(){var n,r,i,s;super.destroyCallback(),null==(r=null==(n=this.$["lr-drop-area/targets"])?void 0:n.remove)||r.call(n,this),null==(i=this._destroyDropzone)||i.call(this),null==(s=this._destroyContentWrapperDropzone)||s.call(this),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}return t.template='\n  <slot>\n    <div ref="content-wrapper" class="content-wrapper">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',t})();Jy.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null});let e_=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"_registeredTypes",{}),v(this,"init$",R(E({},this.ctxInit),{iconName:"default"}))}initTypes(){this.registerType({type:ie.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:ie.sourceTypes.URL,activity:j.activities.URL,textKey:"from-url"}),this.registerType({type:ie.sourceTypes.CAMERA,activity:j.activities.CAMERA,onClick:()=>{var r=void 0!==document.createElement("input").capture;return r&&this.openSystemDialog({captureCamera:!0}),!r}}),this.registerType({type:"draw",activity:j.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(ie.extSrcList))this.registerType({type:n,activity:j.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{!n||this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}applyType(n){const r=this._registeredTypes[n];if(!r)return void console.warn("Unsupported source type: "+n);const{textKey:i=n,icon:s=n,activity:o,onClick:a,activityParams:l={}}=r;this.applyL10nKey("src-type",`src-type-${i}`),this.$.iconName=s,this.onclick=u=>{(a?a(u):o)&&this.set$({"*currentActivityParams":l,"*currentActivity":o})}}}return t.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',t})();e_.bindAttributes({type:null});class Px extends ne{constructor(){super(...arguments),v(this,"cssInit$",{"--cfg-source-list":""})}initCallback(){super.initCallback(),this.sub("--cfg-source-list",e=>{if(!e)return;let n=e.split(",").map(i=>i.trim()),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.getCssData("--cfg-source-list-wrap")?this.innerHTML=r:this.outerHTML=r})}}class t_{constructor(){v(this,"caption",""),v(this,"text",""),v(this,"iconName",""),v(this,"isError",!1)}}let Ox=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}}))}initCallback(){super.initCallback(),this.sub("*message",n=>{n?(this.setAttribute("active",""),this.set$({captionTxt:n.caption||"",msgTxt:n.text||"",iconName:n.isError?"error":"info"}),n.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}return t.template='\n  <div class="heading">\n    <lr-icon set="@name: iconName"></lr-icon>\n    <div class="caption">{{captionTxt}}</div>\n    <button type="button" set="onclick: onClose">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </div>\n  <div class="msg">{{msgTxt}}</div>\n',t})();function cc(t){let e=new Blob([t],{type:"image/svg+xml"});return URL.createObjectURL(e)}function dc(t="hsl(209, 21%, 65%)",e=32,n=32){return cc(`\n  <svg width="${e}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${t}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}const nt={FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)};class Un extends ie{constructor(){super(...arguments),v(this,"pauseRender",!0),v(this,"_entrySubs",new Set),v(this,"_entry",null),v(this,"_isIntersecting",!1),v(this,"_debouncedGenerateThumb",Lr(this._generateThumbnail.bind(this),100)),v(this,"_debouncedCalculateState",Lr(this._calculateState.bind(this),0)),v(this,"_renderedOnce",!1),v(this,"cssInit$",{"--cfg-use-cloud-image-editor":0}),v(this,"init$",R(E({},this.ctxInit),{uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:nt.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.$["*currentActivity"]=this.findBlockInCtx(e=>e.activityType===j.activities.DETAILS)?j.activities.DETAILS:j.activities.CLOUD_IMG_EDIT},onRemove:()=>{let e=this._entry.getValue("uuid");if(e){let n=this.getOutputData(r=>r.getValue("uuid")===e);Mt.emit(new cn({type:tt.REMOVE,ctx:this.ctxName,data:n}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}))}_reset(){for(let e of this._entrySubs)e.remove();this._debouncedGenerateThumb.cancel(),this._entrySubs=new Set,this._entry=null,this._isIntersecting=!1}_observerCallback(e){let[n]=e;this._isIntersecting=n.isIntersecting,n.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===n.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){let e=this._entry,n=nt.IDLE;e.getValue("uploadError")||e.getValue("validationErrorMsg")?n=nt.FAILED:e.getValue("isUploading")?n=nt.UPLOADING:e.getValue("uuid")&&(n=nt.FINISHED),this.$.state!==n&&(this.$.state=n)}_generateThumbnail(){var e=this;return _e(function*(){var r;let n=e._entry;if(n.getValue("uuid")&&n.getValue("isImage")){let i=e.getCssData("--cfg-thumb-size")||76,s=e.proxyUrl(xt(Wi(e.getCssData("--cfg-cdn-cname"),e._entry.getValue("uuid")),In(n.getValue("cdnUrlModifiers"),`scale_crop/${i}x${i}/center`))),o=n.getValue("thumbUrl");return n.setValue("thumbUrl",s),void URL.revokeObjectURL(o)}if(!n.getValue("thumbUrl"))if(null==(r=n.getValue("file"))?void 0:r.type.includes("image"))try{let i=yield function kx(t,e=40){if("image/svg+xml"===t.type)return URL.createObjectURL(t);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=e,n.height=e*l):(n.height=e,n.width=e/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(u=>{if(!u)return void a();let c=URL.createObjectURL(u);o(c)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(t),s}(n.getValue("file"),e.getCssData("--cfg-thumb-size")||76);n.setValue("thumbUrl",i)}catch(i){let s=window.getComputedStyle(e).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",dc(s))}else{let i=window.getComputedStyle(e).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",dc(i))}})()}_showMessage(e,n,r){let i=new t_;i.caption=n,i.text=r,i.isError="error"===e,this.set$({badgeIcon:`badge-${e}`,"*message":i})}_subEntry(e,n){let r=this._entry.subscribe(e,n);this._entrySubs.add(r)}_handleEntryId(e){var r;this._reset();let n=null==(r=this.uploadCollection)?void 0:r.read(e);this._entry=n,n&&(this._subEntry("validationErrorMsg",i=>{this._debouncedCalculateState(),this.$.errorText=i}),this._subEntry("uploadError",i=>{this._debouncedCalculateState(),this.$.errorText=null==i?void 0:i.message}),this._subEntry("isUploading",()=>{this._debouncedCalculateState()}),this._subEntry("uploadProgress",i=>{this.$.progressValue=i}),this._subEntry("fileName",i=>{this.$.itemName=i||n.getValue("externalUrl")||this.l10n("file-no-name")}),this._subEntry("fileSize",i=>{let s=this.getCssData("--cfg-max-local-file-size-bytes");s&&i&&i>s&&n.setValue("validationErrorMsg",this.l10n("files-max-size-limit-error",{maxFileSize:s}))}),this._subEntry("mimeType",i=>{if(!i)return;let s=this.getCssData("--cfg-img-only"),o=this.getCssData("--cfg-accept"),a=by([...s?To:[],o]);a.length>0&&!Dy(i,a)&&n.setValue("validationErrorMsg",this.l10n("file-type-not-allowed"))}),this._subEntry("isImage",i=>{let s=this.getCssData("--cfg-img-only");n.getValue("externalUrl")&&!n.getValue("uuid")&&s&&!i||s&&!i&&n.setValue("validationErrorMsg",this.l10n("images-only-accepted"))}),this._subEntry("externalUrl",i=>{this.$.itemName=n.getValue("fileName")||i||this.l10n("file-no-name")}),this._subEntry("uuid",i=>{this._debouncedCalculateState(),i&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",i=>{this.$.thumbUrl=i?`url(${i})`:""}),this.getCssData("--cfg-confirm-upload")||this.upload(),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",e=>{this._handleEntryId(e)}),this.sub("state",e=>{var n;this.set$({isFailed:e===nt.FAILED,isUploading:e===nt.UPLOADING,isFinished:e===nt.FINISHED,progressVisible:e===nt.UPLOADING,isEditable:this.$["--cfg-use-cloud-image-editor"]&&e===nt.FINISHED&&(null==(n=this._entry)?void 0:n.getValue("isImage"))}),e===nt.FAILED?this.$.badgeIcon="badge-error":e===nt.FINISHED&&(this.$.badgeIcon="badge-success"),e===nt.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}),this.onclick=()=>{Un.activeInstances.forEach(e=>{e===this?e.setAttribute("focused",""):e.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",e=>{!e||!this.isConnected||this.upload()}),Un.activeInstances.add(this)}destroyCallback(){super.destroyCallback(),Un.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){var e;super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),null==(e=this._observer)||e.disconnect()}upload(){var e=this;return _e(function*(){let n=e._entry;if(n.getValue("uuid")||n.getValue("isUploading")||n.getValue("validationErrorMsg"))return;let r=e.getOutputData(i=>!i.getValue("uuid"));Mt.emit(new cn({type:tt.UPLOAD_START,ctx:e.ctxName,data:r})),e._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("uploadError",null),n.setValue("validationErrorMsg",null),!n.getValue("file")&&n.getValue("externalUrl")&&(e.$.progressUnknown=!0);try{let i=new AbortController;n.setValue("abortController",i);let s=yield oc(n.getValue("file")||n.getValue("externalUrl"),R(E({},e.getUploadClientOptions()),{fileName:n.getValue("fileName"),onProgress:o=>{o.isComputable&&n.setValue("uploadProgress",100*o.value),e.$.progressUnknown=!o.isComputable},signal:i.signal}));n.setMultipleValues({fileInfo:s,isUploading:!1,fileName:s.name,fileSize:s.size,isImage:s.isImage,mimeType:s.mimeType,uuid:s.uuid,cdnUrl:s.cdnUrl}),n===e._entry&&e._debouncedCalculateState()}catch(i){n.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),n===e._entry&&e._debouncedCalculateState(),(null==i?void 0:i.isCancel)||n.setValue("uploadError",i)}})()}}Un.template='\n  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n      <lr-icon name="edit-file"></lr-icon>\n    </button>\n    <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n      <lr-icon name="remove-file"></lr-icon>\n    </button>\n    <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n      <lr-icon name="upload"></lr-icon>\n    </button>\n    <lr-progress-bar\n      class="progress-bar"\n      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"\n    >\n    </lr-progress-bar>\n  </div>\n',Un.activeInstances=new Set;let $x=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"historyTracked",!0),v(this,"activityType",j.activities.UPLOAD_LIST),v(this,"init$",R(E({},this.ctxInit),{doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.$["*uploadTrigger"]={},this._updateUploadsState()},onDone:()=>{this.cancelFlow()},onCancel:()=>{let n=this.getOutputData(r=>!!r.getValue("uuid"));Mt.emit(new cn({type:tt.REMOVE,ctx:this.ctxName,data:n})),this.uploadCollection.clearAll()}})),v(this,"cssInit$",{"--cfg-show-empty-list":0,"--cfg-multiple":1,"--cfg-multiple-min":0,"--cfg-multiple-max":0,"--cfg-confirm-upload":1,"--cfg-source-list":""}),v(this,"_debouncedHandleCollectionUpdate",Lr(()=>{this._updateUploadsState(),this._updateCountLimitMessage()},0))}_validateFilesCount(){var c,d;let n=!!this.getCssData("--cfg-multiple"),r=n?null!=(c=this.getCssData("--cfg-multiple-min"))?c:0:1,i=n?null!=(d=this.getCssData("--cfg-multiple-max"))?d:0:1,s=this.uploadCollection.size,o=!!r&&s<r,a=!!i&&s>i;return{passed:!o&&!a,tooFew:o,tooMany:a,min:r,max:i,exact:i===s}}_updateCountLimitMessage(){let n=this.uploadCollection.size,r=this._validateFilesCount();if(n&&!r.passed){let i=new t_,s=r.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";i.caption=this.l10n("files-count-limit-error-title"),i.text=this.l10n(s,{min:r.min,max:r.max,total:n}),i.isError=!0,this.set$({"*message":i})}}_updateUploadsState(){let n=this.uploadCollection.items(),i={total:n.length,succeed:0,uploading:0,failed:0};for(let f of n){let h=this.uploadCollection.read(f);h.getValue("uuid")&&!h.getValue("validationErrorMsg")&&(i.succeed+=1),h.getValue("isUploading")&&(i.uploading+=1),(h.getValue("validationErrorMsg")||h.getValue("uploadError"))&&(i.failed+=1)}let s=i.total===i.succeed+i.failed,{passed:o,tooMany:a,exact:l}=this._validateFilesCount();this.set$({doneBtnVisible:s,doneBtnEnabled:i.total>0&&o&&0===i.failed,uploadBtnVisible:!s&&i.total-i.succeed-i.uploading-i.failed>0&&o,addMoreBtnEnabled:0===i.total||!a&&!l,addMoreBtnVisible:!l||this.getCssData("--cfg-multiple"),headerText:this._getHeaderText(i)})}_getHeaderText(n){return(i=>this.l10n(`header-${i}`,{count:n[i]}))(n.uploading>0?"uploading":n.failed>0?"failed":n.succeed>0?"succeed":"total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.sub("--cfg-multiple",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-min",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-max",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",n=>{var r;0===(null==(r=this.uploadCollection)?void 0:r.size)&&!this.getCssData("--cfg-show-empty-list")&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observe(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",n=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),0===(null==n?void 0:n.length)&&!this.getCssData("--cfg-show-empty-list")&&this.historyBack()})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserve(this._debouncedHandleCollectionUpdate)}}return t.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n',t})(),Bx=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"activityType",j.activities.URL),v(this,"init$",R(E({},this.ctxInit),{importDisabled:!0,onUpload:()=>{this.uploadCollection.add({externalUrl:this.ref.input.value}),this.$["*currentActivity"]=j.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{this.set$({importDisabled:!n.target.value})}}))}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}return t.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="button"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n    ></button>\n  </div>\n',t})();const n_=()=>void 0!==navigator.permissions;let Vx=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"activityType",j.activities.CAMERA),v(this,"_unsubPermissions",null),v(this,"init$",R(E({},this.ctxInit),{video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:n_(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}})),v(this,"cssInit$",{"--cfg-camera-mirror":1}),v(this,"_onActivate",()=>{n_()&&this._subscribePermissions(),this._capture()}),v(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()}),v(this,"_handlePermissionsChange",()=>{this._capture()}),v(this,"_setPermissionsState",Lr(n=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized","granted"===n),"granted"===n?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===n?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}_subscribePermissions(){var n=this;return _e(function*(){try{(yield navigator.permissions.query({name:"camera"})).addEventListener("change",n._handlePermissionsChange)}catch(r){console.log("Failed to use permissions API. Fallback to manual request mode.",r),n._capture()}})()}_capture(){var n=this;return _e(function*(){let r={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};n._selectedCameraId&&(r.video.deviceId={exact:n._selectedCameraId}),n._canvas=document.createElement("canvas"),n._ctx=n._canvas.getContext("2d");try{n._setPermissionsState("prompt");let i=yield navigator.mediaDevices.getUserMedia(r);i.addEventListener("inactive",()=>{n._setPermissionsState("denied")}),n.$.video=i,n._capturing=!0,n._setPermissionsState("granted")}catch(i){n._setPermissionsState("denied"),n.$.originalErrorMessage=i.message}})()}_stopCapture(){var n;this._capturing&&(null==(n=this.$.video)||n.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let n=Date.now(),r=`camera-${n}.png`;this._canvas.toBlob(i=>{let s=new File([i],r,{lastModified:n,type:"image/png"});this.uploadCollection.add({file:s,fileName:r,fileSize:s.size,isImage:!0,mimeType:s.type}),this.set$({"*currentActivity":j.activities.UPLOAD_LIST})})}initCallback(){var n=()=>super.initCallback,r=this;return _e(function*(){n().call(r),r.registerActivity(r.activityType,{onActivate:r._onActivate,onDeactivate:r._onDeactivate}),r.sub("--cfg-camera-mirror",i=>{r.$.videoTransformCss=i?"scaleX(-1)":null});try{let s=(yield navigator.mediaDevices.enumerateDevices()).filter(o=>"videoinput"===o.kind).map((o,a)=>({text:o.label.trim()||`${r.l10n("caption-camera")} ${a+1}`,value:o.deviceId}));s.length>1&&(r.$.cameraSelectOptions=s,r.$.cameraSelectHidden=!1)}catch(i){}})()}}return t.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span>{{l10nMessage}}</span>\n      <span>{{originalErrorMessage}}</span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n',t})();class Ux extends ie{}let jx=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"activityType",j.activities.DETAILS),v(this,"pauseRender",!0),v(this,"init$",R(E({},this.ctxInit),{checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=j.activities.CLOUD_IMG_EDIT)}})),v(this,"cssInit$",{"--cfg-use-cloud-image-editor":0,"--cfg-use-local-image-editor":0})}showNonImageThumb(){let r=dc(window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),108,108);this.ref.filePreview.setImageUrl(r),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",n=>{if(!n)return;this._entrySubs?this._entrySubs.forEach(s=>{this._entrySubs.delete(s),s.remove()}):this._entrySubs=new Set,this.entry=n;let r=n.getValue("file");if(r){this._file=r;let s=Ku(this._file);s&&!n.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),s||this.showNonImageThumb()}let i=(s,o)=>{this._entrySubs.add(this.entry.subscribe(s,o))};i("fileName",s=>{this.$.fileName=s,this.$.onNameInput=()=>{let o=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:o}),this.entry.setValue("fileName",o)}}),i("fileSize",s=>{this.$.fileSize=Number.isFinite(s)?this.fileSizeFmt(s):this.l10n("file-size-unknown")}),i("uploadError",s=>{this.$.errorTxt=null==s?void 0:s.message}),i("externalUrl",s=>{!s||this.entry.getValue("uuid")||this.showNonImageThumb()}),i("cdnUrl",s=>{const o=this.$["--cfg-use-cloud-image-editor"]&&s&&this.entry.getValue("isImage");if(s&&this.ref.filePreview.clear(),this.set$({cdnUrl:s,cloudEditBtnHidden:!o}),s&&this.entry.getValue("isImage")){let a=xt(s,In("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(a))}})})}}return t.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span l10n="caption-edit-file"></span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <lr-tabs tab-list="tab-view, tab-details">\n      <div tab-ctx="tab-details" class="details">\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-name"></div>\n          <input\n            name="name-input"\n            ref="file_name_input"\n            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"\n            type="text"\n          />\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-size"></div>\n          <div>{{fileSize}}</div>\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="cdn-url"></div>\n          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>\n        </div>\n\n        <div>{{errorTxt}}</div>\n      </div>\n\n      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>\n    </lr-tabs>\n\n    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">\n      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">\n        <lr-icon name="edit"></lr-icon>\n        <span l10n="edit-image"></span>\n      </button>\n      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">\n        <lr-icon name="remove"></lr-icon>\n        <span l10n="remove-from-list"></span>\n      </button>\n      <div></div>\n      <button type="button" class="back-btn primary-btn" set="onclick: onBack">\n        <span l10n="ok"></span>\n      </button>\n    </div>\n  </div>\n',t})();class Hx{constructor(){v(this,"captionL10nStr","confirm-your-action"),v(this,"messageL10Str","are-you-sure"),v(this,"confirmL10nStr","yes"),v(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}let zx=(()=>{class t extends j{constructor(){super(...arguments),v(this,"activityType",j.activities.CONFIRMATION),v(this,"_defaults",new Hx),v(this,"init$",R(E({},this.ctxInit),{activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)}))}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{!n||this.set$({"*currentActivity":j.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}return t.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n',t})(),Gx=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{visible:!1,unknown:!1,value:0,"*commonProgress":0}))}initCallback(){super.initCallback(),this.uploadCollection.observe(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}}return t.template='\n  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>\n',t})(),Wx=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"_value",0),v(this,"_unknownMode",!1),v(this,"init$",R(E({},this.ctxInit),{width:0,opacity:0}))}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{void 0!==n&&(this._value=n,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)}),this.defineAccessor("unknown",n=>{this._unknownMode=n,this.ref.line.classList.toggle("progress--unknown",n)})}}return t.template=' <div ref="line" class="progress"></div> ',t})();const Sn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";let r_=(()=>{class t extends ne{constructor(){super(),v(this,"init$",R(E({},this.ctxInit),{checkerboard:!1,src:Sn}))}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${function Lx(t="#fff",e="rgba(0, 0, 0, .1)"){return cc(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="${t}" />\n    <rect x="0" y="0" width="10" height="10" fill="${e}" />\n    <rect x="10" y="10" width="10" height="10" fill="${e}" />\n  </svg>`)}()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Sn}}return t.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',t})();function i_(...t){return t.reduce((e,n)=>{if("string"==typeof n)return e[n]=!0,e;for(let r of Object.keys(n))e[r]=n[r];return e},{})}function Nt(...t){let e=i_(...t);return Object.keys(e).reduce((n,r)=>(e[r]&&n.push(r),n),[]).join(" ")}function jr(t,e){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),e)};return r.cancel=()=>{clearTimeout(n)},r}r_.bindAttributes({checkerboard:"checkerboard"});const pt={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0},s_=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function fc(t){return lc(...s_.filter(e=>null!=t[e]).map(e=>function Yx(t,e){if("number"==typeof e)return pt[t]!==e?`${t}/${e}`:"";if("boolean"==typeof e)return e&&pt[t]!==e?`${t}`:"";if("filter"===t){if(!e||pt[t]===e.amount)return"";let{name:n,amount:r}=e;return`${t}/${n}/${r}`}if("crop"===t){if(!e)return"";let{dimensions:n,coords:r}=e;return`${t}/${n.join("x")}/${r.join(",")}`}return""}(e,t[e])).filter(e=>!!e))}const o_=lc("format/auto","progressive/yes"),dn=([t])=>void 0!==t?Number(t):void 0,a_=()=>!0,Qx={enhance:dn,brightness:dn,exposure:dn,gamma:dn,contrast:dn,saturation:dn,vibrance:dn,warmth:dn,filter:([t,e])=>({name:t,amount:Number(e)}),mirror:a_,flip:a_,rotate:dn,crop:([t,e])=>({dimensions:t.split("x").map(Number),coords:e.split(",").map(Number)})},Zx=`\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon size="20" name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="${Sn}" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`,hc=["crop","sliders","filters"],Jx=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],e1=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],t1=["rotate","mirror","flip"],Hr={brightness:{zero:pt.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:pt.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:pt.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:pt.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:pt.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:pt.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:pt.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:pt.enhance,range:[0,100],keypointsNumber:1},filter:{zero:pt.filter,range:[0,100],keypointsNumber:1}};let pc=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",E(E({},this.ctxInit),function Xx(t){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Sn,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let e=t.querySelectorAll("img");for(let n of e){let r=n.src;n.src=Sn,n.src=r}t.$["*networkProblems"]=!1},"*on.apply":e=>{if(!e)return;let n=t.$["*originalUrl"],r=In(fc(e)),i=xt(n,In(r,"preview"));t.dispatchEvent(new CustomEvent("apply",{detail:{originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:e}})),t.remove()},"*on.cancel":()=>{t.remove(),t.dispatchEvent(new CustomEvent("cancel"))}}}(this))),v(this,"_debouncedShowLoader",jr(this._showLoader.bind(this),300)),v(this,"cssInit$",{"--cfg-cdn-cname":"https://ucarecdn.com"})}get ctxName(){return this.autoCtxName}_showLoader(n){this.$.showLoader=n}initCallback(){var n=this;return _e(function*(){if(n.$.cdnUrl){let r=function Cx(t){let e=new URL(t),{pathname:n}=e;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}(n.$.cdnUrl);n.$["*originalUrl"]=Wi(n.$.cdnUrl,r);let i=function wx(t){let e=Gy(t),n=new URL(e),r=n.pathname.indexOf("/-/");return-1===r?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>Hy(s))}(n.$.cdnUrl),s=function Kx(t){let e={};for(let n of t){let[r,...i]=n.split("/");if(!s_.includes(r))continue;const o=Qx[r](i);e[r]=o}return e}(i);n.$["*editorTransformations"]=s}else{if(!n.$.uuid)throw new Error("No UUID nor CDN URL provided");n.$["*originalUrl"]=Wi(n.localCtx.read("--cfg-cdn-cname"),n.$.uuid)}n.$["*faderEl"]=n.ref["fader-el"],n.$["*cropperEl"]=n.ref["cropper-el"],n.$["*imgContainerEl"]=n.ref["img-container-el"],n.classList.add("editor_ON"),n.sub("*networkProblems",r=>{n.$["presence.networkProblems"]=r,n.$["presence.modalCaption"]=!r}),n.ref["img-el"].addEventListener("load",r=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$.src!==Sn&&(n.$["*networkProblems"]=!1)}),n.ref["img-el"].addEventListener("error",r=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$["*networkProblems"]=!0}),n.sub("src",r=>{let i=n.ref["img-el"];i.src!==r&&(n._imgLoading=!0,i.src=r||Sn)}),n.sub("*tabId",r=>{n.ref["img-el"].className=Nt("image",{image_hidden_to_cropper:"crop"===r,image_hidden_effects:"crop"!==r})});try{fetch(xt(n.$["*originalUrl"],In("json"))).then(r=>r.json()).then(({width:r,height:i})=>{n.$["*imageSize"]={width:r,height:i}})}catch(r){r&&console.error("Failed to load image info",r)}})()}}return t.template=Zx,t})();pc.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl"});class n1 extends ie{constructor(){super(...arguments),v(this,"activityType",j.activities.CLOUD_IMG_EDIT),v(this,"init$",R(E({},this.ctxInit),{cdnUrl:null}))}initCallback(){super.initCallback(),this.bindCssData("--cfg-pubkey"),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",e=>{!e||(this.entry=e,this.entry.subscribe("cdnUrl",n=>{n&&(this.$.cdnUrl=n)}))})}handleApply(e){let n=e.detail;this.entry.setMultipleValues({cdnUrl:n.cdnUrl,cdnUrlModifiers:n.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){let e=new pc;e.classList.add("lr-cldtr-common"),e.setAttribute("cdn-url",this.$.cdnUrl),e.addEventListener("apply",r=>this.handleApply(r)),e.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(e)}unmountEditor(){this.innerHTML=""}}let An={};function o1({textColor:t,backgroundColor:e,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return(t=>Object.keys(t).reduce((n,r)=>{let i=t[r];return n+`${r}{${Object.keys(i).reduce((o,a)=>o+`${a}: ${i[a]};`,"")}}`},""))({body:{color:t,"background-color":e},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${e} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{background:`center no-repeat ${i}`},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}window.addEventListener("message",t=>{let e;try{e=JSON.parse(t.data)}catch(n){return}if((null==e?void 0:e.type)in An){let n=An[e.type];for(let[r,i]of n)t.source===r&&i(e)}});let l1=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"activityType",j.activities.EXTERNAL),v(this,"init$",R(E({},this.ctxInit),{activityIcon:"",activityCaption:"",counter:0,onDone:()=>{this.$["*currentActivity"]=j.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}})),v(this,"_iframe",null)}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${null==n?void 0:n[0].toUpperCase()}${null==n?void 0:n.slice(1)}`,activityIcon:n}),this.$.counter=0,this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()})}sendMessage(n){this._iframe.contentWindow.postMessage(JSON.stringify(n),"*")}handleFileSelected(n){var r=this;return _e(function*(){r.$.counter=r.$.counter+1;let{url:i,filename:s}=n;r.uploadCollection.add({externalUrl:i,fileName:s})})()}handleIframeLoad(n){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:o1(n)})}remoteUrl(){let n=this.getCssData("--cfg-pubkey"),r=(!1).toString(),{externalSourceType:i}=this.activityParams;return`https://social.uploadcare.com/window3/${i}?${function a1(t){let e=[];for(let[n,r]of Object.entries(t))null==r||"string"==typeof r&&0===r.length||e.push(`${n}=${encodeURIComponent(r)}`);return e.join("&")}({lang:"en",widget_version:"3.11.3",public_key:n,images_only:r,pass_window_open:!1,session_key:this.getCssData("--cfg-remote-tab-session-key")})}`}mountIframe(){let n=qu({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),function(t,e,n){t in An||(An[t]=[]),An[t].push([e,n])}("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n}unmountIframe(){this._iframe&&function(t,e){t in An&&(An[t]=An[t].filter(n=>n[0]!==e))}("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=void 0}}return t.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n',t})();class gc extends ne{setCurrentTab(e){if(e){[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===e?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===e?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",e=>{e&&e.split(",").map(r=>r.trim()).forEach(r=>{let i=qu({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",e=>{this.setCurrentTab(e)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}gc.bindAttributes({"tab-list":null,default:null}),gc.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';let u1=(()=>{class t extends ie{constructor(){super(...arguments),v(this,"processInnerHtml",!0),v(this,"init$",R(E({},this.ctxInit),{output:null,filesData:null})),v(this,"cssInit$",{"--cfg-group-output":0})}get dict(){return t.dict}initCallback(){var n=this;super.initCallback(),this.sub("output",r=>{if(r){if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:r}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this.innerHTML="";let i=r.groupData?[r.groupData.cdnUrl]:r.map(s=>s.cdnUrl);for(let s of i){let o=document.createElement("input");o.type="text",o.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,o.hidden=!0,o.value=s,this.appendChild(o)}}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(r)}},!1),this.sub(this.dict.SRC_CTX_KEY,function(){var r=_e(function*(i){if(!i)return n.$.output=null,void(n.$.filesData=null);if(n.$.filesData=i,n.getCssData("--cfg-group-output")||n.hasAttribute(n.dict.GROUP_ATTR)){let s=i.map(a=>a.uuid),o=yield Vy(s,E({},n.getUploadClientOptions()));n.$.output={groupData:o,files:i}}else n.$.output=i});return function(i){return r.apply(this,arguments)}}(),!1)}}return t.dict={SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name"},t})();class c1 extends j{}let d1=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{currentText:"",options:[],selectHtml:"",onSelect:n=>{var r;n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=(null==(r=this.$.options.find(i=>i.value==this.value))?void 0:r.text)||"",this.dispatchEvent(new Event("change"))}}))}initCallback(){super.initCallback(),this.sub("options",n=>{var i;this.$.currentText=(null==(i=null==n?void 0:n[0])?void 0:i.text)||"";let r="";null==n||n.forEach(s=>{r+=`<option value="${s.value}">${s.text}</option>`}),this.$.selectHtml=r})}}return t.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n',t})();let u_=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{src:"",ppIcon:"play",fsIcon:"fullscreen-on",volIcon:"unmute",capIcon:"captions-off",totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}}))}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=>{t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()})(this)}toggleCaptions(){"captions-off"===this.$.capIcon?(this.$.capIcon="captions",this._video.textTracks[0].mode="showing",window.localStorage.setItem(t.is+":captions","1")):(this.$.capIcon="captions-off",this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(t.is+":captions"))}toggleSound(){"unmute"===this.$.volIcon?(this.$.volIcon="mute",this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon="unmute",this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(t.is+":volume",n),this._video.volume=n?n/100:0}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s="src"===i?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(1e3*Math.round(n));return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(t.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){var n=this;super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon="pause",this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon="play",this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",i=>{console.log(i),this.$.fsIcon=document.fullscreenElement===this?"fullscreen-off":"fullscreen-on"}),this.sub("src",i=>{if(!i)return;let s=this._getUrl(i);this._video.src=s}),this.sub("video",function(){var i=_e(function*(s){if(!s)return;let o=yield(yield window.fetch(n._getUrl(s))).json();o.poster&&(n._video.poster=n._getUrl(o.poster));let a="";null==o||o.sources.forEach(l=>{a+=`<source ${n._desc2attrs(l)} />`}),o.tracks&&(o.tracks.forEach(l=>{a+=`<track ${n._desc2attrs(l)} />`}),n.$.hasSubtitles=!0),n._video.innerHTML+=a,n._initTracks(),console.log(o)});return function(s){return i.apply(this,arguments)}}()),this._video.addEventListener("loadedmetadata",i=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",i=>{let s=Math.round(this._video.currentTime/this._video.duration*100);this.$.progressCssWidth=s+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let r=window.localStorage.getItem(t.is+":volume");if(r){let i=parseFloat(r);this.setVolume(i),this.$.volumeValue=i}}}return t.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',t})();u_.bindAttributes({video:"video",src:"src"});class c_ extends ne{constructor(){super(...arguments),v(this,"pauseRender",!0)}shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden","");let e=this.getAttribute("css-src");if(e){this.renderShadow=!0,this.attachShadow({mode:"open"});let n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,n.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.appendChild(n)}else this.render(),this.removeAttribute("hidden"),this.shadowReadyCallback()}}class d_ extends ne{}v(d_,"template",'\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      >Powered by Uploadcare</a\n    >\n  ');class mc extends c_{constructor(){super(...arguments),v(this,"ctxInit",my(this)),v(this,"ctxOwner",!0),v(this,"_template",null)}static set template(e){this._template=e+"<slot></slot>"}static get template(){return this._template}}let h1=(()=>{class t extends mc{}return t.template="\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor></lr-cloud-image-editor>\n  </lr-modal>\n\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar-common></lr-progress-bar-common>\n",t})(),p1=(()=>{class t extends mc{constructor(){super(...arguments),v(this,"pauseRender",!0),v(this,"init$",R(E({},this.ctxInit),{selectClicked:()=>{this.ref.uBlock.openSystemDialog()}}))}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||j.activities.START_FROM)}),this.sub("*uploadList",r=>{0===(null==r?void 0:r.length)&&(this.$["*currentActivity"]=n.initActivity||j.activities.START_FROM)})}}return t.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-message-box></lr-message-box>\n',t})(),g1=(()=>{class t extends mc{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{dropAreaHidden:!1}))}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||j.activities.START_FROM)}),window.customElements.whenDefined(n.tagName.toLowerCase()).then(()=>{1===n.sourceList.length&&!n.sourceList.includes(ie.sourceTypes.LOCAL)&&(this.$.dropAreaHidden=!0)})}}return t.template=' <lr-start-from>\n    <lr-drop-area set="@hidden: dropAreaHidden" with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor></lr-cloud-image-editor>',t})();const Rt=1.5,Fo=100/3;function zr(t,e){for(let n in e)t.setAttributeNS(null,n,e[n].toString())}function Ft(t,e={}){let n=document.createElementNS("http://www.w3.org/2000/svg",t);return zr(n,e),n}function y1(t,e){let{x:n,y:r,width:i,height:s}=t,o=e.includes("w")?0:1,a=e.includes("n")?0:1,l=[-1,1][o],u=[-1,1][a],c=[n+o*i+Rt*l,r+a*s+Rt*u-24*u],d=[n+o*i+Rt*l,r+a*s+Rt*u],f=[n+o*i-24*l+Rt*l,r+a*s+Rt*u];return{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]} L ${f[0]} ${f[1]}`,center:d}}function _1(t,e){let c,d,{x:n,y:r,width:i,height:s}=t,o=["n","s"].includes(e)?.5:{w:0,e:1}[e],a=["w","e"].includes(e)?.5:{n:0,s:1}[e],l=[-1,1][o],u=[-1,1][a];return["n","s"].includes(e)?(c=[n+o*i-17,r+a*s+Rt*u],d=[n+o*i+17,r+a*s+Rt*u]):(c=[n+o*i+Rt*l,r+a*s-17],d=[n+o*i+Rt*l,r+a*s+17]),{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]}`,center:[d[0]-(d[0]-c[0])/2,d[1]-(d[1]-c[1])/2]}}function h_(t,e){let{x:n}=t,{y:r}=t;return t.x<e.x?n=e.x:t.x+t.width>e.x+e.width&&(n=e.x+e.width-t.width),t.y<e.y?r=e.y:t.y+t.height>e.y+e.height&&(r=e.y+e.height-t.height),R(E({},t),{x:n,y:r})}function p_(t,[e,n],r){let{x:i,y:s,width:o,height:a}=t;if(r.includes("n")){let l=a;a=Math.max(n,a),s=s+l-a}if(r.includes("s")&&(a=Math.max(n,a)),r.includes("w")){let l=o;o=Math.max(e,o),i=i+l-o}return r.includes("e")&&(o=Math.max(e,o)),{x:i,y:s,width:o,height:a}}let E1=(()=>{class t extends ne{constructor(){super(),v(this,"init$",R(E({},this.ctxInit),{dragging:!1})),this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(n){let r=this.$["*imageBox"];if(!r)return;if(""===n&&r.height<=82&&r.width<=82)return!0;let i=r.height<=82&&(n.includes("n")||n.includes("s")),s=r.width<=82&&(n.includes("e")||n.includes("w"));return i||s}_createBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n,a=this.ref["svg-el"],l=Ft("mask",{id:"backdrop-mask"}),u=Ft("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=Ft("rect",{x:r,y:i,width:s,height:o,fill:"black"});l.appendChild(u),l.appendChild(c);let d=Ft("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});a.appendChild(d),a.appendChild(l),this._backdropMask=l,this._backdropMaskInner=c}_resizeBackdrop(){!this._backdropMask||(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask.style.display="block"}))}_updateBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n;zr(this._backdropMaskInner,{x:r,y:i,width:s,height:o})}_updateFrame(){let n=this.$["*cropBox"];if(n){for(let i of Object.values(this._frameThumbs)){let{direction:s,pathNode:o,interactionNode:a,groupNode:l}=i,c=2===s.length;if(""===s){let{x:f,y:h,width:p,height:m}=n,y=[f+p/2,h+m/2];zr(a,{r:Math.min(p,m)/3,cx:y[0],cy:y[1]})}else{let{d:f,center:h}=c?y1(n,s):_1(n,s);zr(a,{cx:h[0],cy:h[1]}),zr(o,{d:f})}let d=this._shouldThumbBeDisabled(s);l.setAttribute("class",Nt("thumb",{"thumb--hidden":d,"thumb--visible":!d}))}zr(this._frameGuides,{x:n.x-.5,y:n.y-.5,width:n.width+1,height:n.height+1})}}_createThumbs(){let n={};for(let r=0;r<3;r++)for(let i=0;i<3;i++){let s=`${["n","","s"][r]}${["w","","e"][i]}`,o=Ft("g");o.classList.add("thumb"),o.setAttribute("with-effects","");let a=Ft("circle",{r:25.5,fill:"transparent"}),l=Ft("path",{stroke:"currentColor",fill:"none","stroke-width":3});o.appendChild(l),o.appendChild(a),n[s]={direction:s,pathNode:l,interactionNode:a,groupNode:o},a.addEventListener("pointerdown",this._handlePointerDown.bind(this,s))}return n}_createGuides(){let n=Ft("svg"),r=Ft("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":1,"stroke-opacity":.5});n.appendChild(r);for(let i=1;i<=2;i++){let s=Ft("line",{x1:Fo*i+"%",y1:"0%",x2:Fo*i+"%",y2:"100%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}for(let i=1;i<=2;i++){let s=Ft("line",{x1:"0%",y1:Fo*i+"%",x2:"100%",y2:Fo*i+"%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}return n.classList.add("guides","guides--semi-hidden"),n}_createFrame(){let n=this.ref["svg-el"],r=document.createDocumentFragment(),i=this._createGuides();r.appendChild(i);let s=this._createThumbs();for(let{groupNode:o}of Object.values(s))r.appendChild(o);n.appendChild(r),this._frameThumbs=s,this._frameGuides=i}_handlePointerDown(n,r){let i=this._frameThumbs[n];if(this._shouldThumbBeDisabled(n))return;let s=this.$["*cropBox"],{x:o,y:a}=this.ref["svg-el"].getBoundingClientRect(),l=r.x-o,u=r.y-a;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[l,u],this._dragStartCrop=E({},s)}_handlePointerUp_(n){this._updateCursor(),this.$.dragging&&(n.stopPropagation(),n.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(n){if(!this.$.dragging)return;n.stopPropagation(),n.preventDefault();let r=this.ref["svg-el"],{x:i,y:s}=r.getBoundingClientRect(),l=n.x-i-this._dragStartPoint[0],u=n.y-s-this._dragStartPoint[1],{direction:c}=this._draggingThumb,d=this.$["*imageBox"],f=this._dragStartCrop;""===c?(f=function b1(t,[e,n]){return R(E({},t),{x:t.x+e,y:t.y+n})}(f,[l,u]),f=h_(f,d)):(f=function D1(t,[e,n],r){let{x:i,y:s,width:o,height:a}=t;return r.includes("n")&&(s+=n,a-=n),r.includes("s")&&(a+=n),r.includes("w")&&(i+=e,o-=e),r.includes("e")&&(o+=e),{x:i,y:s,width:o,height:a}}(f,[l,u],c),f=function C1(t,e){let n=Math.max(t.x,e.x),r=Math.min(t.x+t.width,e.x+e.width),i=Math.max(t.y,e.y);return{x:n,y:i,width:r-n,height:Math.min(t.y+t.height,e.y+e.height)-i}}(f,d)),f=p_(f,[Math.min(d.width,82),Math.min(d.height,82)],c),Object.values(f).every(p=>Number.isFinite(p)&&p>=0)?this.$["*cropBox"]=f:console.error("CropFrame is trying to create invalid rectangle",{payload:f})}_handleSvgPointerMove_(n){let r=Object.values(this._frameThumbs).find(i=>{if(this._shouldThumbBeDisabled(i.direction))return!1;let o=i.groupNode.getBoundingClientRect();return function w1(t,[e,n]){return t.x<=e&&e<=t.x+t.width&&t.y<=n&&n<=t.y+t.height}({x:o.x,y:o.y,width:o.width,height:o.height},[n.x,n.y])});this._hoverThumb=r,this._updateCursor()}_updateCursor(){let n=this._hoverThumb;this.ref["svg-el"].style.cursor=n?function v1(t){return""===t?"move":["e","w"].includes(t)?"ew-resize":["n","s"].includes(t)?"ns-resize":["nw","se"].includes(t)?"nwse-resize":"nesw-resize"}(n.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(n){Object.values(this._frameThumbs).map(({groupNode:r})=>r).forEach(r=>{r.setAttribute("class",Nt("thumb",{"thumb--hidden":!n,"thumb--visible":n}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",n=>{!n||(this._guidesHidden=n.height<=82||n.width<=82,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",n=>{this._frameGuides.setAttribute("class",Nt({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&n,"guides--semi-hidden":!this._guidesHidden&&!n}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}return t.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ',t})(),yc=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{active:!1,title:"",icon:"","on.click":null}))}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Nt({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}return t.template='\n  <div class="before"></div>\n  <lr-icon size="20" set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n',t})();class _c extends yc{initCallback(){super.initCallback(),this.defineAccessor("operation",e=>{!e||(this._operation=e,this.$.icon=e)}),this.$["on.click"]=e=>{let n=this.$["*cropperEl"].getValue(this._operation),r=function I1(t,e){return"rotate"===t?function T1(t){let e=t+90;return e=e>=360?0:e,e}(e):["mirror","flip"].includes(t)?!e:null}(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const Mn="original";let S1=(()=>{class t extends ne{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}}))}setOperation(n,r){this._controlType="filter"===n?"filter":"color_operation",this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Mn?void 0:this.$.value,filter:this._filter===Mn?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=Hr[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if("filter"===this._controlType){let a=s;if(o){let{name:l,amount:u}=o;a=l===this._filter?u:s}this.$.value=a,this.$.defaultValue=a}if("color_operation"===this._controlType){let a=void 0!==o?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;n="filter"===this._controlType?this._filter===Mn?null:{name:this._filter,amount:this.$.value}:this.$.value;let r=R(E({},this.$["*editorTransformations"]),{[this._operation]:n});this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{this.$["*operationTooltip"]=`${this._filter||this._operation} ${n}`})}}return t.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n',t})();function vc(t){let e=new Image;return{promise:new Promise((i,s)=>{e.src=t,e.onload=i,e.onerror=s}),image:e,cancel:()=>{0===e.naturalWidth&&(e.src=Sn)}}}function bc(t){let e=[];for(let s of t){let o=vc(s);e.push(o)}let n=e.map(s=>s.image);return{promise:Promise.allSettled(e.map(s=>s.promise)),images:n,cancel:()=>{e.forEach(s=>{s.cancel()})}}}let Dc=(()=>{class t extends yc{constructor(){super(...arguments),v(this,"init$",R(E({},this.ctxInit),{active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null}))}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",a=E({},this.$["*editorTransformations"]);return a[this._operation]=this._filter!==Mn?{name:this._filter,amount:100}:void 0,xt(this._originalUrl,In(o_,fc(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=vc(s);this._cancelPreload=l,a.catch(u=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:u})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Mn,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._originalUrl=this.$["*originalUrl"],this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;this.ref["icon-el"].style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){var n;super.destroyCallback(),null==(n=this._observer)||n.disconnect(),this._cancelPreload&&this._cancelPreload()}}return t.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n',t})();class Cc extends yc{constructor(){super(...arguments),v(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=e=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",e=>{e&&(this._operation=e,this.$.icon=e,this.$.title=this.l10n(e))}),this.sub("*editorTransformations",e=>{if(!this._operation)return;let{zero:n}=Hr[this._operation],r=e[this._operation];this.$.active=void 0!==r&&r!==n})}}const g_=window.ResizeObserver;function wc(t,e,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(e*i),3e3),o=i>=2?"lightest":"normal";return xt(t,In(o_,fc(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function Po(t,e,n){return Math.min(Math.max(t,e),n)}function Ki({width:t,height:e},n){let r=n/90%2!=0;return{width:r?e:t,height:r?t:e}}let x1=(()=>{class t extends ne{constructor(){super(),v(this,"init$",R(E({},this.ctxInit),{image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}})),this._commitDebounced=jr(this._commit.bind(this),300),this._handleResizeDebounced=jr(this._handleResize.bind(this),10)}_handleResize(){!this.isConnected||(this._initCanvas(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let r=function A1(t,e){let n={};for(let r of e){let i=t[r];(t.hasOwnProperty(r)||void 0!==i)&&(n[r]=i)}return n}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),i=E(E({},this.$["*operations"]),r);this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o_width=this.offsetWidth,o_height=this.offsetHeight,a=Ki({width:n.naturalWidth,height:n.naturalHeight},s);if(a.width>o_width-2*r||a.height>o_height-2*r){let l=a.width/a.height;if(l>o_width/o_height){let c=o_width-2*r,d=c/l;this.$["*imageBox"]={x:0+r,y:r+(o_height-2*r)/2-d/2,width:c,height:d}}else{let c=o_height-2*r,d=c*l;this.$["*imageBox"]={x:r+(o_width-2*r)/2-d/2,y:0+r,width:d,height:c}}}else{let{width:l,height:u}=a;this.$["*imageBox"]={x:r+(o_width-2*r)/2-l/2,y:r+(o_height-2*r)/2-u/2,width:l,height:u}}}_alignCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop;if(o){let{dimensions:[l,u],coords:[c,d]}=o,{width:f,x:h,y:p}=this.$["*imageBox"],{width:m}=Ki(this._imageSize,s),y=f/m;n={x:h+c*y,y:p+d*y,width:l*y,height:u*y}}else n={x:r.x,y:r.y,width:r.width,height:r.height};n=p_(n,[Math.min(r.width,82),Math.min(r.height,82)],"se"),n=h_(n,r),this.$["*cropBox"]=n}_drawImage(){let n=this.$.image,r=this.$["*imageBox"],i=this.$["*operations"],{mirror:s,flip:o,rotate:a}=i,l=this._ctx,u=Ki({width:r.width,height:r.height},a);l.save(),l.translate(r.x+r.width/2,r.y+r.height/2),l.rotate(a*Math.PI*-1/180),l.scale(s?-1:1,o?-1:1),l.drawImage(n,-u.width/2,-u.height/2,u.width,u.height),l.restore()}_draw(){if(!this._isActive||!this.$.image)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Nt({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_calculateDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:u}=Ki(this._imageSize,s),{width:c,height:d}=n,h=a/u;return[Po(Math.round(c/(o/l)),1,l),Po(Math.round(d/h),1,u)]}_calculateCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:u}=r,{width:c,height:d}=Ki(this._imageSize,s),{x:f,y:h}=n,p=o/c,m=a/d,y=this._calculateDimensions(),D={dimensions:y,coords:[Po(Math.round((f-l)/p),0,c-y[0]),Po(Math.round((h-u)/m),0,d-y[1])]};if(function M1(t){return!t||[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(t))}(D))return y[0]!==c||y[1]!==d?D:void 0;console.error("Cropper is trying to create invalid crop object",{payload:D})}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._calculateCrop(),l=R(E({},this.$["*editorTransformations"]),{crop:o,rotate:r,mirror:i,flip:s});this.$["*editorTransformations"]=l}setValue(n,r){console.log(`Apply cropper operation [${n}=${r}]`),this.$["*operations"]=R(E({},this.$["*operations"]),{[n]:r}),this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}activate(n,{fromViewer:r}){var i=this;return _e(function*(){if(!i._isActive){i._isActive=!0,i._imageSize=n,i.removeEventListener("transitionend",i._reset),i._initCanvas();try{i.$.image=yield i._waitForImage(i.$["*originalUrl"],i.$["*editorTransformations"]),i._syncTransformations(),i._alignImage(),i._alignCrop(),i._draw(),i._animateIn({fromViewer:r})}catch(s){console.error("Failed to activate cropper",{error:s})}}})()}deactivate(){!this._isActive||(this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Nt({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}))}_transitionToCrop(){let n=this._calculateDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r=R(E({},r),{crop:void 0,rotate:void 0,flip:void 0,mirror:void 0});let s=this.proxyUrl(wc(n,i,r)),{promise:o,cancel:a,image:l}=vc(s),u=this._handleImageLoading(s);return l.addEventListener("load",u,{once:!0}),l.addEventListener("error",u,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(c=>(console.error("Failed to load image",{error:c}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{var s;(null==(s=null==i?void 0:i.get(r))?void 0:s.has(n))&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this._observer=new g_(()=>{this._isActive&&this.$.image&&this._handleResizeDebounced()}),this._observer.observe(this),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",n=>{this.$.image&&this._commitDebounced()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){var n;super.destroyCallback(),null==(n=this._observer)||n.disconnect()}}return t.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n',t})();function m_(t,e,n){let r=Array(n);for(let i=--n;i>=0;i--)r[i]=Math.ceil((i*e+(n-i)*t)/n);return r}function y_(t,e){let n=Hr[t].keypointsNumber,{range:r,zero:i}=Hr[t];return[...new Set([...m_(r[0],i,n+1),...m_(i,r[1],n+1),i,e])].sort((s,o)=>s-o)}class P1 extends ne{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=jr(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(e){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(e)||(r.set(n,r.get(n).set(e,!0)),this.$["*loadingOperations"]=r),()=>{var i;(null==(i=null==r?void 0:r.get(n))?void 0:i.has(e))&&(r.get(n).delete(e),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let e of this._keypoints){let{image:n}=e;n&&(n.style.opacity=e.opacity.toString(),n.style.zIndex=e.zIndex.toString())}})}_imageSrc({url:e=this._url,filter:n=this._filter,operation:r,value:i}={}){let s=E({},this._transformations);return r&&(s[r]=n?{name:n,amount:i}:i),this.proxyUrl(wc(e,this.offsetWidth,s))}_constructKeypoint(e,n){return{src:this._imageSrc({operation:e,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(e,n){return this._operation===e&&this._filter===n}_addKeypoint(e,n,r){let i=()=>!this._isSame(e,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(e,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,u=l.findIndex(d=>d.value>r),c=u<l.length?l[u].image:null;!this._container||c&&!this._container.contains(c)||(l.splice(u,0,s),this._container.insertBefore(o,c),this._update(e,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(e){e="string"==typeof e?parseInt(e,10):e,this._update(this._operation,e),this._addKeypointDebounced(this._operation,this._filter,e)}_update(e,n){this._operation=e,this._value=n;let{zero:r}=Hr[e],i=this._keypoints.map(a=>a.value),s=function R1(t,e,n){let r=function N1(t){return t.reduce((e,n,r)=>r<t.length-1?[...e,[n,t[r+1]]]:e,[])}(t).find(([i,s])=>i<=e&&e<=s);return t.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(e-r[0])/s;return r[0]===i?e>n?1:1-o:r[1]===i?e>=n?o:1:0})}(i,n,r),o=function F1(t,e){return t.map((n,r)=>n<e?t.length-r:r)}(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let e=new Image;return e.classList.add("fader-image","fader-image--preview"),e.style.opacity="0",e}_initNodes(){var e=this;return _e(function*(){let n=document.createDocumentFragment();e._previewImage=e._previewImage||e._createPreviewImage(),!e.contains(e._previewImage)&&n.appendChild(e._previewImage);let r=document.createElement("div");n.appendChild(r);let i=e._keypoints.map(c=>c.src),{images:s,promise:o,cancel:a}=bc(i);s.forEach(c=>{let d=e._handleImageLoading(c.src);c.addEventListener("load",d),c.addEventListener("error",d)}),e._cancelLastImages=()=>{a(),e._cancelLastImages=void 0};let l=e._operation,u=e._filter;yield o,e._isActive&&e._isSame(l,u)&&(e._container&&e._container.remove(),e._container=r,e._keypoints.forEach((c,d)=>{let f=s[d];f.classList.add("fader-image"),c.image=f,e._container.appendChild(f)}),e.appendChild(n),e._flush())})()}setTransformations(e){if(this._transformations=e,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:e,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=y_(r,i).map(l=>this._imageSrc({url:e,filter:n,operation:r,value:l})),{cancel:a}=bc(o);this._cancelBatchPreload=a}_setOriginalSrc(e){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===e)return n.style.opacity="1",n.style.transform="scale(1)",void(this.className=Nt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));n.style.opacity="0";let r=this._handleImageLoading(e);n.addEventListener("error",r,{once:!0}),n.src=e,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Nt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:e,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=e,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,"number"!=typeof r&&!i){let a=this._imageSrc({operation:n,value:r});return this._setOriginalSrc(a),void(this._container&&this._container.remove())}this._keypoints=y_(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:e=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),e&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Nt({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}let O1=(()=>{class t extends ne{initCallback(){super.initCallback(),this.addEventListener("wheel",n=>{n.preventDefault();let{deltaY:r,deltaX:i}=n;Math.abs(i)>1?this.scrollLeft+=i:this.scrollLeft+=r})}}return t.template=" <slot></slot> ",t})();class __ extends ne{constructor(){super(),v(this,"_updateInfoTooltip",jr(()=>{var i,s;let e=this.$["*editorTransformations"],n="",r=!1;if("filters"===this.$["*tabId"])if(r=!0,this.$["*currentFilter"]&&(null==(i=null==e?void 0:e.filter)?void 0:i.name)===this.$["*currentFilter"]){let o=(null==(s=null==e?void 0:e.filter)?void 0:s.amount)||100;n=this.l10n(this.$["*currentFilter"])+" "+o}else n=this.l10n(Mn);else"sliders"===this.$["*tabId"]&&this.$["*currentOperation"]&&(r=!0,n=this.$["*currentOperation"]+" "+((null==e?void 0:e[this.$["*currentOperation"]])||Hr[this.$["*currentOperation"]].zero));r&&(this.$["*operationTooltip"]=n),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",r)},0)),this.init$=R(E({},this.ctxInit),{"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Mn,"*currentOperation":null,"*tabId":"crop",showLoader:!1,filters:e1,colorOperations:Jx,cropOperations:t1,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabContent.crop":!1,"presence.tabContent.sliders":!1,"presence.tabContent.filters":!1,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"on.cancel":e=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":e=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":e=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":e=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":e=>{let n=e.currentTarget.getAttribute("data-id");this._activateTab(n,{fromViewer:!1})}}),this._debouncedShowLoader=jr(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,"sliders"===this.$["*tabId"]&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(e){let n=Cc.is&&new Cc;return n.operation=e,n}_createFilterControl(e){let n=Dc.is&&new Dc;return n.filter=e,n}_createToggleControl(e){let n=_c.is&&new _c;return n.operation=e,n}_renderControlsList(e){let n=this.ref[`controls-list-${e}`],r=document.createDocumentFragment();"crop"===e?this.$.cropOperations.forEach(i=>{let s=this._createToggleControl(i);r.appendChild(s)}):"filters"===e?[Mn,...this.$.filters].forEach(i=>{let s=this._createFilterControl(i);r.appendChild(s)}):"sliders"===e&&this.$.colorOperations.forEach(i=>{let s=this._createOperationControl(i);r.appendChild(s)}),r.childNodes.forEach((i,s)=>{s===r.childNodes.length-1&&i.classList.add("controls-list_last-item")}),n.innerHTML="",n.appendChild(r)}_activateTab(e,{fromViewer:n}){this.$["*tabId"]=e,"crop"===e?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:n})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:n}),this.$["*cropperEl"].deactivate());for(let r of hc){let i=r===e;this.ref[`tab-toggle-${r}`].active=i,i?(this._renderControlsList(e),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=i}}_unmountTabControls(e){let n=this.ref[`controls-list-${e}`];n&&(n.innerHTML="")}_syncTabIndicator(){this.ref["tabs-indicator"].style.transform=`translateX(${this.ref[`tab-toggle-${this.$["*tabId"]}`].offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.proxyUrl(wc(this.$["*originalUrl"],this.$["*imgContainerEl"].offsetWidth,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:r}=bc([n]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(e){this.$.showLoader=e}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",e=>{e&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",e=>{var r;let n=null==(r=null==e?void 0:e.filter)?void 0:r.name;this.$["*currentFilter"]!==n&&(this.$["*currentFilter"]=n)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",e=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",e=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(e)}),this.sub("*loadingOperations",e=>{let n=!1;for(let[,r]of e.entries()){if(n)break;for(let[,i]of r.entries())if(i){n=!0;break}}this._debouncedShowLoader(n)}),this.sub("*showSlider",e=>{this.$["presence.subToolbar"]=e,this.$["presence.mainToolbar"]=!e}),this._updateInfoTooltip()}}__.template=`\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">${hc.map(function $1(t){return`\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${t}; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-${t}"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `}).join("")}</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <div class="tab-toggles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ${hc.map(function L1(t){return`\n    <lr-btn-ui\n      theme="boring"\n      ref="tab-toggle-${t}"\n      data-id="${t}"\n      icon="${t}"\n      tabindex="0"\n      set="onclick: on.clickTab;"\n    >\n    </lr-btn-ui>\n  `}).join("")}\n        </div>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;class Ec extends ne{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$=R(E({},this.ctxInit),{text:"",icon:"",iconCss:this._iconCss(),theme:null}),this.defineAccessor("active",e=>{e?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Nt("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",e=>{this._iconSingle=!this.$.text,this._iconHidden=!e,this.$.iconCss=this._iconCss()}),this.sub("theme",e=>{"custom"!==e&&(this.className=e)}),this.sub("text",e=>{this._iconSingle=!1}),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(e){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Ec.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),Ec.template='\n  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>\n  <div class="text">{{text}}</div>\n';let B1=(()=>{class t extends ne{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let n=this.ref["line-el"];n.style.transition="initial",n.style.opacity="0",n.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",n=>{"boolean"==typeof n&&(n?this._start():this._stop())})}_start(){this._active=!0;let{width:n}=this.getBoundingClientRect(),r=this.ref["line-el"];r.style.transition="transform 1s",r.style.opacity="1",r.style.transform=`translateX(${n}px)`,r.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}return t.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n',t})();let V1=(()=>{class t extends ne{constructor(){super(),this._visible=!1,this._visibleStyle="visible",this._hiddenStyle="hidden",this._externalTransitions=!1,this.defineAccessor("styles",n=>{!n||(this._externalTransitions=!0,this._visibleStyle=n.visible,this._hiddenStyle=n.hidden)}),this.defineAccessor("visible",n=>{"boolean"==typeof n&&(this._visible=n,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",function qx(t,...e){let n=i_(...e);for(let r of Object.keys(n))t.classList.toggle(r,n[r])}(this,{transition:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add("transition"),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}return t.template=" <slot></slot> ",t})(),U1=(()=>{class t extends ne{constructor(){super(),v(this,"init$",R(E({},this.ctxInit),{disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}})),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{!r||(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{!r||(this.$.onChange=r)}),this._updateSteps(),this._observer=new g_(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;this._zeroDotEl.style.opacity=n===this._zero?"0":"0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),u=document.createElement("div");l.className="minor-step",u.className="border-step",a.appendChild(u);for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());let c=document.createElement("div");c.className="zero-dot",a.appendChild(c),this._zeroDotEl=c,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){var n;null==(n=this._observer)||n.disconnect()}}return t.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n',t})();function Tc(t){for(let e in t){let n=[...e].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),t[e].reg&&t[e].reg(n)}}const Ic="__lr-blocks__";function j1(t){return Sc.apply(this,arguments)}function Sc(){return Sc=_e(function*(t,e=!1){return new Promise((n,r)=>{if("object"!=typeof document)return void n(null);if("object"==typeof window&&window[Ic])return void n(window[Ic]);let i=document.createElement("script");i.type="module",i.src=t,i.onerror=()=>{r()},i.onload=()=>{let s=window[Ic];e&&Tc(s),n(s)},document.head.appendChild(i)})}),Sc.apply(this,arguments)}function H1(t,e){if(1&t&&Rl(0,"img",5),2&t){const n=e.$implicit;Bl("src","https://ucarecdn.com/",n.uuid,"/",n.cdnUrlModifiers||"","-/preview/-/scale_crop/400x400/",Pa)}}Tc(Wr);let z1=(()=>{class t{constructor(){this.files=[]}handleUploaderEvent(n){const{data:r}=n.detail;this.files=r}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Yo({type:t,selectors:[["app-root"]],decls:5,vars:1,consts:[[1,"wrapper"],["css-src","https://unpkg.com/@uploadcare/blocks@0.15.2/web/file-uploader-regular.min.css",1,"uploader-cfg"],["use-event","","hidden","",1,"uploader-cfg",3,"lr-data-output"],[1,"output"],["width","200",3,"src",4,"ngFor","ngForOf"],["width","200",3,"src"]],template:function(n,r){1&n&&(Ei(0,"div",0)(1,"lr-file-uploader-regular",1)(2,"lr-data-output",2),Ol("lr-data-output",function(s){return r.handleUploaderEvent(s)}),Ti()(),Ei(3,"div",3),function zh(t,e,n,r,i,s,o,a){const l=_(),u=H(),c=t+J,d=u.firstCreatePass?function Cw(t,e,n,r,i,s,o,a,l){const u=e.consts,c=dr(e,t,4,o||null,gn(u,a));dl(e,n,c,gn(u,l)),ps(e,c);const d=c.tViews=Bs(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,s,o):u.data[c];Ot(d,!1);const f=l[P].createComment("");Ps(u,l,f,d),xe(f,l),Vs(l,l[c]=lh(f,l,f,d)),ls(d)&&ul(u,l,d),null!=o&&cl(l,d,a)}(4,H1,1,2,"img",4),Ti()()),2&n&&(function Of(t){Lf(H(),_(),Pe()+t,!1)}(4),xl("ngForOf",r.files))},directives:[Vm],styles:['.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:32px;padding:32px}.output[_ngcontent-%COMP%]{display:grid;grid-gap:8px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%;max-width:1000px}.uploader-cfg[_ngcontent-%COMP%]{--ctx-name: "uploader";--cfg-pubkey: "demopublickey";--cfg-multiple: 1;--cfg-confirm-upload: 1;--cfg-img-only: 0;--cfg-accept: "";--cfg-store: 1;--cfg-camera-mirror: 0;--cfg-source-list: "local, url, camera, dropbox, gdrive";--cfg-max-files: 10}']}),t})(),G1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Kr({type:t,bootstrap:[z1]}),t.\u0275inj=Gn({providers:[],imports:[[$A]]}),t})();(function EI(){vm=!1})(),OA().bootstrapModule(G1).catch(t=>console.error(t))}},Re=>{Re(Re.s=567)}]);