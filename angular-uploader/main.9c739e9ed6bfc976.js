"use strict";(self.webpackChunkangular_uploader=self.webpackChunkangular_uploader||[]).push([[179],{534:(Lo,Fc,$o)=>{var Br={};function ye(e){return"function"==typeof e}function Lc(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}$o.r(Br),$o.d(Br,{ActivityBlock:()=>L,ActivityHeader:()=>lN,BaseComponent:()=>Co,Block:()=>ne,CameraSource:()=>$P,CloudEditor:()=>Cc,CloudImageEditor:()=>eN,ConfirmationDialog:()=>jP,Copyright:()=>dN,CropFrame:()=>CN,Data:()=>J,DataOutput:()=>aN,DropArea:()=>O_,EditorCropButtonControl:()=>Tc,EditorFilterControl:()=>xc,EditorImageCropper:()=>MN,EditorImageFader:()=>ON,EditorOperationControl:()=>Pc,EditorScroller:()=>kN,EditorSlider:()=>SN,EditorToolbar:()=>X_,ExternalSource:()=>oN,FileItem:()=>$n,FilePreview:()=>L_,FileUploaderInline:()=>pN,FileUploaderMinimal:()=>hN,FileUploaderRegular:()=>fN,Icon:()=>w_,Img:()=>CP,LineLoaderUi:()=>$N,LrBtnUi:()=>Oc,MessageBox:()=>RP,Modal:()=>_n,PresenceToggle:()=>BN,ProgressBar:()=>zP,ProgressBarCommon:()=>HP,Select:()=>uN,ShadowWrapper:()=>z_,SimpleBtn:()=>EP,SliderUi:()=>UN,SourceBtn:()=>R_,SourceList:()=>NP,StartFrom:()=>IP,Tabs:()=>Ec,UploadCtxProvider:()=>BP,UploadDetails:()=>UP,UploadList:()=>FP,UploaderBlock:()=>ie,UrlSource:()=>LP,Video:()=>H_,connectBlocksFrom:()=>VN,registerBlocks:()=>Ju});const Bo=Lc(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Uo(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Tt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ye(r))try{r()}catch(s){t=s instanceof Bo?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Uc(s)}catch(o){t=t??[],o instanceof Bo?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Bo(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Uc(t);else{if(t instanceof Tt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Uo(n,t)}remove(t){const{_finalizers:n}=this;n&&Uo(n,t),t instanceof Tt&&t._removeParent(this)}}Tt.EMPTY=(()=>{const e=new Tt;return e.closed=!0,e})();const $c=Tt.EMPTY;function Bc(e){return e instanceof Tt||e&&"closed"in e&&ye(e.remove)&&ye(e.add)&&ye(e.unsubscribe)}function Uc(e){ye(e)?e():e.unsubscribe()}const Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gi={setTimeout(e,t,...n){const{delegate:r}=Gi;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Gi;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Vc(e){Gi.setTimeout(()=>{const{onUnhandledError:t}=Cn;if(!t)throw e;t(e)})}function jc(){}const Z_=Vo("C",void 0,void 0);function Vo(e,t,n){return{kind:e,value:t,error:n}}let En=null;function Wi(e){if(Cn.useDeprecatedSynchronousErrorHandling){const t=!En;if(t&&(En={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=En;if(En=null,n)throw r}}else e()}class jo extends Tt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Bc(t)&&t.add(this)):this.destination=iv}static create(t,n,r){return new Ur(t,n,r)}next(t){this.isStopped?zo(function J_(e){return Vo("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?zo(function Q_(e){return Vo("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?zo(Z_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const tv=Function.prototype.bind;function Ho(e,t){return tv.call(e,t)}class nv{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){qi(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){qi(r)}else qi(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){qi(n)}}}class Ur extends jo{constructor(t,n,r){let i;if(super(),ye(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Cn.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ho(t.next,s),error:t.error&&Ho(t.error,s),complete:t.complete&&Ho(t.complete,s)}):i=t}this.destination=new nv(i)}}function qi(e){Cn.useDeprecatedSynchronousErrorHandling?function ev(e){Cn.useDeprecatedSynchronousErrorHandling&&En&&(En.errorThrown=!0,En.error=e)}(e):Vc(e)}function zo(e,t){const{onStoppedNotification:n}=Cn;n&&Gi.setTimeout(()=>n(e,t))}const iv={closed:!0,next:jc,error:function rv(e){throw e},complete:jc},Go="function"==typeof Symbol&&Symbol.observable||"@@observable";function Hc(e){return e}let Fe=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function ov(e){return e&&e instanceof jo||function sv(e){return e&&ye(e.next)&&ye(e.error)&&ye(e.complete)}(e)&&Bc(e)}(n)?n:new Ur(n,r,i);return Wi(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Gc(r))((i,s)=>{const o=new Ur({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Go](){return this}pipe(...n){return function zc(e){return 0===e.length?Hc:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Gc(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function Gc(e){var t;return null!==(t=e??Cn.Promise)&&void 0!==t?t:Promise}const av=Lc(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Wo=(()=>{class e extends Fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Wc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new av}next(n){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?$c:(this.currentObservers=null,s.push(n),new Tt(()=>{this.currentObservers=null,Uo(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Fe;return n.source=this,n}}return e.create=(t,n)=>new Wc(t,n),e})();class Wc extends Wo{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:$c}}function Vr(e){return t=>{if(function lv(e){return ye(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Yi(e,t,n,r,i){return new uv(e,t,n,r,i)}class uv extends jo{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function In(e){return this instanceof In?(this.v=e,this):new In(e)}function pv(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Kc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=e[s](o)).done,o.value)})}}}const Xc=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Zc(e){return ye(e?.then)}function Qc(e){return ye(e[Go])}function Jc(e){return Symbol.asyncIterator&&ye(e?.[Symbol.asyncIterator])}function ed(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const td=function mv(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function nd(e){return ye(e?.[td])}function rd(e){return function hv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof In?Promise.resolve(f.value.v).then(u,c):d(s[0][2],f)}(r[f](h))}catch(p){d(s[0][3],p)}}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield In(n.read());if(i)return yield In(void 0);yield yield In(r)}}finally{n.releaseLock()}})}function id(e){return ye(e?.getReader)}function un(e){if(e instanceof Fe)return e;if(null!=e){if(Qc(e))return function yv(e){return new Fe(t=>{const n=e[Go]();if(ye(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Xc(e))return function _v(e){return new Fe(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Zc(e))return function vv(e){return new Fe(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Vc)})}(e);if(Jc(e))return sd(e);if(nd(e))return function bv(e){return new Fe(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(id(e))return function Dv(e){return sd(rd(e))}(e)}throw ed(e)}function sd(e){return new Fe(t=>{(function wv(e,t){var n,r,i,s;return function dv(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=pv(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function cn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function od(e,t,n=1/0){return ye(t)?od((r,i)=>function cv(e,t){return Vr((n,r)=>{let i=0;n.subscribe(Yi(r,s=>{r.next(e.call(t,s,i++))}))})}((s,o)=>t(r,s,i,o))(un(e(r,i))),n):("number"==typeof t&&(n=t),Vr((r,i)=>function Cv(e,t,n,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=g=>u<r?p(g):l.push(g),p=g=>{s&&t.next(g),u++;let y=!1;un(n(g,c++)).subscribe(Yi(t,_=>{i?.(_),s?h(_):t.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<r;){const _=l.shift();o?cn(t,o,()=>p(_)):p(_)}f()}catch(_){t.error(_)}}))};return e.subscribe(Yi(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const ad=new Fe(e=>e.complete());function Yo(e){return e[e.length-1]}function ld(e,t=0){return Vr((n,r)=>{n.subscribe(Yi(r,i=>cn(r,e,()=>r.next(i),t),()=>cn(r,e,()=>r.complete(),t),i=>cn(r,e,()=>r.error(i),t)))})}function ud(e,t=0){return Vr((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function cd(e,t){if(!e)throw new Error("Iterable cannot be null");return new Fe(n=>{cn(n,t,()=>{const r=e[Symbol.asyncIterator]();cn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Fv(...e){const t=function Tv(e){return function Sv(e){return e&&ye(e.schedule)}(Yo(e))?e.pop():void 0}(e),n=function Av(e,t){return"number"==typeof Yo(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?un(r[0]):function Ev(e=1/0){return od(Hc,e)}(n)(function kv(e,t){return t?function Rv(e,t){if(null!=e){if(Qc(e))return function Mv(e,t){return un(e).pipe(ud(t),ld(t))}(e,t);if(Xc(e))return function Pv(e,t){return new Fe(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Zc(e))return function xv(e,t){return un(e).pipe(ud(t),ld(t))}(e,t);if(Jc(e))return cd(e,t);if(nd(e))return function Nv(e,t){return new Fe(n=>{let r;return cn(n,t,()=>{r=e[td](),cn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}(e,t);if(id(e))return function Ov(e,t){return cd(rd(e),t)}(e,t)}throw ed(e)}(e,t):un(e)}(r,t)):ad}function Ko(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Ur({next:()=>{r.unsubscribe(),e()}});return un(t(...n)).subscribe(r)}function X(e){for(let t in e)if(e[t]===X)return t;throw Error("Could not find renamed property on target object.")}function Z(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Z).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Zo(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const $v=X({__forward_ref__:X});function Qo(e){return e.__forward_ref__=Qo,e.toString=function(){return Z(this())},e}function T(e){return function Jo(e){return"function"==typeof e&&e.hasOwnProperty($v)&&e.__forward_ref__===Qo}(e)?e():e}function ea(e){return e&&!!e.\u0275providers}const dd="https://g.co/ng/security#xss";class I extends Error{constructor(t,n){super(Ki(t,n)),this.code=t}}function Ki(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}function x(e){return"string"==typeof e?e:null==e?"":String(e)}function Xi(e,t){throw new I(-201,!1)}function tt(e,t){null==e&&function Y(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function re(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Vn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Zi(e){return fd(e,Qi)||fd(e,pd)}function fd(e,t){return e.hasOwnProperty(t)?e[t]:null}function hd(e){return e&&(e.hasOwnProperty(ta)||e.hasOwnProperty(Wv))?e[ta]:null}const Qi=X({\u0275prov:X}),ta=X({\u0275inj:X}),pd=X({ngInjectableDef:X}),Wv=X({ngInjectorDef:X});var M=(()=>((M=M||{})[M.Default=0]="Default",M[M.Host=1]="Host",M[M.Self=2]="Self",M[M.SkipSelf=4]="SkipSelf",M[M.Optional=8]="Optional",M))();let na;function nt(e){const t=na;return na=e,t}function gd(e,t,n){const r=Zi(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&M.Optional?null:void 0!==t?t:void Xi(Z(e))}const ee=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),jr={},ra="__NG_DI_FLAG__",Ji="ngTempTokenPath",Yv="ngTokenPath",Kv=/\n/gm,Xv="\u0275",md="__source";let Hr;function jn(e){const t=Hr;return Hr=e,t}function Zv(e,t=M.Default){if(void 0===Hr)throw new I(-203,!1);return null===Hr?gd(e,void 0,t):Hr.get(e,t&M.Optional?null:void 0,t)}function G(e,t=M.Default){return(function qv(){return na}()||Zv)(T(e),t)}function es(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ia(e){const t=[];for(let n=0;n<e.length;n++){const r=T(e[n]);if(Array.isArray(r)){if(0===r.length)throw new I(900,!1);let i,s=M.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Jv(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(G(i,s))}else t.push(G(r))}return t}function zr(e,t){return e[ra]=t,e.prototype[ra]=t,e}function Jv(e){return e[ra]}function Ht(e){return{toString:e}.toString()}var At=(()=>((At=At||{})[At.OnPush=0]="OnPush",At[At.Default=1]="Default",At))(),Mt=(()=>{return(e=Mt||(Mt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",Mt;var e})();const zt={},W=[],ts=X({\u0275cmp:X}),sa=X({\u0275dir:X}),oa=X({\u0275pipe:X}),_d=X({\u0275mod:X}),Gt=X({\u0275fac:X}),Gr=X({__NG_ELEMENT_ID__:X});let nb=0;function vd(e){return Ht(()=>{const t=Dd(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===At.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,data:e.data||{},encapsulation:e.encapsulation||Mt.Emulated,id:"c"+nb++,styles:e.styles||W,_:null,schemas:e.schemas||null,tView:null};wd(n);const r=e.dependencies;return n.directiveDefs=ns(r,!1),n.pipeDefs=ns(r,!0),n})}function ib(e){return K(e)||Ce(e)}function sb(e){return null!==e}function Wr(e){return Ht(()=>({type:e.type,bootstrap:e.bootstrap||W,declarations:e.declarations||W,imports:e.imports||W,exports:e.exports||W,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function bd(e,t){if(null==e)return zt;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function rt(e){return Ht(()=>{const t=Dd(e);return wd(t),t})}function K(e){return e[ts]||null}function Ce(e){return e[sa]||null}function $e(e){return e[oa]||null}function Dd(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,exportAs:e.exportAs||null,standalone:!0===e.standalone,selectors:e.selectors||W,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bd(e.inputs,t),outputs:bd(e.outputs)}}function wd(e){e.features?.forEach(t=>t(e))}function ns(e,t){if(!e)return null;const n=t?$e:ib;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(sb)}const Wt=0,C=1,O=2,ae=3,ft=4,Sn=5,Ee=6,Hn=7,ue=8,rs=9,is=10,k=11,aa=12,Yr=13,Cd=14,zn=15,Ie=16,Kr=17,Gn=18,xt=19,Xr=20,Ed=21,te=22,la=1,Id=2,ss=7,os=8,Wn=9,Me=10;function Ye(e){return Array.isArray(e)&&"object"==typeof e[la]}function ht(e){return Array.isArray(e)&&!0===e[la]}function ua(e){return 0!=(4&e.flags)}function Zr(e){return e.componentOffset>-1}function as(e){return 1==(1&e.flags)}function pt(e){return!!e.template}function ab(e){return 0!=(256&e[O])}function Tn(e,t){return e.hasOwnProperty(Gt)?e[Gt]:null}class cb{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ad(e){return e.type.prototype.ngOnChanges&&(e.setInput=fb),db}function db(){const e=xd(this),t=e?.current;if(t){const n=e.previous;if(n===zt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function fb(e,t,n,r){const i=this.declaredInputs[n],s=xd(e)||function hb(e,t){return e[Md]=t}(e,{previous:zt,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new cb(l&&l.currentValue,t,a===zt),e[r]=t}const Md="__ngSimpleChanges__";function xd(e){return e[Md]||null}const it=function(e,t,n){};function De(e){for(;Array.isArray(e);)e=e[Wt];return e}function Ke(e,t){return De(t[e.index])}function Od(e,t){return e.data[t]}function Be(e,t){const n=t[e];return Ye(n)?n:n[Wt]}function cs(e){return 64==(64&e[O])}function fn(e,t){return null==t?null:e[t]}function Rd(e){e[Gn]=0}function da(e,t){e[Sn]+=t;let n=e,r=e[ae];for(;null!==r&&(1===t&&1===n[Sn]||-1===t&&0===n[Sn]);)r[Sn]+=t,n=r,r=r[ae]}const P={lFrame:zd(null),bindingsEnabled:!0};function Fd(){return P.bindingsEnabled}function v(){return P.lFrame.lView}function H(){return P.lFrame.tView}function we(){let e=Ld();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ld(){return P.lFrame.currentTNode}function Pt(e,t){const n=P.lFrame;n.currentTNode=e,n.isParent=t}function fa(){return P.lFrame.isParent}function Ab(e,t){const n=P.lFrame;n.bindingIndex=n.bindingRootIndex=e,pa(t)}function pa(e){P.lFrame.currentDirectiveIndex=e}function ma(e){P.lFrame.currentQueryIndex=e}function xb(e){const t=e[C];return 2===t.type?t.declTNode:1===t.type?e[Ee]:null}function jd(e,t,n){if(n&M.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&M.Host||(i=xb(s),null===i||(s=s[zn],10&i.type))););if(null===i)return!1;t=i,e=s}const r=P.lFrame=Hd();return r.currentTNode=t,r.lView=e,!0}function ya(e){const t=Hd(),n=e[C];P.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Hd(){const e=P.lFrame,t=null===e?null:e.child;return null===t?zd(e):t}function zd(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Gd(){const e=P.lFrame;return P.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Wd=Gd;function _a(){const e=Gd();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Pe(){return P.lFrame.selectedIndex}function An(e){P.lFrame.selectedIndex=e}function se(){const e=P.lFrame;return Od(e.tView,e.selectedIndex)}function ds(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(e.contentHooks??(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks??(e.contentHooks=[])).push(n,a),(e.contentCheckHooks??(e.contentCheckHooks=[])).push(n,a)),l&&(e.viewHooks??(e.viewHooks=[])).push(-n,l),u&&((e.viewHooks??(e.viewHooks=[])).push(n,u),(e.viewCheckHooks??(e.viewCheckHooks=[])).push(n,u)),null!=c&&(e.destroyHooks??(e.destroyHooks=[])).push(n,c)}}function fs(e,t,n){qd(e,t,3,n)}function hs(e,t,n,r){(3&e[O])===n&&qd(e,t,n,r)}function va(e,t){let n=e[O];(3&n)===t&&(n&=2047,n+=1,e[O]=n)}function qd(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&e[Gn]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[Gn]+=65536),(a<s||-1==s)&&(Bb(e,n,t,l),e[Gn]=(4294901760&e[Gn])+l+2),l++}function Bb(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[O]>>11<e[Gn]>>16&&(3&e[O])===t){e[O]+=2048,it(4,a,s);try{s.call(a)}finally{it(5,a,s)}}}else{it(4,a,s);try{s.call(a)}finally{it(5,a,s)}}}const Kn=-1;class Jr{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Da(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];Kd(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function Yd(e){return 3===e||4===e||6===e}function Kd(e){return 64===e.charCodeAt(0)}function ei(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Xd(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Xd(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Zd(e){return e!==Kn}function ps(e){return 32767&e}function gs(e,t){let n=function Hb(e){return e>>16}(e),r=t;for(;n>0;)r=r[zn],n--;return r}let wa=!0;function ms(e){const t=wa;return wa=e,t}const Qd=255,Jd=5;let zb=0;const Nt={};function ys(e,t){const n=ef(e,t);if(-1!==n)return n;const r=t[C];r.firstCreatePass&&(e.injectorIndex=t.length,Ca(r.data,e),Ca(t,null),Ca(r.blueprint,null));const i=Ea(e,t),s=e.injectorIndex;if(Zd(i)){const o=ps(i),a=gs(i,t),l=a[C].data;for(let u=0;u<8;u++)t[s+u]=a[o+u]|l[o+u]}return t[s+8]=i,s}function Ca(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ef(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ea(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=lf(i),null===r)return Kn;if(n++,i=i[zn],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Kn}function Ia(e,t,n){!function Gb(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Gr)&&(r=n[Gr]),null==r&&(r=n[Gr]=zb++);const i=r&Qd;t.data[e+(i>>Jd)]|=1<<i}(e,t,n)}function tf(e,t,n){if(n&M.Optional||void 0!==e)return e;Xi()}function nf(e,t,n,r){if(n&M.Optional&&void 0===r&&(r=null),!(n&(M.Self|M.Host))){const i=e[rs],s=nt(void 0);try{return i?i.get(t,r,n&M.Optional):gd(t,r,n&M.Optional)}finally{nt(s)}}return tf(r,0,n)}function rf(e,t,n,r=M.Default,i){if(null!==e){if(1024&t[O]){const o=function Zb(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&1024&o[O]&&!(256&o[O]);){const a=sf(s,o,n,r|M.Self,Nt);if(a!==Nt)return a;let l=s.parent;if(!l){const u=o[Ed];if(u){const c=u.get(n,Nt,r);if(c!==Nt)return c}l=lf(o),o=o[zn]}s=l}return i}(e,t,n,r,Nt);if(o!==Nt)return o}const s=sf(e,t,n,r,Nt);if(s!==Nt)return s}return nf(t,n,r,i)}function sf(e,t,n,r,i){const s=function Yb(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Gr)?e[Gr]:void 0;return"number"==typeof t?t>=0?t&Qd:Kb:t}(n);if("function"==typeof s){if(!jd(t,e,r))return r&M.Host?tf(i,0,r):nf(t,n,r,i);try{const o=s(r);if(null!=o||r&M.Optional)return o;Xi()}finally{Wd()}}else if("number"==typeof s){let o=null,a=ef(e,t),l=Kn,u=r&M.Host?t[Ie][Ee]:null;for((-1===a||r&M.SkipSelf)&&(l=-1===a?Ea(e,t):t[a+8],l!==Kn&&af(r,!1)?(o=t[C],a=ps(l),t=gs(l,t)):a=-1);-1!==a;){const c=t[C];if(of(s,a,c.data)){const d=qb(a,t,n,o,r,u);if(d!==Nt)return d}l=t[a+8],l!==Kn&&af(r,t[C].data[a+8]===u)&&of(s,a,t)?(o=c,a=ps(l),t=gs(l,t)):a=-1}}return i}function qb(e,t,n,r,i,s){const o=t[C],a=o.data[e+8],c=function _s(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,f=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&pt(h)&&h.type===n)return l}return null}(a,o,n,null==r?Zr(a)&&wa:r!=o&&0!=(3&a.type),i&M.Host&&s===a);return null!==c?Mn(t,o,c,a):Nt}function Mn(e,t,n,r){let i=e[n];const s=t.data;if(function Ub(e){return e instanceof Jr}(i)){const o=i;o.resolving&&function Bv(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new I(-200,`Circular dependency in DI detected for ${e}${n}`)}(function q(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():x(e)}(s[n]));const a=ms(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?nt(o.injectImpl):null;jd(e,r,M.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function $b(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=Ad(t);(n.preOrderHooks??(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,o)}i&&(n.preOrderHooks??(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks??(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==l&&nt(l),ms(a),o.resolving=!1,Wd()}}return i}function of(e,t,n){return!!(n[t+(e>>Jd)]&1<<e)}function af(e,t){return!(e&M.Self||e&M.Host&&t)}class Xn{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return rf(this._tNode,this._lView,t,es(r),n)}}function Kb(){return new Xn(we(),v())}function lf(e){const t=e[C],n=t.type;return 2===n?t.declTNode:1===n?e[Ee]:null}const Qn="__parameters__";function er(e,t,n){return Ht(()=>{const r=function Aa(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(Qn)?l[Qn]:Object.defineProperty(l,Qn,{value:[]})[Qn];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class F{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function xn(e,t){e.forEach(n=>Array.isArray(n)?xn(n,t):t(n))}function cf(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function vs(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Ds=zr(er("Optional"),8),ws=zr(er("SkipSelf"),4);var Ue=(()=>((Ue=Ue||{})[Ue.Important=1]="Important",Ue[Ue.DashCase=2]="DashCase",Ue))();const Fa=new Map;let CD=0;const $a="__ngContext__";function Se(e,t){Ye(t)?(e[$a]=t[Xr],function ID(e){Fa.set(e[Xr],e)}(t)):e[$a]=t}let Ba;function Ua(e,t){return Ba(e,t)}function ai(e){const t=e[ae];return ht(t)?t[ae]:t}function Va(e){return Pf(e[Yr])}function ja(e){return Pf(e[ft])}function Pf(e){for(;null!==e&&!ht(e);)e=e[ft];return e}function rr(e,t,n,r,i){if(null!=r){let s,o=!1;ht(r)?s=r:Ye(r)&&(o=!0,r=r[Wt]);const a=De(r);0===e&&null!==n?null==i?Lf(t,n,a):Pn(t,n,a,i||null,!0):1===e&&null!==n?Pn(t,n,a,i||null,!0):2===e?function Ka(e,t,n){const r=Is(e,t);r&&function GD(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function YD(e,t,n,r,i){const s=n[ss];s!==De(n)&&rr(t,e,r,s,i);for(let a=Me;a<n.length;a++){const l=n[a];li(l[C],l,e,t,r,s)}}(t,e,s,n,i)}}function za(e,t,n){return e.createElement(t,n)}function Of(e,t){const n=e[Wn],r=n.indexOf(t),i=t[ae];512&t[O]&&(t[O]&=-513,da(i,-1)),n.splice(r,1)}function Ga(e,t){if(e.length<=Me)return;const n=Me+t,r=e[n];if(r){const i=r[Kr];null!==i&&i!==e&&Of(i,r),t>0&&(e[n-1][ft]=r[ft]);const s=vs(e,Me+t);!function LD(e,t){li(e,t,t[k],2,null,null),t[Wt]=null,t[Ee]=null}(r[C],r);const o=s[xt];null!==o&&o.detachView(s[C]),r[ae]=null,r[ft]=null,r[O]&=-65}return r}function Rf(e,t){if(!(128&t[O])){const n=t[k];n.destroyNode&&li(e,t,n,3,null,null),function UD(e){let t=e[Yr];if(!t)return Wa(e[C],e);for(;t;){let n=null;if(Ye(t))n=t[Yr];else{const r=t[Me];r&&(n=r)}if(!n){for(;t&&!t[ft]&&t!==e;)Ye(t)&&Wa(t[C],t),t=t[ae];null===t&&(t=e),Ye(t)&&Wa(t[C],t),n=t&&t[ft]}t=n}}(t)}}function Wa(e,t){if(!(128&t[O])){t[O]&=-65,t[O]|=128,function zD(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Jr)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];it(4,a,l);try{l.call(a)}finally{it(5,a,l)}}else{it(4,i,s);try{s.call(i)}finally{it(5,i,s)}}}}}(e,t),function HD(e,t){const n=e.cleanup,r=t[Hn];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[Hn]=null}}(e,t),1===t[C].type&&t[k].destroy();const n=t[Kr];if(null!==n&&ht(t[ae])){n!==t[ae]&&Of(n,t);const r=t[xt];null!==r&&r.detachView(e)}!function SD(e){Fa.delete(e[Xr])}(t)}}function kf(e,t,n){return function Ff(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Wt];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===Mt.None||s===Mt.Emulated)return null}return Ke(r,n)}}(e,t.parent,n)}function Pn(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Lf(e,t,n){e.appendChild(t,n)}function $f(e,t,n,r,i){null!==r?Pn(e,t,n,r,i):Lf(e,t,n)}function Is(e,t){return e.parentNode(t)}let qa,Qa,Vf=function Uf(e,t,n){return 40&e.type?Ke(e,n):null};function Ss(e,t,n,r){const i=kf(e,r,t),s=t[k],a=function Bf(e,t,n){return Vf(e,t,n)}(r.parent||t[Ee],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)$f(s,i,n[l],a,!1);else $f(s,i,n,a,!1);void 0!==qa&&qa(s,r,t,n,i)}function Ts(e,t){if(null!==t){const n=t.type;if(3&n)return Ke(t,e);if(4&n)return Ya(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ts(e,r);{const i=e[t.index];return ht(i)?Ya(-1,i):De(i)}}if(32&n)return Ua(t,e)()||De(e[t.index]);{const r=Hf(e,t);return null!==r?Array.isArray(r)?r[0]:Ts(ai(e[Ie]),r):Ts(e,t.next)}}return null}function Hf(e,t){return null!==t?e[Ie][Ee].projection[t.projection]:null}function Ya(e,t){const n=Me+e+1;if(n<t.length){const r=t[n],i=r[C].firstChild;if(null!==i)return Ts(r,i)}return t[ss]}function Xa(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Se(De(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)Xa(e,t,n.child,r,i,s,!1),rr(t,e,i,a,s);else if(32&l){const u=Ua(n,r);let c;for(;c=u();)rr(t,e,i,c,s);rr(t,e,i,a,s)}else 16&l?zf(e,t,r,n,i,s):rr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function li(e,t,n,r,i,s){Xa(n,r,e.firstChild,t,i,s,!1)}function zf(e,t,n,r,i,s){const o=n[Ie],l=o[Ee].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)rr(t,e,i,l[u],s);else Xa(e,t,l,o[ae],i,s,!0)}function Gf(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Wf(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Da(e,t,r),null!==i&&Gf(e,t,i),null!==s&&function XD(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class Zf{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dd})`}}const cw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var fe=(()=>((fe=fe||{})[fe.NONE=0]="NONE",fe[fe.HTML=1]="HTML",fe[fe.STYLE=2]="STYLE",fe[fe.SCRIPT=3]="SCRIPT",fe[fe.URL=4]="URL",fe[fe.RESOURCE_URL=5]="RESOURCE_URL",fe))();function il(e){const t=function di(){const e=v();return e&&e[aa]}();return t?t.sanitize(fe.URL,e)||"":function ui(e,t){const n=function ow(e){return e instanceof Zf&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${dd})`)}return n===t}(e,"URL")?function hn(e){return e instanceof Zf?e.changingThisBreaksApplicationSecurity:e}(e):function el(e){return(e=String(e)).match(cw)?e:"unsafe:"+e}(x(e))}const sh=new F("ENVIRONMENT_INITIALIZER"),oh=new F("INJECTOR",-1),ah=new F("INJECTOR_DEF_TYPES");class lh{get(t,n=jr){if(n===jr){const r=new Error(`NullInjectorError: No provider for ${Z(t)}!`);throw r.name="NullInjectorError",r}return n}}function Ew(...e){return{\u0275providers:uh(0,e),\u0275fromNgModule:!0}}function uh(e,...t){const n=[],r=new Set;let i;return xn(t,s=>{const o=s;sl(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&ch(i,n),n}function ch(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];ol(i,s=>{t.push(s)})}}function sl(e,t,n,r){if(!(e=T(e)))return!1;let i=null,s=hd(e);const o=!s&&K(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const l=e.ngModule;if(s=hd(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)sl(u,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{xn(s.imports,c=>{sl(c,t,n,r)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&ch(u,t)}if(!a){const u=Tn(i)||(()=>new i);t.push({provide:i,useFactory:u,deps:W},{provide:ah,useValue:i,multi:!0},{provide:sh,useValue:()=>G(i),multi:!0})}const l=s.providers;null==l||a||ol(l,c=>{t.push(c)})}}return i!==e&&void 0!==e.providers}function ol(e,t){for(let n of e)ea(n)&&(n=n.\u0275providers),Array.isArray(n)?ol(n,t):t(n)}const Iw=X({provide:String,useValue:X});function al(e){return null!==e&&"object"==typeof e&&Iw in e}function Nn(e){return"function"==typeof e}const ll=new F("Set Injector scope."),Ps={},Tw={};let ul;function Ns(){return void 0===ul&&(ul=new lh),ul}class sr{}class hh extends sr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,dl(t,o=>this.processProvider(o)),this.records.set(oh,or(void 0,this)),i.has("environment")&&this.records.set(sr,or(void 0,this));const s=this.records.get(ll);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ah.multi,W,M.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=jn(this),r=nt(void 0);try{return t()}finally{jn(n),nt(r)}}get(t,n=jr,r=M.Default){this.assertNotDestroyed(),r=es(r);const i=jn(this),s=nt(void 0);try{if(!(r&M.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function Nw(e){return"function"==typeof e||"object"==typeof e&&e instanceof F}(t)&&Zi(t);a=l&&this.injectableDefInScope(l)?or(cl(t),Ps):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&M.Self?Ns():this.parent).get(t,n=r&M.Optional&&n===jr?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Ji]=o[Ji]||[]).unshift(Z(t)),i)throw o;return function eb(e,t,n,r){const i=e[Ji];throw t[md]&&i.unshift(t[md]),e.message=function tb(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&e.charAt(1)==Xv?e.slice(2):e;let i=Z(t);if(Array.isArray(t))i=t.map(Z).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Z(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Kv,"\n  ")}`}("\n"+e.message,i,n,r),e[Yv]=i,e[Ji]=null,e}(o,t,"R3InjectorError",this.source)}throw o}finally{nt(s),jn(i)}}resolveInjectorInitializers(){const t=jn(this),n=nt(void 0);try{const r=this.get(sh.multi,W,M.Self);for(const i of r)i()}finally{jn(t),nt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Z(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(t){let n=Nn(t=T(t))?t:T(t&&t.provide);const r=function Mw(e){return al(e)?or(void 0,e.useValue):or(function ph(e,t,n){let r;if(Nn(e)){const i=T(e);return Tn(i)||cl(i)}if(al(e))r=()=>T(e.useValue);else if(function fh(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...ia(e.deps||[]));else if(function dh(e){return!(!e||!e.useExisting)}(e))r=()=>G(T(e.useExisting));else{const i=T(e&&(e.useClass||e.provide));if(!function xw(e){return!!e.deps}(e))return Tn(i)||cl(i);r=()=>new i(...ia(e.deps))}return r}(e),Ps)}(t);if(Nn(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=or(void 0,Ps,!0),i.factory=()=>ia(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Ps&&(n.value=Tw,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Pw(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=T(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function cl(e){const t=Zi(e),n=null!==t?t.factory:Tn(e);if(null!==n)return n;if(e instanceof F)throw new I(204,!1);if(e instanceof Function)return function Aw(e){const t=e.length;if(t>0)throw function ri(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new I(204,!1);const n=function zv(e){const t=e&&(e[Qi]||e[pd]);return t?(function Gv(e){if(e.hasOwnProperty("name"))return e.name;(""+e).match(/^function\s*([^\s(]+)/)}(e),t):null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new I(204,!1)}function or(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function dl(e,t){for(const n of e)Array.isArray(n)?dl(n,t):n&&ea(n)?dl(n.\u0275providers,t):t(n)}class Ow{}class gh{}class kw{resolveComponentFactory(t){throw function Rw(e){const t=Error(`No component factory found for ${Z(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Os=(()=>{class e{}return e.NULL=new kw,e})();function Fw(){return ar(we(),v())}function ar(e,t){return new lr(Ke(e,t))}let lr=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=Fw,e})();class yh{}let Bw=(()=>{class e{}return e.\u0275prov=re({token:e,providedIn:"root",factory:()=>null}),e})();class fl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Uw=new fl("15.2.7"),hl={},pl="ngOriginalError";function gl(e){return e[pl]}class ur{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&gl(t);for(;n&&gl(n);)n=gl(n);return n||null}}function bh(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const Dh="ng-template";function Zw(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==bh(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function wh(e){return 4===e.type&&e.value!==Dh}function Qw(e,t,n){return t===(4!==e.type||n?e.value:Dh)}function Jw(e,t,n){let r=4;const i=e.attrs||[],s=function nC(e){for(let t=0;t<e.length;t++)if(Yd(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Qw(e,l,n)||""===l&&1===t.length){if(gt(r))return!1;o=!0}}else{const u=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Zw(e.attrs,u,n)){if(gt(r))return!1;o=!0}continue}const d=eC(8&r?"class":l,i,wh(e),n);if(-1===d){if(gt(r))return!1;o=!0;continue}if(""!==u){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==bh(h,u,0)||2&r&&u!==f){if(gt(r))return!1;o=!0}}}}else{if(!o&&!gt(r)&&!gt(l))return!1;if(o&&gt(l))continue;o=!1,r=l|1&r}}return gt(r)||o}function gt(e){return 0==(1&e)}function eC(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function rC(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ch(e,t,n=!1){for(let r=0;r<t.length;r++)if(Jw(e,t[r],n))return!0;return!1}function Eh(e,t){return e?":not("+t.trim()+")":t}function sC(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!gt(o)&&(t+=Eh(s,i),i=""),r=o,s=s||!gt(r);n++}return""!==i&&(t+=Eh(s,i)),t}const N={};function Sh(e,t,n,r){if(!r)if(3==(3&t[O])){const s=e.preOrderCheckHooks;null!==s&&fs(t,s,n)}else{const s=e.preOrderHooks;null!==s&&hs(t,s,0,n)}An(n)}function xh(e,t=null,n=null,r){const i=Ph(e,t,n,r);return i.resolveInjectorInitializers(),i}function Ph(e,t=null,n=null,r,i=new Set){const s=[n||W,Ew(e)];return r=r||("object"==typeof e?void 0:Z(e)),new hh(s,t||Ns(),r||null,i)}let On=(()=>{class e{static create(n,r){if(Array.isArray(n))return xh({name:""},r,n,"");{const i=n.name??"";return xh({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=jr,e.NULL=new lh,e.\u0275prov=re({token:e,providedIn:"any",factory:()=>G(oh)}),e.__NG_ELEMENT_ID__=-1,e})();function $(e,t=M.Default){const n=v();return null===n?G(e,t):rf(we(),n,T(e),t)}function $h(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=e.data[s];ma(n[r]),o.contentQueries(2,t[s],s)}}}function ks(e,t,n,r,i,s,o,a,l,u,c){const d=t.blueprint.slice();return d[Wt]=i,d[O]=76|r,(null!==c||e&&1024&e[O])&&(d[O]|=1024),Rd(d),d[ae]=d[zn]=e,d[ue]=n,d[is]=o||e&&e[is],d[k]=a||e&&e[k],d[aa]=l||e&&e[aa]||null,d[rs]=u||e&&e[rs]||null,d[Ee]=s,d[Xr]=function ED(){return CD++}(),d[Ed]=c,d[Ie]=2==t.type?e[Ie]:d,d}function fr(e,t,n,r,i){let s=e.data[t];if(null===s)s=function bl(e,t,n,r,i){const s=Ld(),o=fa(),l=e.data[t]=function NC(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,t,n,r,i),function Tb(){return P.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Qr(){const e=P.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Pt(s,!0),s}function fi(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Dl(e,t,n){ya(t);try{const r=e.viewQuery;null!==r&&xl(1,r,n);const i=e.template;null!==i&&Bh(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&$h(e,t),e.staticViewQueries&&xl(2,e.viewQuery,n);const s=e.components;null!==s&&function MC(e,t){for(let n=0;n<t.length;n++)QC(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[O]&=-5,_a()}}function Fs(e,t,n,r){const i=t[O];if(128!=(128&i)){ya(t);try{Rd(t),function Bd(e){return P.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Bh(e,t,n,2,r);const o=3==(3&i);if(o){const u=e.preOrderCheckHooks;null!==u&&fs(t,u,null)}else{const u=e.preOrderHooks;null!==u&&hs(t,u,0,null),va(t,0)}if(function XC(e){for(let t=Va(e);null!==t;t=ja(t)){if(!t[Id])continue;const n=t[Wn];for(let r=0;r<n.length;r++){const i=n[r];512&i[O]||da(i[ae],1),i[O]|=512}}}(t),function KC(e){for(let t=Va(e);null!==t;t=ja(t))for(let n=Me;n<t.length;n++){const r=t[n],i=r[C];cs(r)&&Fs(i,r,i.template,r[ue])}}(t),null!==e.contentQueries&&$h(e,t),o){const u=e.contentCheckHooks;null!==u&&fs(t,u)}else{const u=e.contentHooks;null!==u&&hs(t,u,1),va(t,1)}!function TC(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)An(~i);else{const s=i,o=n[++r],a=n[++r];Ab(o,s),a(2,t[s])}}}finally{An(-1)}}(e,t);const a=e.components;null!==a&&function AC(e,t){for(let n=0;n<t.length;n++)ZC(e,t[n])}(t,a);const l=e.viewQuery;if(null!==l&&xl(2,l,r),o){const u=e.viewCheckHooks;null!==u&&fs(t,u)}else{const u=e.viewHooks;null!==u&&hs(t,u,2),va(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[O]&=-41,512&t[O]&&(t[O]&=-513,da(t[ae],-1))}finally{_a()}}}function Bh(e,t,n,r,i){const s=Pe(),o=2&r;try{An(-1),o&&t.length>te&&Sh(e,t,te,!1),it(o?2:0,i),n(r,i)}finally{An(s),it(o?3:1,i)}}function wl(e,t,n){if(ua(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const o=e.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function Cl(e,t,n){Fd()&&(function BC(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;Zr(n)&&function WC(e,t,n){const r=Ke(t,e),i=Uh(n),s=e[is],o=Ls(e,ks(e,i,null,n.onPush?32:16,r,t,s,s.createRenderer(r,n),null,null,null));e[t.index]=o}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||ys(n,t),Se(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const l=e.data[a],u=Mn(t,e,a,n);Se(u,t),null!==o&&qC(0,a-i,u,l,0,o),pt(l)&&(Be(n.index,t)[ue]=Mn(t,e,a,n))}}(e,t,n,Ke(n,t)),64==(64&n.flags)&&Gh(e,t,n))}function El(e,t,n=Ke){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Uh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Il(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Il(e,t,n,r,i,s,o,a,l,u){const c=te+r,d=c+i,f=function xC(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:N);return n}(c,d),h="function"==typeof u?u():u;return f[C]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:h,incompleteFirstPass:!1}}function jh(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?Hh(n,t,i,s):r.hasOwnProperty(i)&&Hh(n,t,r[i],s)}return n}function Hh(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Ze(e,t,n,r,i,s,o,a){const l=Ke(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[r])?(Pl(e,n,c,r,i),Zr(t)&&function kC(e,t){const n=Be(t,e);16&n[O]||(n[O]|=32)}(n,t.index)):3&t.type&&(r=function RC(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(l,r,i))}function Sl(e,t,n,r){if(Fd()){const i=null===r?null:{"":-1},s=function VC(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Ch(t,o.selectors,!1))if(r||(r=[]),pt(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Tl(e,t,a.length)}else r.unshift(o),Tl(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&zh(e,t,n,o,i,a),i&&function jC(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new I(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=ei(n.mergedAttrs,n.attrs)}function zh(e,t,n,r,i,s){for(let u=0;u<r.length;u++)Ia(ys(n,t),e,r[u].type);!function zC(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=fi(e,t,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];n.mergedAttrs=ei(n.mergedAttrs,c.hostAttrs),GC(e,n,t,l,c),HC(l,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??(e.preOrderHooks=[])).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function OC(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let l=null,u=null;for(let c=t.directiveStart;c<i;c++){const d=s[c],f=n?n.get(d):null,p=f?f.outputs:null;l=jh(d.inputs,c,l,f?f.inputs:null),u=jh(d.outputs,c,u,p);const g=null===l||null===o||wh(t)?null:YC(l,c,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}(e,n,s)}function Gh(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function Mb(){return P.lFrame.currentDirectiveIndex}();try{An(s);for(let a=r;a<i;a++){const l=e.data[a],u=t[a];pa(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&UC(l,u)}}finally{An(-1),pa(o)}}function UC(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Tl(e,t,n){t.componentOffset=n,(e.components??(e.components=[])).push(t.index)}function HC(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;pt(t)&&(n[""]=e)}}function GC(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=Tn(i.type)),o=new Jr(s,pt(i),$);e.blueprint[r]=o,n[r]=o,function LC(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function $C(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,fi(e,n,i.hostVars,N),i)}function qC(e,t,n,r,i,s){const o=s[t];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],d=o[l++];null!==a?r.setInput(n,d,u,c):n[c]=d}}}function YC(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Wh(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null]}function ZC(e,t){const n=Be(t,e);if(cs(n)){const r=n[C];48&n[O]?Fs(r,n,r.template,n[ue]):n[Sn]>0&&Ml(n)}}function Ml(e){for(let r=Va(e);null!==r;r=ja(r))for(let i=Me;i<r.length;i++){const s=r[i];if(cs(s))if(512&s[O]){const o=s[C];Fs(o,s,o.template,s[ue])}else s[Sn]>0&&Ml(s)}const n=e[C].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Be(n[r],e);cs(i)&&i[Sn]>0&&Ml(i)}}function QC(e,t){const n=Be(t,e),r=n[C];(function JC(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Dl(r,n,n[ue])}function Ls(e,t){return e[Yr]?e[Cd][ft]=t:e[Yr]=t,e[Cd]=t,t}function $s(e){for(;e;){e[O]|=32;const t=ai(e);if(ab(e)&&!t)return e;e=t}return null}function Bs(e,t,n,r=!0){const i=t[is];i.begin&&i.begin();try{Fs(e,t,e.template,n)}catch(o){throw r&&Xh(t,o),o}finally{i.end&&i.end()}}function xl(e,t,n){ma(0),t(e,n)}function qh(e){return e[Hn]||(e[Hn]=[])}function Yh(e){return e.cleanup||(e.cleanup=[])}function Xh(e,t){const n=e[rs],r=n?n.get(ur,null):null;r&&r.handleError(t)}function Pl(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=t[o],u=e.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Us(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=Zo(i,a):2==s&&(r=Zo(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Vs(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(De(s)),ht(s))for(let a=Me;a<s.length;a++){const l=s[a],u=l[C].firstChild;null!==u&&Vs(l[C],l,u,r)}const o=n.type;if(8&o)Vs(e,t,n.child,r);else if(32&o){const a=Ua(n,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Hf(t,n);if(Array.isArray(a))r.push(...a);else{const l=ai(t[Ie]);Vs(l[C],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class hi{get rootNodes(){const t=this._lView,n=t[C];return Vs(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ue]}set context(t){this._lView[ue]=t}get destroyed(){return 128==(128&this._lView[O])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ae];if(ht(t)){const n=t[os],r=n?n.indexOf(this):-1;r>-1&&(Ga(t,r),vs(n,r))}this._attachedToViewContainer=!1}Rf(this._lView[C],this._lView)}onDestroy(t){!function Vh(e,t,n,r){const i=qh(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Yh(e).push(r,i.length-1))}(this._lView[C],this._lView,null,t)}markForCheck(){$s(this._cdRefInjectingView||this._lView)}detach(){this._lView[O]&=-65}reattach(){this._lView[O]|=64}detectChanges(){Bs(this._lView[C],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BD(e,t){li(e,t,t[k],2,null,null)}(this._lView[C],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=t}}class eE extends hi{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Bs(t[C],t,t[ue],!1)}checkNoChanges(){}get context(){return null}}class Zh extends Os{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=K(t);return new pi(n,this.ngModule)}}function Qh(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class nE{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=es(r);const i=this.injector.get(t,hl,r);return i!==hl||n===hl?i:this.parentInjector.get(t,n,r)}}class pi extends gh{get inputs(){return Qh(this.componentDef.inputs)}get outputs(){return Qh(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function oC(e){return e.map(sC).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof sr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new nE(t,s):t,a=o.get(yh,null);if(null===a)throw new I(407,!1);const l=o.get(Bw,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function PC(e,t,n){return e.selectRootElement(t,n===Mt.ShadowDom)}(u,r,this.componentDef.encapsulation):za(u,c,function tE(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(c)),f=this.componentDef.onPush?288:272,h=Il(0,null,null,1,0,null,null,null,null,null),p=ks(null,h,null,f,null,null,a,u,l,o,null);let g,y;ya(p);try{const _=this.componentDef;let D,m=null;_.findHostDirectiveDefs?(D=[],m=new Map,_.findHostDirectiveDefs(_,D,m),D.push(_)):D=[_];const E=function iE(e,t){const n=e[C],r=te;return e[r]=t,fr(n,r,2,"#host",null)}(p,d),j=function sE(e,t,n,r,i,s,o,a){const l=i[C];!function oE(e,t,n,r){for(const i of e)t.mergedAttrs=ei(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Us(t,t.mergedAttrs,!0),null!==n&&Wf(r,n,t))}(r,e,t,o);const u=s.createRenderer(t,n),c=ks(i,Uh(n),null,n.onPush?32:16,i[e.index],e,s,u,a||null,null,null);return l.firstCreatePass&&Tl(l,e,r.length-1),Ls(i,c),i[e.index]=c}(E,d,_,D,p,a,u);y=Od(h,te),d&&function lE(e,t,n,r){if(r)Da(e,n,["ng-version",Uw.full]);else{const{attrs:i,classes:s}=function aC(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!gt(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Da(e,n,i),s&&s.length>0&&Gf(e,n,s.join(" "))}}(u,_,d,r),void 0!==n&&function uE(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(y,this.ngContentSelectors,n),g=function aE(e,t,n,r,i,s){const o=we(),a=i[C],l=Ke(o,i);zh(a,i,o,n,null,r);for(let c=0;c<n.length;c++)Se(Mn(i,a,o.directiveStart+c,o),i);Gh(a,i,o),l&&Se(l,i);const u=Mn(i,a,o.directiveStart+o.componentOffset,o);if(e[ue]=i[ue]=u,null!==s)for(const c of s)c(u,t);return wl(a,o,e),u}(j,_,D,m,p,[cE]),Dl(h,p,null)}finally{_a()}return new rE(this.componentType,g,ar(y,p),p,y)}}class rE extends Ow{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new eE(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;Pl(s[C],s,i,t,n),$s(Be(this._tNode.index,s))}}get injector(){return new Xn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function cE(){const e=we();ds(v()[C],e)}function js(e){return!!function Ol(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Te(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function gr(e,t,n,r,i,s){const a=function Rn(e,t,n,r){const i=Te(e,t,n);return Te(e,t+1,r)||i}(e,function qt(){return P.lFrame.bindingIndex}(),n,i);return function Yt(e){const t=P.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2),a?t+x(n)+r+x(i)+s:N}function Rl(e,t,n){const r=v();return Te(r,function Yn(){return P.lFrame.bindingIndex++}(),t)&&Ze(H(),se(),r,e,t,r[k],n,!1),Rl}function kl(e,t,n,r,i){const o=i?"class":"style";Pl(e,n,t.inputs[o],o,r)}function mi(e,t,n,r){const i=v(),s=H(),o=te+e,a=i[k],l=s.firstCreatePass?function TE(e,t,n,r,i,s){const o=t.consts,l=fr(t,e,2,r,fn(o,i));return Sl(t,n,l,fn(o,s)),null!==l.attrs&&Us(l,l.attrs,!1),null!==l.mergedAttrs&&Us(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,t,n,r):s.data[o],u=i[o]=za(a,t,function Lb(){return P.lFrame.currentNamespace}()),c=as(l);return Pt(l,!0),Wf(a,u,l),32!=(32&l.flags)&&Ss(s,i,u,l),0===function vb(){return P.lFrame.elementDepthCount}()&&Se(u,i),function bb(){P.lFrame.elementDepthCount++}(),c&&(Cl(s,i,l),wl(s,l,i)),null!==r&&El(i,l),mi}function yi(){let e=we();fa()?function ha(){P.lFrame.isParent=!1}():(e=e.parent,Pt(e,!1));const t=e;!function Db(){P.lFrame.elementDepthCount--}();const n=H();return n.firstCreatePass&&(ds(n,e),ua(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Vb(e){return 0!=(8&e.flags)}(t)&&kl(n,t,v(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function jb(e){return 0!=(16&e.flags)}(t)&&kl(n,t,v(),t.stylesWithoutHost,!1),yi}function Fl(e,t,n,r){return mi(e,t,n,r),yi(),Fl}function Bl(e){return!!e&&"function"==typeof e.then}const xE=function mp(e){return!!e&&"function"==typeof e.subscribe};function Ul(e,t,n,r){const i=v(),s=H(),o=we();return function _p(e,t,n,r,i,s,o){const a=as(r),u=e.firstCreatePass&&Yh(e),c=t[ue],d=qh(t);let f=!0;if(3&r.type||o){const g=Ke(r,t),y=o?o(g):g,_=d.length,D=o?E=>o(De(E[r.index])):r.index;let m=null;if(!o&&a&&(m=function PE(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[Hn],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=s,m.__ngLastListenerFn__=s,f=!1;else{s=bp(r,t,c,s,!1);const E=n.listen(y,i,s);d.push(s,E),u&&u.push(i,D,_,_+1)}}else s=bp(r,t,c,s,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const j=t[p[y]][p[y+1]].subscribe(s),z=d.length;d.push(s,j),u&&u.push(i,r.index,z,-(z+1))}}}(s,i,i[k],o,e,t,r),Ul}function vp(e,t,n,r){try{return it(6,t,n),!1!==n(r)}catch(i){return Xh(e,i),!1}finally{it(7,t,n)}}function bp(e,t,n,r,i){return function s(o){if(o===Function)return r;$s(e.componentOffset>-1?Be(e.index,t):t);let l=vp(t,n,r,o),u=s.__ngNextListenerFn__;for(;u;)l=vp(t,n,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function jl(e,t,n,r,i,s,o){const a=v(),l=gr(a,t,n,r,i,s);return l!==N&&Ze(H(),se(),a,e,l,a[k],o,!1),jl}const Er="en-US";let fg=Er;class Ir{}class EI{}class $g extends Ir{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zh(this);const r=function qe(e,t){const n=e[_d]||null;if(!n&&!0===t)throw new Error(`Type ${Z(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function Xt(e){return e instanceof Function?e():e}(r.bootstrap),this._r3Injector=Ph(t,n,[{provide:Ir,useValue:this},{provide:Os,useValue:this.componentFactoryResolver}],Z(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class eu extends EI{constructor(t){super(),this.moduleType=t}create(t){return new $g(this.moduleType,t)}}function nu(e){return t=>{setTimeout(e,void 0,t)}}const Qt=class eS extends Wo{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=nu(s),i&&(i=nu(i)),o&&(o=nu(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof Tt&&t.add(a),a}};let Jt=(()=>{class e{}return e.__NG_ELEMENT_ID__=iS,e})();const nS=Jt,rS=class extends nS{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(t,n){const r=this._declarationTContainer.tView,i=ks(this._declarationLView,r,t,16,null,r.declTNode,null,null,null,null,n||null);i[Kr]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[xt];return null!==o&&(i[xt]=o.createEmbeddedView(r)),Dl(r,i,t),new hi(i)}};function iS(){return function Xs(e,t){return 4&e.type?new rS(t,e,ar(e,t)):null}(we(),v())}let Lt=(()=>{class e{}return e.__NG_ELEMENT_ID__=sS,e})();function sS(){return function Jg(e,t){let n;const r=t[e.index];if(ht(r))n=r;else{let i;if(8&e.type)i=De(r);else{const s=t[k];i=s.createComment("");const o=Ke(e,t);Pn(s,Is(s,o),i,function WD(e,t){return e.nextSibling(t)}(s,o),!1)}t[e.index]=n=Wh(r,t,i,e),Ls(t,n)}return new Zg(n,e,t)}(we(),v())}const oS=Lt,Zg=class extends oS{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return ar(this._hostTNode,this._hostLView)}get injector(){return new Xn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ea(this._hostTNode,this._hostLView);if(Zd(t)){const n=gs(t,this._hostLView),r=ps(t);return new Xn(n[C].data[r+8],n)}return new Xn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Qg(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Me}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=t.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(t,n,r,i,s){const o=t&&!function ni(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?t:new pi(K(t)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const f=(o?u:this.parentInjector).get(sr,null);f&&(s=f)}const c=l.create(u,i,void 0,s);return this.insert(c.hostView,a),c}insert(t,n){const r=t._lView,i=r[C];if(function _b(e){return ht(e[ae])}(r)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const d=r[ae],f=new Zg(d,d[Ee],d[ae]);f.detach(f.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;!function VD(e,t,n,r){const i=Me+r,s=n.length;r>0&&(n[i-1][ft]=t),r<s-Me?(t[ft]=n[i],cf(n,Me+r,t)):(n.push(t),t[ft]=null),t[ae]=n;const o=t[Kr];null!==o&&n!==o&&function jD(e,t){const n=e[Wn];t[Ie]!==t[ae][ae][Ie]&&(e[Id]=!0),null===n?e[Wn]=[t]:n.push(t)}(o,t);const a=t[xt];null!==a&&a.insertView(e),t[O]|=64}(i,r,o,s);const a=Ya(s,o),l=r[k],u=Is(l,o[ss]);return null!==u&&function $D(e,t,n,r,i,s){r[Wt]=i,r[Ee]=t,li(e,r,n,1,i,s)}(i,o[Ee],l,r,u,a),t.attachToViewContainerRef(),cf(iu(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Qg(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Ga(this._lContainer,n);r&&(vs(iu(this._lContainer),n),Rf(r[C],r))}detach(t){const n=this._adjustIndex(t,-1),r=Ga(this._lContainer,n);return r&&null!=vs(iu(this._lContainer),n)?new hi(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Qg(e){return e[os]}function iu(e){return e[os]||(e[os]=[])}function Qs(...e){}const Cm=new F("Application Initializer");let Js=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Qs,this.reject=Qs,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Bl(s))n.push(s);else if(xE(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(G(Cm,8))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ti=new F("AppId",{providedIn:"root",factory:function Em(){return`${pu()}${pu()}${pu()}`}});function pu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Im=new F("Platform Initializer"),Sm=new F("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),en=new F("LocaleId",{providedIn:"root",factory:()=>function Qv(e,t=M.Default){return G(e,es(t))}(en,M.Optional|M.SkipSelf)||function LS(){return typeof $localize<"u"&&$localize.locale||Er}()}),jS=(()=>Promise.resolve(0))();function gu(e){typeof Zone>"u"?jS.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Ae{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qt(!1),this.onMicrotaskEmpty=new Qt(!1),this.onStable=new Qt(!1),this.onError=new Qt(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function HS(){let e=ee.requestAnimationFrame,t=ee.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function WS(e){const t=()=>{!function GS(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ee,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,yu(e),e.isCheckStableRunning=!0,mu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),yu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Mm(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),xm(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Mm(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),xm(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,yu(e),mu(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ae.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(Ae.isInAngularZone())throw new I(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,zS,Qs,Qs);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const zS={};function mu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function yu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Mm(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function xm(e){e._nesting--,mu(e)}class qS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qt,this.onMicrotaskEmpty=new Qt,this.onStable=new Qt,this.onError=new Qt}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Pm=new F(""),eo=new F("");let bu,_u=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bu||(function YS(e){bu=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ae.assertNotInAngularZone(),gu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(G(Ae),G(vu),G(eo))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})(),vu=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return bu?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const tn=!1;let gn=null;const Nm=new F("AllowMultipleToken"),Du=new F("PlatformDestroyListeners"),KS=new F("appBootstrapListener");function Rm(e,t,n=[]){const r=`Platform: ${t}`,i=new F(r);return(s=[])=>{let o=wu();if(!o||o.injector.get(Nm,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function QS(e){if(gn&&!gn.get(Nm,!1))throw new I(400,!1);gn=e;const t=e.get(Fm);(function Om(e){const t=e.get(Im,null);t&&t.forEach(n=>n())})(e)}(function km(e=[],t){return On.create({name:t,providers:[{provide:ll,useValue:"platform"},{provide:Du,useValue:new Set([()=>gn=null])},...e]})}(a,r))}return function eT(e){const t=wu();if(!t)throw new I(401,!1);return t}()}}function wu(){return gn?.get(Fm)??null}let Fm=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function $m(e,t){let n;return n="noop"===e?new qS:("zone.js"===e?void 0:e)||new Ae(t),n}(r?.ngZone,function Lm(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Ae,useValue:i}];return i.run(()=>{const o=On.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),l=a.injector.get(ur,null);if(!l)throw new I(402,!1);return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{to(this._modules,a),u.unsubscribe()})}),function Bm(e,t,n){try{const r=n();return Bl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(Js);return u.runInitializers(),u.donePromise.then(()=>(function hg(e){tt(e,"Expected localeId to be defined"),"string"==typeof e&&(fg=e.toLowerCase().replace(/_/g,"-"))}(a.injector.get(en,Er)||Er),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=Um({},r);return function XS(e,t,n){const r=new eu(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Cu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new I(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new I(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Du,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(G(On))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Um(e,t){return Array.isArray(t)?t.reduce(Um,e):{...e,...t}}let Cu=(()=>{class e{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Fe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Fe(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Ae.assertNotInAngularZone(),gu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Ae.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=Fv(s,o.pipe(function Lv(e={}){const{connector:t=(()=>new Wo),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=l=void 0,c=d=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return Vr((g,y)=>{u++,!d&&!c&&f();const _=l=l??t();y.add(()=>{u--,0===u&&!d&&!c&&(a=Ko(p,i))}),_.subscribe(y),!o&&u>0&&(o=new Ur({next:D=>_.next(D),error:D=>{d=!0,f(),a=Ko(h,n,D),_.error(D)},complete:()=>{c=!0,f(),a=Ko(h,r),_.complete()}}),un(g).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof gh;if(!this._injector.get(Js).done){!i&&function qr(e){const t=K(e)||Ce(e)||$e(e);return null!==t&&t.standalone}(n);throw new I(405,tn)}let o;o=i?n:this._injector.get(Os).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function ZS(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Ir),u=o.create(On.NULL,[],r||o.selector,a),c=u.location.nativeElement,d=u.injector.get(Pm,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),to(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new I(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;to(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(KS,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>to(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new I(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(G(Ae),G(sr),G(ur))},e.\u0275prov=re({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function to(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Gm{constructor(){}supports(t){return js(t)}create(t){return new cT(t)}}const uT=(e,t)=>t;class cT{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||uT}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<qm(r,i,s)?n:r,a=qm(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;c<=p&&p<u&&(s[f]=h+1)}s[o.previousIndex]=c-u}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!js(t))throw new I(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function DE(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new dT(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class dT{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fT{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Wm{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new fT,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qm(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Km(){return new io([new Gm])}let io=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Km()),deps:[[e,new ws,new Ds]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new I(901,!1)}}return e.\u0275prov=re({token:e,providedIn:"root",factory:Km}),e})();const yT=Rm(null,"core",[]);let _T=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(G(Cu))},e.\u0275mod=Wr({type:e}),e.\u0275inj=Vn({}),e})(),Au=null;function so(){return Au}class DT{}const nn=new F("DocumentToken");class uA{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let uy=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new uA(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),cy(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{cy(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)($(Lt),$(Jt),$(io))},e.\u0275dir=rt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function cy(e,t){e.context.$implicit=t.item}let LA=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wr({type:e}),e.\u0275inj=Vn({}),e})();class gM extends DT{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Gu extends gM{static makeCurrent(){!function bT(e){Au||(Au=e)}(new Gu)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function mM(){return Ni=Ni||document.querySelector("base"),Ni?Ni.getAttribute("href"):null}();return null==n?null:function yM(e){_o=_o||document.createElement("a"),_o.setAttribute("href",e);const t=_o.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Ni=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function oA(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let _o,Ni=null;const by=new F("TRANSITION_ID"),vM=[{provide:Cm,useFactory:function _M(e,t,n){return()=>{n.get(Js).donePromise.then(()=>{const r=so(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[by,nn,On],multi:!0}];let DM=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const vo=new F("EventManagerPlugins");let bo=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(G(vo),G(Ae))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();class Dy{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=so().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let wy=(()=>{class e{constructor(){this.usageCount=new Map}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(n){}onStyleAdded(n){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(n,r){const i=this.usageCount;let s=i.get(n)??0;return s+=r,s>0?i.set(n,s):i.delete(n),s}ngOnDestroy(){for(const n of this.getAllStyles())this.onStyleRemoved(n);this.usageCount.clear()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})(),Oi=(()=>{class e extends wy{constructor(n){super(),this.doc=n,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.forEach(s=>s.remove()),r.delete(n)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}addStyleToHost(n,r){const i=this.doc.createElement("style");i.textContent=r,n.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(G(nn))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const Wu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qu=/%COMP%/g,Iy=new F("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Sy(e,t){return t.flat(100).map(n=>n.replace(qu,e))}function Ty(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Yu=(()=>{class e{constructor(n,r,i,s){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new Ku(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(n,r);return i instanceof xy?i.applyToHost(n):i instanceof Xu&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(r.encapsulation){case Mt.Emulated:s=new xy(o,a,r,this.appId,l);break;case Mt.ShadowDom:return new AM(o,a,n,r);default:s=new Xu(o,a,r,l)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(G(bo),G(Oi),G(Ti),G(Iy))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();class Ku{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(Wu[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(My(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(My(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=Wu[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Wu[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ue.DashCase|Ue.Important)?t.style.setProperty(n,r,i&Ue.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ue.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Ty(r)):this.eventManager.addEventListener(t,n,Ty(r))}}function My(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class AM extends Ku{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Sy(i.id,i.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Xu extends Ku{constructor(t,n,r,i,s=r.id){super(t),this.sharedStylesHost=n,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Sy(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class xy extends Xu{constructor(t,n,r,i,s){const o=i+"-"+r.id;super(t,n,r,s,o),this.contentAttr=function IM(e){return"_ngcontent-%COMP%".replace(qu,e)}(o),this.hostAttr=function SM(e){return"_nghost-%COMP%".replace(qu,e)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let MM=(()=>{class e extends Dy{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(G(nn))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const Py=["alt","control","meta","shift"],xM={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PM={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let NM=(()=>{class e extends Dy{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>so().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),Py.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=xM[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Py.forEach(o=>{o!==i&&(0,PM[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(G(nn))},e.\u0275prov=re({token:e,factory:e.\u0275fac}),e})();const FM=Rm(yT,"browser",[{provide:Sm,useValue:"browser"},{provide:Im,useValue:function OM(){Gu.makeCurrent()},multi:!0},{provide:nn,useFactory:function kM(){return function ew(e){Qa=e}(document),document},deps:[]}]),Ry=new F(""),ky=[{provide:eo,useClass:class bM{addToWindow(t){ee.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},ee.getAllAngularTestabilities=()=>t.getAllTestabilities(),ee.getAllAngularRootElements=()=>t.getAllRootElements(),ee.frameworkStabilizers||(ee.frameworkStabilizers=[]),ee.frameworkStabilizers.push(r=>{const i=ee.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?so().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Pm,useClass:_u,deps:[Ae,vu,eo]},{provide:_u,useClass:_u,deps:[Ae,vu,eo]}],Fy=[{provide:ll,useValue:"root"},{provide:ur,useFactory:function RM(){return new ur},deps:[]},{provide:vo,useClass:MM,multi:!0,deps:[nn,Ae,Sm]},{provide:vo,useClass:NM,multi:!0,deps:[nn]},{provide:Yu,useClass:Yu,deps:[bo,Oi,Ti,Iy]},{provide:yh,useExisting:Yu},{provide:wy,useExisting:Oi},{provide:Oi,useClass:Oi,deps:[nn]},{provide:bo,useClass:bo,deps:[vo,Ae]},{provide:class jA{},useClass:DM,deps:[]},[]];let LM=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ti,useValue:n.appId},{provide:by,useExisting:Ti},vM]}}}return e.\u0275fac=function(n){return new(n||e)(G(Ry,12))},e.\u0275mod=Wr({type:e}),e.\u0275inj=Vn({providers:[...Fy,...ky],imports:[LA,_T]}),e})();function Ju(e){for(let t in e){let n=[...t].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),e[t].reg&&e[t].reg(n)}}function By(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(r,i)}function ge(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(l){By(s,r,i,o,a,"next",l)}function a(l){By(s,r,i,o,a,"throw",l)}o(void 0)})}}typeof window<"u"&&window;var GM=Object.defineProperty,ec=(e,t,n)=>(((e,t,n)=>{t in e?GM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),J=class{constructor(e){e.constructor===Object?this.store=function qM(e){let t=n=>{var r;for(let i in n)(null==(r=n[i])?void 0:r.constructor)===Object&&(n[i]=t(n[i]));return{...n}};return t(e)}(e):(this._storeIsProxy=!0,this.store=e),this.callbackMap=Object.create(null)}static warn(e,t){console.warn(`Symbiote Data: cannot ${e}. Prop name: `+t)}read(e){return this._storeIsProxy||this.store.hasOwnProperty(e)?this.store[e]:(J.warn("read",e),null)}has(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}add(e,t,n=!1){!n&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}pub(e,t){this._storeIsProxy||this.store.hasOwnProperty(e)?(this.store[e]=t,this.notify(e)):J.warn("publish",e)}multiPub(e){for(let t in e)this.pub(t,e[t])}notify(e){this.callbackMap[e]&&this.callbackMap[e].forEach(t=>{t(this.store[e])})}sub(e,t,n=!0){return this._storeIsProxy||this.store.hasOwnProperty(e)?(this.callbackMap[e]||(this.callbackMap[e]=new Set),this.callbackMap[e].add(t),n&&t(this.store[e]),{remove:()=>{this.callbackMap[e].delete(t),this.callbackMap[e].size||delete this.callbackMap[e]},callback:t}):(J.warn("subscribe",e),null)}static registerCtx(e,t=Symbol()){let n=J.globalStore.get(t);return n?console.warn('State: context UID "'+t+'" already in use'):(n=new J(e),J.globalStore.set(t,n)),n}static deleteCtx(e){J.globalStore.delete(e)}static getCtx(e,t=!0){return J.globalStore.get(e)||(t&&console.warn('State: wrong context UID - "'+e+'"'),null)}};J.globalStore=new Map;var B=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),Uy="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm",YM=Uy.length-1,tc=class{static generate(e="XXXXXXXXX-XXX"){let t="";for(let n=0;n<e.length;n++)t+="-"===e[n]?e[n]:Uy.charAt(Math.random()*YM);return t}};function Vy(e,t,n){let i,r=!0,s=t.split(".");return s.forEach((o,a)=>{a<s.length-1?e=e[o]:i=o}),e?e[i]=n:r=!1,r}var jy="__default__",Ri="}}",rx=[function XM(e,t){[...e.querySelectorAll(`[${B.REPEAT_ATTR}]`)].forEach(n=>{let i,r=n.getAttribute(B.REPEAT_ITEM_TAG_ATTR);for(r&&(i=window.customElements.get(r)),i||(i=class extends t.BaseComponent{constructor(){super(),r||(this.style.display="contents")}},i.template=n.innerHTML,i.reg(r));n.firstChild;)n.firstChild.remove();let s=n.getAttribute(B.REPEAT_ATTR);t.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let l,a=[...n.children],u=c=>{c.forEach((f,h)=>{if(a[h])if(a[h].set$)setTimeout(()=>{a[h].set$(f)});else for(let p in f)a[h][p]=f[p];else{l||(l=new DocumentFragment);let p=new i;Object.assign(p.init$,f),l.appendChild(p)}}),l&&n.appendChild(l);let d=a.slice(c.length,a.length);for(let f of d)f.remove()};if(o.constructor===Array)u(o);else if(o.constructor===Object){let c=[];for(let d in o){let f=o[d];Object.defineProperty(f,"_KEY_",{value:d,enumerable:!0}),c.push(f)}u(c)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(B.REPEAT_ATTR),n.removeAttribute(B.REPEAT_ITEM_TAG_ATTR)})},function ZM(e,t){if(t.shadowRoot)return;let n=[...e.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||jy;r[s]={slot:i,fr:document.createDocumentFragment()}}),t.initChildren.forEach(i=>{var s;let o=jy;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),null==(s=r[o])||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})},function QM(e,t){[...e.querySelectorAll(`[${B.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(B.EL_REF_ATTR);t.ref[r]=n,n.removeAttribute(B.EL_REF_ATTR)})},function JM(e,t){[...e.querySelectorAll(`[${B.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(B.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=function KM(e){return e.split("-").map((t,n)=>t&&n?t[0].toUpperCase()+t.slice(1):t).join("").split("_").map((t,n)=>t&&n?t.toUpperCase():t).join("")}(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let l,o=s.split(":").map(c=>c.trim()),a=o[0];0===a.indexOf(B.ATTR_BIND_PRFX)&&(l=!0,a=a.replace(B.ATTR_BIND_PRFX,""));let u=o[1].split(",").map(c=>c.trim());for(let c of u){let d;c.startsWith("!!")?(d="double",c=c.replace("!!","")):c.startsWith("!")&&(d="single",c=c.replace("!","")),t.sub(c,f=>{"double"===d?f=!!f:"single"===d&&(f=!f),l?f?.constructor===Boolean?f?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,f):Vy(n,a,f)||(n[B.SET_LATER_KEY]||(n[B.SET_LATER_KEY]=Object.create(null)),n[B.SET_LATER_KEY][a]=f)})}}),n.removeAttribute(B.BIND_ATTR)})},function(e,t){(function tx(e){let t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!(null!=(s=i.parentElement)&&s.hasAttribute("skip-text"))&&i.textContent.includes("{{")&&i.textContent.includes(Ri)&&1}});for(;t=r.nextNode();)n.push(t);return n})(e).forEach(r=>{let s,i=[];for(;r.textContent.includes(Ri);)r.textContent.startsWith("{{")?(s=r.textContent.indexOf(Ri)+Ri.length,r.splitText(s),i.push(r)):(s=r.textContent.indexOf("{{"),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace("{{","").replace(Ri,"");o.textContent="",t.sub(a,l=>{o.textContent=l})})})}],wo="'",Ar='"',ix=/\\([0-9a-fA-F]{1,6} ?)/g;var Hy=0,Mr=null,sn=null,yn=class extends HTMLElement{constructor(){super(),ec(this,"updateCssData",()=>{var e;this.dropCssDataCache(),null==(e=this.__boundCssProps)||e.forEach(t=>{let n=this.getCssData(this.__extractCssName(t),!0);null!==n&&this.$[t]!==n&&(this.$[t]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return yn}initCallback(){}__initCallback(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}render(e,t=this.renderShadow){let n;if((t||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(B.USE_TPL);if(i){let o=this.getRootNode()?.querySelector(i)||document.querySelector(i);o?e=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(e||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),e?.constructor===DocumentFragment)n=e;else if(e?.constructor===String){let i=document.createElement("template");i.innerHTML=e,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(t&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){t=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(e){this.tplProcessors.add(e)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=tc.generate(),this.style.setProperty(B.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(B.CSS_CTX_PROP,!0)}get ctxName(){var e;let t=(null==(e=this.getAttribute(B.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}get localCtx(){return this.__localCtx||(this.__localCtx=J.registerCtx({},this)),this.__localCtx}get nodeCtx(){return J.getCtx(this.ctxName,!1)||J.registerCtx({},this.ctxName)}static __parseProp(e,t){let n,r;if(e.startsWith(B.EXT_DATA_CTX_PRFX))n=t.nodeCtx,r=e.replace(B.EXT_DATA_CTX_PRFX,"");else if(e.includes(B.NAMED_DATA_CTX_SPLTR)){let i=e.split(B.NAMED_DATA_CTX_SPLTR);n=J.getCtx(i[0]),r=i[1]}else n=t.localCtx,r=e;return{ctx:n,name:r}}sub(e,t,n=!0){let r=s=>{this.isConnected&&t(s)},i=yn.__parseProp(e,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(e){let t=yn.__parseProp(e,this);t.ctx.notify(t.name)}has(e){let t=yn.__parseProp(e,this);return t.ctx.has(t.name)}add(e,t,n=!1){let r=yn.__parseProp(e,this);r.ctx.add(r.name,t,n)}add$(e,t=!1){for(let n in e)this.add(n,e[n],t)}get $(){return this.__stateProxy||(this.__stateProxy=new Proxy(Object.create(null),{set:(t,n,r)=>{let i=yn.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(t,n)=>{let r=yn.__parseProp(n,this);return r.ctx.read(r.name)}})),this.__stateProxy}set$(e,t=!1){for(let n in e){let r=e[n];(t||![String,Number,Boolean].includes(r?.constructor)||this.$[n]!==r)&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(B.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(B.CTX_OWNER_ATTR)}__initDataCtx(){let e=this.constructor.__attrDesc;if(e)for(let t of Object.values(e))Object.keys(this.init$).includes(t)||(this.init$[t]="");for(let t in this.init$)if(t.startsWith(B.EXT_DATA_CTX_PRFX))this.nodeCtx.add(t.replace(B.EXT_DATA_CTX_PRFX,""),this.init$[t],this.__ctxOwner);else if(t.includes(B.NAMED_DATA_CTX_SPLTR)){let n=t.split(B.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=J.getCtx(r,!1);s||(s=J.registerCtx({},r)),s.add(i,this.init$[t])}}else this.localCtx.add(t,this.init$[t]);for(let t in this.cssInit$)this.bindCssData(t,this.cssInit$[t]);this.__dataCtxInitialized=!0}connectedCallback(){var e;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let t=null==(e=this.getAttribute(B.CTX_NAME_ATTR))?void 0:e.trim();if(t&&this.style.setProperty(B.CSS_CTX_PROP,`'${t}'`),this.__initDataCtx(),this[B.SET_LATER_KEY]){for(let n in this[B.SET_LATER_KEY])Vy(this,n,this[B.SET_LATER_KEY][n]);delete this[B.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of rx)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n?.querySelector(`link[${B.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`))return void this.render();let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(B.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let e of this.allSubs)e.remove(),this.allSubs.delete(e);for(let e of this.tplProcessors)this.tplProcessors.delete(e);sn?.delete(this.updateCssData),sn?.size||(Mr?.disconnect(),Mr=null,sn=null)},100)))}static reg(e,t=!1){e||(Hy++,e=`${B.AUTO_TAG_PRFX}-${Hy}`),this.__tag=e,window.customElements.get(e)?console.warn(`${e} - is already in "customElements" registry`):window.customElements.define(e,t?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}attributeChangedCallback(e,t,n){var r;if(t===n)return;let i=null==(r=this.constructor.__attrDesc)?void 0:r[e];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[e]=n}getCssData(e,t=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=function lx(e){let t=e;(function sx(e){return!(e[0]!==Ar&&e[0]!==wo||e[e.length-1]!==Ar&&e[e.length-1]!==wo)})(e)&&(t=function ox(e){return(e[0]===Ar||e[0]===wo)&&(e=e.slice(1)),(e[e.length-1]===Ar||e[e.length-1]===wo)&&(e=e.slice(0,-1)),e}(t),t=t.replace(ix,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),t=t.replaceAll("\\\n","\\n"),t=function ax(e){let t="",n="";for(var r=0;r<e.length;r++)"\\"===e[r]&&'"'===e[r+1]?(t+='\\"',r++):t+='"'===e[r]&&"\\"!==n?'\\"':e[r],n=e[r];return t}(t),t=Ar+t+Ar);try{return JSON.parse(t)}catch{throw new Error(`Failed to parse CSS property value: ${t}. Original input: ${e}`)}}(n)}catch{!t&&console.warn(`CSS Data error: ${e}`),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}__extractCssName(e){return e.split("--").map((t,n)=>0===n?"":t).join("--")}__initStyleAttrObserver(){sn||(sn=new Set),sn.add(this.updateCssData),Mr||(Mr=new MutationObserver(e=>{"attributes"===e[0].type&&sn.forEach(t=>{t()})})).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}bindCssData(e,t=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);let n=this.getCssData(this.__extractCssName(e),!0);null===n&&(n=t),this.add(e,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(e,t,n){let r="__"+e;this[r]=this[e],Object.defineProperty(this,e,{set:i=>{this[r]=i,n?window.setTimeout(()=>{t?.(i)}):t?.(i)},get:()=>this[r]}),this[e]=this[r]}static set shadowStyles(e){let t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}static set rootStyles(e){if(!this.__rootStylesLink){let t=new Blob([e],{type:"text/css"}),n=URL.createObjectURL(t),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},Co=yn;ec(Co,"template");var nc=class{static _print(e){console.warn(e)}static setDefaultTitle(e){this.defaultTitle=e}static setRoutingMap(e){Object.assign(this.appMap,e);for(let t in this.appMap)this.defaultRoute||!0!==this.appMap[t].default?!this.errorRoute&&!0===this.appMap[t].error&&(this.errorRoute=t):this.defaultRoute=t}static set routingEventName(e){this.__routingEventName=e}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let e={route:null,options:{}};return window.location.search.split(this.separator).forEach(n=>{if(n.includes("?"))e.route=n.replace("?","");else if(n.includes("=")){let r=n.split("=");e.options[r[0]]=decodeURI(r[1])}else e.options[n]=!0}),e}static notify(){let e=this.readAddressBar(),t=this.appMap[e.route];if(t&&t.title&&(document.title=t.title),null===e.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!t&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t)return void this._print(`Route "${e.route}" not found...`);let n=new CustomEvent(nc.routingEventName,{detail:{route:e.route,options:Object.assign(t||{},e.options)}});window.dispatchEvent(n)}static reflect(e,t={}){let n=this.appMap[e];if(!n)return void this._print("Wrong route: "+e);let r="?"+e;for(let s in t)r+=!0===t[s]?this.separator+s:this.separator+s+`=${t[s]}`;let i=n.title||this.defaultTitle||"";window.history.pushState(null,i,r),document.title=i}static applyRoute(e,t={}){this.reflect(e,t),this.notify()}static setSeparator(e){this._separator=e}static get separator(){return this._separator||"&"}static createRouterData(e,t){this.setRoutingMap(t);let n=J.registerCtx({route:null,options:null,title:null},e);return window.addEventListener(this.routingEventName,r=>{var i;n.multiPub({route:r.detail.route,options:r.detail.options,title:(null==(i=r.detail.options)?void 0:i.title)||this.defaultTitle||""})}),nc.notify(),this.initPopstateListener(),n}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function rc(e={tag:"div"}){let t=document.createElement(e.tag);if(e.attributes&&function cx(e,t){for(let n in t)t[n].constructor===Boolean?t[n]?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,t[n])}(t,e.attributes),e.styles&&function ux(e,t){for(let n in t)n.includes("-")?e.style.setProperty(n,t[n]):e.style[n]=t[n]}(t,e.styles),e.properties)for(let n in e.properties)t[n]=e.properties[n];return e.processors&&e.processors.forEach(n=>{n(t)}),e.children&&e.children.forEach(n=>{let r=rc(n);t.appendChild(r)}),t}nc.appMap=Object.create(null);var zy="idb-store-ready",Gy=class{static get readyEventName(){return zy}static open(e="symbiote-db",t="store"){let n=e+"/"+t;return this._reg[n]||(this._reg[n]=new class{_notifyWhenReady(e=null){window.dispatchEvent(new CustomEvent(zy,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}get _updEventName(){return"symbiote-idb-update_"+this.name}_getUpdateEvent(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}_notifySubscribers(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}constructor(e,t){var n=this;this.name=e,this.storeName=t,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=r=>{this.db=r.target.result,this.objStore=this.db.createObjectStore(t,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=r=>{this.db=r.target.result,this._notifyWhenReady(r)},this.request.onerror=r=>{console.error(r)},this._subscriptionsMap={},this._updateHandler=r=>{r.key===this.name&&this._subscriptionsMap[r.newValue]&&this._subscriptionsMap[r.newValue].forEach(function(){var s=ge(function*(o){o(yield n.read(r.newValue))});return function(o){return s.apply(this,arguments)}}())},this._localUpdateHandler=r=>{this._updateHandler(r.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(e){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(e);return new Promise((r,i)=>{n.onsuccess=s=>{var o;null!=(o=s.target.result)&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${e}"`))},n.onerror=s=>{i(s)}})}write(e,t,n=!1){let r={_key:e,_value:t},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(e),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(e,t=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e);return new Promise((i,s)=>{r.onsuccess=o=>{t||this._notifySubscribers(e),i(o)},r.onerror=o=>{s(o)}})}getAll(){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{t.onsuccess=i=>{n(i.target.result.map(o=>o._value))},t.onerror=i=>{r(i)}})}subscribe(e,t){this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);let n=this._subscriptionsMap[e];return n.add(t),{remove:()=>{n.delete(t),n.size||delete this._subscriptionsMap[e]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,Gy.clear(this.name)}}(e,t)),this._reg[n]}static clear(e){window.indexedDB.deleteDatabase(e);for(let t in this._reg)t.split("/")[0]===e&&delete this._reg[t]}};function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(e,t,n){return(t=function gx(e){var t=function px(e,t){if("object"!==ki(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ki(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ec(Gy,"_reg",Object.create(null));const mx=e=>e,ic="{{",Wy="}}",qy="plural:";function sc(e,t,n={}){let{openToken:r=ic,closeToken:i=Wy,transform:s=mx}=n;for(let o in t){let a=t[o]?.toString();e=e.replaceAll(r+o+i,"string"==typeof a?s(a):a)}return e}function _x(e,t){[...e.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n"),i="textContent";if(r.includes(":")){let o=r.split(":");i=o[0],r=o[1]}let s="l10n:"+r;t.__l10nKeys.push(s),t.add(s,r),t.sub(s,o=>{n[i]=t.l10n(o)}),n.removeAttribute("l10n")})}const Yy=()=>({"*blocksRegistry":new Set}),Ky=e=>({...Yy(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{e.set$({"*modalActive":!1,"*currentActivity":""})}}),Xy=e=>({...Ky(e),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null});function xr(e,t){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)};return r.cancel=()=>{clearTimeout(n)},r}const Eo="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function Zy(){return!(typeof window[Eo]>"u"||!window[Eo])}let ne=(()=>{class e extends Co{l10n(n,r={}){if(!n)return"";let i=this.getCssData("--l10n-"+n,!0)||n,s=function yx(e){const t=[];let n=e.indexOf(ic);for(;-1!==n;){const r=e.indexOf(Wy,n),i=e.substring(n+2,r);if(i.startsWith(qy)){const s=e.substring(n+2,r).replace(qy,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));t.push({variable:i,pluralKey:o,countVariable:a})}n=e.indexOf(ic,r)}return t}(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return sc(i,r)}pluralize(n,r){const i=this.l10n("locale-name")||"en-US",s=new Intl.PluralRules(i).select(r);return this.l10n(`${n}__${s}`)}constructor(){super(),b(this,"allowCustomTemplate",!0),b(this,"ctxInit",Yy()),b(this,"init$",this.ctxInit),b(this,"updateCtxCssData",()=>{let n=this.$["*blocksRegistry"];for(let r of n)r.updateCssData()}),this.activityType=null,this.addTemplateProcessor(_x),this.__l10nKeys=[]}applyL10nKey(n,r){this.$["l10n:"+n]=r,this.__l10nKeys.push(n)}findBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setForCtxTarget(n,r,i){this.findBlockInCtx(s=>s.constructor.StateConsumerScope===n)&&(this.$[r]=i)}setActivity(n){this.findBlockInCtx(r=>r.activityType===n)?this.$["*currentActivity"]=n:console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){if(Zy()||(this._destroyInnerHeightTracker=function bx(){if(Zy())return;const e=()=>{document.documentElement.style.setProperty("--uploadcare-blocks-window-height",`${window.innerHeight}px`),window[Eo]=!0},t=xr(e,100);return window.addEventListener("resize",t,{passive:!0}),e(),()=>{window[Eo]=!1,window.removeEventListener("resize",t)}}()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.isConnected&&this.__ctxOwner){let n=J.getCtx(this.ctxName,!1);n&&(n.store={...this.ctxInit})}super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._destroyInnerHeightTracker?.()}initCallback(){this.$["*blocksRegistry"].add(this)}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"],s=u=>this.getCssData("--l10n-unit-"+u.toLowerCase(),!0)||u;if(0===n)return`0 ${s(i[0])}`;let a=r<0?0:r,l=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/1024**l).toFixed(a))+" "+s(i[l])}proxyUrl(n){let r=this.getCssData("--cfg-secure-delivery-proxy",!0);return r?sc(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}static reg(n){n?super.reg(n.startsWith("lr-")?n:"lr-"+n):super.reg()}}return b(e,"StateConsumerScope",null),e})(),_n=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"_handleBackdropClick",()=>{this._closeDialog()}),b(this,"_closeDialog",()=>{this.setForCtxTarget(e.StateConsumerScope,"*modalActive",!1)}),b(this,"_handleDialogClose",()=>{this._closeDialog()}),b(this,"_handleDialogClick",r=>{r.target===this.ref.dialog&&this._closeDialog()}),b(this,"init$",{...this.ctxInit,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}),b(this,"cssInit$",{"--cfg-modal-backdrop-strokes":0})}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),"function"==typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("click",this._handleDialogClick);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),n&&this.getCssData("--cfg-modal-scroll-lock")?document.body.style.overflow="hidden":document.body.style.overflow=null}),this.sub("--cfg-modal-backdrop-strokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("click",this._handleDialogClick)}}return b(e,"StateConsumerScope","modal"),e.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n',e})();const Fi="___ACTIVITY_IS_ACTIVE___";class L extends ne{constructor(...t){super(...t),b(this,"historyTracked",!1),b(this,"ctxInit",Ky(this)),b(this,"_debouncedHistoryFlush",xr(this._historyFlush.bind(this),10))}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",t=>{this.setAttribute("current-activity",t)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",t=>{let r=L._activityRegistry[this.ctxName+this.activityType];this.activityType!==t&&this[Fi]?(this[Fi]=!1,this.removeAttribute("active"),r?.deactivateCallback?.()):this.activityType===t&&!this[Fi]&&(this.$["*historyBack"]=this.historyBack.bind(this),this[Fi]=!0,this.setAttribute("active",""),r?.activateCallback?.(),this._debouncedHistoryFlush()),t||(this.$["*history"]=[])}))}_historyFlush(){let t=this.$["*history"];t&&(t.length>10&&(t=t.slice(t.length-11,t.length-1)),this.historyTracked&&t.push(this.activityType),this.$["*history"]=t)}get isActivityActive(){return this[Fi]}registerActivity(t,n={}){const{onActivate:r,onDeactivate:i}=n;L._activityRegistry||(L._activityRegistry=Object.create(null)),L._activityRegistry[this.ctxName+t]={activateCallback:r,deactivateCallback:i}}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let t=this.$["*history"];if(t){let n=t.pop();for(;n===this.activityType;)n=t.pop();this.$["*currentActivity"]=n,this.$["*history"]=t,n||this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!1)}}}b(L,"_activityRegistry",Object.create(null)),L.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const Io=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],e_=e=>e?e.map(t=>t?.split(",")).flat().filter(t=>"string"==typeof t&&t).map(t=>t.trim()):[],t_=(e,t)=>t.some(n=>n.endsWith("*")?(n=n.replace("*",""),e.startsWith(n)):e===n),oc=e=>{let t=e?.type;return!!t&&t_(t,Io)};function n_(e){return"[object Object]"===Object.prototype.toString.call(e)}const Dx=/\W|_/g;function wx(e){return e.split(Dx).map((t,n)=>t.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+t.slice(1)).join("")}function r_(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map(n=>$t(n,{ignoreKeys:t})):e}function $t(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return r_(e,{ignoreKeys:t});if(!n_(e))return e;const n={};for(const r of Object.keys(e)){let i=e[r];t.includes(r)?n[r]=i:(n_(i)?i=$t(i,{ignoreKeys:t}):Array.isArray(i)&&(i=r_(i,{ignoreKeys:t})),n[wx(r)]=i)}return n}const Cx=e=>new Promise(t=>setTimeout(t,e));function i_({libraryName:e,libraryVersion:t,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";return"string"==typeof n?n:"function"==typeof n?n({publicKey:r,libraryName:e,libraryVersion:t,languageName:s,integration:i}):`${[e,t,r].filter(Boolean).join("/")} (${[s,i].filter(Boolean).join("; ")})`}const Ex={factor:2,time:100};class So extends Error{constructor(t){super(),this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,So.prototype),this.originalProgressEvent=t}}const To=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",()=>t(),{once:!0}))};class Pr extends Error{constructor(t="Request canceled"){super(t),this.isCancel=!0,Object.setPrototypeOf(this,Pr.prototype)}}const s_=({check:e,interval:t=500,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;To(r,()=>{o&&clearTimeout(o),s(new Pr("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Pr("Timed out"))},n));const l=()=>{try{Promise.resolve(e(r)).then(u=>{u?(a&&clearTimeout(a),i(u)):o=setTimeout(l,t)}).catch(u=>{a&&clearTimeout(a),s(u)})}catch(u){a&&clearTimeout(a),s(u)}};o=setTimeout(l,0)}),V={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},ac="application/octet-stream",o_="original",on=({method:e,url:t,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,u=e?.toUpperCase()||"GET";let c=!1;l.open(u,t,!0),r&&Object.entries(r).forEach(d=>{const[f,h]=d;typeof h<"u"&&!Array.isArray(h)&&l.setRequestHeader(f,h)}),l.responseType="text",To(i,()=>{c=!0,l.abort(),a(new Pr)}),l.onload=()=>{if(200!=l.status)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const d={method:u,url:t,data:n,headers:r||void 0,signal:i,onProgress:s},f=l.getAllResponseHeaders().trim().split(/[\r\n]+/),h={};f.forEach(function(y){const _=y.split(": "),D=_.shift(),m=_.join(": ");D&&typeof D<"u"&&(h[D]=m)}),o({request:d,data:l.response,headers:h,status:l.status})}},l.onerror=d=>{c||a(new So(d))},s&&"function"==typeof s&&(l.upload.onprogress=d=>{s(d.lengthComputable?{isComputable:!0,value:d.loaded/d.total}:{isComputable:!1})}),n?l.send(n):l.send()}),Ax=({name:e})=>e?[e]:[],Mx=function Tx(e,...t){return e};var xx=()=>new FormData;const Ao=e=>typeof Blob<"u"&&e instanceof Blob,Mo=e=>typeof File<"u"&&e instanceof File,lc=e=>typeof Buffer<"u"&&e instanceof Buffer,xo=e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&"uri"in e&&"string"==typeof e.uri,Li=e=>Ao(e)||Mo(e)||lc(e)||xo(e),Px=e=>"string"==typeof e||"number"==typeof e||typeof e>"u",Nx=e=>!!e&&"object"==typeof e&&!Array.isArray(e),Ox=e=>!!e&&"object"==typeof e&&"data"in e&&Li(e.data);function Rx(e,t,n){if(Ox(n)){const{name:r,contentType:i}=n,s=Mx(n.data,r,i),o=Ax({name:r,contentType:i});e.push([t,s,...o])}else if(Nx(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&e.push([`${t}[${r}]`,String(i)]);else Px(n)&&n&&e.push([t,n.toString()])}function uc(e){const t=xx(),n=function kx(e){const t=[];for(const[n,r]of Object.entries(e))Rx(t,n,r);return t}(e);for(const r of n){const[i,s,...o]=r;t.append(i,s,...o)}return t}class He extends Error{constructor(t,n,r,i,s){super(),this.name="UploadClientError",this.message=t,this.code=n,this.request=r,this.response=i,this.headers=s,Object.setPrototypeOf(this,He.prototype)}}const Bt=(e,t,n)=>{const r=new URL(e);return r.pathname=(r.pathname+t).replace("//","/"),n&&(r.search=(e=>{const t=new URLSearchParams;for(const[n,r]of Object.entries(e))r&&"object"==typeof r&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>t.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{t.append(`${n}[]`,i)}):"string"==typeof r&&r?t.set(n,r):"number"==typeof r&&t.set(n,r.toString());return t.toString()})(n)),r.toString()},$x="UploadcareUploadClient",Bx="6.4.1";function vn(e){return i_({libraryName:$x,libraryVersion:Bx,...e})}const Ux="RequestThrottledError",a_=15e3,Vx=1e3;function an(e,t){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=t;return function Ix(e,t=Ex){let n=0;return function r(i){const s=Math.round(t.time*t.factor**n);return i({attempt:n,retry:a=>Cx(a??s).then(()=>(n+=1,r(i)))})}(e)}(({attempt:i,retry:s})=>e().catch(o=>{if("response"in o&&o?.code===Ux&&i<n)return s(function jx(e){const{headers:t}=e||{};if(!t||"string"!=typeof t["retry-after"])return a_;const n=parseInt(t["retry-after"],10);return Number.isFinite(n)?1e3*n:a_}(o));if(o instanceof So&&i<r)return s((i+1)*Vx);throw o}))}const l_=e=>{let t="";return(Ao(e)||Mo(e)||xo(e))&&(t=e.type),t||ac},u_=e=>{let t="";return Mo(e)&&e.name?t=e.name:Ao(e)||lc(e)?t="":xo(e)&&e.name&&(t=e.name),t||o_};function cc(e){return typeof e>"u"||"auto"===e?"auto":e?"1":"0"}var Po=(()=>{return(e=Po||(Po={})).Token="token",e.FileInfo="file_info",Po;var e})();var Re=(()=>{return(e=Re||(Re={})).Unknown="unknown",e.Waiting="waiting",e.Progress="progress",e.Error="error",e.Success="success",Re;var e})();const Hx=e=>"status"in e&&e.status===Re.Error;function dc(e,{publicKey:t,baseURL:n=V.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=V.retryNetworkErrorMaxTimes}){return an(()=>on({method:"GET",headers:{"X-UC-User-Agent":vn({publicKey:t,integration:s,userAgent:o})},url:Bt(n,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:i}),signal:r}).then(({data:u,headers:c,request:d})=>{const f=$t(JSON.parse(u));if("error"in f)throw new He(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function fc({file:e,publicKey:t,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:u}){return s_({check:c=>dc(e,{publicKey:t,baseURL:n,signal:c,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(d=>d.isReady?d:(u&&u({isComputable:!0,value:1}),!1)),signal:l})}class $i{constructor(t,{baseCDN:n=V.baseCDN,fileName:r}={}){this.name=null,this.size=null,this.isStored=null,this.isImage=null,this.mimeType=null,this.cdnUrl=null,this.s3Url=null,this.originalFilename=null,this.imageInfo=null,this.videoInfo=null,this.contentInfo=null,this.metadata=null,this.s3Bucket=null;const{uuid:i,s3Bucket:s}=t,o=Bt(n,`${i}/`),a=s?Bt(`https://${s}.s3.amazonaws.com/`,`${i}/${t.filename}`):null;this.uuid=i,this.name=r||t.filename,this.size=t.size,this.isStored=t.isStored,this.isImage=t.isImage,this.mimeType=t.mimeType,this.cdnUrl=o,this.originalFilename=t.originalFilename,this.imageInfo=t.imageInfo,this.videoInfo=t.videoInfo,this.contentInfo=t.contentInfo,this.metadata=t.metadata||null,this.s3Bucket=s||null,this.s3Url=a}}const Gx=(e,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:g,metadata:y})=>function c_(e,{publicKey:t,fileName:n,contentType:r,baseURL:i=V.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=V.retryNetworkErrorMaxTimes,metadata:g}){return an(()=>on({method:"POST",url:Bt(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":vn({publicKey:t,integration:d,userAgent:f})},data:uc({file:{data:e,name:n||u_(e),contentType:r||l_(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:cc(a),signature:s,expire:o,source:c,metadata:g}),signal:l,onProgress:u}).then(({data:y,headers:_,request:D})=>{const m=$t(JSON.parse(y));if("error"in m)throw new He(m.error.content,m.error.errorCode,D,m,_);return m}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,metadata:y}).then(({file:_})=>fc({file:_,publicKey:t,baseURL:r,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,onProgress:u,signal:l})).then(_=>new $i(_,{baseCDN:g})),Wx=(e,{publicKey:t,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c,baseCDN:d})=>dc(e,{publicKey:t,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c}).then(f=>new $i(f,{baseCDN:d,fileName:n})).then(f=>(s&&s({isComputable:!0,value:1}),f));var Yx=window.WebSocket;class Kx{constructor(){this.events=Object.create({})}emit(t,n){this.events[t]?.forEach(r=>r(n))}on(t,n){this.events[t]=this.events[t]||[],this.events[t].push(n)}off(t,n){this.events[t]=n?this.events[t].filter(r=>r!==n):[]}}class Zx{constructor(t,n=3e4){this.ws=void 0,this.queue=[],this.isConnected=!1,this.subscribers=0,this.emmitter=new Kx,this.disconnectTimeoutId=null,this.key=t,this.disconnectTime=n}connect(){this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),this.isConnected||this.ws||(this.ws=new Yx(`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(r.channel,(e=r.event,t=JSON.parse(r.data),"success"===e?{status:Re.Success,...t}:"progress"===e?{status:Re.Progress,...t}:{status:Re.Error,...t}))}var e,t}))}disconnect(){const t=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{t()},this.disconnectTime):t()}send(t,n){const r=JSON.stringify({event:t,data:n});this.ws?.send(r)}subscribe(t,n){this.subscribers+=1,this.connect();const r=`task-status-${t}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(t){this.subscribers-=1;const n=`task-status-${t}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),0===this.subscribers&&this.disconnect()}onError(t){return this.emmitter.on("error",t),()=>this.emmitter.off("error",t)}}let hc=null;const pc=e=>{if(!hc){const t=typeof window>"u"?0:3e4;hc=new Zx(e,t)}return hc},tP=(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,onProgress:d,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,pusherKey:y=V.pusherKey,metadata:_})=>Promise.resolve((e=>{pc(e).connect()})(y)).then(()=>function d_(e,{publicKey:t,baseURL:n=V.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:u="url",signal:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=V.retryNetworkErrorMaxTimes,metadata:g}){return an(()=>on({method:"POST",headers:{"X-UC-User-Agent":vn({publicKey:t,integration:d,userAgent:f})},url:Bt(n,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:cc(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:u,metadata:g}),signal:c}).then(({data:y,headers:_,request:D})=>{const m=$t(JSON.parse(y));if("error"in m)throw new He(m.error.content,m.error.errorCode,D,m,_);return m}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,metadata:_})).catch(D=>(pc(y)?.disconnect(),Promise.reject(D))).then(D=>D.type===Po.FileInfo?D:((e,{signal:t}={})=>{let n=null,r=null;const i=e.map(()=>new AbortController);return To(t,()=>{i.forEach(o=>o.abort())}),Promise.all(e.map((o,a)=>{const l=(o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())})(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(u=>(l(),u)).catch(u=>(n=u,null))})).then(o=>{if(null===r)throw n;return o[r]})})([({signal:m})=>function Jx({token:e,publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return s_({check:u=>function f_(e,{publicKey:t,baseURL:n=V.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=V.retryNetworkErrorMaxTimes}={}){return an(()=>on({method:"GET",headers:t?{"X-UC-User-Agent":vn({publicKey:t,integration:i,userAgent:s})}:void 0,url:Bt(n,"/from_url/status/",{jsonerrors:1,token:e}),signal:r}).then(({data:l,headers:u,request:c})=>{const d=$t(JSON.parse(l));if("error"in d&&!Hx(d))throw new He(d.error.content,void 0,c,d,u);return d}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}(e,{publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:u}).then(c=>{switch(c.status){case Re.Error:return new He(c.error,c.errorCode);case Re.Waiting:return!1;case Re.Unknown:return new He(`Token "${e}" was not found.`);case Re.Progress:return a&&a("unknown"===c.total?{isComputable:!1}:{isComputable:!0,value:c.done/c.total}),!1;case Re.Success:return a&&a({isComputable:!0,value:c.done/c.total}),c;default:throw new Error("Unknown status")}}),signal:l})}({token:D.token,publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:m}),({signal:m})=>(({token:e,pusherKey:t,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=pc(t),a=o.onError(s),l=()=>{a(),o.unsubscribe(e)};To(n,()=>{l(),s(new Pr("pusher cancelled"))}),o.subscribe(e,u=>{switch(u.status){case Re.Progress:r&&r("unknown"===u.total?{isComputable:!1}:{isComputable:!0,value:u.done/u.total});break;case Re.Success:l(),r&&r({isComputable:!0,value:u.done/u.total}),i(u);break;case Re.Error:l(),s(new He(u.msg,u.error_code))}})}))({token:D.token,pusherKey:y,signal:m,onProgress:d})],{signal:c})).then(D=>{if(D instanceof He)throw D;return D}).then(D=>fc({file:D.uuid,publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:c})).then(D=>new $i(D,{baseCDN:i})),gc=new WeakMap,nP=function(){var e=ge(function*(t){if(gc.has(t))return gc.get(t);const n=yield fetch(t.uri).then(r=>r.blob());return gc.set(t,n),n});return function(n){return e.apply(this,arguments)}}(),y_=function(){var e=ge(function*(t){if(lc(t))return t.length;if(Mo(t)||Ao(t))return t.size;if(xo(t))return(yield nP(t)).size;throw new Error("Unknown file type. Cannot determine file size.")});return function(n){return e.apply(this,arguments)}}(),rP=(e,t=V.multipartMinFileSize)=>e>=t,__=e=>{const n=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!Li(e)&&n.test(e)},v_=e=>{const n=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!Li(e)&&n.test(e)},iP=(e,t)=>new Promise((n,r)=>{const i=[];let s=!1,o=t.length;const a=[...t],l=()=>{const u=t.length-a.length,c=a.shift();c&&c().then(d=>{s||(i[u]=d,o-=1,o?l():n(i))}).catch(d=>{s=!0,r(d)})};for(let u=0;u<e;u++)l()}),oP=function(){var e=ge(function*(t,n,r){return i=>((e,t,n,r)=>{const i=r*t,s=Math.min(i+r,n);return e.slice(i,s)})(t,i,n,r)});return function(n,r,i){return e.apply(this,arguments)}}(),lP=function(){var e=ge(function*(t,{publicKey:n,fileName:r,fileSize:i,baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,onProgress:c,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:y,multipartChunkSize:_=V.multipartChunkSize,maxConcurrentRequests:D=V.maxConcurrentRequests,baseCDN:m,metadata:E}){const j=i??(yield y_(t));let z;const Un=(me,jt)=>{if(!c)return;z||(z=Array(me).fill(0));const dt=St=>St.reduce((zi,$r)=>zi+$r,0);return St=>{St.isComputable&&(z[jt]=St.value,c({isComputable:!0,value:dt(z)/me}))}};return y||(y=l_(t)),function p_(e,{publicKey:t,contentType:n,fileName:r,multipartChunkSize:i=V.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=V.retryNetworkErrorMaxTimes,metadata:g}){return an(()=>on({method:"POST",url:Bt(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":vn({publicKey:t,integration:d,userAgent:f})},data:uc({filename:r||o_,size:e,content_type:n||ac,part_size:i,UPLOADCARE_STORE:cc(l),UPLOADCARE_PUB_KEY:t,signature:o,expire:a,source:c,metadata:g}),signal:u}).then(({data:y,headers:_,request:D})=>{const m=$t(JSON.parse(y));if("error"in m)throw new He(m.error.content,m.error.errorCode,D,m,_);return m.parts=Object.keys(m.parts).map(E=>m.parts[E]),m}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p})}(j,{publicKey:n,contentType:y,fileName:r||u_(t),baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:E}).then(function(){var me=ge(function*({uuid:jt,parts:dt}){const St=yield oP(t,j,_);return Promise.all([jt,iP(D,dt.map((zi,$r)=>()=>((e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>function g_(e,t,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=V.retryNetworkErrorMaxTimes}){return an(()=>on({method:"PUT",url:t,data:e,onProgress:i,signal:r,headers:{"Content-Type":n||ac}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}(e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}))(St($r),zi,{publicKey:n,contentType:y,onProgress:Un(dt.length,$r),signal:u,integration:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})))])});return function(jt){return me.apply(this,arguments)}}()).then(([me])=>function m_(e,{publicKey:t,baseURL:n=V.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=V.retryNetworkErrorMaxTimes}){return an(()=>on({method:"POST",url:Bt(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":vn({publicKey:t,integration:s,userAgent:o})},data:uc({uuid:e,UPLOADCARE_PUB_KEY:t,source:r}),signal:i}).then(({data:u,headers:c,request:d})=>{const f=$t(JSON.parse(u));if("error"in f)throw new He(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}(me,{publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})).then(me=>me.isReady?me:fc({file:me.uuid,publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:c,signal:u})).then(me=>new $i(me,{baseCDN:m}))});return function(n,r){return e.apply(this,arguments)}}();function mc(e,t){return yc.apply(this,arguments)}function yc(){return(yc=ge(function*(e,{publicKey:t,fileName:n,baseURL:r=V.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartMinFileSize:g,multipartChunkSize:y,maxConcurrentRequests:_,baseCDN:D=V.baseCDN,checkForUrlDuplicates:m,saveUrlForRecurrentUploads:E,pusherKey:j,metadata:z}){if(Li(e)){const Un=yield y_(e);return rP(Un,g)?lP(e,{publicKey:t,contentType:p,multipartChunkSize:y,fileSize:Un,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,maxConcurrentRequests:_,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:D,metadata:z}):Gx(e,{publicKey:t,fileName:n,contentType:p,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:D,metadata:z})}if(v_(e))return tP(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:D,checkForUrlDuplicates:m,saveUrlForRecurrentUploads:E,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,pusherKey:j,metadata:z});if(__(e))return Wx(e,{publicKey:t,fileName:n,baseURL:r,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:D});throw new TypeError(`File uploading from "${e}" is not supported`)})).apply(this,arguments)}class uP{constructor(t,n){this.storedAt=null,this.uuid=t.id,this.filesCount=t.filesCount,this.totalSize=Object.values(t.files).reduce((r,i)=>r+i.size,0),this.isStored=!!t.datetimeStored,this.isImage=!!Object.values(t.files).filter(r=>r.isImage).length,this.cdnUrl=t.cdnUrl,this.files=n,this.createdAt=t.datetimeCreated,this.storedAt=t.datetimeStored}}const cP=e=>{for(const t of e)if(!Li(t))return!1;return!0},dP=e=>{for(const t of e)if(!__(t))return!1;return!0},fP=e=>{for(const t of e)if(!v_(t))return!1;return!0};function b_(e,{publicKey:t,fileName:n,baseURL:r=V.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g=V.multipartChunkSize,baseCDN:y=V.baseCDN,checkForUrlDuplicates:_,saveUrlForRecurrentUploads:D,jsonpCallback:m}){if(!cP(e)&&!fP(e)&&!dP(e))throw new TypeError(`Group uploading from "${e}" is not supported`);let E,j=!0;const z=e.length,Un=(me,jt)=>{if(!l)return;E||(E=Array(me).fill(0));const dt=St=>St.reduce((zi,$r)=>zi+$r)/me;return St=>{if(!St.isComputable||!j)return j=!1,void l({isComputable:!1});E[jt]=St.value,l({isComputable:!0,value:dt(E)})}};return Promise.all(e.map((me,jt)=>mc(me,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:Un(z,jt),source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g,baseCDN:y,checkForUrlDuplicates:_,saveUrlForRecurrentUploads:D}))).then(me=>function h_(e,{publicKey:t,baseURL:n=V.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:u,retryThrottledRequestMaxTimes:c=V.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=V.retryNetworkErrorMaxTimes}){return an(()=>on({method:"POST",headers:{"X-UC-User-Agent":vn({publicKey:t,integration:l,userAgent:u})},url:Bt(n,"/group/",{jsonerrors:1,pub_key:t,files:e,callback:r,signature:i,expire:s,source:a}),signal:o}).then(({data:f,headers:h,request:p})=>{const g=$t(JSON.parse(f));if("error"in g)throw new He(g.error.content,g.error.errorCode,p,g,h);return g}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:c})}(me.map(dt=>dt.uuid),{publicKey:t,baseURL:r,jsonpCallback:m,secureSignature:i,secureExpire:s,signal:a,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h}).then(dt=>new uP(dt,me)).then(dt=>(l&&l({isComputable:!0,value:1}),dt)))}const hP=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null},fileSize:{type:Number,value:null},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:$i,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0}}),pP="blocks",gP="0.20.1";function mP(e){return i_({...e,libraryName:pP,libraryVersion:gP})}const D_="[Typed State] Wrong property name: ";class _P{constructor(t,n){this.__typedSchema=t,this.__ctxId=n||tc.generate(),this.__schema=Object.keys(t).reduce((r,i)=>(r[i]=t[i].value,r),{}),this.__data=J.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(t,n){if(!this.__typedSchema.hasOwnProperty(t))return void console.warn(D_+t);let r=this.__typedSchema[t];n?.constructor===r.type||n instanceof r.type||r.nullable&&null===n?this.__data.pub(t,n):console.warn("[Typed State] Wrong property type: "+t)}setMultipleValues(t){for(let n in t)this.setValue(n,t[n])}getValue(t){if(this.__typedSchema.hasOwnProperty(t))return this.__data.read(t);console.warn(D_+t)}subscribe(t,n){return this.__data.sub(t,n)}remove(){J.deleteCtx(this.__ctxId)}}class vP{constructor(t){this.__typedSchema=t.typedSchema,this.__ctxId=t.ctxName||tc.generate(),this.__data=J.registerCtx({},this.__ctxId),this.__watchList=t.watchList||[],this.__handler=t.handler||null,this.__subsMap=Object.create(null),this.__observers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{this.__observers.forEach(s=>{s({...n})}),n=Object.create(null)})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let t=this.__added,n=this.__removed;this.__added.clear(),this.__removed.clear(),this.__handler?.([...this.__items],t,n)})}add(t){let n=new _P(this.__typedSchema);for(let r in t)n.setValue(r,t[r]);return this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),this.__items.add(n.uid),this.notify(),n}read(t){return this.__data.read(t)}readProp(t,n){return this.read(t).getValue(n)}publishProp(t,n,r){this.read(t).setValue(n,r)}remove(t){this.__removed.add(this.__data.read(t)),this.__items.delete(t),this.notify(),this.__data.pub(t,null),delete this.__subsMap[t]}clearAll(){this.__items.forEach(t=>{this.remove(t)})}observe(t){this.__observers.add(t)}unobserve(t){this.__observers.delete(t)}findItems(t){let n=[];return this.__items.forEach(r=>{let i=this.read(r);t(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){J.deleteCtx(this.__data),this.__observers=null;for(let t in this.__subsMap)this.__subsMap[t].forEach(n=>{n.remove()}),delete this.__subsMap[t]}}const ke={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CDN_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT",DONE_FLOW:"DONE_FLOW",INIT_FLOW:"INIT_FLOW"};class wt{constructor(t){this.ctx=t.ctx,this.type=t.type,this.data=t.data}}class Qe{static eName(t){return"LR_"+t}static emit(t,n=window,r=!0){let i=()=>{n.dispatchEvent(new CustomEvent(this.eName(t.type),{detail:t}))};if(!r)return void i();let s=t.type+t.ctx;this._timeoutStore[s]&&window.clearTimeout(this._timeoutStore[s]),this._timeoutStore[s]=window.setTimeout(()=>{i(),delete this._timeoutStore[s]},20)}}b(Qe,"_timeoutStore",Object.create(null));class ie extends L{constructor(...t){super(...t),b(this,"ctxInit",Xy(this)),b(this,"__initialUploadMetadata",null),b(this,"_handleCollectionUpdate",n=>{let r=this.uploadCollection;if(n.uploadProgress){let i=0,s=r.findItems(a=>!a.getValue("uploadError"));s.forEach(a=>{i+=r.readProp(a,"uploadProgress")});let o=Math.round(i/s.length);this.$["*commonProgress"]=o,Qe.emit(new wt({type:ke.UPLOAD_PROGRESS,ctx:this.ctxName,data:o}),void 0,100===o)}if(n.uuid){let i=r.findItems(o=>!!o.getValue("uuid")),s=r.findItems(o=>!!o.getValue("uploadError")||!!o.getValue("validationErrorMsg"));if(r.size-s.length===i.length){let o=this.getOutputData(a=>!!a.getValue("uuid"));Qe.emit(new wt({type:ke.UPLOAD_FINISH,ctx:this.ctxName,data:o}))}}n.uploadError&&r.findItems(s=>!!s.getValue("uploadError")).forEach(s=>{Qe.emit(new wt({type:ke.UPLOAD_ERROR,ctx:this.ctxName,data:r.readProp(s,"uploadError")}),void 0,!1)}),n.validationErrorMsg&&r.findItems(s=>!!s.getValue("validationErrorMsg")).forEach(s=>{Qe.emit(new wt({type:ke.VALIDATION_ERROR,ctx:this.ctxName,data:r.readProp(s,"validationErrorMsg")}),void 0,!1)}),n.cdnUrlModifiers&&r.findItems(s=>!!s.getValue("cdnUrlModifiers")).forEach(s=>{Qe.emit(new wt({type:ke.CDN_MODIFICATION,ctx:this.ctxName,data:J.getCtx(s).store}),void 0,!1)})})}setUploadMetadata(t){this.connectedOnce?this.$["*uploadMetadata"]=t:this.__initialUploadMetadata=t}initCallback(){super.initCallback(),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}destroyCallback(){super.destroyCallback();let t=this.$["*blocksRegistry"];t.has(this)&&(this.uploadCollection.unobserve(this._handleCollectionUpdate),t.delete(this))}addFiles(t){t.forEach(n=>{this.uploadCollection.add({file:n,isImage:oc(n),mimeType:n.type,fileName:n.name,fileSize:n.size})})}openSystemDialog(t={}){let n=e_([this.getCssData("--cfg-accept"),...this.getCssData("--cfg-img-only")?Io:[]]).join(",");this.getCssData("--cfg-accept")&&this.getCssData("--cfg-img-only")&&console.warn("There could be a mistake.\nBoth `--cfg-accept` and `--cfg-img-only` parameters are set.\nThe value of `--cfg-accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=!!this.getCssData("--cfg-multiple"),t.captureCamera?(this.fileInput.capture="",this.fileInput.accept=Io.join(",")):this.fileInput.accept=n,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{this.addFiles([...this.fileInput.files]),this.$["*currentActivity"]=L.activities.UPLOAD_LIST,this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let t=null;return this.getCssData("--cfg-source-list")&&(t=this.getCssData("--cfg-source-list").split(",").map(n=>n.trim())),t}initFlow(t=!1){if(this.$["*uploadList"]?.length&&!t)this.set$({"*currentActivity":L.activities.UPLOAD_LIST}),this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!0);else if(1===this.sourceList?.length){let n=this.sourceList[0];"local"===n?(this.$["*currentActivity"]=L.activities.UPLOAD_LIST,this?.openSystemDialog()):(Object.values(ie.extSrcList).includes(n)?this.set$({"*currentActivityParams":{externalSourceType:n},"*currentActivity":L.activities.EXTERNAL}):this.$["*currentActivity"]=n,this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!0))}else this.set$({"*currentActivity":L.activities.START_FROM}),this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!0);Qe.emit(new wt({type:ke.INIT_FLOW,ctx:this.ctxName}),void 0,!1)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!1),Qe.emit(new wt({type:ke.DONE_FLOW,ctx:this.ctxName}),void 0,!1)}get uploadCollection(){if(!this.has("*uploadCollection")){let t=new vP({typedSchema:hP,watchList:["uploadProgress","uuid","uploadError","validationErrorMsg","cdnUrlModifiers"],handler:(n,r,i)=>{for(let s of i)s?.getValue("abortController")?.abort(),s?.setValue("abortController",null),URL.revokeObjectURL(s?.getValue("thumbUrl"));this.$["*uploadList"]=n.map(s=>({uid:s}))}});t.observe(this._handleCollectionUpdate),this.add("*uploadCollection",t)}return this.$["*uploadCollection"]}getUploadClientOptions(){let t=this.getCssData("--cfg-store",!0),n={store:null===t?void 0:!!t,publicKey:this.getCssData("--cfg-pubkey"),baseCDN:this.getCssData("--cfg-cdn-cname"),baseURL:this.getCssData("--cfg-base-url"),userAgent:mP,integration:this.getCssData("--cfg-user-agent-integration"),secureSignature:this.getCssData("--cfg-secure-signature"),secureExpire:this.getCssData("--cfg-secure-expire"),retryThrottledRequestMaxTimes:this.getCssData("--cfg-retry-throttled-request-max-times"),multipartMinFileSize:this.getCssData("--cfg-multipart-min-file-size"),multipartChunkSize:this.getCssData("--cfg-multipart-chunk-size"),maxConcurrentRequests:this.getCssData("--cfg-max-concurrent-requests"),multipartMaxAttempts:this.getCssData("--cfg-multipart-max-attempts"),checkForUrlDuplicates:!!this.getCssData("--cfg-check-for-url-duplicates"),saveUrlForRecurrentUploads:!!this.getCssData("--cfg-save-url-for-recurrent-uploads"),metadata:this.$["*uploadMetadata"]};return console.log("Upload client options:",n),n}getOutputData(t){let n=[];return this.uploadCollection.findItems(t).forEach(i=>{let s=J.getCtx(i).store,o=s.fileInfo||{name:s.fileName,fileSize:s.fileSize,isImage:s.isImage,mimeType:s.mimeType},a={...o,cdnUrlModifiers:s.cdnUrlModifiers,cdnUrl:s.cdnUrl||o.cdnUrl};n.push(a)}),n}}ie.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),ie.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...ie.extSrcList}),Object.values(ke).forEach(e=>{let t=Qe.eName(e);window.addEventListener(t,n=>{if([ke.UPLOAD_FINISH,ke.REMOVE,ke.CDN_MODIFICATION].includes(n.detail.type)){let i=J.getCtx(n.detail.ctx),s=i.read("uploadCollection"),o=[];s.items().forEach(a=>{let l=J.getCtx(a).store,u=l.fileInfo;if(u){let c={...u,cdnUrlModifiers:l.cdnUrlModifiers,cdnUrl:l.cdnUrl||u.cdnUrl};o.push(c)}}),Qe.emit(new wt({type:ke.DATA_OUTPUT,ctx:n.detail.ctx,data:o})),i.pub("outputData",o)}})});let w_=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{n&&(n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`))}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}return e.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>\n',e})();w_.bindAttributes({name:"name",size:"size"});const C_=e=>{if("string"!=typeof e||!e)return"";let t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},_c=(...e)=>e.filter(t=>"string"==typeof t&&t).map(t=>C_(t)).join("/-/"),Ut=(...e)=>{let t=_c(...e);return t?`-/${t}/`:""};function E_(e){let t=new URL(e),n=t.pathname+t.search+t.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function I_(e){let t=new URL(e),n=E_(e),r=S_(n)?T_(n).pathname:n;return t.pathname=t.pathname.replace(r,""),t.search="",t.hash="",t.toString()}function S_(e){return e.startsWith("http")}function T_(e){let t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}const ut=(e,t,n)=>{let r=new URL(I_(e));if(n=n||E_(e),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),S_(n)){let i=T_(n);r.pathname=r.pathname+(t||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(t||"")+(n||"");return r.toString()},Bi=(e,t)=>{let n=new URL(e);return n.pathname=t+"/",n.toString()},Nr=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),Ui="--lr-img-",A_="unresolved",M_=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),x_=Object.create(null);for(let e in Nr)x_[Ui+e]=Nr[e]?.default||"";class wP extends Co{constructor(...t){super(...t),b(this,"cssInit$",x_)}$$(t){return this.$[Ui+t]}set$$(t){for(let n in t)this.$[Ui+n]=t[n]}sub$$(t,n){this.sub(Ui+t,r=>{null===r||""===r||n(r)})}_fmtAbs(t){return!t.includes("//")&&!M_&&(t=new URL(t,document.baseURI).href),t}_getCdnModifiers(t=""){return Ut(t&&`resize/${t}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||Nr.format.default}`,`quality/${this.$$("quality")||Nr.quality.default}`)}_getUrlBase(t=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(M_&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let n=this._getCdnModifiers(t);return this.$$("src").startsWith(this.$$("cdn-cname"))?ut(this.$$("src"),n):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(ut(Bi(this.$$("cdn-cname"),this.$$("uuid")),n)):this.$$("proxy-cname")?this._proxyUrl(ut(this.$$("proxy-cname"),n,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(ut(`https://${this.$$("pubkey")}.ucr.io/`,n,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(t){return this.$$("secure-delivery-proxy")?sc(this.$$("secure-delivery-proxy"),{previewUrl:t},{transform:r=>window.encodeURIComponent(r)}):t}_getElSize(t,n=1,r=!0){let i=t.getBoundingClientRect(),s=n*Math.round(i.width),o=r?"":n*Math.round(i.height);return s||o?`${s||""}x${o||""}`:null}_setupEventProxy(t){let n=i=>{i.stopPropagation();let s=new Event(i.type,i);this.dispatchEvent(s)},r=["load","error"];for(let i of r)t.addEventListener(i,n)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(A_,""),this.img.onload=()=>{this.img.removeAttribute(A_)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(t=>{Nr[t.name]||this.img.setAttribute(t.name,t.value)})}get breakpoints(){if(this.$$("breakpoints")){let t=new Set;return this.$$("breakpoints").split(",").forEach(n=>{t.add(parseFloat(n.trim()))}),t}return null}renderBg(t){let n=new Set;this.breakpoints?this.breakpoints.forEach(i=>{n.add(`url("${this._getUrlBase(i+"x")}") ${i}w`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(2*i+"x")}") ${2*i}w`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(3*i+"x")}") ${3*i}w`)}):(n.add(`url("${this._getUrlBase(this._getElSize(t))}") 1x`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,2))}") 2x`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,3))}") 3x`));let r=`image-set(${[...n].join(", ")})`;t.style.setProperty("background-image",r),t.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let t=new Set;return this.breakpoints?this.breakpoints.forEach(n=>{t.add(this._getUrlBase(n+"x")+` ${n}w`),this.$$("hi-res-support")&&t.add(this._getUrlBase(2*n+"x")+` ${2*n}w`),this.$$("ultra-res-support")&&t.add(this._getUrlBase(3*n+"x")+` ${3*n}w`)}):(t.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...t].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(t=>{this.$$("intersection")?this.initIntersection(t,()=>{this.renderBg(t)}):this.renderBg(t)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(t,n){this._isnObserver=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting&&(n(),this._isnObserver.unobserve(t))})},{root:null,rootMargin:"0px"}),this._isnObserver.observe(t),this._observed||(this._observed=new Set),this._observed.add(t)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(t=>{this._isnObserver.unobserve(t)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(Nr)}attributeChangedCallback(t,n,r){window.setTimeout(()=>{this.$[Ui+t]=r})}}class CP extends wP{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",t=>{this.$$("is-background-for")||(this.img.loading=t?"lazy":"eager")})}}let EP=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,"*simpleButtonText":"",onClick:()=>{this.initFlow()}})}initCallback(){super.initCallback(),this.bindCssData("--cfg-multiple"),this.sub("--cfg-multiple",n=>{this.$["*simpleButtonText"]=this.l10n(n?"upload-files":"upload-file")})}}return e.template='\n  <lr-drop-area>\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span>{{*simpleButtonText}}</span>\n      <slot></slot>\n      <div class="visual-drop-area"></div>\n    </button>\n  </lr-drop-area>\n',e})();class IP extends L{constructor(...t){super(...t),b(this,"historyTracked",!0),b(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function SP(e){return new Promise(t=>{"function"!=typeof window.FileReader&&t(!1);try{let n=new FileReader;n.onerror=()=>{t(!0)};let r=i=>{"loadend"!==i.type&&n.abort(),t(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(e)}catch{t(!1)}})}function TP(e){return new Promise(t=>{let n=0,r=[],i=o=>{o||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),t(null)),o.isFile?(n++,o.file(a=>{n--,r.push(a),0===n&&t(r)})):o.isDirectory&&s(o.createReader())},s=o=>{n++,o.readEntries(a=>{n--;for(let l of a)i(l);0===n&&t(r)})};i(e)})}const ze={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let P_=["focus"],MP=100,vc=new Map;function N_(e){let t=0,n=document.body,r=new Set,s=ze.INACTIVE,o=h=>{e.shouldIgnore()&&h!==ze.INACTIVE||(s!==h&&r.forEach(p=>p(h)),s=h)};r.add(h=>e.onChange(h));let a=()=>{t=0,o(ze.INACTIVE)},l=()=>{t+=1,s===ze.INACTIVE&&o(ze.ACTIVE)},u=()=>{t-=1,t>0||o(ze.INACTIVE)},c=h=>{h.preventDefault(),t=0,o(ze.INACTIVE)},d=h=>{h.preventDefault();let p=[h.x,h.y],g=e.element.getBoundingClientRect(),y=Math.floor(function xP(e,t){let n=Math.max(Math.min(e[0],t.x+t.width),t.x),r=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-n)*(e[0]-n)+(e[1]-r)*(e[1]-r))}(p,g)),_=y<MP,D=h.composedPath().includes(e.element);vc.set(e.element,y);let m=Math.min(...vc.values())===y;o(D&&m?ze.OVER:_&&m?ze.NEAR:ze.ACTIVE)},f=function(){var h=ge(function*(p){p.preventDefault();let g=yield function AP(e){let t=[],n=[];for(let r=0;r<e.items.length;r++){let i=e.items[r];if(i)if("file"===i.kind){if("function"==typeof i.webkitGetAsEntry||"function"==typeof i.getAsEntry){let o="function"==typeof i.webkitGetAsEntry?i.webkitGetAsEntry():i.getAsEntry();n.push(TP(o).then(a=>{t.push(...a)}));continue}let s=i.getAsFile();n.push(SP(s).then(o=>{o||t.push(s)}))}else"string"===i.kind&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{t.push(o),s()})}))}return Promise.all(n).then(()=>t)}(p.dataTransfer);e.onItems(g),o(ze.INACTIVE)});return function(g){return h.apply(this,arguments)}}();return n.addEventListener("drop",c),n.addEventListener("dragleave",u),n.addEventListener("dragenter",l),n.addEventListener("dragover",d),e.element.addEventListener("drop",f),P_.forEach(h=>{window.addEventListener(h,a)}),()=>{vc.delete(e.element),n.removeEventListener("drop",c),n.removeEventListener("dragleave",u),n.removeEventListener("dragenter",l),n.removeEventListener("dragover",d),e.element.removeEventListener("drop",f),P_.forEach(h=>{window.removeEventListener(h,a)})}}let O_=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,state:ze.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null})}isActive(){const n=this.getBoundingClientRect(),r=n.width>0&&n.height>0,i=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),s=window.getComputedStyle(this);return r&&"hidden"!==s.visibility&&"none"!==s.display&&i}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("clickable",r=>{this.set$({isClickable:"string"==typeof r})}),this.defineAccessor("with-icon",r=>{this.set$({withIcon:"string"==typeof r})}),this.defineAccessor("fullscreen",r=>{this.set$({isFullscreen:"string"==typeof r})}),this.defineAccessor("text",r=>{this.set$(r?{text:this.l10n(r)||r}:{text:this.l10n("drop-files-here")})}),this._destroyDropzone=N_({element:this,shouldIgnore:()=>this._isDisabled(),onChange:r=>{this.$.state=r},onItems:r=>{if(!r.length)return;let i=this.getCssData("--cfg-multiple"),s=this.getCssData("--cfg-multiple-max"),o=this.uploadCollection.size;i&&s?r=r.slice(0,s-o-1):i||(r=r.slice(0,o>0?0:1)),r.forEach(a=>{if("string"==typeof a)return void this.uploadCollection.add({externalUrl:a});let l=oc(a);this.uploadCollection.add({file:a,isImage:l,mimeType:a.type,fileName:a.name,fileSize:a.size})}),this.uploadCollection.size&&(this.set$({"*currentActivity":L.activities.UPLOAD_LIST}),this.setForCtxTarget(_n.StateConsumerScope,"*modalActive",!0))}});let n=this.ref["content-wrapper"];n&&(this._destroyContentWrapperDropzone=N_({element:n,onChange:r=>{const i=Object.entries(ze).find(([,s])=>s===r)?.[0].toLowerCase();i&&n.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._isDisabled()})),this.sub("state",r=>{const i=Object.entries(ze).find(([,s])=>s===r)?.[0].toLowerCase();i&&this.setAttribute("drag-state",i)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_isDisabled(){return!this._couldHandleFiles()||!!this.$.isFullscreen&&[...this.$["lr-drop-area/targets"]].filter(i=>i!==this).filter(i=>i.isActive()).length>0}_couldHandleFiles(){let n=this.getCssData("--cfg-multiple"),r=this.getCssData("--cfg-multiple-max"),i=this.uploadCollection.size;return!(n&&r&&i>=r||!n&&i>0)}destroyCallback(){super.destroyCallback(),this.$["lr-drop-area/targets"]?.remove?.(this),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}return e.template='\n  <slot>\n    <div ref="content-wrapper" class="content-wrapper">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',e})();O_.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null});let R_=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"_registeredTypes",{}),b(this,"init$",{...this.ctxInit,iconName:"default"})}initTypes(){this.registerType({type:ie.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:ie.sourceTypes.URL,activity:L.activities.URL,textKey:"from-url"}),this.registerType({type:ie.sourceTypes.CAMERA,activity:L.activities.CAMERA,onClick:()=>{var r=void 0!==document.createElement("input").capture;return r&&this.openSystemDialog({captureCamera:!0}),!r}}),this.registerType({type:"draw",activity:L.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(ie.extSrcList))this.registerType({type:n,activity:L.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}applyType(n){const r=this._registeredTypes[n];if(!r)return void console.warn("Unsupported source type: "+n);const{textKey:i=n,icon:s=n,activity:o,onClick:a,activityParams:l={}}=r;this.applyL10nKey("src-type",`src-type-${i}`),this.$.iconName=s,this.onclick=u=>{(a?a(u):o)&&this.set$({"*currentActivityParams":l,"*currentActivity":o})}}}return e.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',e})();R_.bindAttributes({type:null});class NP extends ne{constructor(...t){super(...t),b(this,"cssInit$",{"--cfg-source-list":""})}initCallback(){super.initCallback(),this.sub("--cfg-source-list",t=>{if(!t)return;let n=t.split(",").map(i=>i.trim()),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.getCssData("--cfg-source-list-wrap")?this.innerHTML=r:this.outerHTML=r})}}class k_{constructor(){b(this,"caption",""),b(this,"text",""),b(this,"iconName",""),b(this,"isError",!1)}}let RP=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}})}initCallback(){super.initCallback(),this.sub("*message",n=>{n?(this.setAttribute("active",""),this.set$({captionTxt:n.caption||"",msgTxt:n.text||"",iconName:n.isError?"error":"info"}),n.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}return e.template='\n  <div class="heading">\n    <lr-icon set="@name: iconName"></lr-icon>\n    <div class="caption">{{captionTxt}}</div>\n    <button type="button" set="onclick: onClose">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </div>\n  <div class="msg">{{msgTxt}}</div>\n',e})();function bc(e){let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function Dc(e="hsl(209, 21%, 65%)",t=32,n=32){return bc(`\n  <svg width="${t}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${e}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}const Je=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3)});class $n extends ie{constructor(...t){super(...t),b(this,"pauseRender",!0),b(this,"_entrySubs",new Set),b(this,"_entry",null),b(this,"_isIntersecting",!1),b(this,"_debouncedGenerateThumb",xr(this._generateThumbnail.bind(this),100)),b(this,"_debouncedCalculateState",xr(this._calculateState.bind(this),0)),b(this,"_renderedOnce",!1),b(this,"cssInit$",{"--cfg-use-cloud-image-editor":0}),b(this,"init$",{...this.ctxInit,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,state:Je.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.$["*currentActivity"]=this.findBlockInCtx(n=>n.activityType===L.activities.DETAILS)?L.activities.DETAILS:L.activities.CLOUD_IMG_EDIT},onRemove:()=>{let n=this._entry.getValue("uuid");if(n){let r=this.getOutputData(i=>i.getValue("uuid")===n);Qe.emit(new wt({type:ke.REMOVE,ctx:this.ctxName,data:r}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}})}_reset(){for(let t of this._entrySubs)t.remove();this._debouncedGenerateThumb.cancel(),this._entrySubs=new Set,this._entry=null,this._isIntersecting=!1}_observerCallback(t){let[n]=t;this._isIntersecting=n.isIntersecting,n.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===n.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){let t=this._entry,n=Je.IDLE;t.getValue("uploadError")||t.getValue("validationErrorMsg")?n=Je.FAILED:t.getValue("isUploading")?n=Je.UPLOADING:t.getValue("uuid")&&(n=Je.FINISHED),this.$.state!==n&&(this.$.state=n)}_generateThumbnail(){var t=this;return ge(function*(){let n=t._entry;if(n.getValue("uuid")&&n.getValue("isImage")){let r=t.getCssData("--cfg-thumb-size")||76,i=t.proxyUrl(ut(Bi(t.getCssData("--cfg-cdn-cname"),t._entry.getValue("uuid")),Ut(n.getValue("cdnUrlModifiers"),`scale_crop/${r}x${r}/center`))),s=n.getValue("thumbUrl");return n.setValue("thumbUrl",i),void URL.revokeObjectURL(s)}if(!n.getValue("thumbUrl"))if(n.getValue("file")?.type.includes("image"))try{let r=yield function OP(e,t=40){if("image/svg+xml"===e.type)return URL.createObjectURL(e);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=t,n.height=t*l):(n.height=t,n.width=t/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(u=>{if(!u)return void a();let c=URL.createObjectURL(u);o(c)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(e),s}(n.getValue("file"),t.getCssData("--cfg-thumb-size")||76);n.setValue("thumbUrl",r)}catch{let i=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Dc(i))}else{let r=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Dc(r))}})()}_showMessage(t,n,r){let i=new k_;i.caption=n,i.text=r,i.isError="error"===t,this.set$({badgeIcon:`badge-${t}`,"*message":i})}_subEntry(t,n){let r=this._entry.subscribe(t,n);this._entrySubs.add(r)}_handleEntryId(t){this._reset();let n=this.uploadCollection?.read(t);this._entry=n,n&&(this._subEntry("validationErrorMsg",r=>{this._debouncedCalculateState(),this.$.errorText=r}),this._subEntry("uploadError",r=>{this._debouncedCalculateState(),this.$.errorText=r?.message}),this._subEntry("isUploading",()=>{this._debouncedCalculateState()}),this._subEntry("uploadProgress",r=>{this.$.progressValue=r}),this._subEntry("fileName",r=>{this.$.itemName=r||n.getValue("externalUrl")||this.l10n("file-no-name")}),this._subEntry("fileSize",r=>{let i=this.getCssData("--cfg-max-local-file-size-bytes");i&&r&&r>i&&n.setValue("validationErrorMsg",this.l10n("files-max-size-limit-error",{maxFileSize:i}))}),this._subEntry("mimeType",r=>{if(!r)return;let i=this.getCssData("--cfg-img-only"),s=this.getCssData("--cfg-accept"),o=e_([...i?Io:[],s]);o.length>0&&!t_(r,o)&&n.setValue("validationErrorMsg",this.l10n("file-type-not-allowed"))}),this._subEntry("isImage",r=>{let i=this.getCssData("--cfg-img-only");n.getValue("externalUrl")&&!n.getValue("uuid")&&i&&!r||i&&!r&&n.setValue("validationErrorMsg",this.l10n("images-only-accepted"))}),this._subEntry("externalUrl",r=>{this.$.itemName=n.getValue("fileName")||r||this.l10n("file-no-name")}),this._subEntry("uuid",r=>{this._debouncedCalculateState(),r&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",r=>{this.$.thumbUrl=r?`url(${r})`:""}),this.getCssData("--cfg-confirm-upload")||this.upload(),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",t=>{this._handleEntryId(t)}),this.sub("state",t=>{this._handleState(t)}),this.sub("--cfg-use-cloud-image-editor",()=>{this._handleState(this.$.state)}),this.onclick=()=>{$n.activeInstances.forEach(t=>{t===this?t.setAttribute("focused",""):t.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",t=>{!t||!this.isConnected||this.upload()}),$n.activeInstances.add(this)}_handleState(t){this.set$({isFailed:t===Je.FAILED,isUploading:t===Je.UPLOADING,isFinished:t===Je.FINISHED,progressVisible:t===Je.UPLOADING,isEditable:this.$["--cfg-use-cloud-image-editor"]&&t===Je.FINISHED&&this._entry?.getValue("isImage")}),t===Je.FAILED?this.$.badgeIcon="badge-error":t===Je.FINISHED&&(this.$.badgeIcon="badge-success"),t===Je.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),$n.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}upload(){var t=this;return ge(function*(){let n=t._entry;if(n.getValue("uuid")||n.getValue("isUploading")||n.getValue("validationErrorMsg"))return;let r=t.getOutputData(i=>!i.getValue("uuid"));Qe.emit(new wt({type:ke.UPLOAD_START,ctx:t.ctxName,data:r})),t._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("uploadError",null),n.setValue("validationErrorMsg",null),!n.getValue("file")&&n.getValue("externalUrl")&&(t.$.progressUnknown=!0);try{let i=new AbortController;n.setValue("abortController",i);let s=yield mc(n.getValue("file")||n.getValue("externalUrl"),{...t.getUploadClientOptions(),fileName:n.getValue("fileName"),onProgress:o=>{o.isComputable&&n.setValue("uploadProgress",100*o.value),t.$.progressUnknown=!o.isComputable},signal:i.signal});n.setMultipleValues({fileInfo:s,isUploading:!1,fileName:s.name,fileSize:s.size,isImage:s.isImage,mimeType:s.mimeType,uuid:s.uuid,cdnUrl:s.cdnUrl}),n===t._entry&&t._debouncedCalculateState()}catch(i){n.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),n===t._entry&&t._debouncedCalculateState(),i?.isCancel||n.setValue("uploadError",i)}})()}}$n.template='\n  <div class="inner" set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @focused: isFocused">\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <div class="file-actions">\n      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n        <lr-icon name="edit-file"></lr-icon>\n      </button>\n      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n        <lr-icon name="remove-file"></lr-icon>\n      </button>\n      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n        <lr-icon name="upload"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar\n      class="progress-bar"\n      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"\n    >\n    </lr-progress-bar>\n  </div>\n',$n.activeInstances=new Set;let FP=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"historyTracked",!0),b(this,"activityType",L.activities.UPLOAD_LIST),b(this,"init$",{...this.ctxInit,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.$["*uploadTrigger"]={},this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let r=this.getOutputData(i=>!!i.getValue("uuid"));Qe.emit(new wt({type:ke.REMOVE,ctx:this.ctxName,data:r})),this.uploadCollection.clearAll()}}),b(this,"cssInit$",{"--cfg-show-empty-list":0,"--cfg-multiple":1,"--cfg-multiple-min":0,"--cfg-multiple-max":0,"--cfg-confirm-upload":1,"--cfg-source-list":""}),b(this,"_debouncedHandleCollectionUpdate",xr(()=>{this._updateUploadsState(),this._updateCountLimitMessage()},0))}_validateFilesCount(){let n=!!this.getCssData("--cfg-multiple"),r=n?this.getCssData("--cfg-multiple-min")??0:1,i=n?this.getCssData("--cfg-multiple-max")??0:1,s=this.uploadCollection.size,o=!!r&&s<r,a=!!i&&s>i;return{passed:!o&&!a,tooFew:o,tooMany:a,min:r,max:i,exact:i===s}}_updateCountLimitMessage(){let n=this.uploadCollection.size,r=this._validateFilesCount();if(n&&!r.passed){let i=new k_,s=r.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";i.caption=this.l10n("files-count-limit-error-title"),i.text=this.l10n(s,{min:r.min,max:r.max,total:n}),i.isError=!0,this.set$({"*message":i})}}_updateUploadsState(){let n=this.uploadCollection.items(),i={total:n.length,succeed:0,uploading:0,failed:0};for(let f of n){let h=this.uploadCollection.read(f);h.getValue("uuid")&&!h.getValue("validationErrorMsg")&&(i.succeed+=1),h.getValue("isUploading")&&(i.uploading+=1),(h.getValue("validationErrorMsg")||h.getValue("uploadError"))&&(i.failed+=1)}let s=i.total===i.succeed+i.failed,{passed:o,tooMany:a,exact:l}=this._validateFilesCount();this.set$({doneBtnVisible:s,doneBtnEnabled:i.total>0&&o&&0===i.failed,uploadBtnVisible:!s&&i.total-i.succeed-i.uploading-i.failed>0&&o,addMoreBtnEnabled:0===i.total||!a&&!l,addMoreBtnVisible:!l||this.getCssData("--cfg-multiple"),headerText:this._getHeaderText(i)})}_getHeaderText(n){return(i=>this.l10n(`header-${i}`,{count:n[i]}))(n.uploading>0?"uploading":n.failed>0?"failed":n.succeed>0?"succeed":"total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.sub("--cfg-multiple",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-min",this._debouncedHandleCollectionUpdate),this.sub("--cfg-multiple-max",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",n=>{0===this.uploadCollection?.size&&!this.getCssData("--cfg-show-empty-list")&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observe(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",n=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),0===n?.length&&!this.getCssData("--cfg-show-empty-list")&&this.historyBack()})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserve(this._debouncedHandleCollectionUpdate)}}return e.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n',e})(),LP=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"activityType",L.activities.URL),b(this,"init$",{...this.ctxInit,importDisabled:!0,onUpload:()=>{this.uploadCollection.add({externalUrl:this.ref.input.value}),this.$["*currentActivity"]=L.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:r=>{this.set$({importDisabled:!r.target.value})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="button"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n    ></button>\n  </div>\n',e})();const F_=()=>typeof navigator.permissions<"u";let $P=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"activityType",L.activities.CAMERA),b(this,"_unsubPermissions",null),b(this,"init$",{...this.ctxInit,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:F_(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:r=>{this._selectedCameraId=r.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}}),b(this,"cssInit$",{"--cfg-camera-mirror":1}),b(this,"_onActivate",()=>{F_()&&this._subscribePermissions(),this._capture()}),b(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()}),b(this,"_handlePermissionsChange",()=>{this._capture()}),b(this,"_setPermissionsState",xr(r=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized","granted"===r),"granted"===r?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===r?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}_subscribePermissions(){var n=this;return ge(function*(){try{(yield navigator.permissions.query({name:"camera"})).addEventListener("change",n._handlePermissionsChange)}catch(r){console.log("Failed to use permissions API. Fallback to manual request mode.",r),n._capture()}})()}_capture(){var n=this;return ge(function*(){let r={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};n._selectedCameraId&&(r.video.deviceId={exact:n._selectedCameraId}),n._canvas=document.createElement("canvas"),n._ctx=n._canvas.getContext("2d");try{n._setPermissionsState("prompt");let i=yield navigator.mediaDevices.getUserMedia(r);i.addEventListener("inactive",()=>{n._setPermissionsState("denied")}),n.$.video=i,n._capturing=!0,n._setPermissionsState("granted")}catch(i){n._setPermissionsState("denied"),n.$.originalErrorMessage=i.message}})()}_stopCapture(){this._capturing&&(this.$.video?.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let n=Date.now(),r=`camera-${n}.png`;this._canvas.toBlob(i=>{let s=new File([i],r,{lastModified:n,type:"image/png"});this.uploadCollection.add({file:s,fileName:r,fileSize:s.size,isImage:!0,mimeType:s.type}),this.set$({"*currentActivity":L.activities.UPLOAD_LIST})})}initCallback(){var n=()=>super.initCallback,r=this;return ge(function*(){n().call(r),r.registerActivity(r.activityType,{onActivate:r._onActivate,onDeactivate:r._onDeactivate}),r.sub("--cfg-camera-mirror",i=>{r.$.videoTransformCss=i?"scaleX(-1)":null});try{let s=(yield navigator.mediaDevices.enumerateDevices()).filter(o=>"videoinput"===o.kind).map((o,a)=>({text:o.label.trim()||`${r.l10n("caption-camera")} ${a+1}`,value:o.deviceId}));s.length>1&&(r.$.cameraSelectOptions=s,r.$.cameraSelectHidden=!1)}catch{}})()}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span>{{l10nMessage}}</span>\n      <span>{{originalErrorMessage}}</span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n',e})();class BP extends ie{}let UP=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"activityType",L.activities.DETAILS),b(this,"pauseRender",!0),b(this,"init$",{...this.ctxInit,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=L.activities.CLOUD_IMG_EDIT)}}),b(this,"cssInit$",{"--cfg-use-cloud-image-editor":0,"--cfg-use-local-image-editor":0})}showNonImageThumb(){let r=Dc(window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),108,108);this.ref.filePreview.setImageUrl(r),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",n=>{if(!n)return;this._entrySubs?this._entrySubs.forEach(s=>{this._entrySubs.delete(s),s.remove()}):this._entrySubs=new Set,this.entry=n;let r=n.getValue("file");if(r){this._file=r;let s=oc(this._file);s&&!n.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),s||this.showNonImageThumb()}let i=(s,o)=>{this._entrySubs.add(this.entry.subscribe(s,o))};i("fileName",s=>{this.$.fileName=s,this.$.onNameInput=()=>{let o=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:o}),this.entry.setValue("fileName",o)}}),i("fileSize",s=>{this.$.fileSize=Number.isFinite(s)?this.fileSizeFmt(s):this.l10n("file-size-unknown")}),i("uploadError",s=>{this.$.errorTxt=s?.message}),i("externalUrl",s=>{s&&(this.entry.getValue("uuid")||this.showNonImageThumb())}),i("cdnUrl",s=>{const o=this.$["--cfg-use-cloud-image-editor"]&&s&&this.entry.getValue("isImage");if(s&&this.ref.filePreview.clear(),this.set$({cdnUrl:s,cloudEditBtnHidden:!o}),s&&this.entry.getValue("isImage")){let a=ut(s,Ut("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(a))}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span l10n="caption-edit-file"></span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <lr-tabs tab-list="tab-view, tab-details">\n      <div tab-ctx="tab-details" class="details">\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-name"></div>\n          <input\n            name="name-input"\n            ref="file_name_input"\n            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"\n            type="text"\n          />\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-size"></div>\n          <div>{{fileSize}}</div>\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="cdn-url"></div>\n          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>\n        </div>\n\n        <div>{{errorTxt}}</div>\n      </div>\n\n      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>\n    </lr-tabs>\n\n    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">\n      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">\n        <lr-icon name="edit"></lr-icon>\n        <span l10n="edit-image"></span>\n      </button>\n      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">\n        <lr-icon name="remove"></lr-icon>\n        <span l10n="remove-from-list"></span>\n      </button>\n      <div></div>\n      <button type="button" class="back-btn primary-btn" set="onclick: onBack">\n        <span l10n="ok"></span>\n      </button>\n    </div>\n  </div>\n',e})();class VP{constructor(){b(this,"captionL10nStr","confirm-your-action"),b(this,"messageL10Str","are-you-sure"),b(this,"confirmL10nStr","yes"),b(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}let jP=(()=>{class e extends L{constructor(...n){super(...n),b(this,"activityType",L.activities.CONFIRMATION),b(this,"_defaults",new VP),b(this,"init$",{...this.ctxInit,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":L.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n',e})(),HP=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,visible:!1,unknown:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this.uploadCollection.observe(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}}return e.template='\n  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>\n',e})(),zP=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"_value",0),b(this,"_unknownMode",!1),b(this,"init$",{...this.ctxInit,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{void 0!==n&&(this._value=n,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)}),this.defineAccessor("unknown",n=>{this._unknownMode=n,this.ref.line.classList.toggle("progress--unknown",n)})}}return e.template=' <div ref="line" class="progress"></div> ',e})();const bn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";let L_=(()=>{class e extends ne{constructor(){super(),b(this,"init$",{...this.ctxInit,checkerboard:!1,src:bn})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${function kP(e="#fff",t="rgba(0, 0, 0, .1)"){return bc(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="${e}" />\n    <rect x="0" y="0" width="10" height="10" fill="${t}" />\n    <rect x="10" y="10" width="10" height="10" fill="${t}" />\n  </svg>`)}()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=bn}}return e.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',e})();function $_(...e){return e.reduce((t,n)=>{if("string"==typeof n)return t[n]=!0,t;for(let r of Object.keys(n))t[r]=n[r];return t},{})}function Ct(...e){let t=$_(...e);return Object.keys(t).reduce((n,r)=>(t[r]&&n.push(r),n),[]).join(" ")}function kr(e,t){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)};return r.cancel=()=>{clearTimeout(n)},r}L_.bindAttributes({checkerboard:"checkerboard"});const ct={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0},B_=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function No(e){return _c(...B_.filter(t=>typeof e[t]<"u"&&null!==e[t]).map(t=>function WP(e,t){if("number"==typeof t)return ct[e]!==t?`${e}/${t}`:"";if("boolean"==typeof t)return t&&ct[e]!==t?`${e}`:"";if("filter"===e){if(!t||ct[e]===t.amount)return"";let{name:n,amount:r}=t;return`${e}/${n}/${r}`}if("crop"===e){if(!t)return"";let{dimensions:n,coords:r}=t;return`${e}/${n.join("x")}/${r.join(",")}`}return""}(t,e[t])).filter(t=>!!t))}const U_=_c("format/auto","progressive/yes"),ln=([e])=>typeof e<"u"?Number(e):void 0,V_=()=>!0,qP={enhance:ln,brightness:ln,exposure:ln,gamma:ln,contrast:ln,saturation:ln,vibrance:ln,warmth:ln,filter:([e,t])=>({name:e,amount:typeof t<"u"?Number(t):100}),mirror:V_,flip:V_,rotate:ln,crop:([e,t])=>({dimensions:e.split("x").map(Number),coords:t.split(",").map(Number)})};function KP(e){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:bn,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let t=e.querySelectorAll("img");for(let n of t){let r=n.src;n.src=bn,n.src=r}e.$["*networkProblems"]=!1},"*on.apply":t=>{if(!t)return;let n=e.$["*originalUrl"],r=Ut(No(t)),i=ut(n,Ut(r,"preview"));e.dispatchEvent(new CustomEvent("apply",{detail:{originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:t},bubbles:!0,composed:!0})),e.remove()},"*on.cancel":()=>{e.remove(),e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const XP=`\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon size="20" name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="${bn}" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`,wc=["crop","sliders","filters"],ZP=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],QP=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],JP=["rotate","mirror","flip"],Fr={brightness:{zero:ct.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:ct.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:ct.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:ct.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:ct.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:ct.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:ct.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:ct.enhance,range:[0,100],keypointsNumber:1},filter:{zero:ct.filter,range:[0,100],keypointsNumber:1}};let Cc=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"pauseRender",!0),b(this,"init$",{...this.ctxInit,...KP(this)}),b(this,"_debouncedShowLoader",kr(this._showLoader.bind(this),300)),b(this,"cssInit$",{"--cfg-cdn-cname":"https://ucarecdn.com"})}get ctxName(){return this.autoCtxName}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}connectedCallback(){var n=()=>super.connectedCallback,r=this;return ge(function*(){n().call(r);try{yield r._waitForSize()}catch(i){return void(r.isConnected&&console.error(i.message))}r.render(),r.$["*faderEl"]=r.ref["fader-el"],r.$["*cropperEl"]=r.ref["cropper-el"],r.$["*imgContainerEl"]=r.ref["img-container-el"],r.ref["img-el"].addEventListener("load",i=>{r._imgLoading=!1,r._debouncedShowLoader(!1),r.$.src!==bn&&(r.$["*networkProblems"]=!1)}),r.ref["img-el"].addEventListener("error",i=>{r._imgLoading=!1,r._debouncedShowLoader(!1),r.$["*networkProblems"]=!0}),r.sub("src",i=>{let s=r.ref["img-el"];s.src!==i&&(r._imgLoading=!0,s.src=i||bn)}),r.sub("*tabId",i=>{r.ref["img-el"].className=Ct("image",{image_hidden_to_cropper:"crop"===i,image_hidden_effects:"crop"!==i})})})()}initCallback(){if(super.initCallback(),this.$.cdnUrl){let n=function bP(e){let t=new URL(e),{pathname:n}=t;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}(this.$.cdnUrl);this.$["*originalUrl"]=Bi(this.$.cdnUrl,n);let r=function DP(e){let t=I_(e),n=new URL(t),r=n.pathname.indexOf("/-/");return-1===r?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>C_(s))}(this.$.cdnUrl),i=function YP(e){let t={};for(let n of e){let[r,...i]=n.split("/");if(!B_.includes(r))continue;const o=(0,qP[r])(i);t[r]=o}return t}(r);this.$["*editorTransformations"]=i}else{if(!this.$.uuid)throw new Error("No UUID nor CDN URL provided");this.$["*originalUrl"]=Bi(this.localCtx.read("--cfg-cdn-cname"),this.$.uuid)}this.classList.add("editor_ON"),this.sub("*networkProblems",n=>{this.$["presence.networkProblems"]=n,this.$["presence.modalCaption"]=!n}),this.sub("*editorTransformations",n=>{let r=this.$["*originalUrl"],i=Ut(No(n)),s=ut(r,Ut(i,"preview"));this.dispatchEvent(new CustomEvent("change",{detail:{originalUrl:r,cdnUrlModifiers:i,cdnUrl:s,transformations:n},bubbles:!0,composed:!0}))},!1);try{fetch(ut(this.$["*originalUrl"],Ut("json"))).then(n=>n.json()).then(({width:n,height:r})=>{this.$["*imageSize"]={width:n,height:r}})}catch(n){n&&console.error("Failed to load image info",n)}}}return e.template=XP,e})();Cc.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl"});class eN extends ie{constructor(...t){super(...t),b(this,"activityType",L.activities.CLOUD_IMG_EDIT),b(this,"init$",{...this.ctxInit,cdnUrl:null})}initCallback(){super.initCallback(),this.bindCssData("--cfg-pubkey"),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",t=>{t&&(this.entry=t,this.entry.subscribe("cdnUrl",n=>{n&&(this.$.cdnUrl=n)}))})}handleApply(t){let n=t.detail;this.entry.setMultipleValues({cdnUrl:n.cdnUrl,cdnUrlModifiers:n.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){let t=new Cc;t.classList.add("lr-cldtr-common"),t.setAttribute("cdn-url",this.$.cdnUrl),t.addEventListener("apply",r=>this.handleApply(r)),t.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(t)}unmountEditor(){this.innerHTML=""}}let Dn={};window.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch{return}if(t?.type in Dn){let n=Dn[t.type];for(let[r,i]of n)e.source===r&&i(t)}});let rN=e=>Object.keys(e).reduce((n,r)=>{let i=e[r];return n+`${r}{${Object.keys(i).reduce((o,a)=>o+`${a}: ${i[a]};`,"")}}`},"");function iN({textColor:e,backgroundColor:t,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return rN({body:{color:e,"background-color":t},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${t} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{background:`center no-repeat ${i}`},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let oN=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"activityType",L.activities.EXTERNAL),b(this,"init$",{...this.ctxInit,activityIcon:"",activityCaption:"",counter:0,onDone:()=>{this.$["*currentActivity"]=L.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}),b(this,"_iframe",null)}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n?.[0].toUpperCase()}${n?.slice(1)}`,activityIcon:n}),this.$.counter=0,this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()})}sendMessage(n){this._iframe.contentWindow.postMessage(JSON.stringify(n),"*")}handleFileSelected(n){var r=this;return ge(function*(){r.$.counter=r.$.counter+1;let{url:i,filename:s}=n;r.uploadCollection.add({externalUrl:i,fileName:s})})()}handleIframeLoad(n){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:iN(n)})}remoteUrl(){let n=this.getCssData("--cfg-pubkey"),r=(!1).toString(),{externalSourceType:i}=this.activityParams;return`https://social.uploadcare.com/window3/${i}?${function sN(e){let t=[];for(let[n,r]of Object.entries(e))null==r||"string"==typeof r&&0===r.length||t.push(`${n}=${encodeURIComponent(r)}`);return t.join("&")}({lang:"en",widget_version:"3.11.3",public_key:n,images_only:r,pass_window_open:!1,session_key:this.getCssData("--cfg-remote-tab-session-key")})}`}mountIframe(){let n=rc({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),function(e,t,n){e in Dn||(Dn[e]=[]),Dn[e].push([t,n])}("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n}unmountIframe(){this._iframe&&function(e,t){e in Dn&&(Dn[e]=Dn[e].filter(n=>n[0]!==t))}("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=void 0}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();class Ec extends ne{setCurrentTab(t){if(t){[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===t?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===t?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",t=>{t&&t.split(",").map(r=>r.trim()).forEach(r=>{let i=rc({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",t=>{this.setCurrentTab(t)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Ec.bindAttributes({"tab-list":null,default:null}),Ec.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';let aN=(()=>{class e extends ie{constructor(...n){super(...n),b(this,"processInnerHtml",!0),b(this,"init$",{...this.ctxInit,output:null,filesData:null}),b(this,"cssInit$",{"--cfg-group-output":0})}get dict(){return e.dict}get validationInput(){return this._validationInputElement}initCallback(){var n=this;if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer),this.hasAttribute(this.dict.INPUT_REQUIRED))){let r=document.createElement("input");r.type="text",r.name="__UPLOADCARE_VALIDATION_INPUT__",r.required=!0,this.appendChild(r),this._validationInputElement=r}this.sub("output",r=>{if(r){if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:r}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer.innerHTML="";let i=r.groupData?[r.groupData.cdnUrl]:r.map(s=>s.cdnUrl);for(let s of i){let o=document.createElement("input");o.type="hidden",o.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,o.value=s,this._dynamicInputsContainer.appendChild(o)}this.hasAttribute(this.dict.INPUT_REQUIRED)&&(this._validationInputElement.value=i.length?"__VALUE__":"")}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(r)}},!1),this.sub(this.dict.SRC_CTX_KEY,function(){var r=ge(function*(i){if(!i)return n.$.output=null,void(n.$.filesData=null);if(n.$.filesData=i,n.getCssData("--cfg-group-output")||n.hasAttribute(n.dict.GROUP_ATTR)){let s=i.map(a=>a.uuid),o=yield b_(s,{...n.getUploadClientOptions()});n.$.output={groupData:o,files:i}}else n.$.output=i});return function(i){return r.apply(this,arguments)}}(),!1)}}return e.dict={SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"},e})();class lN extends L{}let uN=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,currentText:"",options:[],selectHtml:"",onSelect:r=>{r.preventDefault(),r.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find(i=>i.value==this.value)?.text||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{this.$.currentText=n?.[0]?.text||"";let r="";n?.forEach(i=>{r+=`<option value="${i.value}">${i.text}</option>`}),this.$.selectHtml=r})}}return e.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n',e})();let H_=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,src:"",ppIcon:"play",fsIcon:"fullscreen-on",volIcon:"unmute",capIcon:"captions-off",totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:r=>{let i=parseFloat(r.currentTarget.$.value);this.setVolume(i)},progressClicked:r=>{let i=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(r.offsetX/i.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()})(this)}toggleCaptions(){"captions-off"===this.$.capIcon?(this.$.capIcon="captions",this._video.textTracks[0].mode="showing",window.localStorage.setItem(e.is+":captions","1")):(this.$.capIcon="captions-off",this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(e.is+":captions"))}toggleSound(){"unmute"===this.$.volIcon?(this.$.volIcon="mute",this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon="unmute",this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(e.is+":volume",n),this._video.volume=n?n/100:0}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s="src"===i?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(1e3*Math.round(n));return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(e.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){var n=this;super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon="pause",this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon="play",this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",i=>{console.log(i),this.$.fsIcon=document.fullscreenElement===this?"fullscreen-off":"fullscreen-on"}),this.sub("src",i=>{if(!i)return;let s=this._getUrl(i);this._video.src=s}),this.sub("video",function(){var i=ge(function*(s){if(!s)return;let o=yield(yield window.fetch(n._getUrl(s))).json();o.poster&&(n._video.poster=n._getUrl(o.poster));let a="";o?.sources.forEach(l=>{a+=`<source ${n._desc2attrs(l)} />`}),o.tracks&&(o.tracks.forEach(l=>{a+=`<track ${n._desc2attrs(l)} />`}),n.$.hasSubtitles=!0),n._video.innerHTML+=a,n._initTracks(),console.log(o)});return function(s){return i.apply(this,arguments)}}()),this._video.addEventListener("loadedmetadata",i=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",i=>{let s=Math.round(this._video.currentTime/this._video.duration*100);this.$.progressCssWidth=s+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let r=window.localStorage.getItem(e.is+":volume");if(r){let i=parseFloat(r);this.setVolume(i),this.$.volumeValue=i}}}return e.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();H_.bindAttributes({video:"video",src:"src"});class z_ extends ne{constructor(...t){super(...t),b(this,"pauseRender",!0)}shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden","");let t=this.getAttribute("css-src");if(t){this.renderShadow=!0,this.attachShadow({mode:"open"});let n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,n.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.appendChild(n)}else this.render(),this.removeAttribute("hidden"),this.shadowReadyCallback()}}let dN=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"cssInit$",{"--cfg-remove-copyright":0}),b(this,"init$",{...this.ctxInit,removeCopyright:!1})}initCallback(){super.initCallback(),this.sub("--cfg-remove-copyright",n=>{this.$.removeCopyright=!!n})}}return b(e,"template",'\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      set="@hidden: removeCopyright"\n      >Powered by Uploadcare</a\n    >\n  '),e})();class Ic extends z_{constructor(...t){super(...t),b(this,"ctxInit",Xy(this)),b(this,"ctxOwner",!0),b(this,"_template",null)}static set template(t){this._template=t+"<slot></slot>"}static get template(){return this._template}}let fN=(()=>{class e extends Ic{}return e.template="\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor></lr-cloud-image-editor>\n  </lr-modal>\n\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar-common></lr-progress-bar-common>\n",e})(),hN=(()=>{class e extends Ic{constructor(...n){super(...n),b(this,"pauseRender",!0),b(this,"init$",{...this.ctxInit,selectClicked:()=>{this.ref.uBlock.openSystemDialog()}})}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)}),this.sub("*uploadList",r=>{0===r?.length&&(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)})}}return e.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-message-box></lr-message-box>\n',e})(),pN=(()=>{class e extends Ic{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,dropAreaHidden:!1})}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)}),window.customElements.whenDefined(n.tagName.toLowerCase()).then(()=>{1===n.sourceList.length&&!n.sourceList.includes(ie.sourceTypes.LOCAL)&&(this.$.dropAreaHidden=!0)})}}return e.template=' <lr-start-from>\n    <lr-drop-area set="@hidden: dropAreaHidden" with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor></lr-cloud-image-editor>',e})();const Oo=24,Vi=34,Et=1.5,Ro=100/3,Vt=2*Oo+Vi;function Lr(e,t){for(let n in t)e.setAttributeNS(null,n,t[n].toString())}function It(e,t={}){let n=document.createElementNS("http://www.w3.org/2000/svg",e);return Lr(n,t),n}function mN(e,t){let{x:n,y:r,width:i,height:s}=e,o=t.includes("w")?0:1,a=t.includes("n")?0:1,l=[-1,1][o],u=[-1,1][a],c=[n+o*i+Et*l,r+a*s+Et*u-Oo*u],d=[n+o*i+Et*l,r+a*s+Et*u],f=[n+o*i-Oo*l+Et*l,r+a*s+Et*u];return{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]} L ${f[0]} ${f[1]}`,center:d}}function yN(e,t){let c,d,{x:n,y:r,width:i,height:s}=e,o=["n","s"].includes(t)?.5:{w:0,e:1}[t],a=["w","e"].includes(t)?.5:{n:0,s:1}[t],l=[-1,1][o],u=[-1,1][a];return["n","s"].includes(t)?(c=[n+o*i-Vi/2,r+a*s+Et*u],d=[n+o*i+Vi/2,r+a*s+Et*u]):(c=[n+o*i+Et*l,r+a*s-Vi/2],d=[n+o*i+Et*l,r+a*s+Vi/2]),{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]}`,center:[d[0]-(d[0]-c[0])/2,d[1]-(d[1]-c[1])/2]}}function W_(e,t){let{x:n}=e,{y:r}=e;return e.x<t.x?n=t.x:e.x+e.width>t.x+t.width&&(n=t.x+t.width-e.width),e.y<t.y?r=t.y:e.y+e.height>t.y+t.height&&(r=t.y+t.height-e.height),{...e,x:n,y:r}}function q_(e,[t,n],r){let{x:i,y:s,width:o,height:a}=e;if(r.includes("n")){let l=a;a=Math.max(n,a),s=s+l-a}if(r.includes("s")&&(a=Math.max(n,a)),r.includes("w")){let l=o;o=Math.max(t,o),i=i+l-o}return r.includes("e")&&(o=Math.max(t,o)),{x:i,y:s,width:o,height:a}}let CN=(()=>{class e extends ne{constructor(){super(),b(this,"init$",{...this.ctxInit,dragging:!1}),this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(n){let r=this.$["*imageBox"];if(!r)return;if(""===n&&r.height<=Vt&&r.width<=Vt)return!0;let i=r.height<=Vt&&(n.includes("n")||n.includes("s")),s=r.width<=Vt&&(n.includes("e")||n.includes("w"));return i||s}_createBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n,a=this.ref["svg-el"],l=It("mask",{id:"backdrop-mask"}),u=It("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=It("rect",{x:r,y:i,width:s,height:o,fill:"black"});l.appendChild(u),l.appendChild(c);let d=It("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});a.appendChild(d),a.appendChild(l),this._backdropMask=l,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask.style.display="block"}))}_updateBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n;Lr(this._backdropMaskInner,{x:r,y:i,width:s,height:o})}_updateFrame(){let n=this.$["*cropBox"];if(n){for(let i of Object.values(this._frameThumbs)){let{direction:s,pathNode:o,interactionNode:a,groupNode:l}=i,c=2===s.length;if(""===s){let{x:f,y:h,width:p,height:g}=n,y=[f+p/2,h+g/2];Lr(a,{r:Math.min(p,g)/3,cx:y[0],cy:y[1]})}else{let{d:f,center:h}=c?mN(n,s):yN(n,s);Lr(a,{cx:h[0],cy:h[1]}),Lr(o,{d:f})}let d=this._shouldThumbBeDisabled(s);l.setAttribute("class",Ct("thumb",{"thumb--hidden":d,"thumb--visible":!d}))}Lr(this._frameGuides,{x:n.x-.5,y:n.y-.5,width:n.width+1,height:n.height+1})}}_createThumbs(){let n={};for(let r=0;r<3;r++)for(let i=0;i<3;i++){let s=`${["n","","s"][r]}${["w","","e"][i]}`,o=It("g");o.classList.add("thumb"),o.setAttribute("with-effects","");let a=It("circle",{r:Oo+Et,fill:"transparent"}),l=It("path",{stroke:"currentColor",fill:"none","stroke-width":3});o.appendChild(l),o.appendChild(a),n[s]={direction:s,pathNode:l,interactionNode:a,groupNode:o},a.addEventListener("pointerdown",this._handlePointerDown.bind(this,s))}return n}_createGuides(){let n=It("svg"),r=It("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":1,"stroke-opacity":.5});n.appendChild(r);for(let i=1;i<=2;i++){let s=It("line",{x1:Ro*i+"%",y1:"0%",x2:Ro*i+"%",y2:"100%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}for(let i=1;i<=2;i++){let s=It("line",{x1:"0%",y1:Ro*i+"%",x2:"100%",y2:Ro*i+"%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}return n.classList.add("guides","guides--semi-hidden"),n}_createFrame(){let n=this.ref["svg-el"],r=document.createDocumentFragment(),i=this._createGuides();r.appendChild(i);let s=this._createThumbs();for(let{groupNode:o}of Object.values(s))r.appendChild(o);n.appendChild(r),this._frameThumbs=s,this._frameGuides=i}_handlePointerDown(n,r){let i=this._frameThumbs[n];if(this._shouldThumbBeDisabled(n))return;let s=this.$["*cropBox"],{x:o,y:a}=this.ref["svg-el"].getBoundingClientRect(),l=r.x-o,u=r.y-a;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[l,u],this._dragStartCrop={...s}}_handlePointerUp_(n){this._updateCursor(),this.$.dragging&&(n.stopPropagation(),n.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(n){if(!this.$.dragging)return;n.stopPropagation(),n.preventDefault();let r=this.ref["svg-el"],{x:i,y:s}=r.getBoundingClientRect(),l=n.x-i-this._dragStartPoint[0],u=n.y-s-this._dragStartPoint[1],{direction:c}=this._draggingThumb,d=this.$["*imageBox"],f=this._dragStartCrop;""===c?(f=function vN(e,[t,n]){return{...e,x:e.x+t,y:e.y+n}}(f,[l,u]),f=W_(f,d)):(f=function bN(e,[t,n],r){let{x:i,y:s,width:o,height:a}=e;return r.includes("n")&&(s+=n,a-=n),r.includes("s")&&(a+=n),r.includes("w")&&(i+=t,o-=t),r.includes("e")&&(o+=t),{x:i,y:s,width:o,height:a}}(f,[l,u],c),f=function DN(e,t){let n=Math.max(e.x,t.x),r=Math.min(e.x+e.width,t.x+t.width),i=Math.max(e.y,t.y);return{x:n,y:i,width:r-n,height:Math.min(e.y+e.height,t.y+t.height)-i}}(f,d)),f=q_(f,[Math.min(d.width,Vt),Math.min(d.height,Vt)],c),Object.values(f).every(p=>Number.isFinite(p)&&p>=0)?this.$["*cropBox"]=f:console.error("CropFrame is trying to create invalid rectangle",{payload:f})}_handleSvgPointerMove_(n){let r=Object.values(this._frameThumbs).find(i=>{if(this._shouldThumbBeDisabled(i.direction))return!1;let o=i.groupNode.getBoundingClientRect();return function wN(e,[t,n]){return e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height}({x:o.x,y:o.y,width:o.width,height:o.height},[n.x,n.y])});this._hoverThumb=r,this._updateCursor()}_updateCursor(){let n=this._hoverThumb;this.ref["svg-el"].style.cursor=n?function _N(e){return""===e?"move":["e","w"].includes(e)?"ew-resize":["n","s"].includes(e)?"ns-resize":["nw","se"].includes(e)?"nwse-resize":"nesw-resize"}(n.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(n){Object.values(this._frameThumbs).map(({groupNode:r})=>r).forEach(r=>{r.setAttribute("class",Ct("thumb",{"thumb--hidden":!n,"thumb--visible":n}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",n=>{n&&(this._guidesHidden=n.height<=Vt||n.width<=Vt,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",n=>{this._frameGuides.setAttribute("class",Ct({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&n,"guides--semi-hidden":!this._guidesHidden&&!n}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}return e.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ',e})(),Sc=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Ct({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}return e.template='\n  <div class="before"></div>\n  <lr-icon size="20" set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n',e})();class Tc extends Sc{initCallback(){super.initCallback(),this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t)}),this.$["on.click"]=t=>{let n=this.$["*cropperEl"].getValue(this._operation),r=function IN(e,t){return"rotate"===e?function EN(e){let t=e+90;return t=t>=360?0:t,t}(t):["mirror","flip"].includes(e)?!t:null}(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const wn="original";let SN=(()=>{class e extends ne{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":r=>{this.$["*faderEl"].set(r),this.$.value=r}})}setOperation(n,r){this._controlType="filter"===n?"filter":"color_operation",this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===wn?void 0:this.$.value,filter:this._filter===wn?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=Fr[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if("filter"===this._controlType){let a=s;if(o){let{name:l,amount:u}=o;a=l===this._filter?u:s}this.$.value=a,this.$.defaultValue=a}if("color_operation"===this._controlType){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;n="filter"===this._controlType?this._filter===wn?null:{name:this._filter,amount:this.$.value}:this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{this.$["*operationTooltip"]=`${this._filter||this._operation} ${n}`})}}return e.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n',e})();function Ac(e){let t=new Image;return{promise:new Promise((i,s)=>{t.src=e,t.onload=i,t.onerror=s}),image:t,cancel:()=>{0===t.naturalWidth&&(t.src=bn)}}}function Mc(e){let t=[];for(let s of e){let o=Ac(s);t.push(o)}let n=t.map(s=>s.image);return{promise:Promise.allSettled(t.map(s=>s.promise)),images:n,cancel:()=>{t.forEach(s=>{s.cancel()})}}}let xc=(()=>{class e extends Sc{constructor(...n){super(...n),b(this,"init$",{...this.ctxInit,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==wn?{name:this._filter,amount:100}:void 0,ut(this._originalUrl,Ut(U_,No(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=Ac(s);this._cancelPreload=l,a.catch(u=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:u})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===wn,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._originalUrl=this.$["*originalUrl"],this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;this.ref["icon-el"].style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload&&this._cancelPreload()}}return e.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n',e})();class Pc extends Sc{constructor(...t){super(...t),b(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=t=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t,this.$.title=this.l10n(t))}),this.sub("*editorTransformations",t=>{if(!this._operation)return;let{zero:n}=Fr[this._operation],r=t[this._operation];this.$.active=typeof r<"u"&&r!==n})}}function Nc(e,t,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(t*i),3e3),o=i>=2?"lightest":"normal";return ut(e,Ut(U_,No(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function ko(e,t,n){return Math.min(Math.max(e,t),n)}function Hi({width:e,height:t},n){let r=n/90%2!=0;return{width:r?t:e,height:r?e:t}}let MN=(()=>{class e extends ne{constructor(){super(),b(this,"init$",{...this.ctxInit,image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}}),this._commitDebounced=kr(this._commit.bind(this),300),this._handleResizeDebounced=kr(this._handleResize.bind(this),10)}_handleResize(){this.isConnected&&(this.deactivate(),this.activate(this._imageSize,{fromViewer:!1}))}_syncTransformations(){let r=function TN(e,t){let n={};for(let r of t){let i=e[r];(e.hasOwnProperty(r)||void 0!==i)&&(n[r]=i)}return n}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o_width=this.offsetWidth,o_height=this.offsetHeight,a=Hi({width:n.naturalWidth,height:n.naturalHeight},s);if(a.width>o_width-2*r||a.height>o_height-2*r){let l=a.width/a.height;if(l>o_width/o_height){let c=o_width-2*r,d=c/l;this.$["*imageBox"]={x:0+r,y:r+(o_height-2*r)/2-d/2,width:c,height:d}}else{let c=o_height-2*r,d=c*l;this.$["*imageBox"]={x:r+(o_width-2*r)/2-d/2,y:0+r,width:d,height:c}}}else{let{width:l,height:u}=a;this.$["*imageBox"]={x:r+(o_width-2*r)/2-l/2,y:r+(o_height-2*r)/2-u/2,width:l,height:u}}}_alignCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop;if(o){let{dimensions:[l,u],coords:[c,d]}=o,{width:f,x:h,y:p}=this.$["*imageBox"],{width:g}=Hi(this._imageSize,s),y=f/g;n={x:h+c*y,y:p+d*y,width:l*y,height:u*y}}else n={x:r.x,y:r.y,width:r.width,height:r.height};n=q_(n,[Math.min(r.width,Vt),Math.min(r.height,Vt)],"se"),n=W_(n,r),this.$["*cropBox"]=n}_drawImage(){let n=this.$.image,r=this.$["*imageBox"],i=this.$["*operations"],{mirror:s,flip:o,rotate:a}=i,l=this._ctx,u=Hi({width:r.width,height:r.height},a);l.save(),l.translate(r.x+r.width/2,r.y+r.height/2),l.rotate(a*Math.PI*-1/180),l.scale(s?-1:1,o?-1:1),l.drawImage(n,-u.width/2,-u.height/2,u.width,u.height),l.restore()}_draw(){if(!this._isActive||!this.$.image)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Ct({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_calculateDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:u}=Hi(this._imageSize,s),{width:c,height:d}=n,h=a/u;return[ko(Math.round(c/(o/l)),1,l),ko(Math.round(d/h),1,u)]}_calculateCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:u}=r,{width:c,height:d}=Hi(this._imageSize,s),{x:f,y:h}=n,p=o/c,g=a/d,y=this._calculateDimensions(),_={dimensions:y,coords:[ko(Math.round((f-l)/p),0,c-y[0]),ko(Math.round((h-u)/g),0,d-y[1])]};if(function AN(e){return!e||[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(e))}(_))return y[0]!==c||y[1]!==d?_:void 0;console.error("Cropper is trying to create invalid crop object",{payload:_})}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._calculateCrop(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){console.log(`Apply cropper operation [${n}=${r}]`),this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}activate(n,{fromViewer:r}){var i=this;return ge(function*(){if(!i._isActive){i._isActive=!0,i._imageSize=n,i.removeEventListener("transitionend",i._reset),i._initCanvas();try{i.$.image=yield i._waitForImage(i.$["*originalUrl"],i.$["*editorTransformations"]),i._syncTransformations(),i._alignImage(),i._alignCrop(),i._draw(),i._animateIn({fromViewer:r})}catch(s){console.error("Failed to activate cropper",{error:s})}}})()}deactivate(){this._isActive&&(this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Ct({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}))}_transitionToCrop(){let n=this._calculateDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(Nc(n,i,r)),{promise:o,cancel:a,image:l}=Ac(s),u=this._handleImageLoading(s);return l.addEventListener("load",u,{once:!0}),l.addEventListener("error",u,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(c=>(console.error("Failed to load image",{error:c}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{i?.get(r)?.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this._observer=new ResizeObserver(([n])=>{n.contentRect.width>0&&n.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeDebounced()}),this._observer.observe(this),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",n=>{this.$.image&&this._commitDebounced()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}return e.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n',e})();function Y_(e,t,n){let r=Array(n);for(let i=--n;i>=0;i--)r[i]=Math.ceil((i*t+(n-i)*e)/n);return r}function K_(e,t){let n=Fr[e].keypointsNumber,{range:r,zero:i}=Fr[e];return[...new Set([...Y_(r[0],i,n+1),...Y_(i,r[1],n+1),i,t])].sort((s,o)=>s-o)}class ON extends ne{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=kr(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(t){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(t)||(r.set(n,r.get(n).set(t,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(n)?.has(t)&&(r.get(n).delete(t),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let t of this._keypoints){let{image:n}=t;n&&(n.style.opacity=t.opacity.toString(),n.style.zIndex=t.zIndex.toString())}})}_imageSrc({url:t=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};return r&&(s[r]=n?{name:n,amount:i}:i),this.proxyUrl(Nc(t,this.offsetWidth,s))}_constructKeypoint(t,n){return{src:this._imageSrc({operation:t,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(t,n){return this._operation===t&&this._filter===n}_addKeypoint(t,n,r){let i=()=>!this._isSame(t,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(t,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,u=l.findIndex(d=>d.value>r),c=u<l.length?l[u].image:null;!this._container||c&&!this._container.contains(c)||(l.splice(u,0,s),this._container.insertBefore(o,c),this._update(t,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(t){t="string"==typeof t?parseInt(t,10):t,this._update(this._operation,t),this._addKeypointDebounced(this._operation,this._filter,t)}_update(t,n){this._operation=t,this._value=n;let{zero:r}=Fr[t],i=this._keypoints.map(a=>a.value),s=function PN(e,t,n){let r=function xN(e){return e.reduce((t,n,r)=>r<e.length-1?[...t,[n,e[r+1]]]:t,[])}(e).find(([i,s])=>i<=t&&t<=s);return e.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(t-r[0])/s;return r[0]===i?t>n?1:1-o:r[1]===i?t>=n?o:1:0})}(i,n,r),o=function NN(e,t){return e.map((n,r)=>n<t?e.length-r:r)}(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let t=new Image;return t.classList.add("fader-image","fader-image--preview"),t.style.opacity="0",t}_initNodes(){var t=this;return ge(function*(){let n=document.createDocumentFragment();t._previewImage=t._previewImage||t._createPreviewImage(),!t.contains(t._previewImage)&&n.appendChild(t._previewImage);let r=document.createElement("div");n.appendChild(r);let i=t._keypoints.map(c=>c.src),{images:s,promise:o,cancel:a}=Mc(i);s.forEach(c=>{let d=t._handleImageLoading(c.src);c.addEventListener("load",d),c.addEventListener("error",d)}),t._cancelLastImages=()=>{a(),t._cancelLastImages=void 0};let l=t._operation,u=t._filter;yield o,t._isActive&&t._isSame(l,u)&&(t._container&&t._container.remove(),t._container=r,t._keypoints.forEach((c,d)=>{let f=s[d];f.classList.add("fader-image"),c.image=f,t._container.appendChild(f)}),t.appendChild(n),t._flush())})()}setTransformations(t){if(this._transformations=t,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:t,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=K_(r,i).map(l=>this._imageSrc({url:t,filter:n,operation:r,value:l})),{cancel:a}=Mc(o);this._cancelBatchPreload=a}_setOriginalSrc(t){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===t)return n.style.opacity="1",n.style.transform="scale(1)",void(this.className=Ct({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));n.style.opacity="0";let r=this._handleImageLoading(t);n.addEventListener("error",r,{once:!0}),n.src=t,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Ct({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:t,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=t,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,"number"!=typeof r&&!i){let a=this._imageSrc({operation:n,value:r});return this._setOriginalSrc(a),void(this._container&&this._container.remove())}this._keypoints=K_(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:t=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),t&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Ct({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}let kN=(()=>{class e extends ne{initCallback(){super.initCallback(),this.addEventListener("wheel",n=>{n.preventDefault();let{deltaY:r,deltaX:i}=n;Math.abs(i)>1?this.scrollLeft+=i:this.scrollLeft+=r})}}return e.template=" <slot></slot> ",e})();class X_ extends ne{constructor(){super(),b(this,"_updateInfoTooltip",kr(()=>{let t=this.$["*editorTransformations"],n="",r=!1;if("filters"===this.$["*tabId"])if(r=!0,this.$["*currentFilter"]&&t?.filter?.name===this.$["*currentFilter"]){let i=t?.filter?.amount||100;n=this.l10n(this.$["*currentFilter"])+" "+i}else n=this.l10n(wn);else"sliders"===this.$["*tabId"]&&this.$["*currentOperation"]&&(r=!0,n=this.$["*currentOperation"]+" "+(t?.[this.$["*currentOperation"]]||Fr[this.$["*currentOperation"]].zero));r&&(this.$["*operationTooltip"]=n),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",r)},0)),this.init$={...this.ctxInit,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":wn,"*currentOperation":null,"*tabId":"crop",showLoader:!1,filters:QP,colorOperations:ZP,cropOperations:JP,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabContent.crop":!1,"presence.tabContent.sliders":!1,"presence.tabContent.filters":!1,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"on.cancel":t=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":t=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":t=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":t=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":t=>{let n=t.currentTarget.getAttribute("data-id");this._activateTab(n,{fromViewer:!1})}},this._debouncedShowLoader=kr(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,"sliders"===this.$["*tabId"]&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(t){let n=Pc.is&&new Pc;return n.operation=t,n}_createFilterControl(t){let n=xc.is&&new xc;return n.filter=t,n}_createToggleControl(t){let n=Tc.is&&new Tc;return n.operation=t,n}_renderControlsList(t){let n=this.ref[`controls-list-${t}`],r=document.createDocumentFragment();"crop"===t?this.$.cropOperations.forEach(i=>{let s=this._createToggleControl(i);r.appendChild(s)}):"filters"===t?[wn,...this.$.filters].forEach(i=>{let s=this._createFilterControl(i);r.appendChild(s)}):"sliders"===t&&this.$.colorOperations.forEach(i=>{let s=this._createOperationControl(i);r.appendChild(s)}),r.childNodes.forEach((i,s)=>{s===r.childNodes.length-1&&i.classList.add("controls-list_last-item")}),n.innerHTML="",n.appendChild(r)}_activateTab(t,{fromViewer:n}){this.$["*tabId"]=t,"crop"===t?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:n})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:n}),this.$["*cropperEl"].deactivate());for(let r of wc){let i=r===t;this.ref[`tab-toggle-${r}`].active=i,i?(this._renderControlsList(t),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=i}}_unmountTabControls(t){let n=this.ref[`controls-list-${t}`];n&&(n.innerHTML="")}_syncTabIndicator(){this.ref["tabs-indicator"].style.transform=`translateX(${this.ref[`tab-toggle-${this.$["*tabId"]}`].offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.proxyUrl(Nc(this.$["*originalUrl"],this.$["*imgContainerEl"].offsetWidth,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:r}=Mc([n]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(t){this.$.showLoader=t}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",t=>{t&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",t=>{let n=t?.filter?.name;this.$["*currentFilter"]!==n&&(this.$["*currentFilter"]=n)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",t=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",t=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(t)}),this.sub("*loadingOperations",t=>{let n=!1;for(let[,r]of t.entries()){if(n)break;for(let[,i]of r.entries())if(i){n=!0;break}}this._debouncedShowLoader(n)}),this.sub("*showSlider",t=>{this.$["presence.subToolbar"]=t,this.$["presence.mainToolbar"]=!t}),this._updateInfoTooltip()}}X_.template=`\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">${wc.map(function LN(e){return`\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${e}; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-${e}"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `}).join("")}</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <div class="tab-toggles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ${wc.map(function FN(e){return`\n    <lr-btn-ui\n      theme="boring"\n      ref="tab-toggle-${e}"\n      data-id="${e}"\n      icon="${e}"\n      tabindex="0"\n      set="onclick: on.clickTab;"\n    >\n    </lr-btn-ui>\n  `}).join("")}\n        </div>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;class Oc extends ne{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.ctxInit,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",t=>{t?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Ct("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",t=>{this._iconSingle=!this.$.text,this._iconHidden=!t,this.$.iconCss=this._iconCss()}),this.sub("theme",t=>{"custom"!==t&&(this.className=t)}),this.sub("text",t=>{this._iconSingle=!1}),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(t){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Oc.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),Oc.template='\n  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>\n  <div class="text">{{text}}</div>\n';let $N=(()=>{class e extends ne{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let n=this.ref["line-el"];n.style.transition="initial",n.style.opacity="0",n.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",n=>{"boolean"==typeof n&&(n?this._start():this._stop())})}_start(){this._active=!0;let{width:n}=this.getBoundingClientRect(),r=this.ref["line-el"];r.style.transition="transform 1s",r.style.opacity="1",r.style.transform=`translateX(${n}px)`,r.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}return e.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n',e})();let BN=(()=>{class e extends ne{constructor(){super(),this._visible=!1,this._visibleStyle="visible",this._hiddenStyle="hidden",this._externalTransitions=!1,this.defineAccessor("styles",n=>{n&&(this._externalTransitions=!0,this._visibleStyle=n.visible,this._hiddenStyle=n.hidden)}),this.defineAccessor("visible",n=>{"boolean"==typeof n&&(this._visible=n,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",function GP(e,...t){let n=$_(...t);for(let r of Object.keys(n))e.classList.toggle(r,n[r])}(this,{transition:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add("transition"),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}return e.template=" <slot></slot> ",e})(),UN=(()=>{class e extends ne{constructor(){super(),b(this,"init$",{...this.ctxInit,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}}),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;this._zeroDotEl.style.opacity=n===this._zero?"0":"0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),u=document.createElement("div");l.className="minor-step",u.className="border-step",a.appendChild(u);for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());let c=document.createElement("div");c.className="zero-dot",a.appendChild(c),this._zeroDotEl=c,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){this._observer?.disconnect()}}return e.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n',e})();const Rc="__lr-blocks__";function VN(e){return kc.apply(this,arguments)}function kc(){return(kc=ge(function*(e,t=!1){return new Promise((n,r)=>{if("object"!=typeof document)return void n(null);if("object"==typeof window&&window[Rc])return void n(window[Rc]);let i=document.createElement("script");i.type="module",i.src=e,i.onerror=()=>{r()},i.onload=()=>{let s=window[Rc];t&&Ju(s),n(s)},document.head.appendChild(i)})})).apply(this,arguments)}function jN(e,t){if(1&e&&Fl(0,"img",5),2&e){const n=t.$implicit;jl("src","https://ucarecdn.com/",n.uuid,"/",n.cdnUrlModifiers||"","-/preview/-/scale_crop/400x400/",il)}}Ju(Br);let HN=(()=>{class e{constructor(){this.files=[]}handleUploaderEvent(n){const{data:r}=n.detail;this.files=r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=vd({type:e,selectors:[["app-root"]],decls:5,vars:1,consts:[[1,"wrapper"],["css-src","https://unpkg.com/@uploadcare/blocks@0.15.2/web/file-uploader-regular.min.css",1,"uploader-cfg"],["use-event","","hidden","",1,"uploader-cfg",3,"lr-data-output"],[1,"output"],["width","200",3,"src",4,"ngFor","ngForOf"],["width","200",3,"src"]],template:function(n,r){1&n&&(mi(0,"div",0)(1,"lr-file-uploader-regular",1)(2,"lr-data-output",2),Ul("lr-data-output",function(s){return r.handleUploaderEvent(s)}),yi()(),mi(3,"div",3),function pp(e,t,n,r,i,s,o,a){const l=v(),u=H(),c=e+te,d=u.firstCreatePass?function EE(e,t,n,r,i,s,o,a,l){const u=t.consts,c=fr(t,e,4,o||null,fn(u,a));Sl(t,n,c,fn(u,l)),ds(t,c);const d=c.tView=Il(2,c,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,r,i,s,o):u.data[c];Pt(d,!1);const f=l[k].createComment("");Ss(u,l,f,d),Se(f,l),Ls(l,l[c]=Wh(f,l,f,d)),as(d)&&Cl(u,l,d),null!=o&&El(l,d,a)}(4,jN,1,2,"img",4),yi()()),2&n&&(function Ih(e){Sh(H(),v(),Pe()+e,!1)}(4),Rl("ngForOf",r.files))},dependencies:[uy],styles:['.wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:32px;padding:32px}.output[_ngcontent-%COMP%]{display:grid;grid-gap:8px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%;max-width:1000px}.uploader-cfg[_ngcontent-%COMP%]{--ctx-name: "uploader";--cfg-pubkey: "demopublickey";--cfg-multiple: 1;--cfg-confirm-upload: 1;--cfg-img-only: 0;--cfg-accept: "";--cfg-store: 1;--cfg-camera-mirror: 0;--cfg-source-list: "local, url, camera, dropbox, gdrive";--cfg-max-files: 10}']}),e})(),zN=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Wr({type:e,bootstrap:[HN]}),e.\u0275inj=Vn({imports:[LM]}),e})();FM().bootstrapModule(zN).catch(e=>console.error(e))}},Lo=>{Lo(Lo.s=534)}]);