"use strict";(self.webpackChunkangular_uploader=self.webpackChunkangular_uploader||[]).push([[179],{905:(Fl,Mh,$l)=>{var Vi={};$l.r(Vi),$l.d(Vi,{ActivityBlock:()=>I,ActivityHeader:()=>iU,BaseComponent:()=>yl,Block:()=>Ne,CameraSource:()=>vV,CloudImageEditor:()=>dU,CloudImageEditorActivity:()=>YV,CloudImageEditorBlock:()=>Pl,Config:()=>J$,ConfirmationDialog:()=>DV,Copyright:()=>aU,CropFrame:()=>xV,Data:()=>de,DataOutput:()=>Ll,DropArea:()=>vD,EditorCropButtonControl:()=>ED,EditorFilterControl:()=>ID,EditorImageCropper:()=>FV,EditorImageFader:()=>jV,EditorOperationControl:()=>TD,EditorScroller:()=>HV,EditorSlider:()=>RV,EditorToolbar:()=>AD,ExternalSource:()=>rU,FileItem:()=>vr,FilePreview:()=>wD,FileUploaderInline:()=>uU,FileUploaderMinimal:()=>cU,FileUploaderRegular:()=>lU,Icon:()=>dD,Img:()=>nV,LineLoaderUi:()=>WV,LrBtnUi:()=>Ch,MessageBox:()=>gV,Modal:()=>hV,PACKAGE_NAME:()=>XC,PACKAGE_VERSION:()=>fh,PresenceToggle:()=>qV,ProgressBar:()=>IV,ProgressBarCommon:()=>EV,Select:()=>sU,ShadowWrapper:()=>OD,SimpleBtn:()=>gD,SliderUi:()=>ZV,SourceBtn:()=>_D,SourceList:()=>uV,StartFrom:()=>rV,Tabs:()=>Dh,UploadCtxProvider:()=>bV,UploadDetails:()=>wV,UploadList:()=>mV,UploaderBlock:()=>oe,UrlSource:()=>yV,Video:()=>ND,connectBlocksFrom:()=>fU,registerBlocks:()=>qf,shadowed:()=>Eh,toKebabCase:()=>gr});let Ee=null,uo=1;function fe(e){const t=Ee;return Ee=e,t}function Ah(e){if((!ji(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==uo)){if(!e.producerMustRecompute(e)&&!jl(e))return e.dirty=!1,void(e.lastCleanEpoch=uo);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=uo}}function jl(e){_r(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Ah(n),r!==n.version))return!0}return!1}function ho(e,t){if(function Lh(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),_r(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)ho(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];_r(i),i.producerIndexOfThis[r]=t}}function ji(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function _r(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Fh=null;function Ie(e){return"function"==typeof e}function Uh(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const zl=Uh(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Gl(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Lt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ie(r))try{r()}catch(s){t=s instanceof zl?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Hh(s)}catch(o){t=t??[],o instanceof zl?t=[...t,...o.errors]:t.push(o)}}if(t)throw new zl(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Hh(t);else{if(t instanceof Lt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Gl(n,t)}remove(t){const{_finalizers:n}=this;n&&Gl(n,t),t instanceof Lt&&t._removeParent(this)}}Lt.EMPTY=(()=>{const e=new Lt;return e.closed=!0,e})();const jh=Lt.EMPTY;function Bh(e){return e instanceof Lt||e&&"closed"in e&&Ie(e.remove)&&Ie(e.add)&&Ie(e.unsubscribe)}function Hh(e){Ie(e)?e():e.unsubscribe()}const qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},po={setTimeout(e,t,...n){const{delegate:r}=po;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=po;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function zh(e){po.setTimeout(()=>{const{onUnhandledError:t}=qn;if(!t)throw e;t(e)})}function Gh(){}const BD=Wl("C",void 0,void 0);function Wl(e,t,n){return{kind:e,value:t,error:n}}let Zn=null;function go(e){if(qn.useDeprecatedSynchronousErrorHandling){const t=!Zn;if(t&&(Zn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Zn;if(Zn=null,n)throw r}}else e()}class ql extends Lt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Bh(t)&&t.add(this)):this.destination=YD}static create(t,n,r){return new Bi(t,n,r)}next(t){this.isStopped?Yl(function zD(e){return Wl("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Yl(function HD(e){return Wl("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Yl(BD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const WD=Function.prototype.bind;function Zl(e,t){return WD.call(e,t)}class qD{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){mo(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){mo(r)}else mo(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){mo(n)}}}class Bi extends ql{constructor(t,n,r){let i;if(super(),Ie(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&qn.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Zl(t.next,s),error:t.error&&Zl(t.error,s),complete:t.complete&&Zl(t.complete,s)}):i=t}this.destination=new qD(i)}}function mo(e){qn.useDeprecatedSynchronousErrorHandling?function GD(e){qn.useDeprecatedSynchronousErrorHandling&&Zn&&(Zn.errorThrown=!0,Zn.error=e)}(e):zh(e)}function Yl(e,t){const{onStoppedNotification:n}=qn;n&&po.setTimeout(()=>n(e,t))}const YD={closed:!0,next:Gh,error:function ZD(e){throw e},complete:Gh},Kl="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ql(e){return e}let Ye=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function QD(e){return e&&e instanceof ql||function KD(e){return e&&Ie(e.next)&&Ie(e.error)&&Ie(e.complete)}(e)&&Bh(e)}(n)?n:new Bi(n,r,i);return go(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=qh(r))((i,s)=>{const o=new Bi({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Kl](){return this}pipe(...n){return function Wh(e){return 0===e.length?Ql:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=qh(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function qh(e){var t;return null!==(t=e??qn.Promise)&&void 0!==t?t:Promise}const XD=Uh(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yo=(()=>{class e extends Ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Zh(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new XD}next(n){go(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){go(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){go(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?jh:(this.currentObservers=null,s.push(n),new Lt(()=>{this.currentObservers=null,Gl(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Ye;return n.source=this,n}}return e.create=(t,n)=>new Zh(t,n),e})();class Zh extends yo{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:jh}}function Yn(e){return t=>{if(function JD(e){return Ie(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Kn(e,t,n,r,i){return new eE(e,t,n,r,i)}class eE extends ql{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function In(e){return this instanceof In?(this.v=e,this):new In(e)}function Xh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function tc(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=e[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Jh=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ep(e){return Ie(e?.then)}function tp(e){return Ie(e[Kl])}function np(e){return Symbol.asyncIterator&&Ie(e?.[Symbol.asyncIterator])}function rp(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ip=function DE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function sp(e){return Ie(e?.[ip])}function op(e){return function Qh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof In?Promise.resolve(f.value.v).then(c,u):d(s[0][2],f)}(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield In(n.read());if(i)return yield In(void 0);yield yield In(r)}}finally{n.releaseLock()}})}function ap(e){return Ie(e?.getReader)}function sn(e){if(e instanceof Ye)return e;if(null!=e){if(tp(e))return function EE(e){return new Ye(t=>{const n=e[Kl]();if(Ie(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Jh(e))return function IE(e){return new Ye(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ep(e))return function TE(e){return new Ye(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,zh)})}(e);if(np(e))return lp(e);if(sp(e))return function SE(e){return new Ye(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ap(e))return function ME(e){return lp(op(e))}(e)}throw rp(e)}function lp(e){return new Ye(t=>{(function AE(e,t){var n,r,i,s;return function Yh(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Xh(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Tn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function cp(e,t,n=1/0){return Ie(t)?cp((r,i)=>function tE(e,t){return Yn((n,r)=>{let i=0;n.subscribe(Kn(r,s=>{r.next(e.call(t,s,i++))}))})}((s,o)=>t(r,s,i,o))(sn(e(r,i))),n):("number"==typeof t&&(n=t),Yn((r,i)=>function xE(e,t,n,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&t.complete()},h=g=>c<r?p(g):l.push(g),p=g=>{s&&t.next(g),c++;let y=!1;sn(n(g,u++)).subscribe(Kn(t,v=>{i?.(v),s?h(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<r;){const v=l.shift();o?Tn(t,o,()=>p(v)):p(v)}f()}catch(v){t.error(v)}}))};return e.subscribe(Kn(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const up=new Ye(e=>e.complete());function nc(e){return e[e.length-1]}function dp(e){return function RE(e){return e&&Ie(e.schedule)}(nc(e))?e.pop():void 0}function fp(e,t=0){return Yn((n,r)=>{n.subscribe(Kn(r,i=>Tn(r,e,()=>r.next(i),t),()=>Tn(r,e,()=>r.complete(),t),i=>Tn(r,e,()=>r.error(i),t)))})}function hp(e,t=0){return Yn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function pp(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ye(n=>{Tn(n,t,()=>{const r=e[Symbol.asyncIterator]();Tn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gp(e,t){return t?function UE(e,t){if(null!=e){if(tp(e))return function kE(e,t){return sn(e).pipe(hp(t),fp(t))}(e,t);if(Jh(e))return function FE(e,t){return new Ye(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ep(e))return function LE(e,t){return sn(e).pipe(hp(t),fp(t))}(e,t);if(np(e))return pp(e,t);if(sp(e))return function $E(e,t){return new Ye(n=>{let r;return Tn(n,t,()=>{r=e[ip](),Tn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ie(r?.return)&&r.return()})}(e,t);if(ap(e))return function VE(e,t){return pp(op(e),t)}(e,t)}throw rp(e)}(e,t):sn(e)}function jE(...e){const t=dp(e),n=function PE(e,t){return"number"==typeof nc(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?sn(r[0]):function NE(e=1/0){return cp(Ql,e)}(n)(gp(r,t)):up}class BE extends yo{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function mp(e={}){const{connector:t=(()=>new yo),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,l,c=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=l=void 0,u=d=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return Yn((g,y)=>{c++,!d&&!u&&f();const v=l=l??t();y.add(()=>{c--,0===c&&!d&&!u&&(a=rc(p,i))}),v.subscribe(y),!o&&c>0&&(o=new Bi({next:m=>v.next(m),error:m=>{d=!0,f(),a=rc(h,n,m),v.error(m)},complete:()=>{u=!0,f(),a=rc(h,r),v.complete()}}),sn(g).subscribe(o))})(s)}}function rc(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Bi({next:()=>{r.unsubscribe(),e()}});return sn(t(...n)).subscribe(r)}function WE(e,t){return e===t}function Y(e){for(let t in e)if(e[t]===Y)return t;throw Error("Could not find renamed property on target object.")}function _e(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(_e).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function ic(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const qE=Y({__forward_ref__:Y});function sc(e){return e.__forward_ref__=sc,e.toString=function(){return _e(this())},e}function T(e){return function _o(e){return"function"==typeof e&&e.hasOwnProperty(qE)&&e.__forward_ref__===sc}(e)?e():e}function oc(e){return e&&!!e.\u0275providers}const yp="https://g.co/ng/security#xss";class C extends Error{constructor(t,n){super(function br(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}const Hi=Y({\u0275cmp:Y}),ac=Y({\u0275dir:Y}),lc=Y({\u0275pipe:Y}),vp=Y({\u0275mod:Y}),on=Y({\u0275fac:Y}),zi=Y({__NG_ELEMENT_ID__:Y}),_p=Y({__NG_ENV_ID__:Y});function O(e){return"string"==typeof e?e:null==e?"":String(e)}function cc(e,t){throw new C(-201,!1)}function Ke(e,t){null==e&&function S(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function G(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function wr(e){return{providers:e.providers||[],imports:e.imports||[]}}function bo(e){return bp(e,Co)||bp(e,wp)}function bp(e,t){return e.hasOwnProperty(t)?e[t]:null}function wo(e){return e&&(e.hasOwnProperty(uc)||e.hasOwnProperty(tI))?e[uc]:null}const Co=Y({\u0275prov:Y}),uc=Y({\u0275inj:Y}),wp=Y({ngInjectableDef:Y}),tI=Y({ngInjectorDef:Y});var U=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(U||{});let dc;function Qe(e){const t=dc;return dc=e,t}function Dp(e,t,n){const r=bo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&U.Optional?null:void 0!==t?t:void cc(_e(e))}const ee=globalThis;class M{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Gi={},mc="__NG_DI_FLAG__",Do="ngTempTokenPath",iI=/\n/gm,Ip="__source";let Cr;function Mn(e){const t=Cr;return Cr=e,t}function aI(e,t=U.Default){if(void 0===Cr)throw new C(-203,!1);return null===Cr?Dp(e,void 0,t):Cr.get(e,t&U.Optional?null:void 0,t)}function B(e,t=U.Default){return(function Cp(){return dc}()||aI)(T(e),t)}function Z(e,t=U.Default){return B(e,Eo(t))}function Eo(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function yc(e){const t=[];for(let n=0;n<e.length;n++){const r=T(e[n]);if(Array.isArray(r)){if(0===r.length)throw new C(900,!1);let i,s=U.Default;for(let o=0;o<r.length;o++){const a=r[o],l=lI(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(B(i,s))}else t.push(B(r))}return t}function Wi(e,t){return e[mc]=t,e.prototype[mc]=t,e}function lI(e){return e[mc]}function an(e){return{toString:e}.toString()}var Io=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Io||{}),Et=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Et||{});const Ft={},H=[];function Sp(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function vc(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];Ap(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function Mp(e){return 3===e||4===e||6===e}function Ap(e){return 64===e.charCodeAt(0)}function qi(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||xp(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function xp(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}const Np="ng-template";function dI(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==Sp(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Op(e){return 4===e.type&&e.value!==Np}function fI(e,t,n){return t===(4!==e.type||n?e.value:Np)}function hI(e,t,n){let r=4;const i=e.attrs||[],s=function mI(e){for(let t=0;t<e.length;t++)if(Mp(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!fI(e,l,n)||""===l&&1===t.length){if(It(r))return!1;o=!0}}else{const c=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!dI(e.attrs,c,n)){if(It(r))return!1;o=!0}continue}const d=pI(8&r?"class":l,i,Op(e),n);if(-1===d){if(It(r))return!1;o=!0;continue}if(""!==c){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Sp(h,c,0)||2&r&&c!==f){if(It(r))return!1;o=!0}}}}else{if(!o&&!It(r)&&!It(l))return!1;if(o&&It(l))continue;o=!1,r=l|1&r}}return It(r)||o}function It(e){return 0==(1&e)}function pI(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function yI(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Rp(e,t,n=!1){for(let r=0;r<t.length;r++)if(hI(e,t[r],n))return!0;return!1}function Pp(e,t){return e?":not("+t.trim()+")":t}function _I(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!It(o)&&(t+=Pp(s,i),i=""),r=o,s=s||!It(r);n++}return""!==i&&(t+=Pp(s,i)),t}function kp(e){return an(()=>{const t=Fp(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Io.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Et.Emulated,styles:e.styles||H,_:null,schemas:e.schemas||null,tView:null,id:""};$p(n);const r=e.dependencies;return n.directiveDefs=To(r,!1),n.pipeDefs=To(r,!0),n.id=function II(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function CI(e){return k(e)||Te(e)}function DI(e){return null!==e}function Zi(e){return an(()=>({type:e.type,bootstrap:e.bootstrap||H,declarations:e.declarations||H,imports:e.imports||H,exports:e.exports||H,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Lp(e,t){if(null==e)return Ft;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function mt(e){return an(()=>{const t=Fp(e);return $p(t),t})}function k(e){return e[Hi]||null}function Te(e){return e[ac]||null}function Re(e){return e[lc]||null}function Fp(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ft,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||H,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lp(e.inputs,t),outputs:Lp(e.outputs),debugInfo:null}}function $p(e){e.features?.forEach(t=>t(e))}function To(e,t){if(!e)return null;const n=t?Re:CI;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(DI)}const he=0,w=1,E=2,ae=3,Tt=4,Le=5,$t=6,Dr=7,X=8,$e=9,Er=10,R=11,Yi=12,Vp=13,Ir=14,ue=15,Ki=16,Tr=17,Vt=18,Qi=19,Up=20,An=21,So=22,Xn=23,A=25,_c=1,Ut=7,Sr=9,ge=10;var Mr=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e[e.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",e}(Mr||{});function Pe(e){return Array.isArray(e)&&"object"==typeof e[_c]}function Oe(e){return Array.isArray(e)&&!0===e[_c]}function bc(e){return 0!=(4&e.flags)}function Jn(e){return e.componentOffset>-1}function Ao(e){return 1==(1&e.flags)}function St(e){return!!e.template}function wc(e){return 0!=(512&e[E])}function er(e,t){return e.hasOwnProperty(on)?e[on]:null}class AI{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function zp(e){return e.type.prototype.ngOnChanges&&(e.setInput=NI),xI}function xI(){const e=Wp(this),t=e?.current;if(t){const n=e.previous;if(n===Ft)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function NI(e,t,n,r){const i=this.declaredInputs[n],s=Wp(e)||function OI(e,t){return e[Gp]=t}(e,{previous:Ft,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new AI(l&&l.currentValue,t,a===Ft),e[r]=t}const Gp="__ngSimpleChanges__";function Wp(e){return e[Gp]||null}const jt=function(e,t,n){};function te(e){for(;Array.isArray(e);)e=e[he];return e}function Ve(e,t){return te(t[e.index])}function es(e,t){return e.data[t]}function lt(e,t){const n=t[e];return Pe(n)?n:n[he]}function Tc(e){return 128==(128&e[E])}function Bt(e,t){return null==t?null:e[t]}function Yp(e){e[Tr]=0}function FI(e){1024&e[E]||(e[E]|=1024,Tc(e)&&No(e))}function Qp(e){9216&e[E]&&No(e)}function No(e){let t=e[ae];for(;null!==t&&!(Oe(t)&&t[E]&Mr.HasChildViewsToRefresh||Pe(t)&&8192&t[E]);){if(Oe(t))t[E]|=Mr.HasChildViewsToRefresh;else if(t[E]|=8192,!Tc(t))break;t=t[ae]}}const x={lFrame:ag(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Jp(){return x.bindingsEnabled}function _(){return x.lFrame.lView}function j(){return x.lFrame.tView}function Q(){let e=eg();for(;null!==e&&64===e.type;)e=e.parent;return e}function eg(){return x.lFrame.currentTNode}function Ht(e,t){const n=x.lFrame;n.currentTNode=e,n.isParent=t}function Mc(){return x.lFrame.isParent}function zt(){return x.lFrame.bindingIndex++}function KI(e,t){const n=x.lFrame;n.bindingIndex=n.bindingRootIndex=e,xc(t)}function xc(e){x.lFrame.currentDirectiveIndex=e}function Oc(e){x.lFrame.currentQueryIndex=e}function XI(e){const t=e[w];return 2===t.type?t.declTNode:1===t.type?e[Le]:null}function sg(e,t,n){if(n&U.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&U.Host||(i=XI(s),null===i||(s=s[Ir],10&i.type))););if(null===i)return!1;t=i,e=s}const r=x.lFrame=og();return r.currentTNode=t,r.lView=e,!0}function Rc(e){const t=og(),n=e[w];x.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function og(){const e=x.lFrame,t=null===e?null:e.child;return null===t?ag(e):t}function ag(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function lg(){const e=x.lFrame;return x.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const cg=lg;function Pc(){const e=lg();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function je(){return x.lFrame.selectedIndex}function tr(e){x.lFrame.selectedIndex=e}function se(){const e=x.lFrame;return es(e.tView,e.selectedIndex)}let dg=!0;function Ro(){return dg}function xn(e){dg=e}function Po(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=u&&(e.destroyHooks??=[]).push(n,u)}}function ko(e,t,n){fg(e,t,3,n)}function Lo(e,t,n,r){(3&e[E])===n&&fg(e,t,n,r)}function kc(e,t){let n=e[E];(3&n)===t&&(n&=16383,n+=1,e[E]=n)}function fg(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&e[Tr]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[Tr]+=65536),(a<s||-1==s)&&(sT(e,n,t,l),e[Tr]=(4294901760&e[Tr])+l+2),l++}function hg(e,t){jt(4,e,t);const n=fe(null);try{t.call(e)}finally{fe(n),jt(5,e,t)}}function sT(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];i?e[E]>>14<e[Tr]>>16&&(3&e[E])===t&&(e[E]+=16384,hg(a,s)):hg(a,s)}const Nr=-1;class ns{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Fc(e){return e!==Nr}function rs(e){return 32767&e}function is(e,t){let n=function uT(e){return e>>16}(e),r=t;for(;n>0;)r=r[Ir],n--;return r}let $c=!0;function Fo(e){const t=$c;return $c=e,t}const pg=255,gg=5;let dT=0;const Gt={};function $o(e,t){const n=mg(e,t);if(-1!==n)return n;const r=t[w];r.firstCreatePass&&(e.injectorIndex=t.length,Vc(r.data,e),Vc(t,null),Vc(r.blueprint,null));const i=Vo(e,t),s=e.injectorIndex;if(Fc(i)){const o=rs(i),a=is(i,t),l=a[w].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=i,s}function Vc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function mg(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Vo(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Dg(i),null===r)return Nr;if(n++,i=i[Ir],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Nr}function Uc(e,t,n){!function fT(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(zi)&&(r=n[zi]),null==r&&(r=n[zi]=dT++);const i=r&pg;t.data[e+(i>>gg)]|=1<<i}(e,t,n)}function yg(e,t,n){if(n&U.Optional||void 0!==e)return e;cc()}function vg(e,t,n,r){if(n&U.Optional&&void 0===r&&(r=null),!(n&(U.Self|U.Host))){const i=e[$e],s=Qe(void 0);try{return i?i.get(t,r,n&U.Optional):Dp(t,r,n&U.Optional)}finally{Qe(s)}}return yg(r,0,n)}function _g(e,t,n,r=U.Default,i){if(null!==e){if(2048&t[E]&&!(r&U.Self)){const o=function vT(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&2048&o[E]&&!(512&o[E]);){const a=bg(s,o,n,r|U.Self,Gt);if(a!==Gt)return a;let l=s.parent;if(!l){const c=o[Up];if(c){const u=c.get(n,Gt,r);if(u!==Gt)return u}l=Dg(o),o=o[Ir]}s=l}return i}(e,t,n,r,Gt);if(o!==Gt)return o}const s=bg(e,t,n,r,Gt);if(s!==Gt)return s}return vg(t,n,r,i)}function bg(e,t,n,r,i){const s=function gT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(zi)?e[zi]:void 0;return"number"==typeof t?t>=0?t&pg:mT:t}(n);if("function"==typeof s){if(!sg(t,e,r))return r&U.Host?yg(i,0,r):vg(t,n,r,i);try{let o;if(o=s(r),null!=o||r&U.Optional)return o;cc()}finally{cg()}}else if("number"==typeof s){let o=null,a=mg(e,t),l=Nr,c=r&U.Host?t[ue][Le]:null;for((-1===a||r&U.SkipSelf)&&(l=-1===a?Vo(e,t):t[a+8],l!==Nr&&Cg(r,!1)?(o=t[w],a=rs(l),t=is(l,t)):a=-1);-1!==a;){const u=t[w];if(wg(s,a,u.data)){const d=pT(a,t,n,o,r,c);if(d!==Gt)return d}l=t[a+8],l!==Nr&&Cg(r,t[w].data[a+8]===c)&&wg(s,a,t)?(o=u,a=rs(l),t=is(l,t)):a=-1}}return i}function pT(e,t,n,r,i,s){const o=t[w],a=o.data[e+8],u=function Uo(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,u=s>>20,f=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&St(h)&&h.type===n)return l}return null}(a,o,n,null==r?Jn(a)&&$c:r!=o&&0!=(3&a.type),i&U.Host&&s===a);return null!==u?nr(t,o,u,a):Gt}function nr(e,t,n,r){let i=e[n];const s=t.data;if(function oT(e){return e instanceof ns}(i)){const o=i;o.resolving&&function YE(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new C(-200,`Circular dependency in DI detected for ${e}${n}`)}(function z(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():O(e)}(s[n]));const a=Fo(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Qe(o.injectImpl):null;sg(e,r,U.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function iT(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=zp(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}(n,s[n],t)}finally{null!==c&&Qe(c),Fo(a),o.resolving=!1,cg()}}return i}function wg(e,t,n){return!!(n[t+(e>>gg)]&1<<e)}function Cg(e,t){return!(e&U.Self||e&U.Host&&t)}class Se{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return _g(this._tNode,this._lView,t,Eo(r),n)}}function mT(){return new Se(Q(),_())}function Dg(e){const t=e[w],n=t.type;return 2===n?t.declTNode:1===n?e[Le]:null}const kr="__parameters__";function Fr(e,t,n){return an(()=>{const r=function Hc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(kr)?l[kr]:Object.defineProperty(l,kr,{value:[]})[kr];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Vr(e,t){e.forEach(n=>Array.isArray(n)?Vr(n,t):t(n))}function Ig(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function jo(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const qc=Wi(Fr("Optional"),8),Zc=Wi(Fr("SkipSelf"),4),ls=new M("ENVIRONMENT_INITIALIZER"),Ng=new M("INJECTOR",-1),Kc=new M("INJECTOR_DEF_TYPES");class zo{get(t,n=Gi){if(n===Gi){const r=new Error(`NullInjectorError: No provider for ${_e(t)}!`);throw r.name="NullInjectorError",r}return n}}function UT(...e){return{\u0275providers:Rg(0,e),\u0275fromNgModule:!0}}function Rg(e,...t){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Vr(t,o=>{const a=o;Go(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Pg(i,s),n}function Pg(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];Qc(i,s=>{t(s,r)})}}function Go(e,t,n,r){if(!(e=T(e)))return!1;let i=null,s=wo(e);const o=!s&&k(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const l=e.ngModule;if(s=wo(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Go(c,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Vr(s.imports,u=>{Go(u,t,n,r)&&(c||=[],c.push(u))})}finally{}void 0!==c&&Pg(c,t)}if(!a){const c=er(i)||(()=>new i);t({provide:i,useFactory:c,deps:H},i),t({provide:Kc,useValue:i,multi:!0},i),t({provide:ls,useValue:()=>B(i),multi:!0},i)}const l=s.providers;if(null!=l&&!a){const c=e;Qc(l,u=>{t(u,c)})}}}return i!==e&&void 0!==e.providers}function Qc(e,t){for(let n of e)oc(n)&&(n=n.\u0275providers),Array.isArray(n)?Qc(n,t):t(n)}const jT=Y({provide:String,useValue:Y});function Xc(e){return null!==e&&"object"==typeof e&&jT in e}function rr(e){return"function"==typeof e}const Jc=new M("Set Injector scope."),Wo={},HT={};let eu;function qo(){return void 0===eu&&(eu=new zo),eu}class un{}class Br extends un{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nu(t,o=>this.processProvider(o)),this.records.set(Ng,Hr(void 0,this)),i.has("environment")&&this.records.set(un,Hr(void 0,this));const s=this.records.get(Jc);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Kc,H,U.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Mn(this),r=Qe(void 0);try{return t()}finally{Mn(n),Qe(r)}}get(t,n=Gi,r=U.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(_p))return t[_p](this);r=Eo(r);const s=Mn(this),o=Qe(void 0);try{if(!(r&U.SkipSelf)){let l=this.records.get(t);if(void 0===l){const c=function ZT(e){return"function"==typeof e||"object"==typeof e&&e instanceof M}(t)&&bo(t);l=c&&this.injectableDefInScope(c)?Hr(tu(t),Wo):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(r&U.Self?qo():this.parent).get(t,n=r&U.Optional&&n===Gi?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Do]=a[Do]||[]).unshift(_e(t)),s)throw a;return function cI(e,t,n,r){const i=e[Do];throw t[Ip]&&i.unshift(t[Ip]),e.message=function uI(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=_e(t);if(Array.isArray(t))i=t.map(_e).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):_e(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(iI,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Do]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Qe(o),Mn(s)}}resolveInjectorInitializers(){const t=Mn(this),n=Qe(void 0);try{const i=this.get(ls,H,U.Self);for(const s of i)s()}finally{Mn(t),Qe(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(_e(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new C(205,!1)}processProvider(t){let n=rr(t=T(t))?t:T(t&&t.provide);const r=function GT(e){return Xc(e)?Hr(void 0,e.useValue):Hr(function Fg(e,t,n){let r;if(rr(e)){const i=T(e);return er(i)||tu(i)}if(Xc(e))r=()=>T(e.useValue);else if(function Lg(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...yc(e.deps||[]));else if(function kg(e){return!(!e||!e.useExisting)}(e))r=()=>B(T(e.useExisting));else{const i=T(e&&(e.useClass||e.provide));if(!function WT(e){return!!e.deps}(e))return er(i)||tu(i);r=()=>new i(...yc(e.deps))}return r}(e),Wo)}(t);if(rr(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Hr(void 0,Wo,!0),i.factory=()=>yc(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Wo&&(n.value=HT,n.value=n.factory()),"object"==typeof n.value&&n.value&&function qT(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=T(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function tu(e){const t=bo(e),n=null!==t?t.factory:er(e);if(null!==n)return n;if(e instanceof M)throw new C(204,!1);if(e instanceof Function)return function zT(e){const t=e.length;if(t>0)throw function os(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new C(204,!1);const n=function eI(e){return e&&(e[Co]||e[wp])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new C(204,!1)}function Hr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function nu(e,t){for(const n of e)Array.isArray(n)?nu(n,t):n&&oc(n)?nu(n.\u0275providers,t):t(n)}function jg(e,t=null,n=null,r){const i=Bg(e,t,n,r);return i.resolveInjectorInitializers(),i}function Bg(e,t=null,n=null,r,i=new Set){const s=[n||H,UT(e)];return r=r||("object"==typeof e?void 0:_e(e)),new Br(s,t||qo(),r||null,i)}let su,Mt=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Gi;static#t=this.NULL=new zo;static create(n,r){if(Array.isArray(n))return jg({name:""},r,n,"");{const i=n.name??"";return jg({name:i},n.parent,n.providers,i)}}static#n=this.\u0275prov=G({token:e,providedIn:"any",factory:()=>B(Ng)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();const Yo=new M("AppId",{providedIn:"root",factory:()=>rS}),rS="ng",zg=new M("Platform Initializer"),zr=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Gg=new M("CSP nonce",{providedIn:"root",factory:()=>function Nn(){if(void 0!==su)return su;if(typeof document<"u")return document;throw new C(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Jo(e){return 128==(128&e.flags)}var Pn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Pn||{});const uu=new Map;let mS=0;const fu="__ngContext__";function Fe(e,t){Pe(t)?(e[fu]=t[Qi],function vS(e){uu.set(e[Qi],e)}(t)):e[fu]=t}let hu;function pu(e,t){return hu(e,t)}function hs(e){const t=e[ae];return Oe(t)?t[ae]:t}function cm(e){return dm(e[Yi])}function um(e){return dm(e[Tt])}function dm(e){for(;null!==e&&!Oe(e);)e=e[Tt];return e}function Wr(e,t,n,r,i){if(null!=r){let s,o=!1;Oe(r)?s=r:Pe(r)&&(o=!0,r=r[he]);const a=te(r);0===e&&null!==n?null==i?gm(t,n,a):sr(t,n,a,i||null,!0):1===e&&null!==n?sr(t,n,a,i||null,!0):2===e?function oa(e,t,n){const r=ia(e,t);r&&function FS(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function US(e,t,n,r,i){const s=n[Ut];s!==te(n)&&Wr(t,e,r,s,i);for(let a=ge;a<n.length;a++){const l=n[a];ms(l[w],l,e,t,r,s)}}(t,e,s,n,i)}}function na(e,t,n){return e.createElement(t,n)}function hm(e,t){const n=e[Sr],r=n.indexOf(t);n.splice(r,1)}function ps(e,t){if(e.length<=ge)return;const n=ge+t,r=e[n];if(r){const i=r[Ki];null!==i&&i!==e&&hm(i,r),t>0&&(e[n-1][Tt]=r[Tt]);const s=jo(e,ge+t);!function AS(e,t){ms(e,t,t[R],2,null,null),t[he]=null,t[Le]=null}(r[w],r);const o=s[Vt];null!==o&&o.detachView(s[w]),r[ae]=null,r[Tt]=null,r[E]&=-129}return r}function ra(e,t){if(!(256&t[E])){const n=t[R];t[Xn]&&function Ph(e){if(_r(e),ji(e))for(let t=0;t<e.producerNode.length;t++)ho(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(t[Xn]),n.destroyNode&&ms(e,t,n,3,null,null),function OS(e){let t=e[Yi];if(!t)return mu(e[w],e);for(;t;){let n=null;if(Pe(t))n=t[Yi];else{const r=t[ge];r&&(n=r)}if(!n){for(;t&&!t[Tt]&&t!==e;)Pe(t)&&mu(t[w],t),t=t[ae];null===t&&(t=e),Pe(t)&&mu(t[w],t),n=t&&t[Tt]}t=n}}(t)}}function mu(e,t){if(!(256&t[E])){t[E]&=-129,t[E]|=256,function LS(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ns)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];jt(4,a,l);try{l.call(a)}finally{jt(5,a,l)}}else{jt(4,i,s);try{s.call(i)}finally{jt(5,i,s)}}}}}(e,t),function kS(e,t){const n=e.cleanup,r=t[Dr];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(t[Dr]=null);const i=t[An];if(null!==i){t[An]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(e,t),1===t[w].type&&t[R].destroy();const n=t[Ki];if(null!==n&&Oe(t[ae])){n!==t[ae]&&hm(n,t);const r=t[Vt];null!==r&&r.detachView(e)}!function _S(e){uu.delete(e[Qi])}(t)}}function yu(e,t,n){return function pm(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[he];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===Et.None||s===Et.Emulated)return null}return Ve(r,n)}}(e,t.parent,n)}function sr(e,t,n,r,i){e.insertBefore(t,n,r,i)}function gm(e,t,n){e.appendChild(t,n)}function mm(e,t,n,r,i){null!==r?sr(e,t,n,r,i):gm(e,t,n)}function ia(e,t){return e.parentNode(t)}let vu,_m=function vm(e,t,n){return 40&e.type?Ve(e,n):null};function sa(e,t,n,r){const i=yu(e,r,t),s=t[R],a=function ym(e,t,n){return _m(e,t,n)}(r.parent||t[Le],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)mm(s,i,n[l],a,!1);else mm(s,i,n,a,!1);void 0!==vu&&vu(s,r,t,n,i)}function gs(e,t){if(null!==t){const n=t.type;if(3&n)return Ve(t,e);if(4&n)return _u(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return gs(e,r);{const i=e[t.index];return Oe(i)?_u(-1,i):te(i)}}if(32&n)return pu(t,e)()||te(e[t.index]);{const r=wm(e,t);return null!==r?Array.isArray(r)?r[0]:gs(hs(e[ue]),r):gs(e,t.next)}}return null}function wm(e,t){return null!==t?e[ue][Le].projection[t.projection]:null}function _u(e,t){const n=ge+e+1;if(n<t.length){const r=t[n],i=r[w].firstChild;if(null!==i)return gs(r,i)}return t[Ut]}function bu(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Fe(te(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)bu(e,t,n.child,r,i,s,!1),Wr(t,e,i,a,s);else if(32&l){const c=pu(n,r);let u;for(;u=c();)Wr(t,e,i,u,s);Wr(t,e,i,a,s)}else 16&l?Dm(e,t,r,n,i,s):Wr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function ms(e,t,n,r,i,s){bu(n,r,e.firstChild,t,i,s,!1)}function Dm(e,t,n,r,i,s){const o=n[ue],l=o[Le].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Wr(t,e,i,l[c],s);else{let c=l;const u=o[ae];Jo(r)&&(c.flags|=128),bu(e,t,c,u,i,s,!0)}}function Em(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Im(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&vc(e,t,r),null!==i&&Em(e,t,i),null!==s&&function BS(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class Am{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yp})`}}const t0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Zr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Zr||{});function Su(e){const t=function _s(){const e=_();return e&&e[Er].sanitizer}();return t?t.sanitize(Zr.URL,e)||"":function ys(e,t){const n=function QS(e){return e instanceof Am&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${yp})`)}return n===t}(e,"URL")?function kn(e){return e instanceof Am?e.changingThisBreaksApplicationSecurity:e}(e):function Du(e){return(e=String(e)).match(t0)?e:"unsafe:"+e}(O(e))}let Fm=(e,t,n)=>null;function ku(e,t,n=!1){return Fm(e,t,n)}class E0{}class Um{}class T0{resolveComponentFactory(t){throw function I0(e){const t=Error(`No component factory found for ${_e(e)}.`);return t.ngComponent=e,t}(t)}}let ga=(()=>{class e{static#e=this.NULL=new T0}return e})();function S0(){return Qr(Q(),_())}function Qr(e,t){return new Xr(Ve(e,t))}let Xr=(()=>{class e{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=S0}return e})();class Bm{}let x0=(()=>{class e{static#e=this.\u0275prov=G({token:e,providedIn:"root",factory:()=>null})}return e})();class $u{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const N0=new $u("17.0.3"),Vu={};function ma(e){return!!function Uu(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}class Gm{constructor(){}supports(t){return ma(t)}create(t){return new L0(t)}}const k0=(e,t)=>t;class L0{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||k0}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<qm(r,i,s)?n:r,a=qm(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let f=0;f<c;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;u<=p&&p<c&&(s[f]=h+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!ma(t))throw new C(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function P0(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new F0(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Wm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Wm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class F0{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $0{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class Wm{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new $0,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function qm(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function Ym(){return new ya([new Gm])}let ya=(()=>{class e{static#e=this.\u0275prov=G({token:e,providedIn:"root",factory:Ym});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||Ym()),deps:[[e,new Zc,new qc]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new C(901,!1)}}return e})();function Ds(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];null!==s&&r.push(te(s)),Oe(s)&&Qm(s,r);const o=n.type;if(8&o)Ds(e,t,n.child,r);else if(32&o){const a=pu(n,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=wm(t,n);if(Array.isArray(a))r.push(...a);else{const l=hs(t[ue]);Ds(l[w],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Qm(e,t){for(let n=ge;n<e.length;n++){const r=e[n],i=r[w].firstChild;null!==i&&Ds(r[w],r,i,t)}e[Ut]!==e[he]&&t.push(e[Ut])}let Xm=[];const G0={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{No(e.lView)},consumerOnSignalRead(){this.lView[Xn]=this}};function ju(e){return e.ngOriginalError}class fn{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ju(t);for(;n&&ju(n);)n=ju(n);return n||null}}const ty=new M("",{providedIn:"root",factory:()=>!1}),P={};function Bu(e){sy(j(),_(),je()+e,!1)}function sy(e,t,n,r){if(!r)if(3==(3&t[E])){const s=e.preOrderCheckHooks;null!==s&&ko(t,s,n)}else{const s=e.preOrderHooks;null!==s&&Lo(t,s,0,n)}tr(n)}function L(e,t=U.Default){const n=_();return null===n?B(e,t):_g(Q(),n,T(e),t)}function _a(e,t,n,r,i,s,o,a,l,c,u){const d=t.blueprint.slice();return d[he]=i,d[E]=140|r,(null!==c||e&&2048&e[E])&&(d[E]|=2048),Yp(d),d[ae]=d[Ir]=e,d[X]=n,d[Er]=o||e&&e[Er],d[R]=a||e&&e[R],d[$e]=l||e&&e[$e]||null,d[Le]=s,d[Qi]=function yS(){return mS++}(),d[$t]=u,d[Up]=c,d[ue]=2==t.type?e[ue]:d,d}function Jr(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Hu(e,t,n,r,i){const s=eg(),o=Mc(),l=e.data[t]=function sM(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,a=0;return function xr(){return null!==x.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,t,n,r,i),function YI(){return x.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ts(){const e=x.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ht(s,!0),s}function Es(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function oy(e,t,n,r,i){const s=je(),o=2&r;try{tr(-1),o&&t.length>A&&sy(e,t,A,!1),jt(o?2:0,i),n(r,i)}finally{tr(s),jt(o?3:1,i)}}function zu(e,t,n){if(bc(t)){const r=fe(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{fe(r)}}}function Gu(e,t,n){Jp()&&(function fM(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;Jn(n)&&function _M(e,t,n){const r=Ve(t,e),i=ay(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=ba(e,_a(e,i,null,o,r,t,null,e[Er].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||$o(n,t),Fe(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const l=e.data[a],c=nr(t,e,a,n);Fe(c,t),null!==o&&bM(0,a-i,c,l,0,o),St(l)&&(lt(n.index,t)[X]=nr(t,e,a,n))}}(e,t,n,Ve(n,t)),64==(64&n.flags)&&fy(e,t,n))}function Wu(e,t,n=Ve){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function ay(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=qu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function qu(e,t,n,r,i,s,o,a,l,c,u){const d=A+r,f=d+i,h=function J0(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:P);return n}(d,f),p="function"==typeof c?c():c;return h[w]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}let ly=e=>null;function cy(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?uy(n,t,i,s):r.hasOwnProperty(i)&&uy(n,t,r[i],s)}return n}function uy(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function dt(e,t,n,r,i,s,o,a){const l=Ve(t,n);let u,c=t.inputs;!a&&null!=c&&(u=c[r])?(Xu(e,n,u,r,i),Jn(t)&&function lM(e,t){const n=lt(t,e);16&n[E]||(n[E]|=64)}(n,t.index)):3&t.type&&(r=function aM(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(l,r,i))}function Zu(e,t,n,r){if(Jp()){const i=null===r?null:{"":-1},s=function pM(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Rp(t,o.selectors,!1))if(r||(r=[]),St(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Yu(e,t,a.length)}else r.unshift(o),Yu(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&dy(e,t,n,o,i,a),i&&function gM(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new C(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=qi(n.mergedAttrs,n.attrs)}function dy(e,t,n,r,i,s){for(let c=0;c<r.length;c++)Uc($o(n,t),e,r[c].type);!function yM(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let c=0;c<r.length;c++){const u=r[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Es(e,t,r.length,null);for(let c=0;c<r.length;c++){const u=r[c];n.mergedAttrs=qi(n.mergedAttrs,u.hostAttrs),vM(e,n,t,l,u),mM(l,u,i),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function oM(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<i;u++){const d=s[u],f=n?n.get(d):null,p=f?f.outputs:null;l=cy(d.inputs,u,l,f?f.inputs:null),c=cy(d.outputs,u,c,p);const g=null===l||null===o||Op(t)?null:wM(l,u,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(e,n,s)}function fy(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function QI(){return x.lFrame.currentDirectiveIndex}();try{tr(s);for(let a=r;a<i;a++){const l=e.data[a],c=t[a];xc(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&hM(l,c)}}finally{tr(-1),xc(o)}}function hM(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Yu(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function mM(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;St(t)&&(n[""]=e)}}function vM(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=er(i.type)),o=new ns(s,St(i),L);e.blueprint[r]=o,n[r]=o,function uM(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function dM(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,Es(e,n,i.hostVars,P),i)}function Wt(e,t,n,r,i,s){const o=Ve(e,t);!function Ku(e,t,n,r,i,s,o){if(null==s)e.removeAttribute(t,i,n);else{const a=null==o?O(s):o(s,r||"",i);e.setAttribute(t,i,a,n)}}(t[R],o,s,e.value,n,r,i)}function bM(e,t,n,r,i,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)hy(r,n,o[a++],o[a++],o[a++])}function hy(e,t,n,r,i){const s=fe(null);try{const o=e.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{fe(s)}}function wM(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function py(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function gy(e,t){const n=e.contentQueries;if(null!==n){const r=fe(null);try{for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const a=e.data[o];Oc(n[i]),a.contentQueries(2,t[o],o)}}}finally{fe(r)}}}function ba(e,t){return e[Yi]?e[Vp][Tt]=t:e[Yi]=t,e[Vp]=t,t}function Qu(e,t,n){Oc(0);const r=fe(null);try{t(e,n)}finally{fe(r)}}function wa(e,t){const n=e[$e],r=n?n.get(fn,null):null;r&&r.handleError(t)}function Xu(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];hy(e.data[o],t[o],r,a,i)}}function _y(e,t,n,r){const i=t[E];if(256==(256&i))return;t[Er].inlineEffectRunner?.flush(),Rc(t);let o=null,a=null;(function EM(e){return 2!==e.type})(e)&&(a=function B0(e){return e[Xn]??function H0(e){const t=Xm.pop()??Object.create(G0);return t.lView=e,t}(e)}(t),o=function Oh(e){return e&&(e.nextProducerIndex=0),fe(e)}(a));try{Yp(t),function ng(e){return x.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&oy(e,t,n,2,r);const l=3==(3&i);if(l){const d=e.preOrderCheckHooks;null!==d&&ko(t,d,null)}else{const d=e.preOrderHooks;null!==d&&Lo(t,d,0,null),kc(t,0)}if(function IM(e){for(let t=cm(e);null!==t;t=um(t)){if(!(t[E]&Mr.HasTransplantedViews))continue;const n=t[Sr];for(let r=0;r<n.length;r++){FI(n[r])}}}(t),by(t,0),null!==e.contentQueries&&gy(e,t),l){const d=e.contentCheckHooks;null!==d&&ko(t,d)}else{const d=e.contentHooks;null!==d&&Lo(t,d,1),kc(t,1)}!function X0(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)tr(~i);else{const s=i,o=n[++r],a=n[++r];KI(o,s),a(2,t[s])}}}finally{tr(-1)}}(e,t);const c=e.components;null!==c&&Dy(t,c,0);const u=e.viewQuery;if(null!==u&&Qu(2,u,r),l){const d=e.viewCheckHooks;null!==d&&ko(t,d)}else{const d=e.viewHooks;null!==d&&Lo(t,d,2),kc(t,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[So]){for(const d of t[So])d();t[So]=null}t[E]&=-73}catch(l){throw No(t),l}finally{null!==a&&(function Rh(e,t){if(fe(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(ji(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)ho(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(a,o),function z0(e){e.lView[Xn]!==e&&(e.lView=null,Xm.push(e))}(a)),Pc()}}function by(e,t){for(let n=cm(e);null!==n;n=um(n)){n[E]&=~Mr.HasChildViewsToRefresh;for(let r=ge;r<n.length;r++)wy(n[r],t)}}function TM(e,t,n){wy(lt(t,e),n)}function wy(e,t){Tc(e)&&Cy(e,t)}function Cy(e,t){const r=e[w],i=e[E],s=e[Xn];let o=!!(0===t&&16&i);if(o||=!!(64&i&&0===t),o||=!!(1024&i),o||=!(!s?.dirty||!jl(s)),s&&(s.dirty=!1),e[E]&=-9217,o)_y(r,e,r.template,e[X]);else if(8192&i){by(e,1);const a=r.components;null!==a&&Dy(e,a,1)}}function Dy(e,t,n){for(let r=0;r<t.length;r++)TM(e,t[r],n)}function Is(e){for(;e;){e[E]|=64;const t=hs(e);if(wc(e)&&!t)return e;e=t}return null}class Ts{get rootNodes(){const t=this._lView,n=t[w];return Ds(n,t,n.firstChild,[])}constructor(t,n,r=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[X]}set context(t){this._lView[X]=t}get destroyed(){return 256==(256&this._lView[E])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ae];if(Oe(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(ps(t,r),jo(n,r))}this._attachedToViewContainer=!1}ra(this._lView[w],this._lView)}onDestroy(t){!function Oo(e,t){if(256==(256&e[E]))throw new C(911,!1);null===e[An]&&(e[An]=[]),e[An].push(t)}(this._lView,t)}markForCheck(){Is(this._cdRefInjectingView||this._lView)}detach(){this._lView[E]&=-129}reattach(){Qp(this._lView),this._lView[E]|=128}detectChanges(){!function Ju(e,t=!0){const n=e[Er],r=n.rendererFactory,i=n.afterRenderEventManager;r.begin?.(),i?.begin();try{const o=e[w];_y(o,e,o.template,e[X]),function DM(e){let t=0;for(;9216&e[E]||e[Xn]?.dirty;){if(100===t)throw new C(103,!1);t++,Cy(e,1)}}(e)}catch(o){throw t&&wa(e,o),o}finally{r.end?.(),n.inlineEffectRunner?.flush(),i?.end()}}(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new C(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function NS(e,t){ms(e,t,t[R],2,null,null)}(this._lView[w],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new C(902,!1);this._appRef=t}}function td(e){return t=>{setTimeout(e,void 0,t)}}const pn=class $M extends yo{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=td(s),i&&(i=td(i)),o&&(o=td(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof Lt&&t.add(a),a}};function Ty(...e){}class le{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new C(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function VM(){const e="function"==typeof ee.requestAnimationFrame;let t=ee[e?"requestAnimationFrame":"setTimeout"],n=ee[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function BM(e){const t=()=>{!function jM(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ee,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rd(e),e.isCheckStableRunning=!0,nd(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rd(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(function zM(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,s,o,a);try{return Sy(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),My(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Sy(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),My(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,rd(e),nd(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!le.isInAngularZone())throw new C(909,!1)}static assertNotInAngularZone(){if(le.isInAngularZone())throw new C(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,UM,Ty,Ty);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const UM={};function nd(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rd(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Sy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function My(e){e._nesting--,nd(e)}class HM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const Ay=new M("",{providedIn:"root",factory:xy});function xy(){const e=Z(le);let t=!0;return jE(new Ye(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Ye(i=>{let s;e.runOutsideAngular(()=>{s=e.onStable.subscribe(()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const o=e.onUnstable.subscribe(()=>{le.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(mp()))}let Ca=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth){for(const n of this.internalCallbacks)n();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=G({token:e,providedIn:"root",factory:()=>new e})}return e})();function qM(e,t){const n=lt(t,e),r=n[w];!function ZM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[he];null!==i&&null===n[$t]&&(n[$t]=ku(i,n[$e])),id(r,n,n[X])}function id(e,t,n){Rc(t);try{const r=e.viewQuery;null!==r&&Qu(1,r,n);const i=e.template;null!==i&&oy(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&gy(e,t),e.staticViewQueries&&Qu(2,e.viewQuery,n);const s=e.components;null!==s&&function YM(e,t){for(let n=0;n<t.length;n++)qM(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[E]&=-5,Pc()}}function Da(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=ic(i,a):2==s&&(r=ic(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}class ky extends ga{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=k(t);return new Ss(n,this.ngModule)}}function Ly(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class QM{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Eo(r);const i=this.injector.get(t,Vu,r);return i!==Vu||n===Vu?i:this.parentInjector.get(t,n,r)}}class Ss extends Um{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Ly(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ly(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function bI(e){return e.map(_I).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof un?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new QM(t,s):t,a=o.get(Bm,null);if(null===a)throw new C(407,!1);const u={rendererFactory:a,sanitizer:o.get(x0,null),inlineEffectRunner:null,afterRenderEventManager:o.get(Ca,null)},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",h=r?function eM(e,t,n,r){const s=r.get(ty,!1)||n===Et.ShadowDom,o=e.selectRootElement(t,s);return function tM(e){ly(e)}(o),o}(d,r,this.componentDef.encapsulation,o):na(d,f,function KM(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(f)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let v=null;null!==h&&(v=ku(h,o,!0));const m=qu(0,null,null,1,0,null,null,null,null,null,null),b=_a(null,m,null,y,null,null,u,d,o,null,v);let D,N;Rc(b);try{const K=this.componentDef;let st,ie=null;K.findHostDirectiveDefs?(st=[],ie=new Map,K.findHostDirectiveDefs(K,st,ie),st.push(K)):st=[K];const ot=function JM(e,t){const n=e[w],r=A;return e[r]=t,Jr(n,r,2,"#host",null)}(b,h),rn=function eA(e,t,n,r,i,s,o){const a=i[w];!function tA(e,t,n,r){for(const i of e)t.mergedAttrs=qi(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Da(t,t.mergedAttrs,!0),null!==n&&Im(r,n,t))}(r,e,t,o);let l=null;null!==t&&(l=ku(t,i[$e]));const c=s.rendererFactory.createRenderer(t,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=_a(i,ay(n),null,u,i[e.index],e,s,c,null,null,l);return a.firstCreatePass&&Yu(a,e,r.length-1),ba(i,d),i[e.index]=d}(ot,h,K,st,b,u,d);N=es(m,A),h&&function rA(e,t,n,r){if(r)vc(e,n,["ng-version",N0.full]);else{const{attrs:i,classes:s}=function wI(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!It(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&vc(e,n,i),s&&s.length>0&&Em(e,n,s.join(" "))}}(d,K,h,r),void 0!==n&&function iA(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(N,this.ngContentSelectors,n),D=function nA(e,t,n,r,i,s){const o=Q(),a=i[w],l=Ve(o,i);dy(a,i,o,n,null,r);for(let u=0;u<n.length;u++)Fe(nr(i,a,o.directiveStart+u,o),i);fy(a,i,o),l&&Fe(l,i);const c=nr(i,a,o.directiveStart+o.componentOffset,o);if(e[X]=i[X]=c,null!==s)for(const u of s)u(c,t);return zu(a,o,e),c}(rn,K,st,ie,b,[sA]),id(m,b,null)}finally{Pc()}return new XM(this.componentType,D,Qr(N,b),b,N)}}class XM extends E0{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ts(i,void 0,!1),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const s=this._rootLView;Xu(s[w],s,i,t,n),this.previousInputValues.set(t,n),Is(lt(this._tNode.index,s))}}get injector(){return new Se(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function sA(){const e=Q();Po(_()[w],e)}function be(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function sd(e,t,n,r){const i=_();return be(i,zt(),t)&&(j(),Wt(se(),i,e,t,n,r)),sd}function ni(e,t,n,r,i,s){const a=function lr(e,t,n,r){const i=be(e,t,n);return be(e,t+1,r)||i}(e,function ln(){return x.lFrame.bindingIndex}(),n,i);return function cn(e){const t=x.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2),a?t+O(n)+r+O(i)+s:P}function cd(e,t,n){const r=_();return be(r,zt(),t)&&dt(j(),se(),r,e,t,r[R],n,!1),cd}function ud(e,t,n,r,i){const o=i?"class":"style";Xu(e,n,t.inputs[o],o,r)}function di(e,t){return!t||Jo(e)}function Ps(e,t,n,r=!0){const i=t[w];if(function RS(e,t,n,r){const i=ge+r,s=n.length;r>0&&(n[i-1][Tt]=t),r<s-ge?(t[Tt]=n[i],Ig(n,ge+r,t)):(n.push(t),t[Tt]=null),t[ae]=n;const o=t[Ki];null!==o&&n!==o&&function PS(e,t){const n=e[Sr];t[ue]!==t[ae][ae][ue]&&(e[E]|=Mr.HasTransplantedViews),null===n?e[Sr]=[t]:n.push(t)}(o,t);const a=t[Vt];null!==a&&a.insertView(e),Qp(t),t[E]|=128}(i,t,e,n),r){const s=_u(n,e),o=t[R],a=ia(o,e[Ut]);null!==a&&function xS(e,t,n,r,i,s){r[he]=i,r[Le]=t,ms(e,r,n,1,i,s)}(i,e[Le],o,t,a,s)}}let Kt=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=yx}return e})();function yx(){return function Ev(e,t){let n;const r=t[e.index];return Oe(r)?n=r:(n=py(r,t,null,e),t[e.index]=n,ba(t,n)),Iv(n,t,e,r),new Cv(n,e,t)}(Q(),_())}const vx=Kt,Cv=class extends vx{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Qr(this._hostTNode,this._hostLView)}get injector(){return new Se(this._hostTNode,this._hostLView)}get parentInjector(){const t=Vo(this._hostTNode,this._hostLView);if(Fc(t)){const n=is(t,this._hostLView),r=rs(t);return new Se(n[w].data[r+8],n)}return new Se(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Dv(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-ge}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,di(this._hostTNode,null)),a}createComponent(t,n,r,i,s){const o=t&&!function ss(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const l=o?t:new Ss(k(t)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const g=(o?c:this.parentInjector).get(un,null);g&&(s=g)}k(l.componentType??{});const h=l.create(c,i,null,s);return this.insertImpl(h.hostView,a,di(this._hostTNode,null)),h}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){const i=t._lView;if(function LI(e){return Oe(e[ae])}(i)){const a=this.indexOf(t);if(-1!==a)this.detach(a);else{const l=i[ae],c=new Cv(l,l[Le],l[ae]);c.detach(c.indexOf(t))}}const s=this._adjustIndex(n),o=this._lContainer;return Ps(o,i,s,r),t.attachToViewContainerRef(),Ig(bd(o),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Dv(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=ps(this._lContainer,n);r&&(jo(bd(this._lContainer),n),ra(r[w],r))}detach(t){const n=this._adjustIndex(t,-1),r=ps(this._lContainer,n);return r&&null!=jo(bd(this._lContainer),n)?new Ts(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Dv(e){return e[8]}function bd(e){return e[8]||(e[8]=[])}let Iv=function Sv(e,t,n,r){if(e[Ut])return;let i;i=8&n.type?te(r):function _x(e,t){const n=e[R],r=n.createComment(""),i=Ve(t,e);return sr(n,ia(n,i),r,function $S(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Ut]=i},wd=(e,t,n)=>!1;function fi(e,t,n,r,i,s,o,a){const l=_(),c=j(),u=e+A,d=c.firstCreatePass?function Dx(e,t,n,r,i,s,o,a,l){const c=t.consts,u=Jr(t,e,4,o||null,Bt(c,a));Zu(t,n,u,Bt(c,l)),Po(t,u);const d=u.tView=qu(2,u,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,n,r,i,s,o):c.data[u];Ht(d,!1);const f=Mv(c,l,d,e);Ro()&&sa(c,l,f,d),Fe(f,l);const h=py(f,l,f,d);return l[u]=h,ba(l,h),function Tv(e,t,n){return wd(e,t,n)}(h,d,l),Ao(d)&&Gu(c,l,d),null!=o&&Wu(l,d,a),fi}let Mv=function Av(e,t,n,r){return xn(!0),t[R].createComment("")};function _i(e,t,n,r){const i=_(),s=j(),o=A+e,a=i[R],l=s.firstCreatePass?function fN(e,t,n,r,i,s){const o=t.consts,l=Jr(t,e,2,r,Bt(o,i));return Zu(t,n,l,Bt(o,s)),null!==l.attrs&&Da(l,l.attrs,!1),null!==l.mergedAttrs&&Da(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,t,n,r):s.data[o],c=Xv(s,i,l,a,t,e);i[o]=c;const u=Ao(l);return Ht(l,!0),Im(a,c,l),32!=(32&l.flags)&&Ro()&&sa(s,i,c,l),0===function $I(){return x.lFrame.elementDepthCount}()&&Fe(c,i),function VI(){x.lFrame.elementDepthCount++}(),u&&(Gu(s,i,l),zu(s,l,i)),null!==r&&Wu(i,l),_i}function $s(){let e=Q();Mc()?function Ac(){x.lFrame.isParent=!1}():(e=e.parent,Ht(e,!1));const t=e;(function jI(e){return x.skipHydrationRootTNode===e})(t)&&function GI(){x.skipHydrationRootTNode=null}(),function UI(){x.lFrame.elementDepthCount--}();const n=j();return n.firstCreatePass&&(Po(n,e),bc(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function lT(e){return 0!=(8&e.flags)}(t)&&ud(n,t,_(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function cT(e){return 0!=(16&e.flags)}(t)&&ud(n,t,_(),t.stylesWithoutHost,!1),$s}function Fa(e,t,n,r){return _i(e,t,n,r),$s(),Fa}let Xv=(e,t,n,r,i,s)=>(xn(!0),na(r,i,function ug(){return x.lFrame.currentNamespace}()));const wi="en-US";let s_=wi;function Ld(e){return!!e&&"function"==typeof e.then}function x_(e){return!!e&&"function"==typeof e.subscribe}function Fd(e,t,n,r){const i=_(),s=j(),o=Q();return function O_(e,t,n,r,i,s,o){const a=Ao(r),c=e.firstCreatePass&&function yy(e){return e.cleanup||(e.cleanup=[])}(e),u=t[X],d=function my(e){return e[Dr]||(e[Dr]=[])}(t);let f=!0;if(3&r.type||o){const g=Ve(r,t),y=o?o(g):g,v=d.length,m=o?D=>o(te(D[r.index])):r.index;let b=null;if(!o&&a&&(b=function gO(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[Dr],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==b)(b.__ngLastListenerFn__||b).__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,f=!1;else{s=P_(r,t,u,s,!1);const D=n.listen(y,i,s);d.push(s,D),c&&c.push(i,m,v,v+1)}}else s=P_(r,t,u,s,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const N=t[p[y]][p[y+1]].subscribe(s),K=d.length;d.push(s,N),c&&c.push(i,r.index,K,-(K+1))}}}(s,i,i[R],o,e,t,r),Fd}function R_(e,t,n,r){try{return jt(6,t,n),!1!==n(r)}catch(i){return wa(e,i),!1}finally{jt(7,t,n)}}function P_(e,t,n,r,i){return function s(o){if(o===Function)return r;Is(e.componentOffset>-1?lt(e.index,t):t);let l=R_(t,n,r,o),c=s.__ngNextListenerFn__;for(;c;)l=R_(t,n,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Vd(e,t,n,r,i,s,o){const a=_(),l=ni(a,t,n,r,i,s);return l!==P&&dt(j(),se(),a,e,l,a[R],o,!1),Vd}class fr{}class VO{}class Gd extends fr{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ky(this);const i=function ke(e,t){const n=e[vp]||null;if(!n&&!0===t)throw new Error(`Type ${_e(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function ut(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=Bg(t,n,[{provide:fr,useValue:this},{provide:ga,useValue:this.componentFactoryResolver},...r],_e(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Wd extends VO{constructor(t){super(),this.moduleType=t}create(t){return new Gd(this.moduleType,t,[])}}Symbol;let gn=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=wR}return e})();const _R=gn,bR=class extends _R{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function Rs(e,t,n,r){const i=t.tView,a=_a(e,i,n,4096&e[E]?4096:16,null,t,null,null,null,r?.injector??null,r?.dehydratedView??null);a[Ki]=e[t.index];const c=e[Vt];return null!==c&&(a[Vt]=c.createEmbeddedView(i)),id(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,dehydratedView:r});return new Ts(i)}};function wR(){return function za(e,t){return 4&e.type?new bR(t,e,Qr(e,t)):null}(Q(),_())}const eP=new M("Application Initializer");let sf=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=Z(eP,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(Ld(s))n.push(s);else if(x_(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const mn=new M("LocaleId",{providedIn:"root",factory:()=>Z(mn,U.Optional|U.SkipSelf)||function nP(){return typeof $localize<"u"&&$localize.locale||wi}()});let lP=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new BE(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const qb=new M(""),qa=new M("");let cf,af=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cf||(function PP(e){cf=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||e)(B(le),B(lf),B(qa))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})(),lf=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return cf?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),$n=null;const Zb=new M("AllowMultipleToken"),uf=new M("PlatformDestroyListeners"),Yb=new M("appBootstrapListener");function Xb(e,t,n=[]){const r=`Platform: ${t}`,i=new M(r);return(s=[])=>{let o=df();if(!o||o.injector.get(Zb,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function FP(e){if($n&&!$n.get(Zb,!1))throw new C(400,!1);(function Kb(){!function $D(e){Fh=e}(()=>{throw new C(600,!1)})})(),$n=e;const t=e.get(ew);(function Qb(e){e.get(zg,null)?.forEach(n=>n())})(e)}(function Jb(e=[],t){return Mt.create({name:t,providers:[{provide:Jc,useValue:"platform"},{provide:uf,useValue:new Set([()=>$n=null])},...e]})}(a,r))}return function VP(e){const t=df();if(!t)throw new C(401,!1);return t}()}}function df(){return $n?.get(ew)??null}let ew=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function UP(e="zone.js",t){return"noop"===e?new HM:"zone.js"===e?new le(t):e}(r?.ngZone,function tw(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function jO(e,t,n){return new Gd(e,t,n)}(n.moduleType,this.injector,function ow(e){return[{provide:le,useFactory:e},{provide:ls,multi:!0,useFactory:()=>{const t=Z(BP,{optional:!0});return()=>t.initialize()}},{provide:sw,useFactory:jP},{provide:Ay,useFactory:xy}]}(()=>i)),o=s.injector.get(fn,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{Za(this._modules,s),a.unsubscribe()})}),function nw(e,t,n){try{const r=n();return Ld(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(sf);return a.runInitializers(),a.donePromise.then(()=>(function o_(e){Ke(e,"Expected localeId to be defined"),"string"==typeof e&&(s_=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(mn,wi)||wi),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=rw({},r);return function kP(e,t,n){const r=new Wd(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Zs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new C(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new C(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(uf,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||e)(B(Mt))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function rw(e,t){return Array.isArray(t)?t.reduce(rw,e):{...e,...t}}let Zs=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Z(sw),this.zoneIsStable=Z(Ay),this.componentTypes=[],this.components=[],this.isStable=Z(lP).hasPendingTasks.pipe(function zE(e,t){return Yn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Kn(r,l=>{i?.unsubscribe();let c=0;const u=s++;sn(e(l,u)).subscribe(i=Kn(r,d=>r.next(t?t(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}(n=>n?function HE(...e){return gp(e,dp(e))}(!1):this.zoneIsStable),function GE(e,t=Ql){return e=e??WE,Yn((n,r)=>{let i,s=!0;n.subscribe(Kn(r,o=>{const a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}(),mp()),this._injector=Z(un)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Um;if(!this._injector.get(sf).done)throw!i&&function Qn(e){const t=k(e)||Te(e)||Re(e);return null!==t&&t.standalone}(n),new C(405,!1);let o;o=i?n:this._injector.get(ga).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function LP(e){return e.isBoundToModule}(o)?void 0:this._injector.get(fr),c=o.create(Mt.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(qb,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Za(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new C(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Za(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Yb,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Za(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new C(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Za(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const sw=new M("",{providedIn:"root",factory:()=>Z(fn).handleError.bind(void 0)});function jP(){const e=Z(le),t=Z(fn);return n=>e.runOutsideAngular(()=>t.handleError(n))}let BP=(()=>{class e{constructor(){this.zone=Z(le),this.applicationRef=Z(Zs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const YP=Xb(null,"core",[]);let KP=(()=>{class e{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||e)(B(Zs))};static#t=this.\u0275mod=Zi({type:e});static#n=this.\u0275inj=wr({})}return e})(),wf=null;function Cf(){return wf}class _k{}const pr=new M("DocumentToken");class lL{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vw=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new lL(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),Uw(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Uw(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||e)(L(Kt),L(gn),L(ya))};static#t=this.\u0275dir=mt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return e})();function Uw(e,t){e.context.$implicit=t.item}let LL=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Zi({type:e});static#n=this.\u0275inj=wr({})}return e})();function Gw(e){return"server"===e}class u1 extends _k{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vf extends u1{static makeCurrent(){!function vk(e){wf||(wf=e)}(new Vf)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function d1(){return eo=eo||document.querySelector("base"),eo?eo.getAttribute("href"):null}();return null==n?null:function f1(e){pl=pl||document.createElement("a"),pl.setAttribute("href",e);const t=pl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function sL(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let pl,eo=null,p1=(()=>{class e{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();const Uf=new M("EventManagerPlugins");let Yw=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new C(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||e)(B(Uf),B(le))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();class Kw{constructor(t){this._doc=t}}const jf="ng-app-id";let Qw=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gw(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${jf}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(jf),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(jf,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||e)(B(pr),B(Yo),B(Gg,8),B(zr))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();const Bf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Hf=/%COMP%/g,v1=new M("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!0});function Jw(e,t){return t.map(n=>n.replace(Hf,e))}let eC=(()=>{class e{constructor(n,r,i,s,o,a,l,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Gw(a),this.defaultRenderer=new zf(n,o,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Et.ShadowDom&&(r={...r,encapsulation:Et.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof nC?i.applyToHost(n):i instanceof Gf&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Et.Emulated:s=new nC(l,c,r,this.appId,u,o,a,d);break;case Et.ShadowDom:return new C1(l,c,n,r,o,a,this.nonce,d);default:s=new Gf(l,c,r,u,o,a,d)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||e)(B(Yw),B(Qw),B(Yo),B(v1),B(pr),B(zr),B(le),B(Gg))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();class zf{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Bf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(tC(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(tC(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new C(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=Bf[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Bf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Pn.DashCase|Pn.Important)?t.style.setProperty(n,r,i&Pn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Pn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){null!=t&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Cf().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function tC(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class C1 extends zf{constructor(t,n,r,i,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=Jw(i.id,i.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Gf extends zf{constructor(t,n,r,i,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?Jw(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class nC extends Gf{constructor(t,n,r,i,s,o,a,l){const c=i+"-"+r.id;super(t,n,r,s,o,a,l,c),this.contentAttr=function _1(e){return"_ngcontent-%COMP%".replace(Hf,e)}(c),this.hostAttr=function b1(e){return"_nghost-%COMP%".replace(Hf,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let D1=(()=>{class e extends Kw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||e)(B(pr))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();const rC=["alt","control","meta","shift"],E1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},I1={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let T1=(()=>{class e extends Kw{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cf().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),rC.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=E1[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rC.forEach(o=>{o!==i&&(0,I1[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||e)(B(pr))};static#t=this.\u0275prov=G({token:e,factory:e.\u0275fac})}return e})();const x1=Xb(YP,"browser",[{provide:zr,useValue:"browser"},{provide:zg,useValue:function S1(){Vf.makeCurrent()},multi:!0},{provide:pr,useFactory:function A1(){return function nS(e){su=e}(document),document},deps:[]}]),N1=new M(""),oC=[{provide:qa,useClass:class h1{addToWindow(t){ee.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new C(5103,!1);return s},ee.getAllAngularTestabilities=()=>t.getAllTestabilities(),ee.getAllAngularRootElements=()=>t.getAllRootElements(),ee.frameworkStabilizers||(ee.frameworkStabilizers=[]),ee.frameworkStabilizers.push(r=>{const i=ee.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Cf().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:qb,useClass:af,deps:[le,lf,qa]},{provide:af,useClass:af,deps:[le,lf,qa]}],aC=[{provide:Jc,useValue:"root"},{provide:fn,useFactory:function M1(){return new fn},deps:[]},{provide:Uf,useClass:D1,multi:!0,deps:[pr,le,zr]},{provide:Uf,useClass:T1,multi:!0,deps:[pr]},eC,Qw,Yw,{provide:Bm,useExisting:eC},{provide:class jL{},useClass:p1,deps:[]},[]];let O1=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Yo,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||e)(B(N1,12))};static#t=this.\u0275mod=Zi({type:e});static#n=this.\u0275inj=wr({providers:[...aC,...oC],imports:[LL,KP]})}return e})();function qf(e){for(let t in e){let n=[...t].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),e[t].reg&&e[t].reg(n)}}function dC(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(c){return void n(c)}a.done?t(l):Promise.resolve(l).then(r,i)}function ce(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(l){dC(s,r,i,o,a,"next",l)}function a(l){dC(s,r,i,o,a,"throw",l)}o(void 0)})}}typeof window<"u"&&window;var V1=Object.defineProperty,Zf=(e,t,n)=>(((e,t,n)=>{t in e?V1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),de=class{constructor(e){e.constructor===Object?this.store=function j1(e){let t=n=>{var r;for(let i in n)(null==(r=n[i])?void 0:r.constructor)===Object&&(n[i]=t(n[i]));return{...n}};return t(e)}(e):(this._storeIsProxy=!0,this.store=e),this.callbackMap=Object.create(null)}static warn(e,t){console.warn(`Symbiote Data: cannot ${e}. Prop name: `+t)}read(e){return this._storeIsProxy||this.store.hasOwnProperty(e)?this.store[e]:(de.warn("read",e),null)}has(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}add(e,t,n=!1){!n&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}pub(e,t){this._storeIsProxy||this.store.hasOwnProperty(e)?(this.store[e]=t,this.notify(e)):de.warn("publish",e)}multiPub(e){for(let t in e)this.pub(t,e[t])}notify(e){this.callbackMap[e]&&this.callbackMap[e].forEach(t=>{t(this.store[e])})}sub(e,t,n=!0){return this._storeIsProxy||this.store.hasOwnProperty(e)?(this.callbackMap[e]||(this.callbackMap[e]=new Set),this.callbackMap[e].add(t),n&&t(this.store[e]),{remove:()=>{this.callbackMap[e].delete(t),this.callbackMap[e].size||delete this.callbackMap[e]},callback:t}):(de.warn("subscribe",e),null)}static registerCtx(e,t=Symbol()){let n=de.globalStore.get(t);return n?console.warn('State: context UID "'+t+'" already in use'):(n=new de(e),de.globalStore.set(t,n)),n}static deleteCtx(e){de.globalStore.delete(e)}static getCtx(e,t=!0){return de.globalStore.get(e)||(t&&console.warn('State: wrong context UID - "'+e+'"'),null)}};de.globalStore=new Map;var F=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),Yf=class{static generate(e="XXXXXXXXX-XXX"){let t="";for(let n=0;n<e.length;n++)t+="-"===e[n]?e[n]:"1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm".charAt(61*Math.random());return t}};function hC(e,t,n){let i,r=!0,s=t.split(".");return s.forEach((o,a)=>{a<s.length-1?e=e[o]:i=o}),e?e[i]=n:r=!1,r}var pC="__default__",Q1=[function z1(e,t){[...e.querySelectorAll(`[${F.REPEAT_ATTR}]`)].forEach(n=>{let i,r=n.getAttribute(F.REPEAT_ITEM_TAG_ATTR);for(r&&(i=window.customElements.get(r)),i||(i=class extends t.BaseComponent{constructor(){super(),r||(this.style.display="contents")}},i.template=n.innerHTML,i.reg(r));n.firstChild;)n.firstChild.remove();let s=n.getAttribute(F.REPEAT_ATTR);t.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let l,a=[...n.children],c=u=>{u.forEach((f,h)=>{if(a[h])if(a[h].set$)setTimeout(()=>{a[h].set$(f)});else for(let p in f)a[h][p]=f[p];else{l||(l=new DocumentFragment);let p=new i;Object.assign(p.init$,f),l.appendChild(p)}}),l&&n.appendChild(l);let d=a.slice(u.length,a.length);for(let f of d)f.remove()};if(o.constructor===Array)c(o);else if(o.constructor===Object){let u=[];for(let d in o){let f=o[d];Object.defineProperty(f,"_KEY_",{value:d,enumerable:!0}),u.push(f)}c(u)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(F.REPEAT_ATTR),n.removeAttribute(F.REPEAT_ITEM_TAG_ATTR)})},function G1(e,t){if(t.shadowRoot)return;let n=[...e.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||pC;r[s]={slot:i,fr:document.createDocumentFragment()}}),t.initChildren.forEach(i=>{var s;let o=pC;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),null==(s=r[o])||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})},function W1(e,t){[...e.querySelectorAll(`[${F.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(F.EL_REF_ATTR);t.ref[r]=n,n.removeAttribute(F.EL_REF_ATTR)})},function q1(e,t){[...e.querySelectorAll(`[${F.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(F.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=function H1(e){return e.split("-").map((t,n)=>t&&n?t[0].toUpperCase()+t.slice(1):t).join("").split("_").map((t,n)=>t&&n?t.toUpperCase():t).join("")}(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let l,o=s.split(":").map(u=>u.trim()),a=o[0];0===a.indexOf(F.ATTR_BIND_PRFX)&&(l=!0,a=a.replace(F.ATTR_BIND_PRFX,""));let c=o[1].split(",").map(u=>u.trim());for(let u of c){let d;u.startsWith("!!")?(d="double",u=u.replace("!!","")):u.startsWith("!")&&(d="single",u=u.replace("!","")),t.sub(u,f=>{"double"===d?f=!!f:"single"===d&&(f=!f),l?f?.constructor===Boolean?f?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,f):hC(n,a,f)||(n[F.SET_LATER_KEY]||(n[F.SET_LATER_KEY]=Object.create(null)),n[F.SET_LATER_KEY][a]=f)})}}),n.removeAttribute(F.BIND_ATTR)})},function(e,t){(function Y1(e){let t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!(null!=(s=i.parentElement)&&s.hasAttribute("skip-text"))&&i.textContent.includes("{{")&&i.textContent.includes("}}")&&1}});for(;t=r.nextNode();)n.push(t);return n})(e).forEach(r=>{let s,i=[];for(;r.textContent.includes("}}");)r.textContent.startsWith("{{")?(s=r.textContent.indexOf("}}")+2,r.splitText(s),i.push(r)):(s=r.textContent.indexOf("{{"),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace("{{","").replace("}}","");o.textContent="",t.sub(a,l=>{o.textContent=l})})})}],X1=/\\([0-9a-fA-F]{1,6} ?)/g;var gC=0,Si=null,_n=null,Un=class extends HTMLElement{constructor(){super(),Zf(this,"updateCssData",()=>{var e;this.dropCssDataCache(),null==(e=this.__boundCssProps)||e.forEach(t=>{let n=this.getCssData(this.__extractCssName(t),!0);null!==n&&this.$[t]!==n&&(this.$[t]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return Un}initCallback(){}__initCallback(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}render(e,t=this.renderShadow){let n;if((t||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(F.USE_TPL);if(i){let s=this.getRootNode(),o=s?.querySelector(i)||document.querySelector(i);o?e=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(e||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),e?.constructor===DocumentFragment)n=e;else if(e?.constructor===String){let i=document.createElement("template");i.innerHTML=e,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(t&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){t=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(e){this.tplProcessors.add(e)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=Yf.generate(),this.style.setProperty(F.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(F.CSS_CTX_PROP,!0)}get ctxName(){var e;let t=(null==(e=this.getAttribute(F.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}get localCtx(){return this.__localCtx||(this.__localCtx=de.registerCtx({},this)),this.__localCtx}get nodeCtx(){return de.getCtx(this.ctxName,!1)||de.registerCtx({},this.ctxName)}static __parseProp(e,t){let n,r;if(e.startsWith(F.EXT_DATA_CTX_PRFX))n=t.nodeCtx,r=e.replace(F.EXT_DATA_CTX_PRFX,"");else if(e.includes(F.NAMED_DATA_CTX_SPLTR)){let i=e.split(F.NAMED_DATA_CTX_SPLTR);n=de.getCtx(i[0]),r=i[1]}else n=t.localCtx,r=e;return{ctx:n,name:r}}sub(e,t,n=!0){let r=s=>{this.isConnected&&t(s)},i=Un.__parseProp(e,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(e){let t=Un.__parseProp(e,this);t.ctx.notify(t.name)}has(e){let t=Un.__parseProp(e,this);return t.ctx.has(t.name)}add(e,t,n=!1){let r=Un.__parseProp(e,this);r.ctx.add(r.name,t,n)}add$(e,t=!1){for(let n in e)this.add(n,e[n],t)}get $(){return this.__stateProxy||(this.__stateProxy=new Proxy(Object.create(null),{set:(t,n,r)=>{let i=Un.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(t,n)=>{let r=Un.__parseProp(n,this);return r.ctx.read(r.name)}})),this.__stateProxy}set$(e,t=!1){for(let n in e){let r=e[n];(t||![String,Number,Boolean].includes(r?.constructor)||this.$[n]!==r)&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(F.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(F.CTX_OWNER_ATTR)}__initDataCtx(){let e=this.constructor.__attrDesc;if(e)for(let t of Object.values(e))Object.keys(this.init$).includes(t)||(this.init$[t]="");for(let t in this.init$)if(t.startsWith(F.EXT_DATA_CTX_PRFX))this.nodeCtx.add(t.replace(F.EXT_DATA_CTX_PRFX,""),this.init$[t],this.__ctxOwner);else if(t.includes(F.NAMED_DATA_CTX_SPLTR)){let n=t.split(F.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=de.getCtx(r,!1);s||(s=de.registerCtx({},r)),s.add(i,this.init$[t])}}else this.localCtx.add(t,this.init$[t]);for(let t in this.cssInit$)this.bindCssData(t,this.cssInit$[t]);this.__dataCtxInitialized=!0}connectedCallback(){var e;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let t=null==(e=this.getAttribute(F.CTX_NAME_ATTR))?void 0:e.trim();if(t&&this.style.setProperty(F.CSS_CTX_PROP,`'${t}'`),this.__initDataCtx(),this[F.SET_LATER_KEY]){for(let n in this[F.SET_LATER_KEY])hC(this,n,this[F.SET_LATER_KEY][n]);delete this[F.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of Q1)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n?.querySelector(`link[${F.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`))return void this.render();let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(F.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let e of this.allSubs)e.remove(),this.allSubs.delete(e);for(let e of this.tplProcessors)this.tplProcessors.delete(e);_n?.delete(this.updateCssData),_n?.size||(Si?.disconnect(),Si=null,_n=null)},100)))}static reg(e,t=!1){e||(gC++,e=`${F.AUTO_TAG_PRFX}-${gC}`),this.__tag=e;let n=window.customElements.get(e);n?!t&&n!==this&&console.warn([`Element with tag name "${e}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join("\n")):window.customElements.define(e,t?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}attributeChangedCallback(e,t,n){var r;if(t===n)return;let i=null==(r=this.constructor.__attrDesc)?void 0:r[e];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[e]=n}getCssData(e,t=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=function nF(e){let t=e;(function J1(e){return!('"'!==e[0]&&"'"!==e[0]||'"'!==e[e.length-1]&&"'"!==e[e.length-1])})(e)&&(t=function eF(e){return('"'===e[0]||"'"===e[0])&&(e=e.slice(1)),('"'===e[e.length-1]||"'"===e[e.length-1])&&(e=e.slice(0,-1)),e}(t),t=t.replace(X1,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),t=t.replaceAll("\\\n","\\n"),t=function tF(e){let t="",n="";for(var r=0;r<e.length;r++)"\\"===e[r]&&'"'===e[r+1]?(t+='\\"',r++):t+='"'===e[r]&&"\\"!==n?'\\"':e[r],n=e[r];return t}(t),t='"'+t+'"');try{return JSON.parse(t)}catch{throw new Error(`Failed to parse CSS property value: ${t}. Original input: ${e}`)}}(n)}catch{!t&&console.warn(`CSS Data error: ${e}`),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}__extractCssName(e){return e.split("--").map((t,n)=>0===n?"":t).join("--")}__initStyleAttrObserver(){_n||(_n=new Set),_n.add(this.updateCssData),Si||(Si=new MutationObserver(e=>{"attributes"===e[0].type&&_n.forEach(t=>{t()})})).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}bindCssData(e,t=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);let n=this.getCssData(this.__extractCssName(e),!0);null===n&&(n=t),this.add(e,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(e,t,n){let r="__"+e;this[r]=this[e],Object.defineProperty(this,e,{set:i=>{this[r]=i,n?window.setTimeout(()=>{t?.(i)}):t?.(i)},get:()=>this[r]}),this[e]=this[r]}static set shadowStyles(e){let t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}static set rootStyles(e){if(!this.__rootStylesLink){let t=new Blob([e],{type:"text/css"}),n=URL.createObjectURL(t),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},yl=Un;Zf(yl,"template");var Kf=class{static _print(e){console.warn(e)}static setDefaultTitle(e){this.defaultTitle=e}static setRoutingMap(e){Object.assign(this.appMap,e);for(let t in this.appMap)this.defaultRoute||!0!==this.appMap[t].default?!this.errorRoute&&!0===this.appMap[t].error&&(this.errorRoute=t):this.defaultRoute=t}static set routingEventName(e){this.__routingEventName=e}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let e={route:null,options:{}};return window.location.search.split(this.separator).forEach(n=>{if(n.includes("?"))e.route=n.replace("?","");else if(n.includes("=")){let r=n.split("=");e.options[r[0]]=decodeURI(r[1])}else e.options[n]=!0}),e}static notify(){let e=this.readAddressBar(),t=this.appMap[e.route];if(t&&t.title&&(document.title=t.title),null===e.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!t&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t)return void this._print(`Route "${e.route}" not found...`);let n=new CustomEvent(Kf.routingEventName,{detail:{route:e.route,options:Object.assign(t||{},e.options)}});window.dispatchEvent(n)}static reflect(e,t={}){let n=this.appMap[e];if(!n)return void this._print("Wrong route: "+e);let r="?"+e;for(let s in t)r+=!0===t[s]?this.separator+s:this.separator+s+`=${t[s]}`;let i=n.title||this.defaultTitle||"";window.history.pushState(null,i,r),document.title=i}static applyRoute(e,t={}){this.reflect(e,t),this.notify()}static setSeparator(e){this._separator=e}static get separator(){return this._separator||"&"}static createRouterData(e,t){this.setRoutingMap(t);let n=de.registerCtx({route:null,options:null,title:null},e);return window.addEventListener(this.routingEventName,r=>{var i;n.multiPub({route:r.detail.route,options:r.detail.options,title:(null==(i=r.detail.options)?void 0:i.title)||this.defaultTitle||""})}),Kf.notify(),this.initPopstateListener(),n}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function mC(e,t){for(let n in t)n.includes("-")?e.style.setProperty(n,t[n]):e.style[n]=t[n]}function Qf(e={tag:"div"}){let t=document.createElement(e.tag);if(e.attributes&&function rF(e,t){for(let n in t)t[n].constructor===Boolean?t[n]?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,t[n])}(t,e.attributes),e.styles&&mC(t,e.styles),e.properties)for(let n in e.properties)t[n]=e.properties[n];return e.processors&&e.processors.forEach(n=>{n(t)}),e.children&&e.children.forEach(n=>{let r=Qf(n);t.appendChild(r)}),t}Kf.appMap=Object.create(null);var yC="idb-store-ready",oF=class{_notifyWhenReady(e=null){window.dispatchEvent(new CustomEvent(yC,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}get _updEventName(){return"symbiote-idb-update_"+this.name}_getUpdateEvent(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}_notifySubscribers(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}constructor(e,t){var n=this;this.name=e,this.storeName=t,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=r=>{this.db=r.target.result,this.objStore=this.db.createObjectStore(t,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=r=>{this.db=r.target.result,this._notifyWhenReady(r)},this.request.onerror=r=>{console.error(r)},this._subscriptionsMap={},this._updateHandler=r=>{r.key===this.name&&this._subscriptionsMap[r.newValue]&&this._subscriptionsMap[r.newValue].forEach(function(){var s=ce(function*(o){o(yield n.read(r.newValue))});return function(o){return s.apply(this,arguments)}}())},this._localUpdateHandler=r=>{this._updateHandler(r.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(e){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(e);return new Promise((r,i)=>{n.onsuccess=s=>{var o;null!=(o=s.target.result)&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${e}"`))},n.onerror=s=>{i(s)}})}write(e,t,n=!1){let r={_key:e,_value:t},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(e),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(e,t=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e);return new Promise((i,s)=>{r.onsuccess=o=>{t||this._notifySubscribers(e),i(o)},r.onerror=o=>{s(o)}})}getAll(){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{t.onsuccess=i=>{n(i.target.result.map(o=>o._value))},t.onerror=i=>{r(i)}})}subscribe(e,t){this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);let n=this._subscriptionsMap[e];return n.add(t),{remove:()=>{n.delete(t),n.size||delete this._subscriptionsMap[e]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,vC.clear(this.name)}},vC=class{static get readyEventName(){return yC}static open(e="symbiote-db",t="store"){let n=e+"/"+t;return this._reg[n]||(this._reg[n]=new oF(e,t)),this._reg[n]}static clear(e){window.indexedDB.deleteDatabase(e);for(let t in this._reg)t.split("/")[0]===e&&delete this._reg[t]}};Zf(vC,"_reg",Object.create(null));const ve=Object.freeze({UPLOAD_START:"upload-start",REMOVE:"remove",UPLOAD_PROGRESS:"upload-progress",UPLOAD_FINISH:"upload-finish",UPLOAD_ERROR:"upload-error",VALIDATION_ERROR:"validation-error",CLOUD_MODIFICATION:"cloud-modification",DATA_OUTPUT:"data-output",DONE_FLOW:"done-flow",INIT_FLOW:"init-flow"}),lF=Object.freeze({[ve.UPLOAD_START]:"LR_UPLOAD_START",[ve.REMOVE]:"LR_REMOVE",[ve.UPLOAD_PROGRESS]:"LR_UPLOAD_PROGRESS",[ve.UPLOAD_FINISH]:"LR_UPLOAD_FINISH",[ve.UPLOAD_ERROR]:"LR_UPLOAD_ERROR",[ve.VALIDATION_ERROR]:"LR_VALIDATION_ERROR",[ve.CLOUD_MODIFICATION]:"LR_CLOUD_MODIFICATION",[ve.DATA_OUTPUT]:"LR_DATA_OUTPUT",[ve.DONE_FLOW]:"LR_DONE_FLOW",[ve.INIT_FLOW]:"LR_INIT_FLOW"});class cF{_timeoutStore=new Map;constructor(t){this._getCtxName=t}bindTarget(t){this._target=t}_dispatch(t,n){this._target?.dispatchEvent(new CustomEvent(t,{detail:n}));const r=lF[t];window.dispatchEvent(new CustomEvent(r,{detail:{ctx:this._getCtxName(),type:r,data:n}}))}emit(t,n,{debounce:r}={}){if("number"!=typeof r&&!r)return void this._dispatch(t,n);this._timeoutStore.has(t)&&window.clearTimeout(this._timeoutStore.get(t));const s=window.setTimeout(()=>{this._dispatch(t,n),this._timeoutStore.delete(t)},"number"==typeof r?r:20);this._timeoutStore.set(t,s)}}function ht(e,t){let n;const r=(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)};return r.cancel=()=>{clearTimeout(n)},r}const vl="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function _C(){return!(typeof window[vl]>"u"||!window[vl])}const bC=(e,t)=>new Intl.PluralRules(e).select(t),fF=e=>e,Xf="{{",wC="}}",CC="plural:";function Jf(e,t,n={}){let{openToken:r=Xf,closeToken:i=wC,transform:s=fF}=n;for(let o in t){let a=t[o]?.toString();e=e.replaceAll(r+o+i,"string"==typeof a?s(a):a)}return e}const gr=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)?.map(t=>t.toLowerCase()).join("-"),DC=({element:e,attribute:t,onSuccess:n,onTimeout:r,timeout:i=300})=>{const s=setTimeout(()=>{l.disconnect(),r()},i),a=e.getAttribute(t);null!==a&&(clearTimeout(s),n(a));const l=new MutationObserver(c=>{(c=>{const u=e.getAttribute(t);"attributes"===c.type&&c.attributeName===t&&null!==u&&(clearTimeout(s),l.disconnect(),n(u))})(c[c.length-1])});l.observe(e,{attributes:!0,attributeFilter:[t]})},EC=new Set;function eh(e){EC.has(e)||(EC.add(e),console.warn(e))}function IC(e){return"[object Object]"===Object.prototype.toString.call(e)}const pF=/\W|_/g;function gF(e){return e.split(pF).map((t,n)=>t.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+t.slice(1)).join("")}function TC(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map(n=>Qt(n,{ignoreKeys:t})):e}function Qt(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return TC(e,{ignoreKeys:t});if(!IC(e))return e;const n={};for(const r of Object.keys(e)){let i=e[r];t.includes(r)?n[r]=i:(IC(i)?i=Qt(i,{ignoreKeys:t}):Array.isArray(i)&&(i=TC(i,{ignoreKeys:t})),n[gF(r)]=i)}return n}const mF=e=>new Promise(t=>setTimeout(t,e));function SC({libraryName:e,libraryVersion:t,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";return"string"==typeof n?n:"function"==typeof n?n({publicKey:r,libraryName:e,libraryVersion:t,languageName:s,integration:i}):`${[e,t,r].filter(Boolean).join("/")} (${[s,i].filter(Boolean).join("; ")})`}const yF={factor:2,time:100};class _l extends Error{originalProgressEvent;constructor(t){super(),this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,_l.prototype),this.originalProgressEvent=t}}const bl=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",()=>t(),{once:!0}))};class Mi extends Error{isCancel=!0;constructor(t="Request canceled"){super(t),Object.setPrototypeOf(this,Mi.prototype)}}const MC=({check:e,interval:t=500,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;bl(r,()=>{o&&clearTimeout(o),s(new Mi("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new Mi("Timed out"))},n));const l=()=>{try{Promise.resolve(e(r)).then(c=>{c?(a&&clearTimeout(a),i(c)):o=setTimeout(l,t)}).catch(c=>{a&&clearTimeout(a),s(c)})}catch(c){a&&clearTimeout(a),s(c)}};o=setTimeout(l,0)}),$={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},wl="application/octet-stream",AC="original",bn=({method:e,url:t,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,c=e?.toUpperCase()||"GET";let u=!1;l.open(c,t,!0),r&&Object.entries(r).forEach(d=>{const[f,h]=d;typeof h<"u"&&!Array.isArray(h)&&l.setRequestHeader(f,h)}),l.responseType="text",bl(i,()=>{u=!0,l.abort(),a(new Mi)}),l.onload=()=>{if(200!=l.status)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const d={method:c,url:t,data:n,headers:r||void 0,signal:i,onProgress:s},f=l.getAllResponseHeaders().trim().split(/[\r\n]+/),h={};f.forEach(function(y){const v=y.split(": "),m=v.shift(),b=v.join(": ");m&&typeof m<"u"&&(h[m]=b)}),o({request:d,data:l.response,headers:h,status:l.status})}},l.onerror=d=>{u||a(new _l(d))},s&&"function"==typeof s&&(l.upload.onprogress=d=>{s(d.lengthComputable?{isComputable:!0,value:d.loaded/d.total}:{isComputable:!1})}),n?l.send(n):l.send()}),wF=({name:e})=>e?[e]:[],CF=function bF(e,...t){return e};var DF=()=>new FormData;const Cl=e=>typeof Blob<"u"&&e instanceof Blob,Dl=e=>typeof File<"u"&&e instanceof File,El=e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&"uri"in e&&"string"==typeof e.uri,Ai=e=>Cl(e)||Dl(e)||El(e),EF=e=>"string"==typeof e||"number"==typeof e||typeof e>"u",IF=e=>!!e&&"object"==typeof e&&!Array.isArray(e),TF=e=>!!e&&"object"==typeof e&&"data"in e&&Ai(e.data);function SF(e,t,n){if(TF(n)){const{name:r,contentType:i}=n,s=CF(n.data,r,i??wl),o=wF({name:r,contentType:i});e.push([t,s,...o])}else if(IF(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&e.push([`${t}[${r}]`,String(i)]);else EF(n)&&n&&e.push([t,n.toString()])}function th(e){const t=DF(),n=function MF(e){const t=[];for(const[n,r]of Object.entries(e))SF(t,n,r);return t}(e);for(const r of n){const[i,s,...o]=r;t.append(i,s,...o)}return t}class We extends Error{isCancel;code;request;response;headers;constructor(t,n,r,i,s){super(),this.name="UploadClientError",this.message=t,this.code=n,this.request=r,this.response=i,this.headers=s,Object.setPrototypeOf(this,We.prototype)}}const Xt=(e,t,n)=>{const r=new URL(e);return r.pathname=(r.pathname+t).replace("//","/"),n&&(r.search=(e=>{const t=new URLSearchParams;for(const[n,r]of Object.entries(e))r&&"object"==typeof r&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>t.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{t.append(`${n}[]`,i)}):"string"==typeof r&&r?t.set(n,r):"number"==typeof r&&t.set(n,r.toString());return t.toString()})(n)),r.toString()},NF="UploadcareUploadClient",OF="6.10.0";function jn(e){return SC({libraryName:NF,libraryVersion:OF,...e})}const RF="RequestThrottledError",NC=15e3,PF=1e3;function wn(e,t){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=t;return function vF(e,t=yF){let n=0;return function r(i){const s=Math.round(t.time*t.factor**n);return i({attempt:n,retry:a=>mF(a??s).then(()=>(n+=1,r(i)))})}(e)}(({attempt:i,retry:s})=>e().catch(o=>{if("response"in o&&o?.code===RF&&i<n)return s(function kF(e){const{headers:t}=e||{};if(!t||"string"!=typeof t["retry-after"])return NC;const n=parseInt(t["retry-after"],10);return Number.isFinite(n)?1e3*n:NC}(o));if(o instanceof _l&&i<r)return s((i+1)*PF);throw o}))}const OC=e=>{let t="";return(Cl(e)||Dl(e)||El(e))&&(t=e.type),t||wl},RC=e=>{let t="";return Dl(e)&&e.name?t=e.name:Cl(e)?t="":El(e)&&e.name&&(t=e.name),t||AC};function nh(e){return typeof e>"u"||"auto"===e?"auto":e?"1":"0"}var kC=function(e){return e.Token="token",e.FileInfo="file_info",e}(kC||{});var pt=function(e){return e.Unknown="unknown",e.Waiting="waiting",e.Progress="progress",e.Error="error",e.Success="success",e}(pt||{});function FC(e,{publicKey:t,baseURL:n=$.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=$.retryNetworkErrorMaxTimes}={}){return wn(()=>bn({method:"GET",headers:t?{"X-UC-User-Agent":jn({publicKey:t,integration:i,userAgent:s})}:void 0,url:Xt(n,"/from_url/status/",{jsonerrors:1,token:e}),signal:r}).then(({data:l,headers:c,request:u})=>{const d=Qt(JSON.parse(l));if("error"in d&&!(e=>"status"in e&&e.status===pt.Error)(d))throw new We(d.error.content,void 0,u,d,c);return d}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function rh(e,{publicKey:t,baseURL:n=$.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=$.retryNetworkErrorMaxTimes}){return wn(()=>bn({method:"GET",headers:{"X-UC-User-Agent":jn({publicKey:t,integration:s,userAgent:o})},url:Xt(n,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:i}),signal:r}).then(({data:c,headers:u,request:d})=>{const f=Qt(JSON.parse(c));if("error"in f)throw new We(f.error.content,f.error.errorCode,d,f,u);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Il(e,{publicKey:t,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:c}){return MC({check:u=>rh(e,{publicKey:t,baseURL:n,signal:u,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(d=>d.isReady?d:(c&&c({isComputable:!0,value:1}),!1)),signal:l})}class xi{uuid;name=null;size=null;isStored=null;isImage=null;mimeType=null;cdnUrl=null;s3Url=null;originalFilename=null;imageInfo=null;videoInfo=null;contentInfo=null;metadata=null;s3Bucket=null;defaultEffects=null;constructor(t,{baseCDN:n=$.baseCDN,fileName:r}={}){const{uuid:i,s3Bucket:s}=t,o=Xt(n,`${i}/`),a=s?Xt(`https://${s}.s3.amazonaws.com/`,`${i}/${t.filename}`):null;this.uuid=i,this.name=r||t.filename,this.size=t.size,this.isStored=t.isStored,this.isImage=t.isImage,this.mimeType=t.mimeType,this.cdnUrl=o,this.originalFilename=t.originalFilename,this.imageInfo=t.imageInfo,this.videoInfo=t.videoInfo,this.contentInfo=t.contentInfo,this.metadata=t.metadata||null,this.s3Bucket=s||null,this.s3Url=a,function $F(e){return"defaultEffects"in e}(t)&&(this.defaultEffects=t.defaultEffects)}}const VF=(e,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:c,source:u,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:g,metadata:y})=>function PC(e,{publicKey:t,fileName:n,contentType:r,baseURL:i=$.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:c,source:u="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=$.retryNetworkErrorMaxTimes,metadata:g}){return wn(()=>bn({method:"POST",url:Xt(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":jn({publicKey:t,integration:d,userAgent:f})},data:th({file:{data:e,name:n||RC(e),contentType:r||OC(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:nh(a),signature:s,expire:o,source:u,metadata:g}),signal:l,onProgress:c}).then(({data:y,headers:v,request:m})=>{const b=Qt(JSON.parse(y));if("error"in b)throw new We(b.error.content,b.error.errorCode,m,b,v);return b}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:c,source:u,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,metadata:y}).then(({file:v})=>Il(v,{publicKey:t,baseURL:r,source:u,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,onProgress:c,signal:l})).then(v=>new xi(v,{baseCDN:g})),UF=(e,{publicKey:t,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u,baseCDN:d})=>rh(e,{publicKey:t,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:c,retryNetworkErrorMaxTimes:u}).then(f=>new xi(f,{baseCDN:d,fileName:n})).then(f=>(s&&s({isComputable:!0,value:1}),f));var BF=window.WebSocket;class HF{events=Object.create({});emit(t,n){this.events[t]?.forEach(r=>r(n))}on(t,n){this.events[t]=this.events[t]||[],this.events[t].push(n)}off(t,n){this.events[t]=n?this.events[t].filter(r=>r!==n):[]}}class GF{key;disconnectTime;ws=void 0;queue=[];isConnected=!1;subscribers=0;emmitter=new HF;disconnectTimeoutId=null;constructor(t,n=3e4){this.key=t,this.disconnectTime=n}connect(){this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),this.isConnected||this.ws||(this.ws=new BF(`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(r.channel,(e=r.event,t=JSON.parse(r.data),"success"===e?{status:pt.Success,...t}:"progress"===e?{status:pt.Progress,...t}:{status:pt.Error,...t}))}var e,t}))}disconnect(){const t=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{t()},this.disconnectTime):t()}send(t,n){const r=JSON.stringify({event:t,data:n});this.ws?.send(r)}subscribe(t,n){this.subscribers+=1,this.connect();const r=`task-status-${t}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(t){this.subscribers-=1;const n=`task-status-${t}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),0===this.subscribers&&this.disconnect()}onError(t){return this.emmitter.on("error",t),()=>this.emmitter.off("error",t)}}let ih=null;const sh=e=>{if(!ih){const t=typeof window>"u"?0:3e4;ih=new GF(e,t)}return ih},YF=(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:u,onProgress:d,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,pusherKey:y=$.pusherKey,metadata:v})=>Promise.resolve((e=>{sh(e).connect()})(y)).then(()=>function LC(e,{publicKey:t,baseURL:n=$.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:c="url",signal:u,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=$.retryNetworkErrorMaxTimes,metadata:g}){return wn(()=>bn({method:"POST",headers:{"X-UC-User-Agent":jn({publicKey:t,integration:d,userAgent:f})},url:Xt(n,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:nh(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:c,metadata:g}),signal:u}).then(({data:y,headers:v,request:m})=>{const b=Qt(JSON.parse(y));if("error"in b)throw new We(b.error.content,b.error.errorCode,m,b,v);return b}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:c,signal:u,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,metadata:v})).catch(m=>(sh(y)?.disconnect(),Promise.reject(m))).then(m=>m.type===kC.FileInfo?m:((e,{signal:t}={})=>{let n=null,r=null;const i=e.map(()=>new AbortController);return bl(t,()=>{i.forEach(o=>o.abort())}),Promise.all(e.map((o,a)=>{const l=(o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())})(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(c=>(l(),c)).catch(c=>(n=c,null))})).then(o=>{if(null===r)throw n;return o[r]})})([({signal:b})=>function qF({token:e,publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return MC({check:c=>FC(e,{publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:c}).then(u=>{switch(u.status){case pt.Error:return new We(u.error,u.errorCode);case pt.Waiting:return!1;case pt.Unknown:return new We(`Token "${e}" was not found.`);case pt.Progress:return a&&a("unknown"===u.total?{isComputable:!1}:{isComputable:!0,value:u.done/u.total}),!1;case pt.Success:return a&&a({isComputable:!0,value:u.done/u.total}),u;default:throw new Error("Unknown status")}}),signal:l})}({token:m.token,publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:b}),({signal:b})=>(({token:e,pusherKey:t,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=sh(t),a=o.onError(s),l=()=>{a(),o.unsubscribe(e)};bl(n,()=>{l(),s(new Mi("pusher cancelled"))}),o.subscribe(e,c=>{switch(c.status){case pt.Progress:r&&r("unknown"===c.total?{isComputable:!1}:{isComputable:!0,value:c.done/c.total});break;case pt.Success:l(),r&&r({isComputable:!0,value:c.done/c.total}),i(c);break;case pt.Error:l(),s(new We(c.msg,c.error_code))}})}))({token:m.token,pusherKey:y,signal:b,onProgress:d})],{signal:u})).then(m=>{if(m instanceof We)throw m;return m}).then(m=>Il(m.uuid,{publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:u})).then(m=>new xi(m,{baseCDN:i})),oh=new WeakMap,KF=function(){var e=ce(function*(t){if(oh.has(t))return oh.get(t);const n=yield fetch(t.uri).then(r=>r.blob());return oh.set(t,n),n});return function(n){return e.apply(this,arguments)}}(),BC=function(){var e=ce(function*(t){if(Dl(t)||Cl(t))return t.size;if(El(t))return(yield KF(t)).size;throw new Error("Unknown file type. Cannot determine file size.")});return function(n){return e.apply(this,arguments)}}(),QF=(e,t=$.multipartMinFileSize)=>e>=t,HC=e=>{const n=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!Ai(e)&&n.test(e)},ah=e=>{const n=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!Ai(e)&&n.test(e)},XF=(e,t)=>new Promise((n,r)=>{const i=[];let s=!1,o=t.length;const a=[...t],l=()=>{const c=t.length-a.length,u=a.shift();u&&u().then(d=>{s||(i[c]=d,o-=1,o?l():n(i))}).catch(d=>{s=!0,r(d)})};for(let c=0;c<e;c++)l()}),e$=function(){var e=ce(function*(t,n,r){return i=>((e,t,n,r)=>{const i=r*t,s=Math.min(i+r,n);return e.slice(i,s)})(t,i,n,r)});return function(n,r,i){return e.apply(this,arguments)}}(),n$=function(){var e=ce(function*(t,{publicKey:n,fileName:r,fileSize:i,baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:c,onProgress:u,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:y,multipartChunkSize:v=$.multipartChunkSize,maxConcurrentRequests:m=$.maxConcurrentRequests,baseCDN:b,metadata:D}){const N=i??(yield BC(t));let K;const st=(ie,ot)=>{if(!u)return;K||(K=Array(ie).fill(0));const rn=kt=>kt.reduce((co,$i)=>co+$i,0);return kt=>{kt.isComputable&&(K[ot]=kt.value,u({isComputable:!0,value:rn(K)/ie}))}};return y||=OC(t),function VC(e,{publicKey:t,contentType:n,fileName:r,multipartChunkSize:i=$.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:c,source:u="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=$.retryNetworkErrorMaxTimes,metadata:g}){return wn(()=>bn({method:"POST",url:Xt(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":jn({publicKey:t,integration:d,userAgent:f})},data:th({filename:r||AC,size:e,content_type:n||wl,part_size:i,UPLOADCARE_STORE:nh(l),UPLOADCARE_PUB_KEY:t,signature:o,expire:a,source:u,metadata:g}),signal:c}).then(({data:y,headers:v,request:m})=>{const b=Qt(JSON.parse(y));if("error"in b)throw new We(b.error.content,b.error.errorCode,m,b,v);return b.parts=Object.keys(b.parts).map(D=>b.parts[D]),b}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p})}(N,{publicKey:n,contentType:y,fileName:r||RC(t),baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:c,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:D}).then(function(){var ie=ce(function*({uuid:ot,parts:rn}){const kt=yield e$(t,N,v);return Promise.all([ot,XF(m,rn.map((co,$i)=>()=>((e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>function UC(e,t,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=$.retryNetworkErrorMaxTimes}){return wn(()=>bn({method:"PUT",url:t,data:e,onProgress:i,signal:r,headers:{"Content-Type":n||wl}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}(e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}))(kt($i),co,{publicKey:n,contentType:y,onProgress:st(rn.length,$i),signal:c,integration:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})))])});return function(ot){return ie.apply(this,arguments)}}()).then(([ie])=>function jC(e,{publicKey:t,baseURL:n=$.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=$.retryNetworkErrorMaxTimes}){return wn(()=>bn({method:"POST",url:Xt(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":jn({publicKey:t,integration:s,userAgent:o})},data:th({uuid:e,UPLOADCARE_PUB_KEY:t,source:r}),signal:i}).then(({data:c,headers:u,request:d})=>{const f=Qt(JSON.parse(c));if("error"in f)throw new We(f.error.content,f.error.errorCode,d,f,u);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}(ie,{publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})).then(ie=>ie.isReady?ie:Il(ie.uuid,{publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:u,signal:c})).then(ie=>new xi(ie,{baseCDN:b}))});return function(n,r){return e.apply(this,arguments)}}();function lh(e,t){return ch.apply(this,arguments)}function ch(){return(ch=ce(function*(e,{publicKey:t,fileName:n,baseURL:r=$.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartMinFileSize:g,multipartChunkSize:y,maxConcurrentRequests:v,baseCDN:m=$.baseCDN,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,pusherKey:N,metadata:K}){if(Ai(e)){const st=yield BC(e);return QF(st,g)?n$(e,{publicKey:t,contentType:p,multipartChunkSize:y,fileSize:st,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:d,maxConcurrentRequests:v,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m,metadata:K}):VF(e,{publicKey:t,fileName:n,contentType:p,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m,metadata:K})}if(ah(e))return YF(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:m,checkForUrlDuplicates:b,saveUrlForRecurrentUploads:D,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,pusherKey:N,metadata:K});if(HC(e))return UF(e,{publicKey:t,fileName:n,baseURL:r,signal:a,onProgress:l,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m});throw new TypeError(`File uploading from "${e}" is not supported`)})).apply(this,arguments)}class r${uuid;filesCount;totalSize;isStored;isImage;cdnUrl;files;createdAt;storedAt=null;constructor(t,{baseCDN:n=$.baseCDN}={}){this.uuid=t.id,this.filesCount=t.filesCount;const r=t.files.filter(Boolean);this.totalSize=Object.values(r).reduce((i,s)=>i+s.size,0),this.isStored=!!t.datetimeStored,this.isImage=!!Object.values(r).filter(i=>i.isImage).length,this.cdnUrl=t.cdnUrl,this.files=r.map(i=>new xi(i,{baseCDN:n})),this.createdAt=t.datetimeCreated,this.storedAt=t.datetimeStored}}function zC(e,{publicKey:t,fileName:n,baseURL:r=$.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g=$.multipartChunkSize,baseCDN:y=$.baseCDN,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:m,jsonpCallback:b}){if(!(e=>{for(const t of e)if(!Ai(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!ah(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!HC(t))return!1;return!0})(e))throw new TypeError(`Group uploading from "${e}" is not supported`);let D,N=!0;const K=e.length,st=(ie,ot)=>{if(!l)return;D||(D=Array(ie).fill(0));const rn=kt=>kt.reduce((co,$i)=>co+$i)/ie;return kt=>{if(!kt.isComputable||!N)return N=!1,void l({isComputable:!1});D[ot]=kt.value,l({isComputable:!0,value:rn(D)})}};return Promise.all(e.map((ie,ot)=>Ai(ie)||ah(ie)?lh(ie,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:st(K,ot),source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g,baseCDN:y,checkForUrlDuplicates:v,saveUrlForRecurrentUploads:m}).then(rn=>rn.uuid):ie)).then(ie=>function $C(e,{publicKey:t,baseURL:n=$.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:c,retryThrottledRequestMaxTimes:u=$.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=$.retryNetworkErrorMaxTimes}){return wn(()=>bn({method:"POST",headers:{"X-UC-User-Agent":jn({publicKey:t,integration:l,userAgent:c})},url:Xt(n,"/group/",{jsonerrors:1,pub_key:t,files:e,callback:r,signature:i,expire:s,source:a}),signal:o}).then(({data:f,headers:h,request:p})=>{const g=Qt(JSON.parse(f));if("error"in g)throw new We(g.error.content,g.error.errorCode,p,g,h);return g}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:u})}(ie,{publicKey:t,baseURL:r,jsonpCallback:b,secureSignature:i,secureExpire:s,signal:a,source:c,integration:u,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h}).then(ot=>new r$(ot,{baseCDN:y})).then(ot=>(l&&l({isComputable:!0,value:1}),ot)))}class a${_concurrency=1;_pending=[];_running=0;_resolvers=new Map;_rejectors=new Map;constructor(t){this._concurrency=t}_run(){const t=this._concurrency-this._running;for(let n=0;n<t;n++){const r=this._pending.shift();if(!r)return;const i=this._resolvers.get(r),s=this._rejectors.get(r);if(!i||!s)throw new Error("Unexpected behavior: resolver or rejector is undefined");this._running+=1,r().finally(()=>{this._resolvers.delete(r),this._rejectors.delete(r),this._running-=1,this._run()}).then(o=>i(o)).catch(o=>s(o))}}add(t){return new Promise((n,r)=>{this._resolvers.set(t,n),this._rejectors.set(t,r),this._pending.push(t),this._run()})}get pending(){return this._pending.length}get running(){return this._running}set concurrency(t){this._concurrency=t,this._run()}get concurrency(){return this._concurrency}}const GC=()=>({"*blocksRegistry":new Set,"*eventEmitter":null}),WC=e=>({...GC(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{e.set$({"*modalActive":!1,"*currentActivity":""})}}),qC=e=>({...WC(e),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new a$(1)});function l$(e,t){[...e.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n"),i="textContent";if(r.includes(":")){let o=r.split(":");i=o[0],r=o[1]}let s="l10n:"+r;t.__l10nKeys.push(s),t.add(s,r),t.sub(s,o=>{n[i]=t.l10n(o)}),n.removeAttribute("l10n")})}const Ct=e=>`*cfg/${e}`;let Ne=(()=>class e extends yl{static StateConsumerScope=null;static className="";requireCtxName=!1;allowCustomTemplate=!0;init$=GC();l10n(n,r={}){if(!n)return"";let i=this.getCssData("--l10n-"+n,!0)||n,s=function hF(e){const t=[];let n=e.indexOf(Xf);for(;-1!==n;){const r=e.indexOf(wC,n),i=e.substring(n+2,r);if(i.startsWith(CC)){const s=e.substring(n+2,r).replace(CC,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));t.push({variable:i,pluralKey:o,countVariable:a})}n=e.indexOf(Xf,r)}return t}(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return Jf(i,r)}pluralize(n,r){const i=this.l10n("locale-name")||"en-US",s=bC(i,r);return this.l10n(`${n}__${s}`)}constructor(){super(),this.activityType=null,this.addTemplateProcessor(l$),this.__l10nKeys=[]}emit(n,r,i){const s=this.has("*eventEmitter")&&this.$["*eventEmitter"];s&&s.emit(n,r,i)}applyL10nKey(n,r){this.$["l10n:"+n]=r,this.__l10nKeys.push(n)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setOrAddState(n,r){this.add$({[n]:r},!0)}setActivity(n){this.hasBlockInCtx(r=>r.activityType===n)?this.$["*currentActivity"]=n:console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`lr-${n}`,!0),_C()||(this._destroyInnerHeightTracker=function dF(){if(_C())return;const e=()=>{document.documentElement.style.setProperty("--uploadcare-blocks-window-height",`${window.innerHeight}px`),window[vl]=!0},t=ht(e,100);return window.addEventListener("resize",t,{passive:!0}),e(),()=>{window[vl]=!1,window.removeEventListener("resize",t)}}()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),this.requireCtxName?DC({element:this,attribute:"ctx-name",onSuccess:()=>{super.connectedCallback()},onTimeout:()=>{console.error("Attribute `ctx-name` is required and it is not set.")}}):super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._destroyInnerHeightTracker?.()}initCallback(){this.$["*blocksRegistry"].add(this),this.$["*eventEmitter"]||(this.$["*eventEmitter"]=new cF(()=>this.ctxName))}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"],s=c=>this.getCssData("--l10n-unit-"+c.toLowerCase(),!0)||c;if(0===n)return`0 ${s(i[0])}`;let a=r<0?0:r,l=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/1024**l).toFixed(a))+" "+s(i[l])}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?Jf(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}parseCfgProp(n){return{ctx:this.nodeCtx,name:n.replace("*","")}}get cfg(){return this.__cfgProxy||(this.__cfgProxy=new Proxy(Object.create(null),{set:(r,i,s)=>{if("string"!=typeof i)return!1;const o=Ct(i);return this.$[o]=s,!0},get:(r,i)=>{const s=Ct(i),o=this.parseCfgProp(s);return o.ctx.has(o.name)?o.ctx.read(o.name):(eh("Using CSS variables for configuration is deprecated. Please use `lr-config` instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.getCssData(`--cfg-${gr(i)}`))}})),this.__cfgProxy}subConfigValue(n,r){const i=this.parseCfgProp(Ct(n));i.ctx.has(i.name)?this.sub(Ct(n),r):(this.bindCssData(`--cfg-${gr(n)}`),this.sub(`--cfg-${gr(n)}`,r))}updateCtxCssData=()=>{eh("Using CSS variables for configuration is deprecated. Please use `lr-config` instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/");let n=this.$["*blocksRegistry"];for(let r of n)r.isConnected&&r.updateCssData()};static reg(n){n?super.reg(n.startsWith("lr-")?n:"lr-"+n):super.reg()}})();const no="___ACTIVITY_IS_ACTIVE___";class I extends Ne{historyTracked=!1;init$=WC(this);_debouncedHistoryFlush=ht(this._historyFlush.bind(this),10);_deactivate(){let t=I._activityRegistry[this.activityKey];this[no]=!1,this.removeAttribute("active"),t?.deactivateCallback?.()}_activate(){let t=I._activityRegistry[this.activityKey];this.$["*historyBack"]=this.historyBack.bind(this),this[no]=!0,this.setAttribute("active",""),t?.activateCallback?.(),this._debouncedHistoryFlush()}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",t=>{this.setAttribute("current-activity",t)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",t=>{this.activityType!==t&&this[no]?this._deactivate():this.activityType===t&&!this[no]&&this._activate(),t||(this.$["*history"]=[])}))}_historyFlush(){let t=this.$["*history"];t&&(t.length>10&&(t=t.slice(t.length-11,t.length-1)),this.historyTracked&&t[t.length-1]!==this.activityType&&t.push(this.activityType),this.$["*history"]=t)}_isActivityRegistered(){return this.activityType&&!!I._activityRegistry[this.activityKey]}static _activityRegistry=Object.create(null);get isActivityActive(){return this[no]}get couldOpenActivity(){return!0}registerActivity(t,n={}){const{onActivate:r,onDeactivate:i}=n;I._activityRegistry||(I._activityRegistry=Object.create(null)),I._activityRegistry[this.activityKey]={activateCallback:r,deactivateCallback:i}}unregisterActivity(){this.isActivityActive&&this._deactivate(),I._activityRegistry[this.activityKey]=void 0}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity(),0===Object.keys(I._activityRegistry).length&&(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let t=this.$["*history"];if(t){let n=t.pop();for(;n===this.activityType;)n=t.pop();let r=!!n;n&&(r=[...this.$["*blocksRegistry"]].find(o=>o.activityType===n)?.couldOpenActivity??!1),n=r?n:void 0,this.$["*currentActivity"]=n,this.$["*history"]=t,n||this.setOrAddState("*modalActive",!1)}}}I.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const Jt=1.5,Tl=100/3;function Ni(e,t){for(let n in t)e.setAttributeNS(null,n,t[n].toString())}function Rt(e,t={}){let n=document.createElementNS("http://www.w3.org/2000/svg",e);return Ni(n,t),n}function d$(e,t,n){let{x:r,y:i,width:s,height:o}=e,a=t.includes("w")?0:1,l=t.includes("n")?0:1,c=[-1,1][a],u=[-1,1][l],d=[r+a*s+Jt*c,i+l*o+Jt*u-24*n*u],f=[r+a*s+Jt*c,i+l*o+Jt*u],h=[r+a*s-24*n*c+Jt*c,i+l*o+Jt*u];return{d:`M ${d[0]} ${d[1]} L ${f[0]} ${f[1]} L ${h[0]} ${h[1]}`,center:f}}function f$(e,t,n){let d,f,{x:r,y:i,width:s,height:o}=e,a=["n","s"].includes(t)?.5:{w:0,e:1}[t],l=["w","e"].includes(t)?.5:{n:0,s:1}[t],c=[-1,1][a],u=[-1,1][l];return["n","s"].includes(t)?(d=[r+a*s-34*n/2,i+l*o+Jt*u],f=[r+a*s+34*n/2,i+l*o+Jt*u]):(d=[r+a*s+Jt*c,i+l*o-34*n/2],f=[r+a*s+Jt*c,i+l*o+34*n/2]),{d:`M ${d[0]} ${d[1]} L ${f[0]} ${f[1]}`,center:[f[0]-(f[0]-d[0])/2,f[1]-(f[1]-d[1])/2]}}function Sl(e,t){let{x:n}=e,{y:r}=e;return e.x<t.x?n=t.x:e.x+e.width>t.x+t.width&&(n=t.x+t.width-e.width),e.y<t.y?r=t.y:e.y+e.height>t.y+t.height&&(r=t.y+t.height-e.height),{...e,x:n,y:r}}function io({width:e,height:t},n){let r=n/90%2!=0;return{width:r?t:e,height:r?e:t}}function S$(e,t,n){let i,s;e/t>n?(i=Math.round(t*n),s=t):(i=e,s=Math.round(e/n));const o=Math.round((e-i)/2),a=Math.round((t-s)/2);return o+i>e&&(i=e-o),a+s>t&&(s=t-a),{x:o,y:a,width:i,height:s}}function Ml(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Oi(e,t,n){return Math.min(Math.max(e,t),n)}const QC=e=>{if(!e)return[];const[t,n]=e.split(":").map(Number);if(Number.isFinite(t)&&Number.isFinite(n))return[{type:"aspect-ratio",width:t,height:n}];console.error(`Invalid crop preset: ${e}`)},Bn=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"}),Al=e=>e?e.join(","):"",XC="blocks",fh="0.30.0";function A$(e){return SC({...e,libraryName:XC,libraryVersion:fh})}const JC=e=>{if("string"!=typeof e||!e)return"";let t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},hh=(...e)=>e.filter(t=>"string"==typeof t&&t).map(t=>JC(t)).join("/-/"),Cn=(...e)=>{let t=hh(...e);return t?`-/${t}/`:""};function eD(e){let t=new URL(e),n=t.pathname+t.search+t.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function tD(e){let t=new URL(e),n=eD(e),r=nD(n)?rD(n).pathname:n;return t.pathname=t.pathname.replace(r,""),t.search="",t.hash="",t.toString()}function nD(e){return e.startsWith("http")}function rD(e){let t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}const gt=(e,t,n)=>{let r=new URL(tD(e));if(n=n||eD(e),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),nD(n)){let i=rD(n);r.pathname=r.pathname+(t||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(t||"")+(n||"");return r.toString()},so=(e,t)=>{let n=new URL(e);return n.pathname=t+"/",n.toString()},Dn=(e,t=",")=>e.trim().split(t).map(n=>n.trim()).filter(n=>n.length>0),xl=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],iD=e=>e?e.filter(t=>"string"==typeof t).map(t=>Dn(t)).flat():[],sD=(e,t)=>t.some(n=>n.endsWith("*")?(n=n.replace("*",""),e.startsWith(n)):e===n),ph=e=>{let t=e?.type;return!!t&&sD(t,xl)},en=1e3,yr=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),oo=e=>Math.ceil(100*e)/100,R$=(e,t=yr.AUTO)=>{const n=t===yr.AUTO;return t===yr.BYTE||n&&e<1e3?`${e} ${{one:"byte",other:"bytes"}[bC("en-US",e)]}`:t===yr.KB||n&&e<en**2?`${oo(e/1e3)} KB`:t===yr.MB||n&&e<en**3?`${oo(e/en**2)} MB`:t===yr.GB||n&&e<en**4?`${oo(e/en**3)} GB`:t===yr.TB||n&&e<en**5?`${oo(e/en**4)} TB`:`${oo(e/en**5)} PB`},oD="[Typed State] Wrong property name: ";class k${constructor(t,n){this.__typedSchema=t,this.__ctxId=n||Yf.generate(),this.__schema=Object.keys(t).reduce((r,i)=>(r[i]=t[i].value,r),{}),this.__data=de.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(t,n){if(!this.__typedSchema.hasOwnProperty(t))return void console.warn(oD+t);let r=this.__typedSchema[t];n?.constructor===r.type||n instanceof r.type||r.nullable&&null===n?this.__data.pub(t,n):console.warn("[Typed State] Wrong property type: "+t)}setMultipleValues(t){for(let n in t)this.setValue(n,t[n])}getValue(t){if(this.__typedSchema.hasOwnProperty(t))return this.__data.read(t);console.warn(oD+t)}subscribe(t,n){return this.__data.sub(t,n)}remove(){de.deleteCtx(this.__ctxId)}}class L${constructor(t){this.__typedSchema=t.typedSchema,this.__ctxId=t.ctxName||Yf.generate(),this.__data=de.registerCtx({},this.__ctxId),this.__watchList=t.watchList||[],this.__subsMap=Object.create(null),this.__propertyObservers=new Set,this.__collectionObservers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{0!==Object.keys(n).length&&(this.__propertyObservers.forEach(s=>{s({...n})}),n=Object.create(null))})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let t=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear();for(const r of this.__collectionObservers)r?.([...this.__items],t,n)})}observeCollection(t){return this.__collectionObservers.add(t),this.notify(),()=>{this.unobserveCollection(t)}}unobserveCollection(t){this.__collectionObservers.delete(t)}add(t){let n=new k$(this.__typedSchema);for(let r in t)n.setValue(r,t[r]);return this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),this.__items.add(n.uid),this.notify(),n}read(t){return this.__data.read(t)}readProp(t,n){return this.read(t).getValue(n)}publishProp(t,n,r){this.read(t).setValue(n,r)}remove(t){this.__removed.add(this.__data.read(t)),this.__items.delete(t),this.notify(),this.__data.pub(t,null),delete this.__subsMap[t]}clearAll(){this.__items.forEach(t=>{this.remove(t)})}observeProperties(t){return this.__propertyObservers.add(t),()=>{this.unobserveProperties(t)}}unobserveProperties(t){this.__propertyObservers.delete(t)}findItems(t){let n=[];return this.__items.forEach(r=>{let i=this.read(r);t(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){de.deleteCtx(this.__data),this.__propertyObservers=null,this.__collectionObservers=null;for(let t in this.__subsMap)this.__subsMap[t].forEach(n=>{n.remove()}),delete this.__subsMap[t]}}const F$=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},validationMultipleLimitMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:xi,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silentUpload:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0},fullPath:{type:String,value:null,nullable:!0}});class oe extends I{isCtxOwner=!1;init$=qC(this);__initialUploadMetadata=null;_validators=[this._validateMultipleLimit.bind(this),this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this)];setUploadMetadata(t){eh("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=t:this.__initialUploadMetadata=t}get hasCtxOwner(){return this.hasBlockInCtx(t=>t instanceof oe&&t.isCtxOwner&&t.isConnected&&t!==this)}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let t=new L$({typedSchema:F$,watchList:["uploadProgress","fileInfo","uploadError","validationErrorMsg","validationMultipleLimitMsg","cdnUrlModifiers"]});this.add("*uploadCollection",t)}this.hasCtxOwner||this.initCtxOwner()}destroyCallback(){super.destroyCallback(),this.isCtxOwner&&(this._unobserveCollectionProperties?.(),this._unobserveCollection?.())}initCtxOwner(){this.isCtxOwner=!0,this._unobserveCollection=this.uploadCollection.observeCollection(this._handleCollectonUpdate),this._unobserveCollectionProperties=this.uploadCollection.observeProperties(this._handleCollectionPropertiesUpdate),this.subConfigValue("maxLocalFileSizeBytes",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMin",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMax",()=>this._debouncedRunValidators()),this.subConfigValue("multiple",()=>this._debouncedRunValidators()),this.subConfigValue("imgOnly",()=>this._debouncedRunValidators()),this.subConfigValue("accept",()=>this._debouncedRunValidators()),this.subConfigValue("maxConcurrentRequests",t=>{this.$["*uploadQueue"].concurrency=Number(t)||1}),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata)}addFileFromUrl(t,{silent:n,fileName:r,source:i}={}){this.uploadCollection.add({externalUrl:t,fileName:r??null,silentUpload:n??!1,source:i??Bn.API})}addFileFromUuid(t,{silent:n,fileName:r,source:i}={}){this.uploadCollection.add({uuid:t,fileName:r??null,silentUpload:n??!1,source:i??Bn.API})}addFileFromObject(t,{silent:n,fileName:r,source:i,fullPath:s}={}){this.uploadCollection.add({file:t,isImage:ph(t),mimeType:t.type,fileName:r??t.name,fileSize:t.size,silentUpload:n??!1,source:i??Bn.API,fullPath:s??null})}addFiles(t){console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),t.forEach(n=>{this.uploadCollection.add({file:n,isImage:ph(n),mimeType:n.type,fileName:n.name,fileSize:n.size})})}uploadAll(){this.$["*uploadTrigger"]={}}openSystemDialog(t={}){let n=Al(iD([this.cfg.accept??"",...this.cfg.imgOnly?xl:[]]));this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,t.captureCamera?(this.fileInput.capture="",this.fileInput.accept=Al(xl)):this.fileInput.accept=n,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(r=>this.addFileFromObject(r,{source:Bn.LOCAL})),this.$["*currentActivity"]=I.activities.UPLOAD_LIST,this.setOrAddState("*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let t=[];return this.cfg.sourceList&&(t=Dn(this.cfg.sourceList)),t}initFlow(t=!1){if(this.uploadCollection.size>0&&!t)this.set$({"*currentActivity":I.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0);else if(1===this.sourceList?.length){let n=this.sourceList[0];"local"===n?(this.$["*currentActivity"]=I.activities.UPLOAD_LIST,this?.openSystemDialog()):(Object.values(oe.extSrcList).includes(n)?this.set$({"*currentActivityParams":{externalSourceType:n},"*currentActivity":I.activities.EXTERNAL}):this.$["*currentActivity"]=n,this.setOrAddState("*modalActive",!0))}else this.set$({"*currentActivity":I.activities.START_FROM}),this.setOrAddState("*modalActive",!0);this.emit(ve.INIT_FLOW)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setOrAddState("*modalActive",!1),this.emit(ve.DONE_FLOW)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(t){const i=iD([...this.cfg.imgOnly?xl:[],this.cfg.accept]);if(!i.length)return;const s=t.getValue("mimeType"),o=t.getValue("fileName");if(!s||!o)return;const a=sD(s,i),l=((e,t)=>t.some(n=>!!n.startsWith(".")&&e.toLowerCase().endsWith(n.toLowerCase())))(o,i);return a||l?void 0:this.l10n("file-type-not-allowed")}_validateMaxSizeLimit(t){const n=this.cfg.maxLocalFileSizeBytes,r=t.getValue("fileSize");if(n&&r&&r>n)return this.l10n("files-max-size-limit-error",{maxFileSize:R$(n)})}_validateMultipleLimit(t){const n=this.uploadCollection.items(),r=n.indexOf(t.uid),i=this.cfg.multiple?this.cfg.multipleMin:1,s=this.cfg.multiple?this.cfg.multipleMax:1;return i&&n.length<i?this.l10n("files-count-minimum",{count:i}):s&&r>=s?this.l10n("files-count-allowed",{count:s}):void 0}_validateIsImage(t){const n=this.cfg.imgOnly,r=t.getValue("isImage");if(n&&!r&&(t.getValue("fileInfo")||!t.getValue("externalUrl"))&&(t.getValue("fileInfo")||t.getValue("mimeType")))return this.l10n("images-only-accepted")}_runValidatorsForEntry(t){for(const n of this._validators){const r=n(t);if(r)return void t.setValue("validationErrorMsg",r)}t.setValue("validationErrorMsg",null)}_debouncedRunValidators=ht(this._runValidators.bind(this),100);_runValidators(){for(const t of this.uploadCollection.items())setTimeout(()=>{const n=this.uploadCollection.read(t);n&&this._runValidatorsForEntry(n)})}_flushOutputItems=ht(()=>{const t=this.getOutputData();t.length===this.uploadCollection.size&&(this.emit(ve.DATA_OUTPUT,t),this.$["*outputData"]=t)},100);_handleCollectonUpdate=(t,n,r)=>{this._runValidators();for(let i of r)i?.getValue("abortController")?.abort(),i?.setValue("abortController",null),URL.revokeObjectURL(i?.getValue("thumbUrl"));this.$["*uploadList"]=t.map(i=>({uid:i})),this._flushOutputItems()};_handleCollectionPropertiesUpdate=t=>{this._flushOutputItems();const n=this.uploadCollection,r=[...new Set(Object.values(t).map(i=>[...i]).flat())].map(i=>n.read(i)).filter(Boolean);for(const i of r)this._runValidatorsForEntry(i);if(t.uploadProgress){let i=0,s=n.findItems(a=>!a.getValue("uploadError"));s.forEach(a=>{i+=n.readProp(a,"uploadProgress")});let o=Math.round(i/s.length);this.$["*commonProgress"]=o,this.emit(ve.UPLOAD_PROGRESS,o,{debounce:!0})}if(t.fileInfo){this.cfg.cropPreset&&this.setInitialCrop();let i=n.findItems(o=>!!o.getValue("fileInfo")),s=n.findItems(o=>!!o.getValue("uploadError")||!!o.getValue("validationErrorMsg"));if(n.size-s.length===i.length){let o=this.getOutputData(a=>!!a.getValue("fileInfo")&&!a.getValue("silentUpload"));o.length>0&&this.emit(ve.UPLOAD_FINISH,o,{debounce:!0})}}t.uploadError&&n.findItems(s=>!!s.getValue("uploadError")).forEach(s=>{this.emit(ve.UPLOAD_ERROR,n.readProp(s,"uploadError"))}),t.validationErrorMsg&&n.findItems(s=>!!s.getValue("validationErrorMsg")).forEach(s=>{this.emit(ve.VALIDATION_ERROR,n.readProp(s,"validationErrorMsg"))}),t.cdnUrlModifiers&&n.findItems(s=>!!s.getValue("cdnUrlModifiers")).forEach(s=>{this.emit(ve.CLOUD_MODIFICATION,n.readProp(s,"cdnUrlModifiers"))})};setInitialCrop(){const t=QC(this.cfg.cropPreset);if(t){const[n]=t,r=this.uploadCollection.findItems(i=>i.getValue("fileInfo")&&i.getValue("isImage")&&!i.getValue("cdnUrlModifiers")?.includes("/crop/")).map(i=>this.uploadCollection.read(i));for(const i of r){const s=i.getValue("fileInfo"),{width:o,height:a}=s.imageInfo,c=S$(o,a,n.width/n.height),u=Cn(`crop/${c.width}x${c.height}/${c.x},${c.y}`,"preview");i.setMultipleValues({cdnUrlModifiers:u,cdnUrl:gt(i.getValue("cdnUrl"),u)}),1===this.uploadCollection.size&&this.cfg.useCloudImageEditor&&this.hasBlockInCtx(d=>d.activityType===I.activities.CLOUD_IMG_EDIT)&&(this.$["*focusedEntry"]=i,this.$["*currentActivity"]=I.activities.CLOUD_IMG_EDIT)}}}getMetadataFor(t){var n=this;return ce(function*(){const r=n.cfg.metadata??n.$["*uploadMetadata"];if("function"==typeof r){const i=n.getOutputItem(t);return yield r(i)}return r})()}getUploadClientOptions(){return{store:this.cfg.store,publicKey:this.cfg.pubkey,baseCDN:this.cfg.cdnCname,baseURL:this.cfg.baseUrl,userAgent:A$,integration:this.cfg.userAgentIntegration,secureSignature:this.cfg.secureSignature,secureExpire:this.cfg.secureExpire,retryThrottledRequestMaxTimes:this.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:this.cfg.multipartMinFileSize,multipartChunkSize:this.cfg.multipartChunkSize,maxConcurrentRequests:this.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:this.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!this.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!this.cfg.saveUrlForRecurrentUploads}}getOutputItem(t){const n=de.getCtx(t).store,r=n.fileInfo||{name:n.fileName,originalFilename:n.fileName,size:n.fileSize,isImage:n.isImage,mimeType:n.mimeType};return{...r,file:n.file,externalUrl:n.externalUrl,cdnUrlModifiers:n.cdnUrlModifiers,cdnUrl:n.cdnUrl??r.cdnUrl??null,validationErrorMessage:n.validationErrorMsg,uploadError:n.uploadError,isUploaded:!!n.uuid&&!!n.fileInfo,isValid:!n.validationErrorMsg&&!n.uploadError,fullPath:n.fullPath,uploadProgress:n.uploadProgress}}getOutputData(t){return(t?this.uploadCollection.findItems(t):this.uploadCollection.items()).map(i=>this.getOutputItem(i))}}oe.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),oe.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...oe.extSrcList});const Dt={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0},aD=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Nl(e){return hh(...aD.filter(t=>typeof e[t]<"u"&&null!==e[t]).map(t=>function $$(e,t){if("number"==typeof t)return Dt[e]!==t?`${e}/${t}`:"";if("boolean"==typeof t)return t&&Dt[e]!==t?`${e}`:"";if("filter"===e){if(!t||Dt[e]===t.amount)return"";let{name:n,amount:r}=t;return`${e}/${n}/${r}`}if("crop"===e){if(!t)return"";let{dimensions:n,coords:r}=t;return`${e}/${n.join("x")}/${r.join(",")}`}return""}(t,e[t])).filter(t=>!!t))}const lD=hh("format/auto","progressive/yes"),En=([e])=>typeof e<"u"?Number(e):void 0,cD=()=>!0,V$={enhance:En,brightness:En,exposure:En,gamma:En,contrast:En,saturation:En,vibrance:En,warmth:En,filter:([e,t])=>({name:e,amount:typeof t<"u"?Number(t):100}),mirror:cD,flip:cD,rotate:En,crop:([e,t])=>({dimensions:Dn(e,"x").map(Number),coords:Dn(t).map(Number)})},qe=Object.freeze({CROP:"crop",TUNING:"tuning",FILTERS:"filters"}),tn=[qe.CROP,qe.TUNING,qe.FILTERS],j$=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],B$=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],H$=["rotate","mirror","flip"],Ri=Object.freeze({brightness:{zero:Dt.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:Dt.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:Dt.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:Dt.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:Dt.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:Dt.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:Dt.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:Dt.enhance,range:[0,100],keypointsNumber:1},filter:{zero:Dt.filter,range:[0,100],keypointsNumber:1}}),Pi={pubkey:"",multiple:!0,multipleMin:0,multipleMax:0,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,sourceList:"local, url, camera, dropbox, gdrive",cloudImageEditorTabs:Al(tn),maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,cropPreset:"",modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:"https://ucarecdn.com",baseUrl:"https://upload.uploadcare.com",socialBaseUrl:"https://social.uploadcare.com",secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",metadata:null},nt=e=>String(e),nn=e=>{const t=Number(e);if(Number.isNaN(t))throw new Error(`Invalid number: "${e}"`);return t},De=e=>{if(typeof e>"u"||null===e)return!1;if("boolean"==typeof e)return e;if("true"===e||""===e)return!0;if("false"===e)return!1;throw new Error(`Invalid boolean: "${e}"`)},q$={pubkey:nt,multiple:De,multipleMin:nn,multipleMax:nn,confirmUpload:De,imgOnly:De,accept:nt,externalSourcesPreferredTypes:nt,store:e=>"auto"===e?e:De(e),cameraMirror:De,sourceList:nt,maxLocalFileSizeBytes:nn,thumbSize:nn,showEmptyList:De,useLocalImageEditor:De,useCloudImageEditor:De,cloudImageEditorTabs:nt,removeCopyright:De,cropPreset:nt,modalScrollLock:De,modalBackdropStrokes:De,sourceListWrap:De,remoteTabSessionKey:nt,cdnCname:nt,baseUrl:nt,socialBaseUrl:nt,secureSignature:nt,secureExpire:nt,secureDeliveryProxy:nt,retryThrottledRequestMaxTimes:nn,multipartMinFileSize:nn,multipartChunkSize:nn,maxConcurrentRequests:nn,multipartMaxConcurrentRequests:nn,multipartMaxAttempts:nn,checkForUrlDuplicates:De,saveUrlForRecurrentUploads:De,groupOutput:De,userAgentIntegration:nt},Ol=Object.keys(Pi),Y$=["metadata"],Rl=Ol.filter(e=>!(e=>Y$.includes(e))(e)),Q$={...Object.fromEntries(Rl.map(e=>[gr(e),e])),...Object.fromEntries(Rl.map(e=>[e.toLowerCase(),e]))},X$={...Object.fromEntries(Ol.map(e=>[gr(e),Ct(e)])),...Object.fromEntries(Ol.map(e=>[e.toLowerCase(),Ct(e)]))};class uD extends Ne{ctxOwner=!0;requireCtxName=!0;constructor(){super(),this.init$={...this.init$,...Object.fromEntries(Object.entries(Pi).map(([t,n])=>[Ct(t),n]))},Object.assign(this,{test:"test"})}initCallback(){super.initCallback();const t=this;for(const n of Rl)this.sub(Ct(n),r=>{r!==Pi[n]&&(t[n]=r)},!1);for(const n of Ol){let r="__"+n;t[r]=t[n],Object.defineProperty(this,n,{set:i=>{if(t[r]=i,Rl.includes(n)){const s=[...new Set([gr(n),n.toLowerCase()])];for(const o of s)typeof i>"u"||null===i?this.removeAttribute(o):this.setAttribute(o,i.toString())}this.$[Ct(n)]!==i&&(this.$[Ct(n)]=typeof i>"u"||null===i?Pi[n]:i)},get:()=>this.$[Ct(n)]}),typeof t[n]<"u"&&null!==t[n]&&(t[n]=t[r])}}attributeChangedCallback(t,n,r){if(n===r)return;const i=Q$[t],o=((e,t)=>{if(!(typeof t>"u"||null===t))try{return q$[e](t)}catch(n){return console.error(`Invalid value for config key "${e}".`,n),Pi[e]}})(i,r)??Pi[i];this[i]=o}}uD.bindAttributes(X$);const J$=uD;let dD=(()=>{class e extends Ne{init$={...this.init$,name:"",path:"",size:"24",viewBox:""};initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{n&&(n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`))}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}return e.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>\n',e})();dD.bindAttributes({name:"name",size:"size"});const ki=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),ao="--lr-img-",fD="unresolved",hD=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),pD=Object.create(null);for(let e in ki)pD[ao+e]=ki[e]?.default||"";class tV extends yl{cssInit$=pD;$$(t){return this.$[ao+t]}set$$(t){for(let n in t)this.$[ao+n]=t[n]}sub$$(t,n){this.sub(ao+t,r=>{null===r||""===r||n(r)})}_fmtAbs(t){return!t.includes("//")&&!hD&&(t=new URL(t,document.baseURI).href),t}_getCdnModifiers(t=""){return Cn(t&&`resize/${t}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||ki.format.default}`,`quality/${this.$$("quality")||ki.quality.default}`)}_getUrlBase(t=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(hD&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let n=this._getCdnModifiers(t);return this.$$("src").startsWith(this.$$("cdn-cname"))?gt(this.$$("src"),n):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(gt(so(this.$$("cdn-cname"),this.$$("uuid")),n)):this.$$("proxy-cname")?this._proxyUrl(gt(this.$$("proxy-cname"),n,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(gt(`https://${this.$$("pubkey")}.ucr.io/`,n,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(t){return this.$$("secure-delivery-proxy")?Jf(this.$$("secure-delivery-proxy"),{previewUrl:t},{transform:r=>window.encodeURIComponent(r)}):t}_getElSize(t,n=1,r=!0){let i=t.getBoundingClientRect(),s=n*Math.round(i.width),o=r?"":n*Math.round(i.height);return s||o?`${s||""}x${o||""}`:null}_setupEventProxy(t){let n=i=>{i.stopPropagation();let s=new Event(i.type,i);this.dispatchEvent(s)},r=["load","error"];for(let i of r)t.addEventListener(i,n)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(fD,""),this.img.onload=()=>{this.img.removeAttribute(fD)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(t=>{ki[t.name]||this.img.setAttribute(t.name,t.value)})}get breakpoints(){return this.$$("breakpoints")?(e=Dn(this.$$("breakpoints")).map(t=>Number(t)),[...new Set(e)]):null;var e}renderBg(t){let n=new Set;this.breakpoints?this.breakpoints.forEach(i=>{n.add(`url("${this._getUrlBase(i+"x")}") ${i}w`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(2*i+"x")}") ${2*i}w`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(3*i+"x")}") ${3*i}w`)}):(n.add(`url("${this._getUrlBase(this._getElSize(t))}") 1x`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,2))}") 2x`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,3))}") 3x`));let r=`image-set(${[...n].join(", ")})`;t.style.setProperty("background-image",r),t.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let t=new Set;return this.breakpoints?this.breakpoints.forEach(n=>{t.add(this._getUrlBase(n+"x")+` ${n}w`),this.$$("hi-res-support")&&t.add(this._getUrlBase(2*n+"x")+` ${2*n}w`),this.$$("ultra-res-support")&&t.add(this._getUrlBase(3*n+"x")+` ${3*n}w`)}):(t.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...t].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(t=>{this.$$("intersection")?this.initIntersection(t,()=>{this.renderBg(t)}):this.renderBg(t)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(t,n){this._isnObserver=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting&&(n(),this._isnObserver.unobserve(t))})},{root:null,rootMargin:"0px"}),this._isnObserver.observe(t),this._observed||(this._observed=new Set),this._observed.add(t)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(t=>{this._isnObserver.unobserve(t)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(ki)}attributeChangedCallback(t,n,r){window.setTimeout(()=>{this.$[ao+t]=r})}}class nV extends tV{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",t=>{this.$$("is-background-for")||(this.img.loading=t?"lazy":"eager")})}}let gD=(()=>{class e extends oe{constructor(){super(),this.init$={...this.init$,"*simpleButtonText":"",withDropZone:!0,onClick:()=>{this.initFlow()}}}initCallback(){super.initCallback(),this.defineAccessor("dropzone",n=>{typeof n>"u"||(this.$.withDropZone=De(n))}),this.subConfigValue("multiple",n=>{this.$["*simpleButtonText"]=this.l10n(n?"upload-files":"upload-file")})}}return e.template='\n  <lr-drop-area set="@disabled: !withDropZone">\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span>{{*simpleButtonText}}</span>\n      <slot></slot>\n      <div class="visual-drop-area"></div>\n    </button>\n  </lr-drop-area>\n',e})();gD.bindAttributes({dropzone:null});let rV=(()=>{class e extends I{historyTracked=!0;activityType="start-from";initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}return e.template=' <div class="content"><slot></slot></div> ',e})();function iV(e){return new Promise(t=>{"function"!=typeof window.FileReader&&t(!1);try{let n=new FileReader;n.onerror=()=>{t(!0)};let r=i=>{"loadend"!==i.type&&n.abort(),t(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(e)}catch{t(!1)}})}function sV(e,t){return new Promise(n=>{let r=0;const i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const c=new File([l],l.name,{type:l.type||t});i.push({type:"file",file:c,fullPath:a.fullPath}),0===r&&n(i)})):a.isDirectory&&o(a.createReader())};let o=a=>{r++,a.readEntries(l=>{r--;for(let c of l)s(c);0===r&&n(i)})};s(e)})}const rt={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let mD=["focus"],gh=new Map;function yD(e){let t=0,n=document.body,r=new Set,s=rt.INACTIVE,o=p=>{e.shouldIgnore()&&p!==rt.INACTIVE||(s!==p&&r.forEach(g=>g(p)),s=p)},a=()=>t>0;r.add(p=>e.onChange(p));let l=()=>{t=0,o(rt.INACTIVE)},c=()=>{t+=1,s===rt.INACTIVE&&o(rt.ACTIVE)},u=()=>{t-=1,a()||o(rt.INACTIVE)},d=p=>{p.preventDefault(),t=0,o(rt.INACTIVE)},f=p=>{if(e.shouldIgnore())return;a()||(t+=1);let g=[p.x,p.y],y=e.element.getBoundingClientRect(),v=Math.floor(function lV(e,t){let n=Math.max(Math.min(e[0],t.x+t.width),t.x),r=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-n)*(e[0]-n)+(e[1]-r)*(e[1]-r))}(g,y)),m=v<100,b=p.composedPath().includes(e.element);gh.set(e.element,v);let D=Math.min(...gh.values())===v;b&&D?(p.preventDefault(),o(rt.OVER)):o(m&&D?rt.NEAR:rt.ACTIVE)},h=function(){var p=ce(function*(g){if(e.shouldIgnore())return;g.preventDefault();let y=yield function oV(e){const t=[],n=[];for(let r=0;r<e.items.length;r++){let i=e.items[r];if(i)if("file"===i.kind){const s=i.type;if("function"==typeof i.webkitGetAsEntry||"function"==typeof i.getAsEntry){let a="function"==typeof i.webkitGetAsEntry?i.webkitGetAsEntry():i.getAsEntry();n.push(sV(a,s).then(l=>{l&&t.push(...l)}));continue}const o=i.getAsFile();o&&n.push(iV(o).then(a=>{a||t.push({type:"file",file:o})}))}else"string"===i.kind&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{t.push({type:"url",url:o}),s(void 0)})}))}return Promise.all(n).then(()=>t)}(g.dataTransfer);e.onItems(y),o(rt.INACTIVE)});return function(y){return p.apply(this,arguments)}}();return n.addEventListener("drop",d),n.addEventListener("dragleave",u),n.addEventListener("dragenter",c),n.addEventListener("dragover",f),e.element.addEventListener("drop",h),mD.forEach(p=>{window.addEventListener(p,l)}),()=>{gh.delete(e.element),n.removeEventListener("drop",d),n.removeEventListener("dragleave",u),n.removeEventListener("dragenter",c),n.removeEventListener("dragover",f),e.element.removeEventListener("drop",h),mD.forEach(p=>{window.removeEventListener(p,l)})}}let vD=(()=>{class e extends oe{constructor(){super(),this.init$={...this.init$,state:rt.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null}}isActive(){if(!this.$.isEnabled)return!1;const n=this.getBoundingClientRect(),r=n.width>0&&n.height>0,i=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),s=window.getComputedStyle(this);return r&&"hidden"!==s.visibility&&"none"!==s.display&&i}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("disabled",r=>{this.set$({isEnabled:!De(r)})}),this.defineAccessor("clickable",r=>{this.set$({isClickable:De(r)})}),this.defineAccessor("with-icon",r=>{this.set$({withIcon:De(r)})}),this.defineAccessor("fullscreen",r=>{this.set$({isFullscreen:De(r)})}),this.defineAccessor("text",r=>{this.set$("string"==typeof r?{text:this.l10n(r)||r}:{text:this.l10n("drop-files-here")})}),this._destroyDropzone=yD({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:r=>{this.$.state=r},onItems:r=>{r.length&&(r.forEach(i=>{"url"===i.type?this.addFileFromUrl(i.url,{source:Bn.DROP_AREA}):"file"===i.type&&this.addFileFromObject(i.file,{source:Bn.DROP_AREA,fullPath:i.fullPath})}),this.uploadCollection.size&&(this.set$({"*currentActivity":I.activities.UPLOAD_LIST}),this.setOrAddState("*modalActive",!0)))}});let n=this.ref["content-wrapper"];n&&(this._destroyContentWrapperDropzone=yD({element:n,onChange:r=>{const i=Object.entries(rt).find(([,s])=>s===r)?.[0].toLowerCase();i&&n.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",r=>{const i=Object.entries(rt).find(([,s])=>s===r)?.[0].toLowerCase();i&&this.setAttribute("drag-state",i)}),this.subConfigValue("sourceList",r=>{const i=Dn(r);this.$.isEnabled=i.includes(oe.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",r=>{this.toggleAttribute("hidden",!r)}),this.sub("isClickable",r=>{this.toggleAttribute("clickable",r)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()||!!this.$.isFullscreen&&[...this.$["lr-drop-area/targets"]].filter(i=>i!==this).filter(i=>i.isActive()).length>0}_couldHandleFiles(){let n=this.cfg.multiple,r=this.cfg.multipleMax,i=this.uploadCollection.size;return!(n&&r&&i>=r||!n&&i>0)}destroyCallback(){super.destroyCallback(),this.$["lr-drop-area/targets"]?.remove?.(this),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}return e.template='\n  <slot>\n    <div data-default-slot hidden></div>\n    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',e})();vD.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});let _D=(()=>{class e extends oe{_registeredTypes={};init$={...this.init$,iconName:"default"};initTypes(){this.registerType({type:oe.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:oe.sourceTypes.URL,activity:I.activities.URL,textKey:"from-url"}),this.registerType({type:oe.sourceTypes.CAMERA,activity:I.activities.CAMERA,onClick:()=>{var r=void 0!==document.createElement("input").capture;return r&&this.openSystemDialog({captureCamera:!0}),!r}}),this.registerType({type:"draw",activity:I.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(oe.extSrcList))this.registerType({type:n,activity:I.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}applyType(n){const r=this._registeredTypes[n];if(!r)return void console.warn("Unsupported source type: "+n);const{textKey:i=n,icon:s=n,activity:o,onClick:a,activityParams:l={}}=r;this.applyL10nKey("src-type",`src-type-${i}`),this.$.iconName=s,this.onclick=c=>{(a?a(c):o)&&this.set$({"*currentActivityParams":l,"*currentActivity":o})}}}return e.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',e})();_D.bindAttributes({type:null});class uV extends Ne{initCallback(){super.initCallback(),this.subConfigValue("sourceList",t=>{let n=Dn(t),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}function mh(e){let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function yh(e="hsl(209, 21%, 65%)",t=32,n=32){return mh(`\n  <svg width="${t}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${e}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}const Ze=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3),LIMIT_OVERFLOW:Symbol(4)});class vr extends oe{pauseRender=!0;_entrySubs=new Set;_entry=null;_isIntersecting=!1;_debouncedGenerateThumb=ht(this._generateThumbnail.bind(this),100);_debouncedCalculateState=ht(this._calculateState.bind(this),100);_renderedOnce=!1;constructor(){super(),this.init$={...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,isLimitOverflow:!1,state:Ze.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.$["*currentActivity"]=this.hasBlockInCtx(t=>t.activityType===I.activities.DETAILS)?I.activities.DETAILS:I.activities.CLOUD_IMG_EDIT},onRemove:()=>{let t=this._entry.getValue("uuid");if(t){let n=this.getOutputData(r=>r.getValue("uuid")===t);this.emit(ve.REMOVE,n,{debounce:!0})}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}}}_reset(){for(let t of this._entrySubs)t.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(t){let[n]=t;this._isIntersecting=n.isIntersecting,n.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===n.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let t=this._entry,n=Ze.IDLE;t.getValue("uploadError")||t.getValue("validationErrorMsg")?n=Ze.FAILED:t.getValue("validationMultipleLimitMsg")?n=Ze.LIMIT_OVERFLOW:t.getValue("isUploading")?n=Ze.UPLOADING:t.getValue("fileInfo")&&(n=Ze.FINISHED),this.$.state=n}_generateThumbnail(){var t=this;return ce(function*(){if(!t._entry)return;let n=t._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let r=t.cfg.thumbSize,i=t.proxyUrl(gt(so(t.cfg.cdnCname,t._entry.getValue("uuid")),Cn(n.getValue("cdnUrlModifiers"),`scale_crop/${r}x${r}/center`))),s=n.getValue("thumbUrl");s!==i&&(n.setValue("thumbUrl",i),s?.startsWith("blob:")&&URL.revokeObjectURL(s))}else if(!n.getValue("thumbUrl"))if(n.getValue("file")?.type.includes("image"))try{let r=yield function fV(e,t=40){if("image/svg+xml"===e.type)return URL.createObjectURL(e);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=t,n.height=t*l):(n.height=t,n.width=t/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(c=>{if(!c)return void a();let u=URL.createObjectURL(c);o(u)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(e),s}(n.getValue("file"),t.cfg.thumbSize);n.setValue("thumbUrl",r)}catch{let i=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",yh(i))}else{let r=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",yh(r))}})()}_subEntry(t,n){let r=this._entry.subscribe(t,i=>{this.isConnected&&n(i)});this._entrySubs.add(r)}_handleEntryId(t){this._reset();let n=this.uploadCollection?.read(t);this._entry=n,n&&(this._subEntry("uploadProgress",r=>{this.$.progressValue=r}),this._subEntry("fileName",r=>{this.$.itemName=r||n.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",r=>{this.$.itemName=n.getValue("fileName")||r||this.l10n("file-no-name")}),this._subEntry("uuid",r=>{this._debouncedCalculateState(),r&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",r=>{this.$.thumbUrl=r?`url(${r})`:""}),this._subEntry("validationMultipleLimitMsg",()=>this._debouncedCalculateState()),this._subEntry("validationErrorMsg",()=>this._debouncedCalculateState()),this._subEntry("uploadError",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",t=>{this._handleEntryId(t)}),this.sub("state",t=>{this._handleState(t)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{vr.activeInstances.forEach(t=>{t===this?t.setAttribute("focused",""):t.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",t=>{t&&setTimeout(()=>this.isConnected&&this.upload())}),vr.activeInstances.add(this)}_handleState(t){this.set$({isFailed:t===Ze.FAILED,isLimitOverflow:t===Ze.LIMIT_OVERFLOW,isUploading:t===Ze.UPLOADING,isFinished:t===Ze.FINISHED,progressVisible:t===Ze.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&this._entry?.getValue("isImage")&&this._entry?.getValue("cdnUrl"),errorText:this._entry.getValue("uploadError")?.message||this._entry.getValue("validationErrorMsg")||this._entry.getValue("validationMultipleLimitMsg")}),t===Ze.FAILED||t===Ze.LIMIT_OVERFLOW?this.$.badgeIcon="badge-error":t===Ze.FINISHED&&(this.$.badgeIcon="badge-success"),t===Ze.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),vr.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}upload(){var t=this;return ce(function*(){let n=t._entry;if(!t.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("uploadError")||n.getValue("validationErrorMsg")||n.getValue("validationMultipleLimitMsg"))return;const r=t.cfg.multiple?t.cfg.multipleMax:1;if(r&&t.uploadCollection.size>r)return;let i=t.getOutputData(s=>!s.getValue("fileInfo"));t.emit(ve.UPLOAD_START,i,{debounce:!0}),t._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("uploadError",null),n.setValue("validationErrorMsg",null),n.setValue("validationMultipleLimitMsg",null),!n.getValue("file")&&n.getValue("externalUrl")&&(t.$.progressUnknown=!0);try{let s=new AbortController;n.setValue("abortController",s);const o=function(){var l=ce(function*(){const c=t.getUploadClientOptions();return lh(n.getValue("file")||n.getValue("externalUrl")||n.getValue("uuid"),{...c,fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:u=>{u.isComputable&&n.setValue("uploadProgress",100*u.value),t.$.progressUnknown=!u.isComputable},signal:s.signal,metadata:yield t.getMetadataFor(n.uid)})});return function(){return l.apply(this,arguments)}}();let a=yield t.$["*uploadQueue"].add(o);n.setMultipleValues({fileInfo:a,isUploading:!1,fileName:a.originalFilename,fileSize:a.size,isImage:a.isImage,mimeType:a.contentInfo?.mime?.mime??a.mimeType,uuid:a.uuid,cdnUrl:a.cdnUrl}),n===t._entry&&t._debouncedCalculateState()}catch(s){console.warn("Upload error",s),n.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),n===t._entry&&t._debouncedCalculateState(),s instanceof We?s.isCancel||n.setValue("uploadError",s):n.setValue("uploadError",new Error("Unexpected error"))}})()}}vr.template='\n  <div\n    class="inner"\n    set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @limit-overflow: isLimitOverflow; @focused: isFocused"\n  >\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <div class="file-actions">\n      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n        <lr-icon name="edit-file"></lr-icon>\n      </button>\n      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n        <lr-icon name="remove-file"></lr-icon>\n      </button>\n      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n        <lr-icon name="upload"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar\n      class="progress-bar"\n      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"\n    >\n    </lr-progress-bar>\n  </div>\n',vr.activeInstances=new Set;let hV=(()=>{class e extends Ne{static StateConsumerScope="modal";constructor(){super(),this.init$={...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose}}_handleBackdropClick=()=>{this._closeDialog()};_closeDialog=()=>{this.setOrAddState("*modalActive",!1)};_handleDialogClose=()=>{this._closeDialog()};_handleDialogMouseDown=n=>{this._mouseDownTarget=n.target};_handleDialogMouseUp=n=>{n.target===this.ref.dialog&&n.target===this._mouseDownTarget&&this._closeDialog()};show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),"function"==typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.addEventListener("mouseup",this._handleDialogMouseUp);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),document.body.style.overflow=n&&this.cfg.modalScrollLock?"hidden":""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this._mouseDownTarget=void 0,this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("mousedown",this._handleDialogMouseDown),this.ref.dialog.removeEventListener("mouseup",this._handleDialogMouseUp)}}return e.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n',e})();class pV{caption="";text="";iconName="";isError=!1}let gV=(()=>{class e extends Ne{init$={...this.init$,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}};initCallback(){super.initCallback(),this.sub("*message",n=>{n?(this.setAttribute("active",""),this.set$({captionTxt:n.caption||"",msgTxt:n.text||"",iconName:n.isError?"error":"info"}),n.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}return e.template='\n  <div class="heading">\n    <lr-icon set="@name: iconName"></lr-icon>\n    <div class="caption">{{captionTxt}}</div>\n    <button type="button" set="onclick: onClose">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </div>\n  <div class="msg">{{msgTxt}}</div>\n',e})(),mV=(()=>{class e extends oe{historyTracked=!0;activityType=I.activities.UPLOAD_LIST;constructor(){super(),this.init$={...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.uploadAll(),this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let n=this.getOutputData(r=>!!r.getValue("fileInfo"));this.emit(ve.REMOVE,n,{debounce:!0}),this.uploadCollection.clearAll()}}}_debouncedHandleCollectionUpdate=ht(()=>{this.isConnected&&(this._updateUploadsState(),this._updateCountLimitMessage(),!this.couldOpenActivity&&this.$["*currentActivity"]===this.activityType&&this.historyBack())},0);_validateFilesCount(){let n=!!this.cfg.multiple,r=n?this.cfg.multipleMin??0:1,i=n?this.cfg.multipleMax??0:1,s=this.uploadCollection.size,o=!!r&&s<r,a=!!i&&s>i;return{passed:!o&&!a,tooFew:o,tooMany:a,min:r,max:i,exact:i===s}}_updateCountLimitMessage(){let n=this.uploadCollection.size,r=this._validateFilesCount();if(n&&!r.passed){let i=new pV,s=r.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";i.caption=this.l10n("files-count-limit-error-title"),i.text=this.l10n(s,{min:r.min,max:r.max,total:n}),i.isError=!0,this.set$({"*message":i})}else this.set$({"*message":null})}_updateUploadsState(){let n=this.uploadCollection.items(),i={total:n.length,succeed:0,uploading:0,failed:0,limitOverflow:0};for(let h of n){let p=this.uploadCollection.read(h);p.getValue("fileInfo")&&!p.getValue("validationErrorMsg")&&(i.succeed+=1),p.getValue("isUploading")&&(i.uploading+=1),(p.getValue("validationErrorMsg")||p.getValue("uploadError"))&&(i.failed+=1),p.getValue("validationMultipleLimitMsg")&&(i.limitOverflow+=1)}const{passed:s,tooMany:o,exact:a}=this._validateFilesCount();let c=!1,u=!1,d=!1;i.total-i.succeed-i.uploading-i.failed>0&&s?c=!0:(u=!0,d=i.total===i.succeed&&s&&0===i.failed&&0===i.limitOverflow),this.set$({doneBtnVisible:u,doneBtnEnabled:d,uploadBtnVisible:c,addMoreBtnEnabled:0===i.total||!o&&!a,addMoreBtnVisible:!a||this.cfg.multiple,headerText:this._getHeaderText(i)})}_getHeaderText(n){return(i=>this.l10n(`header-${i}`,{count:n[i]}))(n.uploading>0?"uploading":n.failed>0?"failed":n.succeed>0?"succeed":"total")}get couldOpenActivity(){return this.cfg.showEmptyList||this.uploadCollection.size>0}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMin",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMax",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",n=>{!this.couldOpenActivity&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observeProperties(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",n=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),this.cfg.confirmUpload||this.add$({"*uploadTrigger":{}},!0)})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserveProperties(this._debouncedHandleCollectionUpdate)}}return e.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n',e})(),yV=(()=>{class e extends oe{activityType=I.activities.URL;init$={...this.init$,importDisabled:!0,onUpload:n=>{n.preventDefault(),this.addFileFromUrl(this.ref.input.value,{source:Bn.URL_TAB}),this.$["*currentActivity"]=I.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:n=>{this.set$({importDisabled:!n.target.value})}};initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <form class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="submit"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n    ></button>\n  </form>\n',e})();const bD=()=>typeof navigator.permissions<"u";let vV=(()=>{class e extends oe{activityType=I.activities.CAMERA;_unsubPermissions=null;init$={...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:bD(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:n=>{this._selectedCameraId=n.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}};_onActivate=()=>{bD()&&this._subscribePermissions(),this._capture()};_onDeactivate=()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()};_handlePermissionsChange=()=>{this._capture()};_setPermissionsState=ht(n=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized","granted"===n),"granted"===n?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===n?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300);_subscribePermissions(){var n=this;return ce(function*(){try{(yield navigator.permissions.query({name:"camera"})).addEventListener("change",n._handlePermissionsChange)}catch(r){console.log("Failed to use permissions API. Fallback to manual request mode.",r),n._capture()}})()}_capture(){var n=this;return ce(function*(){let r={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};n._selectedCameraId&&(r.video.deviceId={exact:n._selectedCameraId}),n._canvas=document.createElement("canvas"),n._ctx=n._canvas.getContext("2d");try{n._setPermissionsState("prompt");let i=yield navigator.mediaDevices.getUserMedia(r);i.addEventListener("inactive",()=>{n._setPermissionsState("denied")}),n.$.video=i,n._capturing=!0,n._setPermissionsState("granted")}catch(i){n._setPermissionsState("denied"),n.$.originalErrorMessage=i.message}})()}_stopCapture(){this._capturing&&(this.$.video?.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let n=Date.now(),r=`camera-${n}.png`;this._canvas.toBlob(i=>{let s=new File([i],r,{lastModified:n,type:"image/png"});this.addFileFromObject(s,{source:Bn.CAMERA}),this.set$({"*currentActivity":I.activities.UPLOAD_LIST})})}initCallback(){var n=()=>super.initCallback,r=this;return ce(function*(){n().call(r),r.registerActivity(r.activityType,{onActivate:r._onActivate,onDeactivate:r._onDeactivate}),r.subConfigValue("cameraMirror",i=>{r.$.videoTransformCss=i?"scaleX(-1)":null});try{let s=(yield navigator.mediaDevices.enumerateDevices()).filter(o=>"videoinput"===o.kind).map((o,a)=>({text:o.label.trim()||`${r.l10n("caption-camera")} ${a+1}`,value:o.deviceId}));s.length>1&&(r.$.cameraSelectOptions=s,r.$.cameraSelectHidden=!1)}catch{}})()}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span>{{l10nMessage}}</span>\n      <span>{{originalErrorMessage}}</span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n',e})();const bV=class _V extends oe{requireCtxName=!0;initCallback(){this.$["*eventEmitter"].bindTarget(this)}};let wV=(()=>{class e extends oe{activityType=I.activities.DETAILS;pauseRender=!0;init$={...this.init$,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=I.activities.CLOUD_IMG_EDIT)}};showNonImageThumb(){let r=yh(window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),108,108);this.ref.filePreview.setImageUrl(r),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",n=>{if(!n)return;this._entrySubs?this._entrySubs.forEach(s=>{this._entrySubs.delete(s),s.remove()}):this._entrySubs=new Set,this.entry=n;let r=n.getValue("file");if(r){this._file=r;let s=ph(this._file);s&&!n.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),s||this.showNonImageThumb()}let i=(s,o)=>{this._entrySubs.add(this.entry.subscribe(s,o))};i("fileName",s=>{this.$.fileName=s,this.$.onNameInput=()=>{let o=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:o}),this.entry.setValue("fileName",o)}}),i("fileSize",s=>{this.$.fileSize=Number.isFinite(s)?this.fileSizeFmt(s):this.l10n("file-size-unknown")}),i("uploadError",s=>{this.$.errorTxt=s?.message}),i("externalUrl",s=>{s&&(this.entry.getValue("uuid")||this.showNonImageThumb())}),i("cdnUrl",s=>{const o=this.cfg.useCloudImageEditor&&s&&this.entry.getValue("isImage");if(s&&this.ref.filePreview.clear(),this.set$({cdnUrl:s,cloudEditBtnHidden:!o}),s&&this.entry.getValue("isImage")){let a=gt(s,Cn("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(a))}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span l10n="caption-edit-file"></span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <lr-tabs tab-list="tab-view, tab-details">\n      <div tab-ctx="tab-details" class="details">\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-name"></div>\n          <input\n            name="name-input"\n            ref="file_name_input"\n            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"\n            type="text"\n          />\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-size"></div>\n          <div>{{fileSize}}</div>\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="cdn-url"></div>\n          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>\n        </div>\n\n        <div>{{errorTxt}}</div>\n      </div>\n\n      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>\n    </lr-tabs>\n\n    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">\n      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">\n        <lr-icon name="edit"></lr-icon>\n        <span l10n="edit-image"></span>\n      </button>\n      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">\n        <lr-icon name="remove"></lr-icon>\n        <span l10n="remove-from-list"></span>\n      </button>\n      <div></div>\n      <button type="button" class="back-btn primary-btn" set="onclick: onBack">\n        <span l10n="ok"></span>\n      </button>\n    </div>\n  </div>\n',e})();class CV{captionL10nStr="confirm-your-action";messageL10Str="are-you-sure";confirmL10nStr="yes";denyL10nStr="no";confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}let DV=(()=>{class e extends I{activityType=I.activities.CONFIRMATION;_defaults=new CV;init$={...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)};initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":I.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n',e})(),EV=(()=>{class e extends oe{init$={...this.init$,visible:!1,unknown:!1,value:0,"*commonProgress":0};initCallback(){super.initCallback(),this._unobserveCollection=this.uploadCollection.observeProperties(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}destroyCallback(){super.destroyCallback(),this._unobserveCollection?.()}}return e.template='\n  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>\n',e})(),IV=(()=>{class e extends Ne{_value=0;_unknownMode=!1;init$={...this.init$,width:0,opacity:0};initCallback(){super.initCallback(),this.defineAccessor("value",n=>{void 0!==n&&(this._value=n,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)}),this.defineAccessor("unknown",n=>{this._unknownMode=n,this.ref.line.classList.toggle("progress--unknown",n)})}}return e.template=' <div ref="line" class="progress"></div> ',e})();const Hn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";let wD=(()=>{class e extends Ne{init$={...this.init$,checkerboard:!1,src:Hn};constructor(){super()}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${function dV(e="#fff",t="rgba(0, 0, 0, .1)"){return mh(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="${e}" />\n    <rect x="0" y="0" width="10" height="10" fill="${t}" />\n    <rect x="10" y="10" width="10" height="10" fill="${t}" />\n  </svg>`)}()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Hn}}return e.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',e})();wD.bindAttributes({checkerboard:"checkerboard"});const CD="--cfg-ctx-name";class zn extends Ne{get cfgCssCtxName(){return this.getCssData(CD,!0)}get cfgCtxName(){const t=this.getAttribute("ctx-name")?.trim()||this.cfgCssCtxName||this.__cachedCfgCtxName;return this.__cachedCfgCtxName=t,t}connectedCallback(){if(!this.connectedOnce){const t=this.getAttribute("ctx-name")?.trim();t&&this.style.setProperty(CD,`'${t}'`)}super.connectedCallback()}parseCfgProp(t){return{...super.parseCfgProp(t),ctx:de.getCtx(this.cfgCtxName)}}}function DD(...e){return e.reduce((t,n)=>{if("string"==typeof n)return t[n]=!0,t;for(let r of Object.keys(n))t[r]=n[r];return t},{})}function Pt(...e){let t=DD(...e);return Object.keys(t).reduce((n,r)=>(t[r]&&n.push(r),n),[]).join(" ")}function MV(e){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},"*cropPresetList":[],"*tabList":tn,entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Hn,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,cropPreset:"",tabs:Al(tn),"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let t=e.querySelectorAll("img");for(let n of t){let r=n.src;n.src=Hn,n.src=r}e.$["*networkProblems"]=!1},"*on.apply":t=>{if(!t)return;let n=e.$["*originalUrl"],r=Cn(Nl(t),"preview"),i=gt(n,r);e.dispatchEvent(new CustomEvent("apply",{detail:{originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:t},bubbles:!0,composed:!0})),e.remove()},"*on.cancel":()=>{e.remove(),e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const AV=`\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon size="20" name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="${Hn}" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`;let Pl=(()=>{class e extends zn{static className="cloud-image-editor";constructor(){super(),this.init$={...this.init$,...MV(this)}}get ctxName(){return this.autoCtxName}_debouncedShowLoader=ht(this._showLoader.bind(this),300);_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}updateImage(){var n=this;return ce(function*(){if(yield n._waitForSize(),n.$["*tabId"]===qe.CROP?n.$["*cropperEl"].deactivate({reset:!0}):n.$["*faderEl"].deactivate(),n.$["*editorTransformations"]={},n.$.cdnUrl){let r=function x$(e){let t=new URL(e),{pathname:n}=t;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}(n.$.cdnUrl);n.$["*originalUrl"]=so(n.$.cdnUrl,r);let i=function N$(e){let t=tD(e),n=new URL(t),r=n.pathname.indexOf("/-/");return-1===r?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>JC(s))}(n.$.cdnUrl),s=function U$(e){let t={};for(let n of e){let[r,...i]=n.split("/");if(!aD.includes(r))continue;const o=(0,V$[r])(i);t[r]=o}return t}(i);n.$["*editorTransformations"]=s}else{if(!n.$.uuid)throw new Error("No UUID nor CDN URL provided");n.$["*originalUrl"]=so(n.cfg.cdnCname,n.$.uuid)}try{const r=gt(n.$["*originalUrl"],Cn("json")),i=yield fetch(r).then(a=>a.json()),{width:s,height:o}=i;n.$["*imageSize"]={width:s,height:o},n.$["*tabId"]===qe.CROP?n.$["*cropperEl"].activate(n.$["*imageSize"]):n.$["*faderEl"].activate({url:n.$["*originalUrl"]})}catch(r){r&&console.error("Failed to load image info",r)}})()}initEditor(){var n=this;return ce(function*(){try{yield n._waitForSize()}catch(r){return void(n.isConnected&&console.error(r.message))}n.ref["img-el"].addEventListener("load",()=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$.src!==Hn&&(n.$["*networkProblems"]=!1)}),n.ref["img-el"].addEventListener("error",()=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$["*networkProblems"]=!0}),n.sub("src",r=>{let i=n.ref["img-el"];i.src!==r&&(n._imgLoading=!0,i.src=r||Hn)}),n.sub("cropPreset",r=>{n.$["*cropPresetList"]=QC(r)}),n.sub("tabs",r=>{n.$["*tabList"]=(e=>{if(!e)return tn;const t=(e=>e?e.split(",").map(t=>t.trim()):[])(e).filter(n=>tn.includes(n));return 0===t.length?tn:t})(r)}),n.sub("*tabId",r=>{n.ref["img-el"].className=Pt("image",{image_hidden_to_cropper:r===qe.CROP,image_hidden_effects:r!==qe.CROP})}),n.classList.add("editor_ON"),n.sub("*networkProblems",r=>{n.$["presence.networkProblems"]=r,n.$["presence.modalCaption"]=!r}),n.sub("*editorTransformations",r=>{if(0===Object.keys(r).length)return;let i=n.$["*originalUrl"],s=Cn(Nl(r),"preview"),o=gt(i,s);n.dispatchEvent(new CustomEvent("change",{detail:{originalUrl:i,cdnUrlModifiers:s,cdnUrl:o,transformations:r},bubbles:!0,composed:!0}))},!1),n.sub("uuid",r=>r&&n.updateImage()),n.sub("cdnUrl",r=>r&&n.updateImage())})()}}return e.template=AV,e})();Pl.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl","crop-preset":"cropPreset",tabs:"tabs"});let xV=(()=>{class e extends zn{constructor(){super(),this.init$={...this.init$,dragging:!1},this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(n){let r=this.$["*imageBox"];if(!r)return;if(""===n&&r.height<=1&&r.width<=1)return!0;let i=r.height<=1&&(n.includes("n")||n.includes("s")),s=r.width<=1&&(n.includes("e")||n.includes("w"));return i||s}_createBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n,a=this.ref["svg-el"],l=Rt("mask",{id:"backdrop-mask"}),c=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),u=Rt("rect",{x:r,y:i,width:s,height:o,fill:"black"});l.appendChild(c),l.appendChild(u);let d=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});a.appendChild(d),a.appendChild(l),this._backdropMask=l,this._backdropMaskInner=u}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask&&(this._backdropMask.style.display="block")}))}_updateBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n;this._backdropMaskInner&&Ni(this._backdropMaskInner,{x:r,y:i,width:s,height:o})}_updateFrame(){let n=this.$["*cropBox"];if(n&&this._frameGuides&&this._frameThumbs){for(let r of Object.values(this._frameThumbs)){let{direction:i,pathNode:s,interactionNode:o,groupNode:a}=r,l=""===i,c=2===i.length,{x:u,y:d,width:f,height:h}=n;if(l)Ni(o,{x:u+f/3,y:d+h/3,width:f/3,height:h/3});else{const g=Oi(Math.min(f,h)/82/2,0,1);let{d:y,center:v}=c?d$(n,i,g):f$(n,i,g);const m=Math.max(24*Oi(Math.min(f,h)/24/3,0,1),6);Ni(o,{x:v[0]-m,y:v[1]-m,width:2*m,height:2*m}),Ni(s,{d:y})}let p=this._shouldThumbBeDisabled(i);a.setAttribute("class",Pt("thumb",{"thumb--hidden":p,"thumb--visible":!p}))}Ni(this._frameGuides,{x:n.x-.5,y:n.y-.5,width:n.width+1,height:n.height+1})}}_createThumbs(){const n={};for(let r=0;r<3;r++)for(let i=0;i<3;i++){let s=`${["n","","s"][r]}${["w","","e"][i]}`,o=Rt("g");o.classList.add("thumb"),o.setAttribute("with-effects","");let a=Rt("rect",{fill:"transparent"}),l=Rt("path",{stroke:"currentColor",fill:"none","stroke-width":3});o.appendChild(l),o.appendChild(a),n[s]={direction:s,pathNode:l,interactionNode:a,groupNode:o},a.addEventListener("pointerdown",this._handlePointerDown.bind(this,s))}return n}_createGuides(){let n=Rt("svg"),r=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":1,"stroke-opacity":.5});n.appendChild(r);for(let i=1;i<=2;i++){let s=Rt("line",{x1:Tl*i+"%",y1:"0%",x2:Tl*i+"%",y2:"100%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}for(let i=1;i<=2;i++){let s=Rt("line",{x1:"0%",y1:Tl*i+"%",x2:"100%",y2:Tl*i+"%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}return n.classList.add("guides","guides--semi-hidden"),n}_createFrame(){let n=this.ref["svg-el"],r=document.createDocumentFragment(),i=this._createGuides();r.appendChild(i);let s=this._createThumbs();for(let{groupNode:o}of Object.values(s))r.appendChild(o);n.appendChild(r),this._frameThumbs=s,this._frameGuides=i}_handlePointerDown(n,r){if(!this._frameThumbs)return;let i=this._frameThumbs[n];if(this._shouldThumbBeDisabled(n))return;let s=this.$["*cropBox"],{x:o,y:a}=this.ref["svg-el"].getBoundingClientRect(),l=r.x-o,c=r.y-a;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[l,c],this._dragStartCrop={...s}}_handlePointerUp_(n){this._updateCursor(),this.$.dragging&&(n.stopPropagation(),n.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(n){if(!this.$.dragging||!this._dragStartPoint||!this._draggingThumb)return;n.stopPropagation(),n.preventDefault();let r=this.ref["svg-el"],{x:i,y:s}=r.getBoundingClientRect(),l=n.x-i-this._dragStartPoint[0],c=n.y-s-this._dragStartPoint[1],{direction:u}=this._draggingThumb;const d=this._calcCropBox(u,[l,c]);d&&(this.$["*cropBox"]=d)}_calcCropBox(n,r){const[i,s]=r;let o=this.$["*imageBox"],a=this._dragStartCrop??this.$["*cropBox"];const l=this.$["*cropPresetList"]?.[0],c=l?l.width/l.height:void 0;if(a=""===n?function p$({rect:e,delta:[t,n],imageBox:r}){return Sl({...e,x:e.x+t,y:e.y+n},r)}({rect:a,delta:[i,s],imageBox:o}):function D$({direction:e,...t}){switch(e){case"n":return function g$({rect:e,delta:t,aspectRatio:n,imageBox:r}){const[,i]=t;let{y:s,width:o,height:a}=e;s+=i,a-=i,n&&(o=a*n);let l=e.x+e.width/2-o/2;return s<=r.y&&(s=r.y,a=e.y+e.height-s,n&&(o=a*n,l=e.x+e.width/2-o/2)),l<=r.x&&(l=r.x,s=e.y+e.height-a),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=e.y+e.height-a),a<1&&(a=1,n&&(o=a*n,l=e.x+e.width/2-o/2),s=e.y+e.height-a),o<1&&(o=1,n&&(a=o/n,l=e.x+e.width/2-o/2),s=e.y+e.height-a),{x:l,y:s,width:o,height:a}}(t);case"w":return function m$({rect:e,delta:t,aspectRatio:n,imageBox:r}){const[i]=t;let{x:s,width:o,height:a}=e;s+=i,o-=i,n&&(a=o/n);let l=e.y+e.height/2-a/2;return s<=r.x&&(s=r.x,o=e.x+e.width-s,n&&(a=o/n,l=e.y+e.height/2-a/2)),l<=r.y&&(l=r.y,s=e.x+e.width-o),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=e.x+e.width-o),a<1&&(a=1,n&&(o=a*n),l=e.y+e.height/2-a/2,s=e.x+e.width-o),o<1&&(o=1,n&&(a=o/n),l=e.y+e.height/2-a/2,s=e.x+e.width-o),{x:s,y:l,width:o,height:a}}(t);case"s":return function y$({rect:e,delta:t,aspectRatio:n,imageBox:r}){const[,i]=t;let{y:s,width:o,height:a}=e;a+=i,n&&(o=a*n);let l=e.x+e.width/2-o/2;return s+a>=r.y+r.height&&(a=r.y+r.height-s,n&&(o=a*n),l=e.x+e.width/2-o/2),l<=r.x&&(l=r.x,s=e.y),l+o>=r.x+r.width&&(l=Math.max(r.x,r.x+r.width-o),o=r.x+r.width-l,n&&(a=o/n),s=e.y),a<1&&(a=1,n&&(o=a*n),l=e.x+e.width/2-o/2),o<1&&(o=1,n&&(a=o/n),l=e.x+e.width/2-o/2),{x:l,y:s,width:o,height:a}}(t);case"e":return function v$({rect:e,delta:t,aspectRatio:n,imageBox:r}){const[i]=t;let{x:s,width:o,height:a}=e;o+=i,n&&(a=o/n);let l=e.y+e.height/2-a/2;return s+o>=r.x+r.width&&(o=r.x+r.width-s,n&&(a=o/n),l=e.y+e.height/2-a/2),l<=r.y&&(l=r.y,s=e.x),l+a>=r.y+r.height&&(l=Math.max(r.y,r.y+r.height-a),a=r.y+r.height-l,n&&(o=a*n),s=e.x),a<1&&(a=1,n&&(o=a*n),l=e.y+e.height/2-a/2),o<1&&(o=1,n&&(a=o/n),l=e.y+e.height/2-a/2),{x:s,y:l,width:o,height:a}}(t);case"nw":return function _$({rect:e,delta:t,aspectRatio:n,imageBox:r}){let[i,s]=t,{x:o,y:a,width:l,height:c}=e;return o+i<r.x&&(i=r.x-o),a+s<r.y&&(s=r.y-a),o+=i,l-=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c-=r.y-a,l=c*n,o=e.x+e.width-l,a=r.y)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l-=r.x-o,c=l/n,o=r.x,a=e.y+e.height-c)),c<1&&(c=1,n&&(l=c*n),o=e.x+e.width-l,a=e.y+e.height-c),l<1&&(l=1,n&&(c=l/n),o=e.x+e.width-l,a=e.y+e.height-c),{x:o,y:a,width:l,height:c}}(t);case"ne":return function b$({rect:e,delta:t,aspectRatio:n,imageBox:r}){let[i,s]=t,{x:o,y:a,width:l,height:c}=e;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+s<r.y&&(s=r.y-a),l+=i,a+=s,c-=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a-=s,a<=r.y&&(c-=r.y-a,l=c*n,o=e.x,a=r.y)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=e.y+e.height-c)),c<1&&(c=1,n&&(l=c*n),a=e.y+e.height-c),l<1&&(l=1,n&&(c=l/n),a=e.y+e.height-c),{x:o,y:a,width:l,height:c}}(t);case"sw":return function w$({rect:e,delta:t,aspectRatio:n,imageBox:r}){let[i,s]=t,{x:o,y:a,width:l,height:c}=e;return o+i<r.x&&(i=r.x-o),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),o+=i,l-=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=e.x+e.width-l,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o-=i,o<=r.x&&(l-=r.x-o,c=l/n,o=r.x,a=e.y)),c<1&&(c=1,n&&(l=c*n),o=e.x+e.width-l),l<1&&(l=1,n&&(c=l/n),o=e.x+e.width-l),{x:o,y:a,width:l,height:c}}(t);case"se":return function C$({rect:e,delta:t,aspectRatio:n,imageBox:r}){let[i,s]=t,{x:o,y:a,width:l,height:c}=e;return o+l+i>r.x+r.width&&(i=r.x+r.width-o-l),a+c+s>r.y+r.height&&(s=r.y+r.height-a-c),l+=i,c+=s,n&&Math.abs(l/c)>n?(s=l/n-c,c+=s,a+c>=r.y+r.height&&(c=r.y+r.height-a,l=c*n,o=e.x,a=r.y+r.height-c)):n&&(i=c*n-l,l+=i,o+l>=r.x+r.width&&(l=r.x+r.width-o,c=l/n,o=r.x+r.width-l,a=e.y)),c<1&&(c=1,n&&(l=c*n)),l<1&&(l=1,n&&(c=l/n)),{x:o,y:a,width:l,height:c}}(t);default:return t.rect}}({rect:a,delta:[i,s],direction:n,aspectRatio:c,imageBox:o}),Object.values(a).every(u=>Number.isFinite(u)&&u>=0))return Sl(Ml(a),this.$["*imageBox"]);console.error("CropFrame is trying to create invalid rectangle",{payload:a})}_handleSvgPointerMove_(n){if(!this._frameThumbs)return;let r=Object.values(this._frameThumbs).find(i=>{if(this._shouldThumbBeDisabled(i.direction))return!1;let o=i.interactionNode.getBoundingClientRect();return function E$(e,[t,n]){return e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height}({x:o.x,y:o.y,width:o.width,height:o.height},[n.x,n.y])});this._hoverThumb=r,this._updateCursor()}_updateCursor(){let n=this._hoverThumb;this.ref["svg-el"].style.cursor=n?function h$(e){return""===e?"move":["e","w"].includes(e)?"ew-resize":["n","s"].includes(e)?"ns-resize":["nw","se"].includes(e)?"nwse-resize":"nesw-resize"}(n.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(n){this._frameThumbs&&Object.values(this._frameThumbs).map(({groupNode:r})=>r).forEach(r=>{r.setAttribute("class",Pt("thumb",{"thumb--hidden":!n,"thumb--visible":n}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",n=>{n&&(this._guidesHidden=n.height<=1||n.width<=1,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",n=>{this._frameGuides&&this._frameGuides.setAttribute("class",Pt({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&n,"guides--semi-hidden":!this._guidesHidden&&!n}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}return e.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ',e})(),vh=(()=>{class e extends zn{init$={...this.init$,active:!1,title:"",icon:"","on.click":null};initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Pt({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}return e.template='\n  <div class="before"></div>\n  <lr-icon size="20" set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n',e})();class ED extends vh{initCallback(){super.initCallback(),this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t)}),this.$["on.click"]=t=>{let n=this.$["*cropperEl"].getValue(this._operation),r=function OV(e,t){return"rotate"===e?function NV(e){let t=e+90;return t=t>=360?0:t,t}(t):["mirror","flip"].includes(e)?!t:null}(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const Gn="original";let RV=(()=>{class e extends zn{init$={...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":n=>{this.$["*faderEl"].set(n),this.$.value=n}};setOperation(n,r){this._controlType="filter"===n?"filter":"color_operation",this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===Gn?void 0:this.$.value,filter:this._filter===Gn?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=Ri[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if("filter"===this._controlType){let a=s;if(o){let{name:l,amount:c}=o;a=l===this._filter?c:s}this.$.value=a,this.$.defaultValue=a}if("color_operation"===this._controlType){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;n="filter"===this._controlType?this._filter===Gn?null:{name:this._filter,amount:this.$.value}:this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{this.$["*operationTooltip"]=`${this._filter||this._operation} ${n}`})}}return e.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n',e})();function _h(e){let t=new Image;return{promise:new Promise((i,s)=>{t.src=e,t.onload=i,t.onerror=s}),image:t,cancel:()=>{0===t.naturalWidth&&(t.src=Hn)}}}function bh(e){let t=[];for(let s of e){let o=_h(s);t.push(o)}let n=t.map(s=>s.image);return{promise:Promise.allSettled(t.map(s=>s.promise)),images:n,cancel:()=>{t.forEach(s=>{s.cancel()})}}}let ID=(()=>{class e extends vh{init$={...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null};_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==Gn?{name:this._filter,amount:100}:void 0,gt(this._originalUrl,Cn(lD,Nl(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=_h(s);this._cancelPreload=l,a.catch(c=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:c})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===Gn,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._originalUrl=this.$["*originalUrl"],this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;this.ref["icon-el"].style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload&&this._cancelPreload()}}return e.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n',e})();class TD extends vh{_operation="";initCallback(){super.initCallback(),this.$["on.click"]=t=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t,this.$.title=this.l10n(t))}),this.sub("*editorTransformations",t=>{if(!this._operation)return;let{zero:n}=Ri[this._operation],r=t[this._operation];this.$.active=typeof r<"u"&&r!==n})}}function wh(e,t,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(t*i),3e3),o=i>=2?"lightest":"normal";return gt(e,Cn(lD,Nl(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}let FV=(()=>{class e extends zn{constructor(){super(),this.init$={...this.init$,image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}},this._commitDebounced=ht(this._commit.bind(this),300),this._handleResizeThrottled=((e,t)=>{let n,r,i;return(...s)=>{n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-i>=100&&(e(...s),i=Date.now())},Math.max(100-(Date.now()-i),0))):(e(...s),i=Date.now(),n=!0)}})(this._handleResize.bind(this)),this._imageSize={width:0,height:0}}_handleResize(){!this.isConnected||!this._isActive||(this._initCanvas(),this._syncTransformations(),this._alignImage(),this._alignCrop(),this._draw())}_syncTransformations(){let r=function kV(e,t){let n={};for(let r of t){let i=e[r];(e.hasOwnProperty(r)||void 0!==i)&&(n[r]=i)}return n}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r?.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let l,n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o_width=this.offsetWidth,o_height=this.offsetHeight,a=io({width:n.naturalWidth,height:n.naturalHeight},s);if(a.width>o_width-2*r||a.height>o_height-2*r){let c=a.width/a.height;if(c>o_width/o_height){let d=o_width-2*r,f=d/c;l={x:0+r,y:r+(o_height-2*r)/2-f/2,width:d,height:f}}else{let d=o_height-2*r,f=d*c;l={x:r+(o_width-2*r)/2-f/2,y:0+r,width:f,height:d}}}else{let{width:c,height:u}=a;l={x:r+(o_width-2*r)/2-c/2,y:r+(o_height-2*r)/2-u/2,width:c,height:u}}this.$["*imageBox"]=Ml(l)}_alignCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop,{width:a,x:l,y:c}=this.$["*imageBox"];if(o){let{dimensions:[f,h],coords:[p,g]}=o,{width:y}=io(this._imageSize,s),v=a/y;n=Sl(Ml({x:l+p*v,y:c+g*v,width:f*v,height:h*v}),this.$["*imageBox"])}const u=this.$["*cropPresetList"]?.[0],d=u?u.width/u.height:void 0;if(!function I$(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}(n,r)||d&&!function T$(e,t){return Math.abs(e.width/e.height-t)<.1}(n,d)){let h=r.width,p=r.height;d&&(r.width/r.height>d?h=Math.min(r.height*d,r.width):p=Math.min(r.width/d,r.height)),n={x:r.x+r.width/2-h/2,y:r.y+r.height/2-p/2,width:h,height:p}}this.$["*cropBox"]=Sl(Ml(n),this.$["*imageBox"])}_drawImage(){let n=this._ctx;if(!n)return;let r=this.$.image,i=this.$["*imageBox"],s=this.$["*operations"],{mirror:o,flip:a,rotate:l}=s,c=io({width:i.width,height:i.height},l);n.save(),n.translate(i.x+i.width/2,i.y+i.height/2),n.rotate(l*Math.PI*-1/180),n.scale(o?-1:1,a?-1:1),n.drawImage(r,-c.width/2,-c.height/2,c.width,c.height),n.restore()}_draw(){if(!(this._isActive&&this.$.image&&this._canvas&&this._ctx))return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Pt({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_getCropDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:c}=io(this._imageSize,s),{width:u,height:d}=n,h=a/c;return[Oi(Math.round(u/(o/l)),1,l),Oi(Math.round(d/h),1,c)]}_getCropTransformation(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:c}=r,{width:u,height:d}=io(this._imageSize,s),{x:f,y:h}=n,p=o/u,g=a/d,y=this._getCropDimensions(),v={dimensions:y,coords:[Oi(Math.round((f-l)/p),0,u-y[0]),Oi(Math.round((h-c)/g),0,d-y[1])]};if(function LV(e){return!e||[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(e))}(v))return y[0]!==u||y[1]!==d?v:void 0;console.error("Cropper is trying to create invalid crop object",{payload:v})}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._getCropTransformation(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){console.log(`Apply cropper operation [${n}=${r}]`),this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}activate(n,{fromViewer:r}={}){var i=this;return ce(function*(){if(!i._isActive){i._isActive=!0,i._imageSize=n,i.removeEventListener("transitionend",i._reset);try{i.$.image=yield i._waitForImage(i.$["*originalUrl"],i.$["*editorTransformations"]),i._syncTransformations(),i._animateIn({fromViewer:r})}catch(s){console.error("Failed to activate cropper",{error:s})}i._observer=new ResizeObserver(([s])=>{s.contentRect.width>0&&s.contentRect.height>0&&i._isActive&&i.$.image&&i._handleResizeThrottled()}),i._observer.observe(i)}})()}deactivate({reset:n=!1}={}){this._isActive&&(!n&&this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Pt({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}),this._observer?.disconnect())}_transitionToCrop(){let n=this._getCropDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(wh(n,i,r)),{promise:o,cancel:a,image:l}=_h(s),c=this._handleImageLoading(s);return l.addEventListener("load",c,{once:!0}),l.addEventListener("error",c,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(u=>(console.error("Failed to load image",{error:u}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{i?.get(r)?.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",()=>{this.$.image&&this._commitDebounced()}),this.sub("*cropPresetList",()=>{this._alignCrop()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}return e.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n',e})();function SD(e,t,n){let r=Array(n);for(let i=--n;i>=0;i--)r[i]=Math.ceil((i*t+(n-i)*e)/n);return r}function MD(e,t){let n=Ri[e].keypointsNumber,{range:r,zero:i}=Ri[e];return[...new Set([...SD(r[0],i,n+1),...SD(i,r[1],n+1),i,t])].sort((s,o)=>s-o)}class jV extends zn{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=ht(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(t){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(t)||(r.set(n,r.get(n).set(t,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(n)?.has(t)&&(r.get(n).delete(t),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let t of this._keypoints){let{image:n}=t;n&&(n.style.opacity=t.opacity.toString(),n.style.zIndex=t.zIndex.toString())}})}_imageSrc({url:t=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};return r&&(s[r]=n?{name:n,amount:i}:i),this.proxyUrl(wh(t,this.offsetWidth,s))}_constructKeypoint(t,n){return{src:this._imageSrc({operation:t,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(t,n){return this._operation===t&&this._filter===n}_addKeypoint(t,n,r){let i=()=>!this._isSame(t,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(t,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,c=l.findIndex(d=>d.value>r),u=c<l.length?l[c].image:null;!this._container||u&&!this._container.contains(u)||(l.splice(c,0,s),this._container.insertBefore(o,u),this._update(t,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(t){t="string"==typeof t?parseInt(t,10):t,this._update(this._operation,t),this._addKeypointDebounced(this._operation,this._filter,t)}_update(t,n){this._operation=t,this._value=n;let{zero:r}=Ri[t],i=this._keypoints.map(a=>a.value),s=function VV(e,t,n){let r=function $V(e){return e.reduce((t,n,r)=>r<e.length-1?[...t,[n,e[r+1]]]:t,[])}(e).find(([i,s])=>i<=t&&t<=s);return e.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(t-r[0])/s;return r[0]===i?t>n?1:1-o:r[1]===i?t>=n?o:1:0})}(i,n,r),o=function UV(e,t){return e.map((n,r)=>n<t?e.length-r:r)}(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let t=new Image;return t.classList.add("fader-image","fader-image--preview"),t.style.opacity="0",t}_initNodes(){var t=this;return ce(function*(){let n=document.createDocumentFragment();t._previewImage=t._previewImage||t._createPreviewImage(),!t.contains(t._previewImage)&&n.appendChild(t._previewImage);let r=document.createElement("div");n.appendChild(r);let i=t._keypoints.map(u=>u.src),{images:s,promise:o,cancel:a}=bh(i);s.forEach(u=>{let d=t._handleImageLoading(u.src);u.addEventListener("load",d),u.addEventListener("error",d)}),t._cancelLastImages=()=>{a(),t._cancelLastImages=void 0};let l=t._operation,c=t._filter;yield o,t._isActive&&t._isSame(l,c)&&(t._container&&t._container.remove(),t._container=r,t._keypoints.forEach((u,d)=>{let f=s[d];f.classList.add("fader-image"),u.image=f,t._container.appendChild(f)}),t.appendChild(n),t._flush())})()}setTransformations(t){if(this._transformations=t,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:t,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=MD(r,i).map(l=>this._imageSrc({url:t,filter:n,operation:r,value:l})),{cancel:a}=bh(o);this._cancelBatchPreload=a}_setOriginalSrc(t){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===t)return n.style.opacity="1",n.style.transform="scale(1)",void(this.className=Pt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));n.style.opacity="0";let r=this._handleImageLoading(t);n.addEventListener("error",r,{once:!0}),n.src=t,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Pt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:t,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=t,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,"number"!=typeof r&&!i){let a=this._imageSrc({operation:n,value:r});return this._setOriginalSrc(a),void(this._container&&this._container.remove())}this._keypoints=MD(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:t=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),t&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Pt({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}let HV=(()=>{class e extends zn{initCallback(){super.initCallback(),this.addEventListener("wheel",n=>{n.preventDefault();let{deltaY:r,deltaX:i}=n;Math.abs(i)>1?this.scrollLeft+=i:this.scrollLeft+=r})}}return e.template=" <slot></slot> ",e})();class AD extends zn{constructor(){super(),this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":Gn,"*currentOperation":null,"*tabId":qe.CROP,showLoader:!1,filters:B$,colorOperations:j$,cropOperations:H$,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabToggles":!0,"presence.tabContent.crop":!1,"presence.tabContent.tuning":!1,"presence.tabContent.filters":!1,"presence.tabToggle.crop":!0,"presence.tabToggle.tuning":!0,"presence.tabToggle.filters":!0,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"presence.tabToggleStyles":{hidden:"tab-toggle--hidden",visible:"tab-toggle--visible"},"presence.tabTogglesStyles":{hidden:"tab-toggles--hidden",visible:"tab-toggles--visible"},"on.cancel":()=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":()=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":()=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":()=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":t=>{const n=t.currentTarget.getAttribute("data-id");n&&this._activateTab(n,{fromViewer:!1})}},this._debouncedShowLoader=ht(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,this.$["*tabId"]===qe.TUNING&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(t){let n=new TD;return n.operation=t,n}_createFilterControl(t){let n=new ID;return n.filter=t,n}_createToggleControl(t){let n=new ED;return n.operation=t,n}_renderControlsList(t){let n=this.ref[`controls-list-${t}`],r=document.createDocumentFragment();t===qe.CROP?this.$.cropOperations.forEach(i=>{let s=this._createToggleControl(i);r.appendChild(s)}):t===qe.FILTERS?[Gn,...this.$.filters].forEach(i=>{let s=this._createFilterControl(i);r.appendChild(s)}):t===qe.TUNING&&this.$.colorOperations.forEach(i=>{let s=this._createOperationControl(i);r.appendChild(s)}),[...r.children].forEach((i,s)=>{s===r.childNodes.length-1&&i.classList.add("controls-list_last-item")}),n.innerHTML="",n.appendChild(r)}_activateTab(t,{fromViewer:n}){this.$["*tabId"]=t,t===qe.CROP?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:n})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:n}),this.$["*cropperEl"].deactivate());for(let r of tn){let i=r===t;this.ref[`tab-toggle-${r}`].active=i,i?(this._renderControlsList(t),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=i}}_unmountTabControls(t){let n=this.ref[`controls-list-${t}`];n&&(n.innerHTML="")}_syncTabIndicator(){this.ref["tabs-indicator"].style.transform=`translateX(${this.ref[`tab-toggle-${this.$["*tabId"]}`].offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.proxyUrl(wh(this.$["*originalUrl"],this.$["*imgContainerEl"].offsetWidth,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:r}=bh([n]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(t){this.$.showLoader=t}_updateInfoTooltip=ht(()=>{const t=this.$["*editorTransformations"],n=this.$["*currentOperation"];let r="",i=!1;if(this.$["*tabId"]===qe.FILTERS)if(i=!0,this.$["*currentFilter"]&&t?.filter?.name===this.$["*currentFilter"]){let s=t?.filter?.amount||100;r=this.l10n(this.$["*currentFilter"])+" "+s}else r=this.l10n(Gn);else this.$["*tabId"]===qe.TUNING&&n&&(i=!0,r=n+" "+(t?.[n]||Ri[n].zero));i&&(this.$["*operationTooltip"]=r),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",i)},0);initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",t=>{t&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",t=>{let n=t?.filter?.name;this.$["*currentFilter"]!==n&&(this.$["*currentFilter"]=n)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",()=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",t=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(t)}),this.sub("*loadingOperations",t=>{let n=!1;for(let[,r]of t.entries()){if(n)break;for(let[,i]of r.entries())if(i){n=!0;break}}this._debouncedShowLoader(n)}),this.sub("*showSlider",t=>{this.$["presence.subToolbar"]=t,this.$["presence.mainToolbar"]=!t}),this.sub("*tabList",t=>{this.$["presence.tabToggles"]=t.length>1;for(const n of tn)this.$[`presence.tabToggle.${n}`]=t.includes(n),this.ref[`tab-toggle-${n}`].style.gridColumn=t.indexOf(n)+1;t.includes(this.$["*tabId"])||this._activateTab(t[0],{fromViewer:!1})}),this._updateInfoTooltip()}}AD.template=`\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">${tn.map(function GV(e){return`\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${e}; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-${e}"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `}).join("")}</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <lr-presence-toggle class="tab-toggles" set="visible: presence.tabToggles; styles: presence.tabTogglesStyles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ${tn.map(function zV(e){return`\n    <lr-presence-toggle class="tab-toggle" set="visible: presence.tabToggle.${e}; styles: presence.tabToggleStyles;">\n      <lr-btn-ui\n        theme="boring"\n        ref="tab-toggle-${e}"\n        data-id="${e}"\n        icon="${e}"\n        tabindex="0"\n        set="onclick: on.clickTab;"\n      >\n      </lr-btn-ui>\n    </lr-presence-toggle>\n  `}).join("")}\n        </lr-presence-toggle>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;class Ch extends Ne{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",t=>{t?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Pt("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",t=>{this._iconSingle=!this.$.text,this._iconHidden=!t,this.$.iconCss=this._iconCss()}),this.sub("theme",t=>{"custom"!==t&&(this.className=t)}),this.sub("text",t=>{this._iconSingle=!1}),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(t){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Ch.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),Ch.template='\n  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>\n  <div class="text">{{text}}</div>\n';let WV=(()=>{class e extends Ne{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let n=this.ref["line-el"];n.style.transition="initial",n.style.opacity="0",n.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",n=>{"boolean"==typeof n&&(n?this._start():this._stop())})}_start(){this._active=!0;let{width:n}=this.getBoundingClientRect(),r=this.ref["line-el"];r.style.transition="transform 1s",r.style.opacity="1",r.style.transform=`translateX(${n}px)`,r.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}return e.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n',e})();let qV=(()=>{class e extends Ne{constructor(){super(),this._visible=!1,this._visibleStyle="visible",this._hiddenStyle="hidden",this._externalTransitions=!1,this.defineAccessor("styles",n=>{n&&(this._externalTransitions=!0,this._visibleStyle=n.visible,this._hiddenStyle=n.hidden)}),this.defineAccessor("visible",n=>{"boolean"==typeof n&&(this._visible=n,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",function TV(e,...t){let n=DD(...t);for(let r of Object.keys(n))e.classList.toggle(r,n[r])}(this,{transition:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add("transition"),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}return e.template=" <slot></slot> ",e})(),ZV=(()=>{class e extends Ne{init$={...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}};constructor(){super(),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;this._zeroDotEl.style.opacity=n===this._zero?"0":"0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),c=document.createElement("div");l.className="minor-step",c.className="border-step",a.appendChild(c);for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(c.cloneNode());let u=document.createElement("div");u.className="zero-dot",a.appendChild(u),this._zeroDotEl=u,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){this._observer?.disconnect()}}return e.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n',e})();class YV extends oe{activityType=I.activities.CLOUD_IMG_EDIT;constructor(){super(),this.init$={...this.init$,cdnUrl:null}}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",t=>{t&&(this.entry=t,this.entry.subscribe("cdnUrl",n=>{n&&(this.$.cdnUrl=n)}))}),this.subConfigValue("cropPreset",t=>{this._instance&&this._instance.getAttribute("crop-preset")!==t&&this._instance.setAttribute("crop-preset",t)}),this.subConfigValue("cloudImageEditorTabs",t=>{this._instance&&this._instance.getAttribute("tabs")!==t&&this._instance.setAttribute("tabs",t)})}handleApply(t){if(!this.entry)return;let n=t.detail;this.entry.setMultipleValues({cdnUrl:n.cdnUrl,cdnUrlModifiers:n.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){const t=new Pl,n=this.$.cdnUrl,r=this.cfg.cropPreset,i=this.cfg.cloudImageEditorTabs;t.setAttribute("ctx-name",this.ctxName),t.setAttribute("cdn-url",n),r&&t.setAttribute("crop-preset",r),i&&t.setAttribute("tabs",i),t.addEventListener("apply",s=>this.handleApply(s)),t.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(t),this._mounted=!0,this._instance=t}unmountEditor(){this._instance=void 0,this.innerHTML=""}}const KV=function(e){return e.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},QV=function(e,t="i"){const n=e.split("*").map(KV);return new RegExp("^"+n.join(".+")+"$",t)};function JV({textColor:e,backgroundColor:t,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return(e=>Object.keys(e).reduce((n,r)=>{let i=e[r];return n+`${r}{${Object.keys(i).reduce((o,a)=>o+`${a}: ${i[a]};`,"")}}`},""))({body:{color:e,"background-color":t},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${t} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let Wn={};window.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch{return}if(t?.type in Wn){let n=Wn[t.type];for(let[r,i]of n)e.source===r&&i(t)}});let rU=(()=>{class e extends oe{activityType=I.activities.EXTERNAL;constructor(){super(),this.init$={...this.init$,activityIcon:"",activityCaption:"",selectedList:[],counter:0,onDone:()=>{for(const n of this.$.selectedList){const r=this.extractUrlFromMessage(n),{filename:i}=n,{externalSourceType:s}=this.activityParams;this.addFileFromUrl(r,{fileName:i,source:s})}this.$["*currentActivity"]=I.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}}_iframe=null;initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n?.[0].toUpperCase()}${n?.slice(1)}`,activityIcon:n}),this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()}),this.sub("selectedList",n=>{this.$.counter=n.length})}extractUrlFromMessage(n){if(n.alternatives){const r=Dn(this.cfg.externalSourcesPreferredTypes);for(const i of r){const s=QV(i);for(const[o,a]of Object.entries(n.alternatives))if(s.test(o))return a}}return n.url}sendMessage(n){this._iframe?.contentWindow?.postMessage(JSON.stringify(n),"*")}handleFileSelected(n){var r=this;return ce(function*(){r.$.selectedList=[...r.$.selectedList,n]})()}handleIframeLoad(){this.applyStyles()}updateCssData=()=>{this.isActivityActive&&(this._inheritedUpdateCssData(),this.applyStyles())};_inheritedUpdateCssData=this.updateCssData;getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:JV(n)})}remoteUrl(){let n=this.cfg.pubkey,r=(!1).toString(),{externalSourceType:i}=this.activityParams,s={lang:this.getCssData("--l10n-locale-name")?.split("-")?.[0]||"en",public_key:n,images_only:r,pass_window_open:!1,session_key:this.cfg.remoteTabSessionKey},o=new URL(this.cfg.socialBaseUrl);return o.pathname=`/window3/${i}`,o.search=function nU(e){let t=[];for(let[n,r]of Object.entries(e))null==r||"string"==typeof r&&0===r.length||t.push(`${n}=${encodeURIComponent(r)}`);return t.join("&")}(s),o.toString()}mountIframe(){let n=Qf({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),function(e,t,n){e in Wn||(Wn[e]=[]),Wn[e].push([t,n])}("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n,this.$.selectedList=[]}unmountIframe(){this._iframe&&function(e,t){e in Wn&&(Wn[e]=Wn[e].filter(n=>n[0]!==t))}("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null,this.$.selectedList=[],this.$.counter=0}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();class Dh extends Ne{setCurrentTab(t){if(t){[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===t?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===t?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",t=>{t&&Dn(t).forEach(r=>{let i=Qf({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",t=>{this.setCurrentTab(t)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Dh.bindAttributes({"tab-list":null,default:null}),Dh.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';class Ll extends oe{processInnerHtml=!0;requireCtxName=!0;constructor(){super(),this.init$={...this.init$,output:null}}get dict(){return Ll.dict}get validationInput(){return this._validationInputElement}initCallback(){var t=this;if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer);let n=document.createElement("input");n.type="text",n.name="__UPLOADCARE_VALIDATION_INPUT__",n.required=this.hasAttribute(this.dict.INPUT_REQUIRED),n.tabIndex=-1,mC(n,{opacity:0,height:0,width:0}),this.appendChild(n),this._validationInputElement=n}this.sub("output",n=>{if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:n}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&this._dynamicInputsContainer){this._dynamicInputsContainer.innerHTML="";let r=[],i=[];Array.isArray(n)?(r=n.map(s=>s.cdnUrl),i=n):n?.files&&(r=n.groupData?[n.groupData.cdnUrl]:[],i=n.files);for(let s of r){let o=document.createElement("input");o.type="hidden",o.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,o.value=s??"",this._dynamicInputsContainer.appendChild(o)}if(this._validationInputElement){this._validationInputElement.value=r.length?"__VALUE__":"";const s=i.find(c=>!c.isValid),o=s?.validationErrorMessage??s?.uploadError?.message;let a=this.$["*message"];a=a?.isError?`${a.caption}. ${a.text}`:void 0;this._validationInputElement.setCustomValidity((o??a)||"")}}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(n)},!1),this.sub(this.dict.SRC_CTX_KEY,function(){var n=ce(function*(r){if(r&&r.length)if(t.cfg.groupOutput||t.hasAttribute(t.dict.GROUP_ATTR)){if(!r.every(l=>l.isUploaded&&l.isValid))return void(t.$.output={groupData:void 0,files:r});const s=t.getUploadClientOptions(),o=r.map(l=>l.uuid+(l.cdnUrlModifiers?`/${l.cdnUrlModifiers}`:"")),a=yield zC(o,s);t.$.output={groupData:a,files:r}}else t.$.output=r;else t.$.output=null});return function(r){return n.apply(this,arguments)}}(),!1)}}Ll.dict=Object.freeze({SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"});class iU extends I{}let sU=(()=>{class e extends Ne{init$={...this.init$,currentText:"",options:[],selectHtml:"",onSelect:n=>{n.preventDefault(),n.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find(r=>r.value==this.value)?.text||"",this.dispatchEvent(new Event("change"))}};initCallback(){super.initCallback(),this.sub("options",n=>{this.$.currentText=n?.[0]?.text||"";let r="";n?.forEach(i=>{r+=`<option value="${i.value}">${i.text}</option>`}),this.$.selectHtml=r})}}return e.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n',e})();let ND=(()=>{class e extends Ne{togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()})(this)}toggleCaptions(){"captions-off"===this.$.capIcon?(this.$.capIcon="captions",this._video.textTracks[0].mode="showing",window.localStorage.setItem(e.is+":captions","1")):(this.$.capIcon="captions-off",this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(e.is+":captions"))}toggleSound(){"unmute"===this.$.volIcon?(this.$.volIcon="mute",this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon="unmute",this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(e.is+":volume",n),this._video.volume=n?n/100:0}get progress(){return this.ref.progress}init$={...this.init$,src:"",ppIcon:"play",fsIcon:"fullscreen-on",volIcon:"unmute",capIcon:"captions-off",totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:n=>{let r=parseFloat(n.currentTarget.$.value);this.setVolume(r)},progressClicked:n=>{let r=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(n.offsetX/r.width)}};_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s="src"===i?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(1e3*Math.round(n));return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(e.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){var n=this;super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon="pause",this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon="play",this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",i=>{console.log(i),this.$.fsIcon=document.fullscreenElement===this?"fullscreen-off":"fullscreen-on"}),this.sub("src",i=>{if(!i)return;let s=this._getUrl(i);this._video.src=s}),this.sub("video",function(){var i=ce(function*(s){if(!s)return;let o=yield(yield window.fetch(n._getUrl(s))).json();o.poster&&(n._video.poster=n._getUrl(o.poster));let a="";o?.sources.forEach(l=>{a+=`<source ${n._desc2attrs(l)} />`}),o.tracks&&(o.tracks.forEach(l=>{a+=`<track ${n._desc2attrs(l)} />`}),n.$.hasSubtitles=!0),n._video.innerHTML+=a,n._initTracks(),console.log(o)});return function(s){return i.apply(this,arguments)}}()),this._video.addEventListener("loadedmetadata",i=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",i=>{let s=Math.round(this._video.currentTime/this._video.duration*100);this.$.progressCssWidth=s+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let r=window.localStorage.getItem(e.is+":volume");if(r){let i=parseFloat(r);this.setVolume(i),this.$.volumeValue=i}}}return e.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();ND.bindAttributes({video:"video",src:"src"});const oU="css-src";function Eh(e){return class extends e{renderShadow=!0;pauseRender=!0;requireCtxName=!0;shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden",""),DC({element:this,attribute:oU,onSuccess:t=>{this.attachShadow({mode:"open"});let n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,n.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.prepend(n)},onTimeout:()=>{console.error("Attribute `css-src` is required and it is not set. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/")}})}}}class OD extends(Eh(Ne)){}let aU=(()=>class e extends Ne{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",n=>{this.toggleAttribute("hidden",!!n)})}static template='\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      >Powered by Uploadcare</a\n    >\n  '})();class Ih extends OD{requireCtxName=!0;init$=qC(this);_template=null;static set template(t){this._template=t+"<slot></slot>"}static get template(){return this._template}}let lU=(()=>{class e extends Ih{}return e.template='\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <button type="button" l10n="start-from-cancel" class="secondary-btn" set="onclick: *historyBack"></button>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>\n  </lr-modal>\n\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar-common></lr-progress-bar-common>\n',e})(),cU=(()=>{class e extends Ih{pauseRender=!0;shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||I.activities.START_FROM)}),this.sub("*uploadList",r=>{this.$["*currentActivity"]=r?.length>0?I.activities.UPLOAD_LIST:n.initActivity||I.activities.START_FROM}),this.subConfigValue("sourceList",r=>{"local"!==r&&(this.cfg.sourceList="local")}),this.subConfigValue("confirmUpload",r=>{!1!==r&&(this.cfg.confirmUpload=!1)})}}return e.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-message-box></lr-message-box>\n',e})(),uU=(()=>{class e extends Ih{constructor(){super(),this.init$={...this.init$,couldCancel:!1,cancel:()=>{this.couldHistoryBack?this.$["*historyBack"]():this.couldShowList&&(this.$["*currentActivity"]=I.activities.UPLOAD_LIST)}}}get couldHistoryBack(){const n=this.$["*history"];return n.length>1&&n[n.length-1]!==I.activities.START_FROM}get couldShowList(){return this.cfg.showEmptyList||this.$["*uploadList"].length>0}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||I.activities.START_FROM)}),this.sub("*uploadList",r=>{r?.length>0&&this.$["*currentActivity"]===(n.initActivity||I.activities.START_FROM)&&(this.$["*currentActivity"]=I.activities.UPLOAD_LIST)}),this.sub("*history",()=>{this.$.couldCancel=this.couldHistoryBack||this.couldShowList})}}return e.template=' <lr-start-from>\n    <lr-drop-area with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <button\n      type="button"\n      l10n="start-from-cancel"\n      class="cancel-btn secondary-btn"\n      set="onclick: cancel; @hidden: !couldCancel"\n    ></button>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>',e})();class dU extends(Eh(Pl)){shadowReadyCallback(){this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}initEditor(){var t=()=>super.initEditor,n=this;return ce(function*(){n.__shadowReady&&(yield t().call(n))})()}}const Th="LR";function fU(e){return Sh.apply(this,arguments)}function Sh(){return(Sh=ce(function*(e,t=!1){return new Promise((n,r)=>{if("object"!=typeof document)return void n(null);if("object"==typeof window&&window[Th])return void n(window[Th]);let i=document.createElement("script");i.async=!0,i.src=e,i.onerror=()=>{r()},i.onload=()=>{let s=window[Th];t&&qf(s),n(s)},document.head.appendChild(i)})})).apply(this,arguments)}function hU(e,t){if(1&e&&Fa(0,"img",6),2&e){const n=t.$implicit;Vd("src","https://ucarecdn.com/",n.uuid,"/",n.cdnUrlModifiers||"","-/preview/-/scale_crop/400x400/",Su)}}qf(Vi);let pU=(()=>{class e{constructor(){this.files=[],this.cssSrc=`https://unpkg.com/@uploadcare/blocks@${fh}/web/lr-file-uploader-regular.min.css`}handleUploaderEvent(n){const{data:r}=n.detail;this.files=r}static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275cmp=kp({type:e,selectors:[["app-root"]],decls:6,vars:2,consts:[[1,"wrapper"],["ctx-name","my-uploader","pubkey","demopublickey","multiple","true","multipleMax","10","confirmUpload","true","sourceList","local, url, camera, dropbox, gdrive"],["ctx-name","my-uploader"],["ctx-name","my-uploader","use-event","","hidden","",3,"lr-data-output"],[1,"output"],["width","200",3,"src",4,"ngFor","ngForOf"],["width","200",3,"src"]],template:function(r,i){1&r&&(_i(0,"div",0),Fa(1,"lr-config",1)(2,"lr-file-uploader-regular",2),_i(3,"lr-data-output",3),Fd("lr-data-output",function(o){return i.handleUploaderEvent(o)}),$s(),_i(4,"div",4),fi(5,hU,1,2,"img",5),$s()()),2&r&&(Bu(2),sd("css-src",i.cssSrc),Bu(3),cd("ngForOf",i.files))},dependencies:[Vw],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:32px;padding:32px}.output[_ngcontent-%COMP%]{display:grid;grid-gap:8px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%;max-width:1000px}"]})}return e})(),gU=(()=>{class e{static#e=this.\u0275fac=function(r){return new(r||e)};static#t=this.\u0275mod=Zi({type:e,bootstrap:[pU]});static#n=this.\u0275inj=wr({imports:[O1]})}return e})();x1().bootstrapModule(gU).catch(e=>console.error(e))}},Fl=>{Fl(Fl.s=905)}]);