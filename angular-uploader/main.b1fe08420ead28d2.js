"use strict";(self.webpackChunkangular_uploader=self.webpackChunkangular_uploader||[]).push([[179],{997:(Ua,rf,Va)=>{var di={};function _e(e){return"function"==typeof e}function sf(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Va.r(di),Va.d(di,{ActivityBlock:()=>L,ActivityHeader:()=>N1,BaseComponent:()=>ma,Block:()=>Ie,CameraSource:()=>Pk,CloudImageEditor:()=>$1,CloudImageEditorActivity:()=>w1,CloudImageEditorBlock:()=>Ra,Config:()=>Hb,ConfirmationDialog:()=>$k,Copyright:()=>P1,CropFrame:()=>i1,Data:()=>te,DataOutput:()=>$a,DropArea:()=>eD,EditorCropButtonControl:()=>Gd,EditorFilterControl:()=>Yd,EditorImageCropper:()=>c1,EditorImageFader:()=>p1,EditorOperationControl:()=>Zd,EditorScroller:()=>m1,EditorSlider:()=>a1,EditorToolbar:()=>pD,ExternalSource:()=>x1,FileItem:()=>lr,FilePreview:()=>rD,FileUploaderInline:()=>L1,FileUploaderMinimal:()=>F1,FileUploaderRegular:()=>k1,Icon:()=>jb,Img:()=>vk,LineLoaderUi:()=>_1,LrBtnUi:()=>Xd,MessageBox:()=>Nk,Modal:()=>Pn,PACKAGE_NAME:()=>Vb,PACKAGE_VERSION:()=>Ld,PresenceToggle:()=>b1,ProgressBar:()=>Vk,ProgressBarCommon:()=>Uk,Select:()=>O1,ShadowWrapper:()=>yD,SimpleBtn:()=>_k,SliderUi:()=>D1,SourceBtn:()=>tD,SourceList:()=>Tk,StartFrom:()=>bk,Tabs:()=>Qd,UploadCtxProvider:()=>kk,UploadDetails:()=>Fk,UploadList:()=>Ok,UploaderBlock:()=>re,UrlSource:()=>Rk,Video:()=>mD,connectBlocksFrom:()=>U1,registerBlocks:()=>yd,shadowed:()=>Jd,toKebabCase:()=>or});const Ba=sf(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ha(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Ft{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(_e(r))try{r()}catch(s){t=s instanceof Ba?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{lf(s)}catch(o){t=t??[],o instanceof Ba?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Ba(t)}}add(t){var n;if(t&&t!==this)if(this.closed)lf(t);else{if(t instanceof Ft){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ha(n,t)}remove(t){const{_finalizers:n}=this;n&&Ha(n,t),t instanceof Ft&&t._removeParent(this)}}Ft.EMPTY=(()=>{const e=new Ft;return e.closed=!0,e})();const of=Ft.EMPTY;function af(e){return e instanceof Ft||e&&"closed"in e&&_e(e.remove)&&_e(e.add)&&_e(e.unsubscribe)}function lf(e){_e(e)?e():e.unsubscribe()}const Vn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ts={setTimeout(e,t,...n){const{delegate:r}=Ts;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Ts;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function uf(e){Ts.setTimeout(()=>{const{onUnhandledError:t}=Vn;if(!t)throw e;t(e)})}function cf(){}const vD=ja("C",void 0,void 0);function ja(e,t,n){return{kind:e,value:t,error:n}}let Bn=null;function As(e){if(Vn.useDeprecatedSynchronousErrorHandling){const t=!Bn;if(t&&(Bn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Bn;if(Bn=null,n)throw r}}else e()}class za extends Ft{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,af(t)&&t.add(this)):this.destination=SD}static create(t,n,r){return new fi(t,n,r)}next(t){this.isStopped?Wa(function bD(e){return ja("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Wa(function _D(e){return ja("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Wa(vD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wD=Function.prototype.bind;function Ga(e,t){return wD.call(e,t)}class CD{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ms(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ms(r)}else Ms(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ms(n)}}}class fi extends za{constructor(t,n,r){let i;if(super(),_e(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Vn.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ga(t.next,s),error:t.error&&Ga(t.error,s),complete:t.complete&&Ga(t.complete,s)}):i=t}this.destination=new CD(i)}}function Ms(e){Vn.useDeprecatedSynchronousErrorHandling?function DD(e){Vn.useDeprecatedSynchronousErrorHandling&&Bn&&(Bn.errorThrown=!0,Bn.error=e)}(e):uf(e)}function Wa(e,t){const{onStoppedNotification:n}=Vn;n&&Ts.setTimeout(()=>n(e,t))}const SD={closed:!0,next:cf,error:function ED(e){throw e},complete:cf},qa="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ya(e){return e}let je=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function TD(e){return e&&e instanceof za||function ID(e){return e&&_e(e.next)&&_e(e.error)&&_e(e.complete)}(e)&&af(e)}(n)?n:new fi(n,r,i);return As(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ff(r))((i,s)=>{const o=new fi({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[qa](){return this}pipe(...n){return function df(e){return 0===e.length?Ya:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=ff(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return e.create=t=>new e(t),e})();function ff(e){var t;return null!==(t=e??Vn.Promise)&&void 0!==t?t:Promise}const AD=sf(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let xs=(()=>{class e extends je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new hf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new AD}next(n){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){As(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?of:(this.currentObservers=null,s.push(n),new Ft(()=>{this.currentObservers=null,Ha(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new je;return n.source=this,n}}return e.create=(t,n)=>new hf(t,n),e})();class hf extends xs{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:of}}class MD extends xs{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Hn(e){return t=>{if(function xD(e){return _e(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function jn(e,t,n,r,i){return new ND(e,t,n,r,i)}class ND extends za{constructor(t,n,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Dn(e){return this instanceof Dn?(this.v=e,this):new Dn(e)}function yf(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Qa(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=e[s](o)).done,o.value)})}}}const vf=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function _f(e){return _e(e?.then)}function bf(e){return _e(e[qa])}function Df(e){return Symbol.asyncIterator&&_e(e?.[Symbol.asyncIterator])}function wf(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Cf=function XD(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ef(e){return _e(e?.[Cf])}function Sf(e){return function mf(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){s.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{!function l(f){f.value instanceof Dn?Promise.resolve(f.value.v).then(u,c):d(s[0][2],f)}(r[f](h))}catch(p){d(s[0][3],p)}}function u(f){a("next",f)}function c(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Dn(n.read());if(i)return yield Dn(void 0);yield yield Dn(r)}}finally{n.releaseLock()}})}function If(e){return _e(e?.getReader)}function nn(e){if(e instanceof je)return e;if(null!=e){if(bf(e))return function QD(e){return new je(t=>{const n=e[qa]();if(_e(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(vf(e))return function JD(e){return new je(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(_f(e))return function ew(e){return new je(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,uf)})}(e);if(Df(e))return Tf(e);if(Ef(e))return function tw(e){return new je(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(If(e))return function nw(e){return Tf(Sf(e))}(e)}throw wf(e)}function Tf(e){return new je(t=>{(function rw(e,t){var n,r,i,s;return function pf(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=yf(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function wn(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function Af(e,t,n=1/0){return _e(t)?Af((r,i)=>function OD(e,t){return Hn((n,r)=>{let i=0;n.subscribe(jn(r,s=>{r.next(e.call(t,s,i++))}))})}((s,o)=>t(r,s,i,o))(nn(e(r,i))),n):("number"==typeof t&&(n=t),Hn((r,i)=>function iw(e,t,n,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const f=()=>{d&&!l.length&&!u&&t.complete()},h=g=>u<r?p(g):l.push(g),p=g=>{s&&t.next(g),u++;let v=!1;nn(n(g,c++)).subscribe(jn(t,_=>{i?.(_),s?h(_):t.next(_)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;l.length&&u<r;){const _=l.shift();o?wn(t,o,()=>p(_)):p(_)}f()}catch(_){t.error(_)}}))};return e.subscribe(jn(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const Mf=new je(e=>e.complete());function Ja(e){return e[e.length-1]}function xf(e){return function aw(e){return e&&_e(e.schedule)}(Ja(e))?e.pop():void 0}function Nf(e,t=0){return Hn((n,r)=>{n.subscribe(jn(r,i=>wn(r,e,()=>r.next(i),t),()=>wn(r,e,()=>r.complete(),t),i=>wn(r,e,()=>r.error(i),t)))})}function Of(e,t=0){return Hn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function Rf(e,t){if(!e)throw new Error("Iterable cannot be null");return new je(n=>{wn(n,t,()=>{const r=e[Symbol.asyncIterator]();wn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Pf(e,t){return t?function pw(e,t){if(null!=e){if(bf(e))return function uw(e,t){return nn(e).pipe(Of(t),Nf(t))}(e,t);if(vf(e))return function dw(e,t){return new je(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(_f(e))return function cw(e,t){return nn(e).pipe(Of(t),Nf(t))}(e,t);if(Df(e))return Rf(e,t);if(Ef(e))return function fw(e,t){return new je(n=>{let r;return wn(n,t,()=>{r=e[Cf](),wn(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>_e(r?.return)&&r.return()})}(e,t);if(If(e))return function hw(e,t){return Rf(Sf(e),t)}(e,t)}throw wf(e)}(e,t):nn(e)}function gw(...e){const t=xf(e),n=function lw(e,t){return"number"==typeof Ja(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?nn(r[0]):function sw(e=1/0){return Af(Ya,e)}(n)(Pf(r,t)):Mf}function kf(e={}){const{connector:t=(()=>new xs),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let o,a,l,u=0,c=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),o=l=void 0,c=d=!1},p=()=>{const g=o;h(),g?.unsubscribe()};return Hn((g,v)=>{u++,!d&&!c&&f();const _=l=l??t();v.add(()=>{u--,0===u&&!d&&!c&&(a=el(p,i))}),_.subscribe(v),!o&&u>0&&(o=new fi({next:m=>_.next(m),error:m=>{d=!0,f(),a=el(h,n,m),_.error(m)},complete:()=>{c=!0,f(),a=el(h,r),_.complete()}}),nn(g).subscribe(o))})(s)}}function el(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new fi({next:()=>{r.unsubscribe(),e()}});return nn(t(...n)).subscribe(r)}function _w(e,t){return e===t}function K(e){for(let t in e)if(e[t]===K)return t;throw Error("Could not find renamed property on target object.")}function be(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(be).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function tl(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const bw=K({__forward_ref__:K});function nl(e){return e.__forward_ref__=nl,e.toString=function(){return be(this())},e}function N(e){return function rl(e){return"function"==typeof e&&e.hasOwnProperty(bw)&&e.__forward_ref__===nl}(e)?e():e}function il(e){return e&&!!e.\u0275providers}const Ff="https://g.co/ng/security#xss";class E extends Error{constructor(t,n){super(function Os(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function O(e){return"string"==typeof e?e:null==e?"":String(e)}function Rs(e,t){throw new E(-201,!1)}function ct(e,t){null==e&&function Z(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function Q(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function cr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ps(e){return Lf(e,ks)||Lf(e,Uf)}function Lf(e,t){return e.hasOwnProperty(t)?e[t]:null}function $f(e){return e&&(e.hasOwnProperty(sl)||e.hasOwnProperty(Tw))?e[sl]:null}const ks=K({\u0275prov:K}),sl=K({\u0275inj:K}),Uf=K({ngInjectableDef:K}),Tw=K({ngInjectorDef:K});var x=(()=>((x=x||{})[x.Default=0]="Default",x[x.Host=1]="Host",x[x.Self=2]="Self",x[x.SkipSelf=4]="SkipSelf",x[x.Optional=8]="Optional",x))();let ol;function ze(e){const t=ol;return ol=e,t}function Bf(e,t,n){const r=Ps(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==t?t:void Rs(be(e))}const J=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hi={},al="__NG_DI_FLAG__",Fs="ngTempTokenPath",Mw=/\n/gm,Hf="__source";let dr;function En(e){const t=dr;return dr=e,t}function Ow(e,t=x.Default){if(void 0===dr)throw new E(-203,!1);return null===dr?Bf(e,void 0,t):dr.get(e,t&x.Optional?null:void 0,t)}function z(e,t=x.Default){return(function Vf(){return ol}()||Ow)(N(e),t)}function ie(e,t=x.Default){return z(e,Ls(t))}function Ls(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ll(e){const t=[];for(let n=0;n<e.length;n++){const r=N(e[n]);if(Array.isArray(r)){if(0===r.length)throw new E(900,!1);let i,s=x.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Rw(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}t.push(z(i,s))}else t.push(z(r))}return t}function pi(e,t){return e[al]=t,e.prototype[al]=t,e}function Rw(e){return e[al]}function rn(e){return{toString:e}.toString()}var Lt=(()=>((Lt=Lt||{})[Lt.OnPush=0]="OnPush",Lt[Lt.Default=1]="Default",Lt))(),nt=(()=>{return(e=nt||(nt={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",nt;var e})();const $t={},W=[],$s=K({\u0275cmp:K}),ul=K({\u0275dir:K}),cl=K({\u0275pipe:K}),zf=K({\u0275mod:K}),sn=K({\u0275fac:K}),gi=K({__NG_ELEMENT_ID__:K}),Gf=K({__NG_ENV_ID__:K});function Wf(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}function dl(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];e.setAttribute(t,o,a,s)}else{const s=i,o=n[++r];Yf(s)?e.setProperty(t,s,o):e.setAttribute(t,s,o),r++}}return r}function qf(e){return 3===e||4===e||6===e}function Yf(e){return 64===e.charCodeAt(0)}function mi(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Zf(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Zf(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const a=e[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<e.length;){const a=e[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}const Kf="ng-template";function Fw(e,t,n){let r=0,i=!0;for(;r<e.length;){let s=e[r++];if("string"==typeof s&&i){const o=e[r++];if(n&&"class"===s&&-1!==Wf(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;r<e.length&&"string"==typeof(s=e[r++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Xf(e){return 4===e.type&&e.value!==Kf}function Lw(e,t,n){return t===(4!==e.type||n?e.value:Kf)}function $w(e,t,n){let r=4;const i=e.attrs||[],s=function Bw(e){for(let t=0;t<e.length;t++)if(qf(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!Lw(e,l,n)||""===l&&1===t.length){if(Dt(r))return!1;o=!0}}else{const u=8&r?l:t[++a];if(8&r&&null!==e.attrs){if(!Fw(e.attrs,u,n)){if(Dt(r))return!1;o=!0}continue}const d=Uw(8&r?"class":l,i,Xf(e),n);if(-1===d){if(Dt(r))return!1;o=!0;continue}if(""!==u){let f;f=d>s?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Wf(h,u,0)||2&r&&u!==f){if(Dt(r))return!1;o=!0}}}}else{if(!o&&!Dt(r)&&!Dt(l))return!1;if(o&&Dt(l))continue;o=!1,r=l|1&r}}return Dt(r)||o}function Dt(e){return 0==(1&e)}function Uw(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const o=t[i];if(o===e)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function Hw(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Qf(e,t,n=!1){for(let r=0;r<t.length;r++)if($w(e,t[r],n))return!0;return!1}function Jf(e,t){return e?":not("+t.trim()+")":t}function zw(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const a=e[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Dt(o)&&(t+=Jf(s,i),i=""),r=o,s=s||!Dt(r);n++}return""!==i&&(t+=Jf(s,i)),t}function eh(e){return rn(()=>{const t=nh(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Lt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||nt.Emulated,styles:e.styles||W,_:null,schemas:e.schemas||null,tView:null,id:""};rh(n);const r=e.dependencies;return n.directiveDefs=Us(r,!1),n.pipeDefs=Us(r,!0),n.id=function Qw(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function Yw(e){return q(e)||Me(e)}function Zw(e){return null!==e}function yi(e){return rn(()=>({type:e.type,bootstrap:e.bootstrap||W,declarations:e.declarations||W,imports:e.imports||W,exports:e.exports||W,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function th(e,t){if(null==e)return $t;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}function dt(e){return rn(()=>{const t=nh(e);return rh(t),t})}function q(e){return e[$s]||null}function Me(e){return e[ul]||null}function We(e){return e[cl]||null}function nh(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||$t,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||W,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:th(e.inputs,t),outputs:th(e.outputs)}}function rh(e){e.features?.forEach(t=>t(e))}function Us(e,t){if(!e)return null;const n=t?We:Yw;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Zw)}const De=0,C=1,R=2,oe=3,wt=4,_i=5,xe=6,fr=7,he=8,hr=9,zn=10,P=11,bi=12,ih=13,pr=14,pe=15,Di=16,gr=17,Ut=18,wi=19,sh=20,Sn=21,on=22,Vs=23,Bs=24,j=25,fl=1,oh=2,Vt=7,mr=9,Ne=11;function it(e){return Array.isArray(e)&&"object"==typeof e[fl]}function qe(e){return Array.isArray(e)&&!0===e[fl]}function hl(e){return 0!=(4&e.flags)}function Gn(e){return e.componentOffset>-1}function js(e){return 1==(1&e.flags)}function Ct(e){return!!e.template}function pl(e){return 0!=(512&e[R])}function Wn(e,t){return e.hasOwnProperty(sn)?e[sn]:null}let iC=J.WeakRef??class rC{constructor(t){this.ref=t}deref(){return this.ref}},oC=0,Bt=null,zs=!1;function Te(e){const t=Bt;return Bt=e,t}class dh{constructor(){this.id=oC++,this.ref=function sC(e){return new iC(e)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[t,n]of this.producers){const r=n.producerNode.deref();if(void 0!==r&&n.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(n.seenValueVersion))return!0}else this.producers.delete(t),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const t=zs;zs=!0;try{for(const[n,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(n),i?.producers.delete(this.id))}}finally{zs=t}}producerAccessed(){if(zs)throw new Error("");if(null===Bt)return;let t=Bt.producers.get(this.id);void 0===t?(t={consumerNode:Bt.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Bt.trackingVersion},Bt.producers.set(this.id,t),this.consumers.set(Bt.id,t)):(t.seenValueVersion=this.valueVersion,t.atTrackingVersion=Bt.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Bt?.consumerAllowSignalWrites}producerPollStatus(t){return this.valueVersion!==t||(this.onProducerUpdateValueVersion(),this.valueVersion!==t)}}let fh=null;const ph=()=>{};class cC extends dh{constructor(t,n,r){super(),this.watch=t,this.schedule=n,this.dirty=!1,this.cleanupFn=ph,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const t=Te(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ph,this.watch(this.registerOnCleanup)}finally{Te(t)}}cleanup(){this.cleanupFn()}}class dC{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function gh(e){return e.type.prototype.ngOnChanges&&(e.setInput=hC),fC}function fC(){const e=yh(this),t=e?.current;if(t){const n=e.previous;if(n===$t)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function hC(e,t,n,r){const i=this.declaredInputs[n],s=yh(e)||function pC(e,t){return e[mh]=t}(e,{previous:$t,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new dC(l&&l.currentValue,t,a===$t),e[r]=t}const mh="__ngSimpleChanges__";function yh(e){return e[mh]||null}const Ht=function(e,t,n){};function ne(e){for(;Array.isArray(e);)e=e[De];return e}function Ye(e,t){return ne(t[e.index])}function bh(e,t){return e.data[t]}function st(e,t){const n=t[e];return it(n)?n:n[De]}function In(e,t){return null==t?null:e[t]}function Dh(e){e[gr]=0}function DC(e){1024&e[R]||(e[R]|=1024,Ch(e,1))}function wh(e){1024&e[R]&&(e[R]&=-1025,Ch(e,-1))}function Ch(e,t){let n=e[oe];if(null===n)return;n[_i]+=t;let r=n;for(n=n[oe];null!==n&&(1===t&&1===r[_i]||-1===t&&0===r[_i]);)n[_i]+=t,r=n,n=n[oe]}const M={lFrame:Ph(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ih(){return M.bindingsEnabled}function b(){return M.lFrame.lView}function G(){return M.lFrame.tView}function Ae(){let e=Th();for(;null!==e&&64===e.type;)e=e.parent;return e}function Th(){return M.lFrame.currentTNode}function jt(e,t){const n=M.lFrame;n.currentTNode=e,n.isParent=t}function bl(){return M.lFrame.isParent}function _r(){return M.lFrame.bindingIndex++}function kC(e,t){const n=M.lFrame;n.bindingIndex=n.bindingRootIndex=e,wl(t)}function wl(e){M.lFrame.currentDirectiveIndex=e}function El(e){M.lFrame.currentQueryIndex=e}function LC(e){const t=e[C];return 2===t.type?t.declTNode:1===t.type?e[xe]:null}function Oh(e,t,n){if(n&x.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&x.Host||(i=LC(s),null===i||(s=s[pr],10&i.type))););if(null===i)return!1;t=i,e=s}const r=M.lFrame=Rh();return r.currentTNode=t,r.lView=e,!0}function Sl(e){const t=Rh(),n=e[C];M.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Rh(){const e=M.lFrame,t=null===e?null:e.child;return null===t?Ph(e):t}function Ph(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function kh(){const e=M.lFrame;return M.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Fh=kh;function Il(){const e=kh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Fe(){return M.lFrame.selectedIndex}function qn(e){M.lFrame.selectedIndex=e}function ae(){const e=M.lFrame;return bh(e.tView,e.selectedIndex)}let $h=!0;function Zs(){return $h}function Tn(e){$h=e}function Ks(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),null!=c&&(e.destroyHooks??=[]).push(n,c)}}function Xs(e,t,n){Uh(e,t,3,n)}function Qs(e,t,n,r){(3&e[R])===n&&Uh(e,t,n,r)}function Tl(e,t){let n=e[R];(3&n)===t&&(n&=8191,n+=1,e[R]=n)}function Uh(e,t,n,r){const s=r??-1,o=t.length-1;let a=0;for(let l=void 0!==r?65535&e[gr]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=r&&a>=r)break}else t[l]<0&&(e[gr]+=65536),(a<s||-1==s)&&(GC(e,n,t,l),e[gr]=(4294901760&e[gr])+l+2),l++}function Vh(e,t){Ht(4,e,t);const n=Te(null);try{t.call(e)}finally{Te(n),Ht(5,e,t)}}function GC(e,t,n,r){const i=n[r]<0,s=n[r+1],a=e[i?-n[r]:n[r]];i?e[R]>>13<e[gr]>>16&&(3&e[R])===t&&(e[R]+=8192,Vh(a,s)):Vh(a,s)}const br=-1;class Si{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Bh(e){return e!==br}function Js(e){return 32767&e}function eo(e,t){let n=function ZC(e){return e>>16}(e),r=t;for(;n>0;)r=r[pr],n--;return r}let Ml=!0;function to(e){const t=Ml;return Ml=e,t}const Hh=255,jh=5;let KC=0;const zt={};function no(e,t){const n=zh(e,t);if(-1!==n)return n;const r=t[C];r.firstCreatePass&&(e.injectorIndex=t.length,xl(r.data,e),xl(t,null),xl(r.blueprint,null));const i=Nl(e,t),s=e.injectorIndex;if(Bh(i)){const o=Js(i),a=eo(i,t),l=a[C].data;for(let u=0;u<8;u++)t[s+u]=a[o+u]|l[o+u]}return t[s+8]=i,s}function xl(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zh(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Nl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Xh(i),null===r)return br;if(n++,i=i[pr],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return br}function Ol(e,t,n){!function XC(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(gi)&&(r=n[gi]),null==r&&(r=n[gi]=KC++);const i=r&Hh;t.data[e+(i>>jh)]|=1<<i}(e,t,n)}function Gh(e,t,n){if(n&x.Optional||void 0!==e)return e;Rs()}function Wh(e,t,n,r){if(n&x.Optional&&void 0===r&&(r=null),!(n&(x.Self|x.Host))){const i=e[hr],s=ze(void 0);try{return i?i.get(t,r,n&x.Optional):Bf(t,r,n&x.Optional)}finally{ze(s)}}return Gh(r,0,n)}function qh(e,t,n,r=x.Default,i){if(null!==e){if(2048&t[R]&&!(r&x.Self)){const o=function rE(e,t,n,r,i){let s=e,o=t;for(;null!==s&&null!==o&&2048&o[R]&&!(512&o[R]);){const a=Yh(s,o,n,r|x.Self,zt);if(a!==zt)return a;let l=s.parent;if(!l){const u=o[sh];if(u){const c=u.get(n,zt,r);if(c!==zt)return c}l=Xh(o),o=o[pr]}s=l}return i}(e,t,n,r,zt);if(o!==zt)return o}const s=Yh(e,t,n,r,zt);if(s!==zt)return s}return Wh(t,n,r,i)}function Yh(e,t,n,r,i){const s=function eE(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(gi)?e[gi]:void 0;return"number"==typeof t?t>=0?t&Hh:tE:t}(n);if("function"==typeof s){if(!Oh(t,e,r))return r&x.Host?Gh(i,0,r):Wh(t,n,r,i);try{const o=s(r);if(null!=o||r&x.Optional)return o;Rs()}finally{Fh()}}else if("number"==typeof s){let o=null,a=zh(e,t),l=br,u=r&x.Host?t[pe][xe]:null;for((-1===a||r&x.SkipSelf)&&(l=-1===a?Nl(e,t):t[a+8],l!==br&&Kh(r,!1)?(o=t[C],a=Js(l),t=eo(l,t)):a=-1);-1!==a;){const c=t[C];if(Zh(s,a,c.data)){const d=JC(a,t,n,o,r,u);if(d!==zt)return d}l=t[a+8],l!==br&&Kh(r,t[C].data[a+8]===u)&&Zh(s,a,t)?(o=c,a=Js(l),t=eo(l,t)):a=-1}}return i}function JC(e,t,n,r,i,s){const o=t[C],a=o.data[e+8],c=function ro(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,l=e.directiveStart,c=s>>20,f=i?a+c:e.directiveEnd;for(let h=r?a:a+c;h<f;h++){const p=o[h];if(h<l&&n===p||h>=l&&p.type===n)return h}if(i){const h=o[l];if(h&&Ct(h)&&h.type===n)return l}return null}(a,o,n,null==r?Gn(a)&&Ml:r!=o&&0!=(3&a.type),i&x.Host&&s===a);return null!==c?Yn(t,o,c,a):zt}function Yn(e,t,n,r){let i=e[n];const s=t.data;if(function WC(e){return e instanceof Si}(i)){const o=i;o.resolving&&function Dw(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new E(-200,`Circular dependency in DI detected for ${e}${n}`)}(function Y(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():O(e)}(s[n]));const a=to(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?ze(o.injectImpl):null;Oh(e,r,x.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function zC(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const o=gh(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}i&&(n.preOrderHooks??=[]).push(0-e,i),s&&((n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s))}(n,s[n],t)}finally{null!==l&&ze(l),to(a),o.resolving=!1,Fh()}}return i}function Zh(e,t,n){return!!(n[t+(e>>jh)]&1<<e)}function Kh(e,t){return!(e&x.Self||e&x.Host&&t)}class Dr{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return qh(this._tNode,this._lView,t,Ls(r),n)}}function tE(){return new Dr(Ae(),b())}function Xh(e){const t=e[C],n=t.type;return 2===n?t.declTNode:1===n?e[xe]:null}const Cr="__parameters__";function Sr(e,t,n){return rn(()=>{const r=function kl(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(Cr)?l[Cr]:Object.defineProperty(l,Cr,{value:[]})[Cr];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Ai(e,t){e.forEach(n=>Array.isArray(n)?Ai(n,t):t(n))}function Jh(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function io(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const $l=pi(Sr("Optional"),8),Ul=pi(Sr("SkipSelf"),4);function uo(e){return 128==(128&e.flags)}var Ze=(()=>((Ze=Ze||{})[Ze.Important=1]="Important",Ze[Ze.DashCase=2]="DashCase",Ze))();const zl=new Map;let OE=0;const Wl="__ngContext__";function Oe(e,t){it(t)?(e[Wl]=t[wi],function PE(e){zl.set(e[wi],e)}(t)):e[Wl]=t}let ql;function Yl(e,t){return ql(e,t)}function Oi(e){const t=e[oe];return qe(t)?t[oe]:t}function bp(e){return wp(e[bi])}function Dp(e){return wp(e[wt])}function wp(e){for(;null!==e&&!qe(e);)e=e[wt];return e}function Mr(e,t,n,r,i){if(null!=r){let s,o=!1;qe(r)?s=r:it(r)&&(o=!0,r=r[De]);const a=ne(r);0===e&&null!==n?null==i?Tp(t,n,a):Zn(t,n,a,i||null,!0):1===e&&null!==n?Zn(t,n,a,i||null,!0):2===e?function mo(e,t,n){const r=po(e,t);r&&function JE(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function nS(e,t,n,r,i){const s=n[Vt];s!==ne(n)&&Mr(t,e,r,s,i);for(let a=Ne;a<n.length;a++){const l=n[a];Pi(l[C],l,e,t,r,s)}}(t,e,s,n,i)}}function ho(e,t,n){return e.createElement(t,n)}function Ep(e,t){const n=e[mr],r=n.indexOf(t);wh(t),n.splice(r,1)}function Kl(e,t){if(e.length<=Ne)return;const n=Ne+t,r=e[n];if(r){const i=r[Di];null!==i&&i!==e&&Ep(i,r),t>0&&(e[n-1][wt]=r[wt]);const s=io(e,Ne+t);!function GE(e,t){Pi(e,t,t[P],2,null,null),t[De]=null,t[xe]=null}(r[C],r);const o=s[Ut];null!==o&&o.detachView(s[C]),r[oe]=null,r[wt]=null,r[R]&=-129}return r}function Sp(e,t){if(!(256&t[R])){const n=t[P];t[Vs]?.destroy(),t[Bs]?.destroy(),n.destroyNode&&Pi(e,t,n,3,null,null),function YE(e){let t=e[bi];if(!t)return Xl(e[C],e);for(;t;){let n=null;if(it(t))n=t[bi];else{const r=t[Ne];r&&(n=r)}if(!n){for(;t&&!t[wt]&&t!==e;)it(t)&&Xl(t[C],t),t=t[oe];null===t&&(t=e),it(t)&&Xl(t[C],t),n=t&&t[wt]}t=n}}(t)}}function Xl(e,t){if(!(256&t[R])){t[R]&=-129,t[R]|=256,function QE(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof Si)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Ht(4,a,l);try{l.call(a)}finally{Ht(5,a,l)}}else{Ht(4,i,s);try{s.call(i)}finally{Ht(5,i,s)}}}}}(e,t),function XE(e,t){const n=e.cleanup,r=t[fr];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(t[fr]=null);const i=t[Sn];if(null!==i){t[Sn]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(e,t),1===t[C].type&&t[P].destroy();const n=t[Di];if(null!==n&&qe(t[oe])){n!==t[oe]&&Ep(n,t);const r=t[Ut];null!==r&&r.detachView(e)}!function kE(e){zl.delete(e[wi])}(t)}}function Ql(e,t,n){return function Ip(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[De];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=e.data[r.directiveStart+i];if(s===nt.None||s===nt.Emulated)return null}return Ye(r,n)}}(e,t.parent,n)}function Zn(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Tp(e,t,n){e.appendChild(t,n)}function Ap(e,t,n,r,i){null!==r?Zn(e,t,n,r,i):Tp(e,t,n)}function po(e,t){return e.parentNode(t)}let Jl,ru,Np=function xp(e,t,n){return 40&e.type?Ye(e,n):null};function go(e,t,n,r){const i=Ql(e,r,t),s=t[P],a=function Mp(e,t,n){return Np(e,t,n)}(r.parent||t[xe],r,t);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Ap(s,i,n[l],a,!1);else Ap(s,i,n,a,!1);void 0!==Jl&&Jl(s,r,t,n,i)}function Ri(e,t){if(null!==t){const n=t.type;if(3&n)return Ye(t,e);if(4&n)return eu(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Ri(e,r);{const i=e[t.index];return qe(i)?eu(-1,i):ne(i)}}if(32&n)return Yl(t,e)()||ne(e[t.index]);{const r=Rp(e,t);return null!==r?Array.isArray(r)?r[0]:Ri(Oi(e[pe]),r):Ri(e,t.next)}}return null}function Rp(e,t){return null!==t?e[pe][xe].projection[t.projection]:null}function eu(e,t){const n=Ne+e+1;if(n<t.length){const r=t[n],i=r[C].firstChild;if(null!==i)return Ri(r,i)}return t[Vt]}function tu(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===t&&(a&&Oe(ne(a),r),n.flags|=2),32!=(32&n.flags))if(8&l)tu(e,t,n.child,r,i,s,!1),Mr(t,e,i,a,s);else if(32&l){const u=Yl(n,r);let c;for(;c=u();)Mr(t,e,i,c,s);Mr(t,e,i,a,s)}else 16&l?kp(e,t,r,n,i,s):Mr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Pi(e,t,n,r,i,s){tu(n,r,e.firstChild,t,i,s,!1)}function kp(e,t,n,r,i,s){const o=n[pe],l=o[xe].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Mr(t,e,i,l[u],s);else{let u=l;const c=o[oe];uo(r)&&(u.flags|=128),tu(e,t,u,c,i,s,!0)}}function Fp(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Lp(e,t,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&dl(e,t,r),null!==i&&Fp(e,t,i),null!==s&&function iS(e,t,n){e.setAttribute(t,"style",n)}(e,t,s)}class Bp{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ff})`}}const vS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var ge=(()=>((ge=ge||{})[ge.NONE=0]="NONE",ge[ge.HTML=1]="HTML",ge[ge.STYLE=2]="STYLE",ge[ge.SCRIPT=3]="SCRIPT",ge[ge.URL=4]="URL",ge[ge.RESOURCE_URL=5]="RESOURCE_URL",ge))();function uu(e){const t=function $i(){const e=b();return e&&e[zn].sanitizer}();return t?t.sanitize(ge.URL,e)||"":function Fi(e,t){const n=function pS(e){return e instanceof Bp&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Ff})`)}return n===t}(e,"URL")?function An(e){return e instanceof Bp?e.changingThisBreaksApplicationSecurity:e}(e):function su(e){return(e=String(e)).match(vS)?e:"unsafe:"+e}(O(e))}class k{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const bo=new k("ENVIRONMENT_INITIALIZER"),Zp=new k("INJECTOR",-1),Kp=new k("INJECTOR_DEF_TYPES");class Xp{get(t,n=hi){if(n===hi){const r=new Error(`NullInjectorError: No provider for ${be(t)}!`);throw r.name="NullInjectorError",r}return n}}function OS(...e){return{\u0275providers:Jp(0,e),\u0275fromNgModule:!0}}function Jp(e,...t){const n=[],r=new Set;let i;return Ai(t,s=>{const o=s;cu(o,n,[],r)&&(i||=[],i.push(o))}),void 0!==i&&eg(i,n),n}function eg(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];du(i,s=>{t.push(s)})}}function cu(e,t,n,r){if(!(e=N(e)))return!1;let i=null,s=$f(e);const o=!s&&q(e);if(s||o){if(o&&!o.standalone)return!1;i=e}else{const l=e.ngModule;if(s=$f(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)cu(u,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Ai(s.imports,c=>{cu(c,t,n,r)&&(u||=[],u.push(c))})}finally{}void 0!==u&&eg(u,t)}if(!a){const u=Wn(i)||(()=>new i);t.push({provide:i,useFactory:u,deps:W},{provide:Kp,useValue:i,multi:!0},{provide:bo,useValue:()=>z(i),multi:!0})}const l=s.providers;null==l||a||du(l,c=>{t.push(c)})}}return i!==e&&void 0!==e.providers}function du(e,t){for(let n of e)il(n)&&(n=n.\u0275providers),Array.isArray(n)?du(n,t):t(n)}const RS=K({provide:String,useValue:K});function fu(e){return null!==e&&"object"==typeof e&&RS in e}function Kn(e){return"function"==typeof e}const hu=new k("Set Injector scope."),Do={},kS={};let pu;function wo(){return void 0===pu&&(pu=new Xp),pu}class Nr{}class gu extends Nr{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yu(t,o=>this.processProvider(o)),this.records.set(Zp,Or(void 0,this)),i.has("environment")&&this.records.set(Nr,Or(void 0,this));const s=this.records.get(hu);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Kp.multi,W,x.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=En(this),r=ze(void 0);try{return t()}finally{En(n),ze(r)}}get(t,n=hi,r=x.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Gf))return t[Gf](this);r=Ls(r);const i=En(this),s=ze(void 0);try{if(!(r&x.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function VS(e){return"function"==typeof e||"object"==typeof e&&e instanceof k}(t)&&Ps(t);a=l&&this.injectableDefInScope(l)?Or(mu(t),Do):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(r&x.Self?wo():this.parent).get(t,n=r&x.Optional&&n===hi?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Fs]=o[Fs]||[]).unshift(be(t)),i)throw o;return function Pw(e,t,n,r){const i=e[Fs];throw t[Hf]&&i.unshift(t[Hf]),e.message=function kw(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=be(t);if(Array.isArray(t))i=t.map(be).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):be(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Mw,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Fs]=null,e}(o,t,"R3InjectorError",this.source)}throw o}finally{ze(s),En(i)}}resolveInjectorInitializers(){const t=En(this),n=ze(void 0);try{const r=this.get(bo.multi,W,x.Self);for(const i of r)i()}finally{En(t),ze(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(be(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(t){let n=Kn(t=N(t))?t:N(t&&t.provide);const r=function LS(e){return fu(e)?Or(void 0,e.useValue):Or(function rg(e,t,n){let r;if(Kn(e)){const i=N(e);return Wn(i)||mu(i)}if(fu(e))r=()=>N(e.useValue);else if(function ng(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...ll(e.deps||[]));else if(function tg(e){return!(!e||!e.useExisting)}(e))r=()=>z(N(e.useExisting));else{const i=N(e&&(e.useClass||e.provide));if(!function $S(e){return!!e.deps}(e))return Wn(i)||mu(i);r=()=>new i(...ll(e.deps))}return r}(e),Do)}(t);if(Kn(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Or(void 0,Do,!0),i.factory=()=>ll(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Do&&(n.value=kS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function US(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=N(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function mu(e){const t=Ps(e),n=null!==t?t.factory:Wn(e);if(null!==n)return n;if(e instanceof k)throw new E(204,!1);if(e instanceof Function)return function FS(e){const t=e.length;if(t>0)throw function Mi(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new E(204,!1);const n=function Iw(e){return e&&(e[ks]||e[Uf])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new E(204,!1)}function Or(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function yu(e,t){for(const n of e)Array.isArray(n)?yu(n,t):n&&il(n)?yu(n.\u0275providers,t):t(n)}const Co=new k("AppId",{providedIn:"root",factory:()=>BS}),BS="ng",ig=new k("Platform Initializer"),Rr=new k("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sg=new k("CSP nonce",{providedIn:"root",factory:()=>function ki(){if(void 0!==ru)return ru;if(typeof document<"u")return document;throw new E(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ag=(e,t)=>null;function lg(e,t){return ag(e,t)}class KS{}class dg{}class QS{resolveComponentFactory(t){throw function XS(e){const t=Error(`No component factory found for ${be(e)}.`);return t.ngComponent=e,t}(t)}}let Ao=(()=>{class e{}return e.NULL=new QS,e})();function JS(){return Pr(Ae(),b())}function Pr(e,t){return new kr(Ye(e,t))}let kr=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=JS,e})();class hg{}let nI=(()=>{class e{}return e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>null}),e})();class Au{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const rI=new Au("16.1.3"),Mu={};function Hi(e){for(;e;){e[R]|=64;const t=Oi(e);if(pl(e)&&!t)return e;e=t}return null}function xu(e){return e.ngOriginalError}class Xn{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&xu(t);for(;n&&xu(n);)n=xu(n);return n||null}}const yg=new k("",{providedIn:"root",factory:()=>!1});class wg extends dh{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(t){this._lView=t}onConsumerDependencyMayHaveChanged(){Hi(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(t,n,r){const i=Te(this);this.trackingVersion++;try{t(n,r)}finally{Te(i)}}destroy(){this.trackingVersion++}}let xo=null;function Cg(){return xo??=new wg,xo}function Eg(e,t){return e[t]??Cg()}function Sg(e,t){const n=Cg();n.hasReadASignal&&(e[t]=xo,n.lView=e,xo=new wg)}const F={};function Nu(e){Ig(G(),b(),Fe()+e,!1)}function Ig(e,t,n,r){if(!r)if(3==(3&t[R])){const s=e.preOrderCheckHooks;null!==s&&Xs(t,s,n)}else{const s=e.preOrderHooks;null!==s&&Qs(t,s,0,n)}qn(n)}function xg(e,t=null,n=null,r){const i=Ng(e,t,n,r);return i.resolveInjectorInitializers(),i}function Ng(e,t=null,n=null,r,i=new Set){const s=[n||W,OS(e)];return r=r||("object"==typeof e?void 0:be(e)),new gu(s,t||wo(),r||null,i)}let Qn=(()=>{class e{static create(n,r){if(Array.isArray(n))return xg({name:""},r,n,"");{const i=n.name??"";return xg({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=hi,e.NULL=new Xp,e.\u0275prov=Q({token:e,providedIn:"any",factory:()=>z(Zp)}),e.__NG_ELEMENT_ID__=-1,e})();function U(e,t=x.Default){const n=b();return null===n?z(e,t):qh(Ae(),n,N(e),t)}function No(e,t,n,r,i,s,o,a,l,u,c){const d=t.blueprint.slice();return d[De]=i,d[R]=140|r,(null!==u||e&&2048&e[R])&&(d[R]|=2048),Dh(d),d[oe]=d[pr]=e,d[he]=n,d[zn]=o||e&&e[zn],d[P]=a||e&&e[P],d[hr]=l||e&&e[hr]||null,d[xe]=s,d[wi]=function RE(){return OE++}(),d[on]=c,d[sh]=u,d[pe]=2==t.type?e[pe]:d,d}function Lr(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Ou(e,t,n,r,i){const s=Th(),o=bl(),l=e.data[t]=function SI(e,t,n,r,i,s){let o=t?t.injectorIndex:-1,a=0;return function vr(){return null!==M.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(e,t,n,r,i),function PC(){return M.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Ei(){const e=M.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return jt(s,!0),s}function ji(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Og(e,t,n,r,i){const s=Eg(t,Vs),o=Fe(),a=2&r;try{if(qn(-1),a&&t.length>j&&Ig(e,t,j,!1),Ht(a?2:0,i),a)s.runInContext(n,r,i);else{const u=Te(null);try{n(r,i)}finally{Te(u)}}}finally{a&&null===t[Vs]&&Sg(t,Vs),qn(o),Ht(a?3:1,i)}}function Ru(e,t,n){if(hl(t)){const r=Te(null);try{const s=t.directiveEnd;for(let o=t.directiveStart;o<s;o++){const a=e.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Te(r)}}}function Pu(e,t,n){Ih()&&(function OI(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;Gn(n)&&function UI(e,t,n){const r=Ye(t,e),i=Rg(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Oo(e,No(e,i,null,o,r,t,null,e[zn].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||no(n,t),Oe(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const l=e.data[a],u=Yn(t,e,a,n);Oe(u,t),null!==o&&VI(0,a-i,u,l,0,o),Ct(l)&&(st(n.index,t)[he]=Yn(t,e,a,n))}}(e,t,n,Ye(n,t)),64==(64&n.flags)&&$g(e,t,n))}function ku(e,t,n=Ye){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Rg(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Fu(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Fu(e,t,n,r,i,s,o,a,l,u,c){const d=j+r,f=d+i,h=function _I(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:F);return n}(d,f),p="function"==typeof u?u():u;return h[C]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}let Pg=e=>null;function kg(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const s=e[i];null===r?Fg(n,t,i,s):r.hasOwnProperty(i)&&Fg(n,t,r[i],s)}return n}function Fg(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function at(e,t,n,r,i,s,o,a){const l=Ye(t,n);let c,u=t.inputs;!a&&null!=u&&(c=u[r])?(Bu(e,n,c,r,i),Gn(t)&&function AI(e,t){const n=st(t,e);16&n[R]||(n[R]|=64)}(n,t.index)):3&t.type&&(r=function TI(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,s.setProperty(l,r,i))}function Lu(e,t,n,r){if(Ih()){const i=null===r?null:{"":-1},s=function PI(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Qf(t,o.selectors,!1))if(r||(r=[]),Ct(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),$u(e,t,a.length)}else r.unshift(o),$u(e,t,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(e,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Lg(e,t,n,o,i,a),i&&function kI(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new E(-301,!1);r.push(t[i],s)}}}(n,r,i)}n.mergedAttrs=mi(n.mergedAttrs,n.attrs)}function Lg(e,t,n,r,i,s){for(let u=0;u<r.length;u++)Ol(no(n,t),e,r[u].type);!function LI(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const c=r[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=ji(e,t,r.length,null);for(let u=0;u<r.length;u++){const c=r[u];n.mergedAttrs=mi(n.mergedAttrs,c.hostAttrs),$I(e,n,t,l,c),FI(l,c,i),null!==c.contentQueries&&(n.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(n.flags|=64);const d=c.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}!function II(e,t,n){const i=t.directiveEnd,s=e.data,o=t.attrs,a=[];let l=null,u=null;for(let c=t.directiveStart;c<i;c++){const d=s[c],f=n?n.get(d):null,p=f?f.outputs:null;l=kg(d.inputs,c,l,f?f.inputs:null),u=kg(d.outputs,c,u,p);const g=null===l||null===o||Xf(t)?null:BI(l,c,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=u}(e,n,s)}function $g(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function FC(){return M.lFrame.currentDirectiveIndex}();try{qn(s);for(let a=r;a<i;a++){const l=e.data[a],u=t[a];wl(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&RI(l,u)}}finally{qn(-1),wl(o)}}function RI(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function $u(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function FI(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Ct(t)&&(n[""]=e)}}function $I(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=Wn(i.type)),o=new Si(s,Ct(i),U);e.blueprint[r]=o,n[r]=o,function xI(e,t,n,r,i){const s=i.hostBindings;if(s){let o=e.hostBindingOpCodes;null===o&&(o=e.hostBindingOpCodes=[]);const a=~t.index;(function NI(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(e,t,r,ji(e,n,i.hostVars,F),i)}function Gt(e,t,n,r,i,s){const o=Ye(e,t);!function Uu(e,t,n,r,i,s,o){if(null==s)e.removeAttribute(t,i,n);else{const a=null==o?O(s):o(s,r||"",i);e.setAttribute(t,i,a,n)}}(t[P],o,s,e.value,n,r,i)}function VI(e,t,n,r,i,s){const o=s[t];if(null!==o)for(let a=0;a<o.length;)Ug(r,n,o[a++],o[a++],o[a++])}function Ug(e,t,n,r,i){const s=Te(null);try{const o=e.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{Te(s)}}function BI(e,t,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(e.hasOwnProperty(s)){null===r&&(r=[]);const o=e[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Vg(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function Bg(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=e.data[s];El(n[r]),o.contentQueries(2,t[s],s)}}}function Oo(e,t){return e[bi]?e[ih][wt]=t:e[bi]=t,e[ih]=t,t}function Vu(e,t,n){El(0);const r=Te(null);try{t(e,n)}finally{Te(r)}}function Gg(e,t){const n=e[hr],r=n?n.get(Xn,null):null;r&&r.handleError(t)}function Bu(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++];Ug(e.data[o],t[o],r,a,i)}}function HI(e,t){const n=st(t,e),r=n[C];!function jI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[De];null!==i&&null===n[on]&&(n[on]=lg(i,n[hr])),Hu(r,n,n[he])}function Hu(e,t,n){Sl(t);try{const r=e.viewQuery;null!==r&&Vu(1,r,n);const i=e.template;null!==i&&Og(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Bg(e,t),e.staticViewQueries&&Vu(2,e.viewQuery,n);const s=e.components;null!==s&&function zI(e,t){for(let n=0;n<t.length;n++)HI(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[R]&=-5,Il()}}let Wg=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new cC(n,u=>{this.all.has(u)&&this.queue.set(u,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}}return e.\u0275prov=Q({token:e,providedIn:"root",factory:()=>new e}),e})();function Ro(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?i=tl(i,a):2==s&&(r=tl(r,a+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function zi(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(ne(s)),qe(s)){for(let a=Ne;a<s.length;a++){const l=s[a],u=l[C].firstChild;null!==u&&zi(l[C],l,u,r)}s[Vt]!==s[De]&&r.push(s[Vt])}const o=n.type;if(8&o)zi(e,t,n.child,r);else if(32&o){const a=Yl(n,t);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Rp(t,n);if(Array.isArray(a))r.push(...a);else{const l=Oi(t[pe]);zi(l[C],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Po(e,t,n,r=!0){const i=t[zn].rendererFactory;i.begin&&i.begin();try{qg(e,t,e.template,n)}catch(o){throw r&&Gg(t,o),o}finally{i.end&&i.end(),t[zn].effectManager?.flush()}}function qg(e,t,n,r){const i=t[R];if(256!=(256&i)){t[zn].effectManager?.flush(),Sl(t);try{Dh(t),function Mh(e){return M.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Og(e,t,n,2,r);const o=3==(3&i);if(o){const u=e.preOrderCheckHooks;null!==u&&Xs(t,u,null)}else{const u=e.preOrderHooks;null!==u&&Qs(t,u,0,null),Tl(t,0)}if(function ZI(e){for(let t=bp(e);null!==t;t=Dp(t)){if(!t[oh])continue;const n=t[mr];for(let r=0;r<n.length;r++){DC(n[r])}}}(t),Yg(t,2),null!==e.contentQueries&&Bg(e,t),o){const u=e.contentCheckHooks;null!==u&&Xs(t,u)}else{const u=e.contentHooks;null!==u&&Qs(t,u,1),Tl(t,1)}!function vI(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=Eg(t,Bs);try{for(let i=0;i<n.length;i++){const s=n[i];if(s<0)qn(~s);else{const o=s,a=n[++i],l=n[++i];kC(a,o),r.runInContext(l,2,t[o])}}}finally{null===t[Bs]&&Sg(t,Bs),qn(-1)}}(e,t);const a=e.components;null!==a&&Kg(t,a,0);const l=e.viewQuery;if(null!==l&&Vu(2,l,r),o){const u=e.viewCheckHooks;null!==u&&Xs(t,u)}else{const u=e.viewHooks;null!==u&&Qs(t,u,2),Tl(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[R]&=-73,wh(t)}finally{Il()}}}function Yg(e,t){for(let n=bp(e);null!==n;n=Dp(n))for(let r=Ne;r<n.length;r++)Zg(n[r],t)}function KI(e,t,n){Zg(st(t,e),n)}function Zg(e,t){if(!function _C(e){return 128==(128&e[R])}(e))return;const n=e[C];if(80&e[R]&&0===t||1024&e[R]||2===t)qg(n,e,n.template,e[he]);else if(e[_i]>0){Yg(e,1);const i=e[C].components;null!==i&&Kg(e,i,1)}}function Kg(e,t,n){for(let r=0;r<t.length;r++)KI(e,t[r],n)}class Gi{get rootNodes(){const t=this._lView,n=t[C];return zi(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[he]}set context(t){this._lView[he]=t}get destroyed(){return 256==(256&this._lView[R])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[oe];if(qe(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(Kl(t,r),io(n,r))}this._attachedToViewContainer=!1}Sp(this._lView[C],this._lView)}onDestroy(t){!function Eh(e,t){if(256==(256&e[R]))throw new E(911,!1);null===e[Sn]&&(e[Sn]=[]),e[Sn].push(t)}(this._lView,t)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[R]&=-129}reattach(){this._lView[R]|=128}detectChanges(){Po(this._lView[C],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function qE(e,t){Pi(e,t,t[P],2,null,null)}(this._lView[C],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t}}class XI extends Gi{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Po(t[C],t,t[he],!1)}checkNoChanges(){}get context(){return null}}class Xg extends Ao{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=q(t);return new Wi(n,this.ngModule)}}function Qg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class JI{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ls(r);const i=this.injector.get(t,Mu,r);return i!==Mu||n===Mu?i:this.parentInjector.get(t,n,r)}}class Wi extends dg{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Qg(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Qg(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Gw(e){return e.map(zw).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof Nr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new JI(t,s):t,a=o.get(hg,null);if(null===a)throw new E(407,!1);const c={rendererFactory:a,sanitizer:o.get(nI,null),effectManager:o.get(Wg,null)},d=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",h=r?function bI(e,t,n,r){const s=r.get(yg,!1)||n===nt.ShadowDom,o=e.selectRootElement(t,s);return function DI(e){Pg(e)}(o),o}(d,r,this.componentDef.encapsulation,o):ho(d,f,function QI(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528,_=Fu(0,null,null,1,0,null,null,null,null,null,null),m=No(null,_,null,v,null,null,c,d,o,null,null);let D,S;Sl(m);try{const T=this.componentDef;let X,Pt=null;T.findHostDirectiveDefs?(X=[],Pt=new Map,T.findHostDirectiveDefs(T,X,Pt),X.push(T)):X=[T];const ce=function t0(e,t){const n=e[C],r=j;return e[r]=t,Lr(n,r,2,"#host",null)}(m,h),_t=function n0(e,t,n,r,i,s,o){const a=i[C];!function r0(e,t,n,r){for(const i of e)t.mergedAttrs=mi(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Ro(t,t.mergedAttrs,!0),null!==n&&Lp(r,n,t))}(r,e,t,o);let l=null;null!==t&&(l=lg(t,i[hr]));const u=s.rendererFactory.createRenderer(t,n);let c=16;n.signals?c=4096:n.onPush&&(c=64);const d=No(i,Rg(n),null,c,i[e.index],e,s,u,null,null,l);return a.firstCreatePass&&$u(a,e,r.length-1),Oo(i,d),i[e.index]=d}(ce,h,T,X,m,c,d);S=bh(_,j),h&&function o0(e,t,n,r){if(r)dl(e,n,["ng-version",rI.full]);else{const{attrs:i,classes:s}=function Ww(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!Dt(i))break;i=s}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&dl(e,n,i),s&&s.length>0&&Fp(e,n,s.join(" "))}}(d,T,h,r),void 0!==n&&function a0(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(S,this.ngContentSelectors,n),D=function s0(e,t,n,r,i,s){const o=Ae(),a=i[C],l=Ye(o,i);Lg(a,i,o,n,null,r);for(let c=0;c<n.length;c++)Oe(Yn(i,a,o.directiveStart+c,o),i);$g(a,i,o),l&&Oe(l,i);const u=Yn(i,a,o.directiveStart+o.componentOffset,o);if(e[he]=i[he]=u,null!==s)for(const c of s)c(u,t);return Ru(a,o,e),u}(_t,T,X,Pt,m,[l0]),Hu(_,m,null)}finally{Il()}return new e0(this.componentType,D,Pr(S,m),m,S)}}class e0 extends KS{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new XI(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const s=this._rootLView;Bu(s[C],s,i,t,n),this.previousInputValues.set(t,n),Hi(st(this._tNode.index,s))}}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function l0(){const e=Ae();Ks(b()[C],e)}function Fo(e){return!!function ju(e){return null!==e&&("function"==typeof e||"object"==typeof e)}(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Re(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function zu(e,t,n,r){const i=b();return Re(i,_r(),t)&&(G(),Gt(ae(),i,e,t,n,r)),zu}function Vr(e,t,n,r,i,s){const a=function Jn(e,t,n,r){const i=Re(e,t,n);return Re(e,t+1,r)||i}(e,function an(){return M.lFrame.bindingIndex}(),n,i);return function ln(e){const t=M.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}(2),a?t+O(n)+r+O(i)+s:F}let ym=function vm(e,t,n,r){return Tn(!0),t[P].createComment("")};function Ku(e,t,n){const r=b();return Re(r,_r(),t)&&at(G(),ae(),r,e,t,r[P],n,!1),Ku}function Xu(e,t,n,r,i){const o=i?"class":"style";Bu(e,n,t.inputs[o],o,r)}function qr(e,t,n,r){const i=b(),s=G(),o=j+e,a=i[P],l=s.firstCreatePass?function j0(e,t,n,r,i,s){const o=t.consts,l=Lr(t,e,2,r,In(o,i));return Lu(t,n,l,In(o,s)),null!==l.attrs&&Ro(l,l.attrs,!1),null!==l.mergedAttrs&&Ro(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,i,t,n,r):s.data[o],u=_m(s,i,l,a,t,e);i[o]=u;const c=js(l);return jt(l,!0),Lp(a,u,l),32!=(32&l.flags)&&Zs()&&go(s,i,u,l),0===function CC(){return M.lFrame.elementDepthCount}()&&Oe(u,i),function EC(){M.lFrame.elementDepthCount++}(),c&&(Pu(s,i,l),Ru(s,l,i)),null!==r&&ku(i,l),qr}function Xi(){let e=Ae();bl()?function Dl(){M.lFrame.isParent=!1}():(e=e.parent,jt(e,!1));const t=e;(function IC(e){return M.skipHydrationRootTNode===e})(t)&&function xC(){M.skipHydrationRootTNode=null}(),function SC(){M.lFrame.elementDepthCount--}();const n=G();return n.firstCreatePass&&(Ks(n,e),hl(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function qC(e){return 0!=(8&e.flags)}(t)&&Xu(n,t,b(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function YC(e){return 0!=(16&e.flags)}(t)&&Xu(n,t,b(),t.stylesWithoutHost,!1),Xi}function Bo(e,t,n,r){return qr(e,t,n,r),Xi(),Bo}let _m=(e,t,n,r,i,s)=>(Tn(!0),ho(r,i,function Lh(){return M.lFrame.currentNamespace}()));function ec(e){return!!e&&"function"==typeof e.then}function wm(e){return!!e&&"function"==typeof e.subscribe}function tc(e,t,n,r){const i=b(),s=G(),o=Ae();return function Em(e,t,n,r,i,s,o){const a=js(r),u=e.firstCreatePass&&function jg(e){return e.cleanup||(e.cleanup=[])}(e),c=t[he],d=function Hg(e){return e[fr]||(e[fr]=[])}(t);let f=!0;if(3&r.type||o){const g=Ye(r,t),v=o?o(g):g,_=d.length,m=o?S=>o(ne(S[r.index])):r.index;let D=null;if(!o&&a&&(D=function K0(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=t[fr],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(e,t,i,r.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=s,D.__ngLastListenerFn__=s,f=!1;else{s=Im(r,t,c,s,!1);const S=n.listen(v,i,s);d.push(s,S),u&&u.push(i,m,_,_+1)}}else s=Im(r,t,c,s,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let v=0;v<g;v+=2){const T=t[p[v]][p[v+1]].subscribe(s),X=d.length;d.push(s,T),u&&u.push(i,r.index,X,-(X+1))}}}(s,i,i[P],o,e,t,r),tc}function Sm(e,t,n,r){try{return Ht(6,t,n),!1!==n(r)}catch(i){return Gg(e,i),!1}finally{Ht(7,t,n)}}function Im(e,t,n,r,i){return function s(o){if(o===Function)return r;Hi(e.componentOffset>-1?st(e.index,t):t);let l=Sm(t,n,r,o),u=s.__ngNextListenerFn__;for(;u;)l=Sm(t,n,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function rc(e,t,n,r,i,s,o){const a=b(),l=Vr(a,t,n,r,i,s);return l!==F&&at(G(),ae(),a,e,l,a[P],o,!1),rc}const Kr="en-US";let _y=Kr;class Xr{}class GA{}class gc extends Xr{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xg(this);const i=function rt(e,t){const n=e[zf]||null;if(!n&&!0===t)throw new Error(`Type ${be(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function cn(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=Ng(t,n,[{provide:Xr,useValue:this},{provide:Ao,useValue:this.componentFactoryResolver},...r],be(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class mc extends GA{constructor(t){super(),this.moduleType=t}create(t){return new gc(this.moduleType,t,[])}}function vc(e){return t=>{setTimeout(e,void 0,t)}}const fn=class wM extends xs{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),o=r;if(t&&"object"==typeof t){const l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=vc(s),i&&(i=vc(i)),o&&(o=vc(o)));const a=super.subscribe({next:i,error:s,complete:o});return t instanceof Ft&&t.add(a),a}};let hn=(()=>{class e{}return e.__NG_ELEMENT_ID__=IM,e})();const EM=hn,SM=class extends EM{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n,null)}createEmbeddedViewImpl(t,n,r){const o=this._declarationTContainer.tView,a=No(this._declarationLView,o,t,4096&this._declarationLView[R]?4096:16,null,o.declTNode,null,null,null,n||null,r||null);a[Di]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[Ut];return null!==u&&(a[Ut]=u.createEmbeddedView(o)),Hu(o,a,t),new Gi(a)}};function IM(){return function Yo(e,t){return 4&e.type?new SM(t,e,Pr(e,t)):null}(Ae(),b())}let Zt=(()=>{class e{}return e.__NG_ELEMENT_ID__=RM,e})();function RM(){return function lv(e,t){let n;const r=t[e.index];return qe(r)?n=r:(n=Vg(r,t,null,e),t[e.index]=n,Oo(t,n)),uv(n,t,e,r),new ov(n,e,t)}(Ae(),b())}const PM=Zt,ov=class extends PM{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Pr(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){const t=Nl(this._hostTNode,this._hostLView);if(Bh(t)){const n=eo(t,this._hostLView),r=Js(t);return new Dr(n[C].data[r+8],n)}return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=av(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-Ne}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,s){const o=t&&!function Ti(e){return"function"==typeof e}(t);let a;if(o)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=o?t:new Wi(q(t)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const v=(o?u:this.parentInjector).get(Nr,null);v&&(s=v)}q(l.componentType??{});const h=l.create(u,i,null,s);return this.insertImpl(h.hostView,a,false),h}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView,s=i[C];if(function bC(e){return qe(e[oe])}(i)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const u=i[oe],c=new ov(u,u[xe],u[oe]);c.detach(c.indexOf(t))}}const o=this._adjustIndex(n),a=this._lContainer;if(function ZE(e,t,n,r){const i=Ne+r,s=n.length;r>0&&(n[i-1][wt]=t),r<s-Ne?(t[wt]=n[i],Jh(n,Ne+r,t)):(n.push(t),t[wt]=null),t[oe]=n;const o=t[Di];null!==o&&n!==o&&function KE(e,t){const n=e[mr];t[pe]!==t[oe][oe][pe]&&(e[oh]=!0),null===n?e[mr]=[t]:n.push(t)}(o,t);const a=t[Ut];null!==a&&a.insertView(e),t[R]|=128}(s,i,a,o),!r){const l=eu(o,a),u=i[P],c=po(u,a[Vt]);null!==c&&function WE(e,t,n,r,i,s){r[De]=i,r[xe]=t,Pi(e,r,n,1,i,s)}(s,a[xe],u,i,c,l)}return t.attachToViewContainerRef(),Jh(Dc(a),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=av(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=Kl(this._lContainer,n);r&&(io(Dc(this._lContainer),n),Sp(r[C],r))}detach(t){const n=this._adjustIndex(t,-1),r=Kl(this._lContainer,n);return r&&null!=io(Dc(this._lContainer),n)?new Gi(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function av(e){return e[8]}function Dc(e){return e[8]||(e[8]=[])}let uv=function cv(e,t,n,r){if(e[Vt])return;let i;i=8&n.type?ne(r):function kM(e,t){const n=e[P],r=n.createComment(""),i=Ye(t,e);return Zn(n,po(n,i),r,function eS(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Vt]=i};const gx=new k("Application Initializer");let Nc=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=ie(gx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(ec(s))n.push(s);else if(wm(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const pn=new k("LocaleId",{providedIn:"root",factory:()=>ie(pn,x.Optional|x.SkipSelf)||function yx(){return typeof $localize<"u"&&$localize.locale||Kr}()});let _x=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new MD(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function kv(...e){}class Ee{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fn(!1),this.onMicrotaskEmpty=new fn(!1),this.onStable=new fn(!1),this.onError=new fn(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Cx(){let e=J.requestAnimationFrame,t=J.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function Ix(e){const t=()=>{!function Sx(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(J,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Rc(e),e.isCheckStableRunning=!0,Oc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Rc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Fv(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),Lv(e)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Fv(e),n.invoke(i,s,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),Lv(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,Rc(e),Oc(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ee.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(Ee.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,Ex,kv,kv);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const Ex={};function Oc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Rc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Fv(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Lv(e){e._nesting--,Oc(e)}class Tx{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fn,this.onMicrotaskEmpty=new fn,this.onStable=new fn,this.onError=new fn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const $v=new k("",{providedIn:"root",factory:Uv});function Uv(){const e=ie(Ee);let t=!0;return gw(new je(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new je(i=>{let s;e.runOutsideAngular(()=>{s=e.onStable.subscribe(()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const o=e.onUnstable.subscribe(()=>{Ee.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(kf()))}const Vv=new k(""),Ko=new k("");let Fc,Pc=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fc||(function Ax(e){Fc=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ee.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(z(Ee),z(kc),z(Ko))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})(),kc=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Fc?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),xn=null;const Bv=new k("AllowMultipleToken"),Lc=new k("PlatformDestroyListeners"),Hv=new k("appBootstrapListener");function Gv(e,t,n=[]){const r=`Platform: ${t}`,i=new k(r);return(s=[])=>{let o=$c();if(!o||o.injector.get(Bv,!1)){const a=[...n,...s,{provide:i,useValue:!0}];e?e(a):function Nx(e){if(xn&&!xn.get(Bv,!1))throw new E(400,!1);(function jv(){!function lC(e){fh=e}(()=>{throw new E(600,!1)})})(),xn=e;const t=e.get(qv);(function zv(e){e.get(ig,null)?.forEach(n=>n())})(e)}(function Wv(e=[],t){return Qn.create({name:t,providers:[{provide:hu,useValue:"platform"},{provide:Lc,useValue:new Set([()=>xn=null])},...e]})}(a,r))}return function Rx(e){const t=$c();if(!t)throw new E(401,!1);return t}()}}function $c(){return xn?.get(qv)??null}let qv=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function Px(e="zone.js",t){return"noop"===e?new Tx:"zone.js"===e?new Ee(t):e}(r?.ngZone,function Yv(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function qA(e,t,n){return new gc(e,t,n)}(n.moduleType,this.injector,function Jv(e){return[{provide:Ee,useFactory:e},{provide:bo,multi:!0,useFactory:()=>{const t=ie(Fx,{optional:!0});return()=>t.initialize()}},{provide:Qv,useFactory:kx},{provide:$v,useFactory:Uv}]}(()=>i)),o=s.injector.get(Xn,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{Xo(this._modules,s),a.unsubscribe()})}),function Zv(e,t,n){try{const r=n();return ec(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(Nc);return a.runInitializers(),a.donePromise.then(()=>(function by(e){ct(e,"Expected localeId to be defined"),"string"==typeof e&&(_y=e.toLowerCase().replace(/_/g,"-"))}(s.injector.get(pn,Kr)||Kr),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,r=[]){const i=Kv({},r);return function Mx(e,t,n){const r=new mc(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(as);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new E(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new E(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Lc,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(z(Qn))},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function Kv(e,t){return Array.isArray(t)?t.reduce(Kv,e):{...e,...t}}let as=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ie(Qv),this.zoneIsStable=ie($v),this.componentTypes=[],this.components=[],this.isStable=ie(_x).hasPendingTasks.pipe(function yw(e,t){return Hn((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(jn(r,l=>{i?.unsubscribe();let u=0;const c=s++;nn(e(l,c)).subscribe(i=jn(r,d=>r.next(t?t(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}(n=>n?function mw(...e){return Pf(e,xf(e))}(!1):this.zoneIsStable),function vw(e,t=Ya){return e=e??_w,Hn((n,r)=>{let i,s=!0;n.subscribe(jn(r,o=>{const a=t(o);(s||!e(i,a))&&(s=!1,i=a,r.next(o))}))})}(),kf()),this._injector=ie(Nr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof dg;if(!this._injector.get(Nc).done)throw!i&&function vi(e){const t=q(e)||Me(e)||We(e);return null!==t&&t.standalone}(n),new E(405,!1);let o;o=i?n:this._injector.get(Ao).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function xx(e){return e.isBoundToModule}(o)?void 0:this._injector.get(Xr),u=o.create(Qn.NULL,[],r||o.selector,a),c=u.location.nativeElement,d=u.injector.get(Vv,null);return d?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),Xo(this.components,u),d?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new E(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Xo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Hv,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Xo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Xo(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Qv=new k("",{providedIn:"root",factory:()=>ie(Xn).handleError.bind(void 0)});function kx(){const e=ie(Ee),t=ie(Xn);return n=>e.runOutsideAngular(()=>t.handleError(n))}let Fx=(()=>{class e{constructor(){this.zone=ie(Ee),this.applicationRef=ie(as)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class r_{constructor(){}supports(t){return Fo(t)}create(t){return new Wx(t)}}const Gx=(e,t)=>t;class Wx{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Gx}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<s_(r,i,s)?n:r,a=s_(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const u=a-i,c=l-i;if(u!=c){for(let f=0;f<u;f++){const h=f<s.length?s[f]:s[f]=0,p=h+f;c<=p&&p<u&&(s[f]=h+1)}s[o.previousIndex]=c-u}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Fo(t))throw new E(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function b0(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,s,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,s,i)):t=this._addAfter(new qx(n,r),s,i),t}_verifyReinsertion(t,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,s=t._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new i_),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new i_),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class qx{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yx{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class i_{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new Yx,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function s_(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function a_(){return new ea([new r_])}let ea=(()=>{class e{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||a_()),deps:[[e,new Ul,new $l]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new E(901,!1)}}return e.\u0275prov=Q({token:e,providedIn:"root",factory:a_}),e})();const Jx=Gv(null,"core",[]);let eN=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(z(as))},e.\u0275mod=yi({type:e}),e.\u0275inj=cr({}),e})(),Gc=null;function Wc(){return Gc}class dN{}const rr=new k("DocumentToken");class JN{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let S_=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new JN(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),I_(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{I_(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return e.\u0275fac=function(n){return new(n||e)(U(Zt),U(hn),U(ea))},e.\u0275dir=dt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function I_(e,t){e.context.$implicit=t.item}let IO=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=yi({type:e}),e.\u0275inj=cr({}),e})();function N_(e){return"server"===e}class eR extends dN{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ud extends eR{static makeCurrent(){!function cN(e){Gc||(Gc=e)}(new ud)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function tR(){return fs=fs||document.querySelector("base"),fs?fs.getAttribute("href"):null}();return null==n?null:function nR(e){ha=ha||document.createElement("a"),ha.setAttribute("href",e);const t=ha.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){fs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function KN(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let ha,fs=null,iR=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();const cd=new k("EventManagerPlugins");let L_=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}}return e.\u0275fac=function(n){return new(n||e)(z(cd),z(Ee))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();class $_{constructor(t){this._doc=t}}const dd="ng-app-id";let U_=(()=>{class e{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=N_(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${dd}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(dd),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(dd,this.appId),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}}return e.\u0275fac=function(n){return new(n||e)(z(rr),z(Co),z(sg,8),z(Rr))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();const fd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hd=/%COMP%/g,lR=new k("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function B_(e,t){return t.map(n=>n.replace(hd,e))}let H_=(()=>{class e{constructor(n,r,i,s,o,a,l,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=N_(a),this.defaultRenderer=new pd(n,o,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===nt.ShadowDom&&(r={...r,encapsulation:nt.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof z_?i.applyToHost(n):i instanceof gd&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case nt.Emulated:s=new z_(l,u,r,this.appId,c,o,a,d);break;case nt.ShadowDom:return new fR(l,u,n,r,o,a,this.nonce,d);default:s=new gd(l,u,r,c,o,a,d)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return e.\u0275fac=function(n){return new(n||e)(z(L_),z(U_),z(Co),z(lR),z(rr),z(Rr),z(Ee),z(sg))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();class pd{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(fd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(j_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(j_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=fd[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=fd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ze.DashCase|Ze.Important)?t.style.setProperty(n,r,i&Ze.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ze.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Wc().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function j_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class fR extends pd{constructor(t,n,r,i,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=B_(i.id,i.styles);for(const c of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=c,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gd extends pd{constructor(t,n,r,i,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.rendererUsageCount=0,this.styles=l?B_(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestroy&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class z_ extends gd{constructor(t,n,r,i,s,o,a,l){const u=i+"-"+r.id;super(t,n,r,s,o,a,l,u),this.contentAttr=function uR(e){return"_ngcontent-%COMP%".replace(hd,e)}(u),this.hostAttr=function cR(e){return"_nghost-%COMP%".replace(hd,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let hR=(()=>{class e extends $_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(z(rr))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();const G_=["alt","control","meta","shift"],pR={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gR={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let mR=(()=>{class e extends $_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wc().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),G_.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),o+=u+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=pR[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),G_.forEach(o=>{o!==i&&(0,gR[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(z(rr))},e.\u0275prov=Q({token:e,factory:e.\u0275fac}),e})();const bR=Gv(Jx,"browser",[{provide:Rr,useValue:"browser"},{provide:ig,useValue:function yR(){ud.makeCurrent()},multi:!0},{provide:rr,useFactory:function _R(){return function lS(e){ru=e}(document),document},deps:[]}]),DR=new k(""),Y_=[{provide:Ko,useClass:class rR{addToWindow(t){J.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new E(5103,!1);return s},J.getAllAngularTestabilities=()=>t.getAllTestabilities(),J.getAllAngularRootElements=()=>t.getAllRootElements(),J.frameworkStabilizers||(J.frameworkStabilizers=[]),J.frameworkStabilizers.push(r=>{const i=J.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Wc().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Vv,useClass:Pc,deps:[Ee,kc,Ko]},{provide:Pc,useClass:Pc,deps:[Ee,kc,Ko]}],Z_=[{provide:hu,useValue:"root"},{provide:Xn,useFactory:function vR(){return new Xn},deps:[]},{provide:cd,useClass:hR,multi:!0,deps:[rr,Ee,Rr]},{provide:cd,useClass:mR,multi:!0,deps:[rr]},H_,U_,L_,{provide:hg,useExisting:H_},{provide:class NO{},useClass:iR,deps:[]},[]];let wR=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Co,useValue:n.appId}]}}}return e.\u0275fac=function(n){return new(n||e)(z(DR,12))},e.\u0275mod=yi({type:e}),e.\u0275inj=cr({providers:[...Z_,...Y_],imports:[IO,eN]}),e})();function yd(e){for(let t in e){let n=[...t].reduce((r,i)=>(i.toUpperCase()===i&&(i="-"+i.toLowerCase()),r+i),"");n.startsWith("-")&&(n=n.replace("-","")),n.startsWith("lr-")||(n="lr-"+n),e[t].reg&&e[t].reg(n)}}function J_(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(u){return void n(u)}a.done?t(l):Promise.resolve(l).then(r,i)}function se(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function o(l){J_(s,r,i,o,a,"next",l)}function a(l){J_(s,r,i,o,a,"throw",l)}o(void 0)})}}typeof window<"u"&&window;var MR=Object.defineProperty,vd=(e,t,n)=>(((e,t,n)=>{t in e?MR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),te=class{constructor(e){e.constructor===Object?this.store=function NR(e){let t=n=>{var r;for(let i in n)(null==(r=n[i])?void 0:r.constructor)===Object&&(n[i]=t(n[i]));return{...n}};return t(e)}(e):(this._storeIsProxy=!0,this.store=e),this.callbackMap=Object.create(null)}static warn(e,t){console.warn(`Symbiote Data: cannot ${e}. Prop name: `+t)}read(e){return this._storeIsProxy||this.store.hasOwnProperty(e)?this.store[e]:(te.warn("read",e),null)}has(e){return this._storeIsProxy?void 0!==this.store[e]:this.store.hasOwnProperty(e)}add(e,t,n=!1){!n&&Object.keys(this.store).includes(e)||(this.store[e]=t,this.notify(e))}pub(e,t){this._storeIsProxy||this.store.hasOwnProperty(e)?(this.store[e]=t,this.notify(e)):te.warn("publish",e)}multiPub(e){for(let t in e)this.pub(t,e[t])}notify(e){this.callbackMap[e]&&this.callbackMap[e].forEach(t=>{t(this.store[e])})}sub(e,t,n=!0){return this._storeIsProxy||this.store.hasOwnProperty(e)?(this.callbackMap[e]||(this.callbackMap[e]=new Set),this.callbackMap[e].add(t),n&&t(this.store[e]),{remove:()=>{this.callbackMap[e].delete(t),this.callbackMap[e].size||delete this.callbackMap[e]},callback:t}):(te.warn("subscribe",e),null)}static registerCtx(e,t=Symbol()){let n=te.globalStore.get(t);return n?console.warn('State: context UID "'+t+'" already in use'):(n=new te(e),te.globalStore.set(t,n)),n}static deleteCtx(e){te.globalStore.delete(e)}static getCtx(e,t=!0){return te.globalStore.get(e)||(t&&console.warn('State: wrong context UID - "'+e+'"'),null)}};te.globalStore=new Map;var V=Object.freeze({BIND_ATTR:"set",ATTR_BIND_PRFX:"@",EXT_DATA_CTX_PRFX:"*",NAMED_DATA_CTX_SPLTR:"/",CTX_NAME_ATTR:"ctx-name",CTX_OWNER_ATTR:"ctx-owner",CSS_CTX_PROP:"--ctx-name",EL_REF_ATTR:"ref",AUTO_TAG_PRFX:"sym",REPEAT_ATTR:"repeat",REPEAT_ITEM_TAG_ATTR:"repeat-item-tag",SET_LATER_KEY:"__toSetLater__",USE_TPL:"use-template",ROOT_STYLE_ATTR_NAME:"sym-component"}),_d=class{static generate(e="XXXXXXXXX-XXX"){let t="";for(let n=0;n<e.length;n++)t+="-"===e[n]?e[n]:"1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm".charAt(61*Math.random());return t}};function tb(e,t,n){let i,r=!0,s=t.split(".");return s.forEach((o,a)=>{a<s.length-1?e=e[o]:i=o}),e?e[i]=n:r=!1,r}var nb="__default__",BR=[function PR(e,t){[...e.querySelectorAll(`[${V.REPEAT_ATTR}]`)].forEach(n=>{let i,r=n.getAttribute(V.REPEAT_ITEM_TAG_ATTR);for(r&&(i=window.customElements.get(r)),i||(i=class extends t.BaseComponent{constructor(){super(),r||(this.style.display="contents")}},i.template=n.innerHTML,i.reg(r));n.firstChild;)n.firstChild.remove();let s=n.getAttribute(V.REPEAT_ATTR);t.sub(s,o=>{if(!o){for(;n.firstChild;)n.firstChild.remove();return}let l,a=[...n.children],u=c=>{c.forEach((f,h)=>{if(a[h])if(a[h].set$)setTimeout(()=>{a[h].set$(f)});else for(let p in f)a[h][p]=f[p];else{l||(l=new DocumentFragment);let p=new i;Object.assign(p.init$,f),l.appendChild(p)}}),l&&n.appendChild(l);let d=a.slice(c.length,a.length);for(let f of d)f.remove()};if(o.constructor===Array)u(o);else if(o.constructor===Object){let c=[];for(let d in o){let f=o[d];Object.defineProperty(f,"_KEY_",{value:d,enumerable:!0}),c.push(f)}u(c)}else console.warn("Symbiote repeat data type error:"),console.log(o)}),n.removeAttribute(V.REPEAT_ATTR),n.removeAttribute(V.REPEAT_ITEM_TAG_ATTR)})},function kR(e,t){if(t.shadowRoot)return;let n=[...e.querySelectorAll("slot")];if(!n.length)return;let r={};n.forEach(i=>{let s=i.getAttribute("name")||nb;r[s]={slot:i,fr:document.createDocumentFragment()}}),t.initChildren.forEach(i=>{var s;let o=nb;i instanceof Element&&i.hasAttribute("slot")&&(o=i.getAttribute("slot"),i.removeAttribute("slot")),null==(s=r[o])||s.fr.appendChild(i)}),Object.values(r).forEach(i=>{if(i.fr.childNodes.length)i.slot.parentNode.replaceChild(i.fr,i.slot);else if(i.slot.childNodes.length){let s=document.createDocumentFragment();s.append(...i.slot.childNodes),i.slot.parentNode.replaceChild(s,i.slot)}else i.slot.remove()})},function FR(e,t){[...e.querySelectorAll(`[${V.EL_REF_ATTR}]`)].forEach(n=>{let r=n.getAttribute(V.EL_REF_ATTR);t.ref[r]=n,n.removeAttribute(V.EL_REF_ATTR)})},function LR(e,t){[...e.querySelectorAll(`[${V.BIND_ATTR}]`)].forEach(n=>{let i=n.getAttribute(V.BIND_ATTR).split(";");[...n.attributes].forEach(s=>{if(s.name.startsWith("-")&&s.value){let o=function RR(e){return e.split("-").map((t,n)=>t&&n?t[0].toUpperCase()+t.slice(1):t).join("").split("_").map((t,n)=>t&&n?t.toUpperCase():t).join("")}(s.name.replace("-",""));i.push(o+":"+s.value),n.removeAttribute(s.name)}}),i.forEach(s=>{if(!s)return;let l,o=s.split(":").map(c=>c.trim()),a=o[0];0===a.indexOf(V.ATTR_BIND_PRFX)&&(l=!0,a=a.replace(V.ATTR_BIND_PRFX,""));let u=o[1].split(",").map(c=>c.trim());for(let c of u){let d;c.startsWith("!!")?(d="double",c=c.replace("!!","")):c.startsWith("!")&&(d="single",c=c.replace("!","")),t.sub(c,f=>{"double"===d?f=!!f:"single"===d&&(f=!f),l?f?.constructor===Boolean?f?n.setAttribute(a,""):n.removeAttribute(a):n.setAttribute(a,f):tb(n,a,f)||(n[V.SET_LATER_KEY]||(n[V.SET_LATER_KEY]=Object.create(null)),n[V.SET_LATER_KEY][a]=f)})}}),n.removeAttribute(V.BIND_ATTR)})},function(e,t){(function UR(e){let t,n=[],r=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:i=>{var s;return!(null!=(s=i.parentElement)&&s.hasAttribute("skip-text"))&&i.textContent.includes("{{")&&i.textContent.includes("}}")&&1}});for(;t=r.nextNode();)n.push(t);return n})(e).forEach(r=>{let s,i=[];for(;r.textContent.includes("}}");)r.textContent.startsWith("{{")?(s=r.textContent.indexOf("}}")+2,r.splitText(s),i.push(r)):(s=r.textContent.indexOf("{{"),r.splitText(s)),r=r.nextSibling;i.forEach(o=>{let a=o.textContent.replace("{{","").replace("}}","");o.textContent="",t.sub(a,l=>{o.textContent=l})})})}],HR=/\\([0-9a-fA-F]{1,6} ?)/g;var rb=0,ti=null,mn=null,On=class extends HTMLElement{constructor(){super(),vd(this,"updateCssData",()=>{var e;this.dropCssDataCache(),null==(e=this.__boundCssProps)||e.forEach(t=>{let n=this.getCssData(this.__extractCssName(t),!0);null!==n&&this.$[t]!==n&&(this.$[t]=n)})}),this.init$=Object.create(null),this.cssInit$=Object.create(null),this.tplProcessors=new Set,this.ref=Object.create(null),this.allSubs=new Set,this.pauseRender=!1,this.renderShadow=!1,this.readyToDestroy=!0,this.processInnerHtml=!1,this.allowCustomTemplate=!1,this.ctxOwner=!1}get BaseComponent(){return On}initCallback(){}__initCallback(){var e;this.__initialized||(this.__initialized=!0,null==(e=this.initCallback)||e.call(this))}render(e,t=this.renderShadow){let n;if((t||this.constructor.__shadowStylesUrl)&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.allowCustomTemplate){let i=this.getAttribute(V.USE_TPL);if(i){let s=this.getRootNode(),o=s?.querySelector(i)||document.querySelector(i);o?e=o.content.cloneNode(!0):console.warn(`Symbiote template "${i}" is not found...`)}}if(this.processInnerHtml)for(let i of this.tplProcessors)i(this,this);if(e||this.constructor.template){if(this.constructor.template&&!this.constructor.__tpl&&(this.constructor.__tpl=document.createElement("template"),this.constructor.__tpl.innerHTML=this.constructor.template),e?.constructor===DocumentFragment)n=e;else if(e?.constructor===String){let i=document.createElement("template");i.innerHTML=e,n=i.content.cloneNode(!0)}else this.constructor.__tpl&&(n=this.constructor.__tpl.content.cloneNode(!0));for(let i of this.tplProcessors)i(n,this)}let r=()=>{n&&(t&&this.shadowRoot.appendChild(n)||this.appendChild(n)),this.__initCallback()};if(this.constructor.__shadowStylesUrl){t=!0;let i=document.createElement("link");i.rel="stylesheet",i.href=this.constructor.__shadowStylesUrl,i.onload=r,this.shadowRoot.prepend(i)}else r()}addTemplateProcessor(e){this.tplProcessors.add(e)}get autoCtxName(){return this.__autoCtxName||(this.__autoCtxName=_d.generate(),this.style.setProperty(V.CSS_CTX_PROP,`'${this.__autoCtxName}'`)),this.__autoCtxName}get cssCtxName(){return this.getCssData(V.CSS_CTX_PROP,!0)}get ctxName(){var e;let t=(null==(e=this.getAttribute(V.CTX_NAME_ATTR))?void 0:e.trim())||this.cssCtxName||this.__cachedCtxName||this.autoCtxName;return this.__cachedCtxName=t,t}get localCtx(){return this.__localCtx||(this.__localCtx=te.registerCtx({},this)),this.__localCtx}get nodeCtx(){return te.getCtx(this.ctxName,!1)||te.registerCtx({},this.ctxName)}static __parseProp(e,t){let n,r;if(e.startsWith(V.EXT_DATA_CTX_PRFX))n=t.nodeCtx,r=e.replace(V.EXT_DATA_CTX_PRFX,"");else if(e.includes(V.NAMED_DATA_CTX_SPLTR)){let i=e.split(V.NAMED_DATA_CTX_SPLTR);n=te.getCtx(i[0]),r=i[1]}else n=t.localCtx,r=e;return{ctx:n,name:r}}sub(e,t,n=!0){let r=s=>{this.isConnected&&t(s)},i=On.__parseProp(e,this);i.ctx.has(i.name)?this.allSubs.add(i.ctx.sub(i.name,r,n)):window.setTimeout(()=>{this.allSubs.add(i.ctx.sub(i.name,r,n))})}notify(e){let t=On.__parseProp(e,this);t.ctx.notify(t.name)}has(e){let t=On.__parseProp(e,this);return t.ctx.has(t.name)}add(e,t,n=!1){let r=On.__parseProp(e,this);r.ctx.add(r.name,t,n)}add$(e,t=!1){for(let n in e)this.add(n,e[n],t)}get $(){return this.__stateProxy||(this.__stateProxy=new Proxy(Object.create(null),{set:(t,n,r)=>{let i=On.__parseProp(n,this);return i.ctx.pub(i.name,r),!0},get:(t,n)=>{let r=On.__parseProp(n,this);return r.ctx.read(r.name)}})),this.__stateProxy}set$(e,t=!1){for(let n in e){let r=e[n];(t||![String,Number,Boolean].includes(r?.constructor)||this.$[n]!==r)&&(this.$[n]=r)}}get __ctxOwner(){return this.ctxOwner||this.hasAttribute(V.CTX_OWNER_ATTR)&&"false"!==this.getAttribute(V.CTX_OWNER_ATTR)}__initDataCtx(){let e=this.constructor.__attrDesc;if(e)for(let t of Object.values(e))Object.keys(this.init$).includes(t)||(this.init$[t]="");for(let t in this.init$)if(t.startsWith(V.EXT_DATA_CTX_PRFX))this.nodeCtx.add(t.replace(V.EXT_DATA_CTX_PRFX,""),this.init$[t],this.__ctxOwner);else if(t.includes(V.NAMED_DATA_CTX_SPLTR)){let n=t.split(V.NAMED_DATA_CTX_SPLTR),r=n[0].trim(),i=n[1].trim();if(r&&i){let s=te.getCtx(r,!1);s||(s=te.registerCtx({},r)),s.add(i,this.init$[t])}}else this.localCtx.add(t,this.init$[t]);for(let t in this.cssInit$)this.bindCssData(t,this.cssInit$[t]);this.__dataCtxInitialized=!0}connectedCallback(){var e;if(this.isConnected){if(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),!this.connectedOnce){let t=null==(e=this.getAttribute(V.CTX_NAME_ATTR))?void 0:e.trim();if(t&&this.style.setProperty(V.CSS_CTX_PROP,`'${t}'`),this.__initDataCtx(),this[V.SET_LATER_KEY]){for(let n in this[V.SET_LATER_KEY])tb(this,n,this[V.SET_LATER_KEY][n]);delete this[V.SET_LATER_KEY]}this.initChildren=[...this.childNodes];for(let n of BR)this.addTemplateProcessor(n);if(this.pauseRender)this.__initCallback();else if(this.constructor.__rootStylesLink){let n=this.getRootNode();if(!n)return;if(n?.querySelector(`link[${V.ROOT_STYLE_ATTR_NAME}="${this.constructor.is}"]`))return void this.render();let i=this.constructor.__rootStylesLink.cloneNode(!0);i.setAttribute(V.ROOT_STYLE_ATTR_NAME,this.constructor.is),i.onload=()=>{this.render()},n.nodeType===Node.DOCUMENT_NODE?n.head.appendChild(i):n.prepend(i)}else this.render()}this.connectedOnce=!0}}destroyCallback(){}disconnectedCallback(){this.connectedOnce&&(this.dropCssDataCache(),this.readyToDestroy&&(this.__disconnectTimeout&&window.clearTimeout(this.__disconnectTimeout),this.__disconnectTimeout=window.setTimeout(()=>{this.destroyCallback();for(let e of this.allSubs)e.remove(),this.allSubs.delete(e);for(let e of this.tplProcessors)this.tplProcessors.delete(e);mn?.delete(this.updateCssData),mn?.size||(ti?.disconnect(),ti=null,mn=null)},100)))}static reg(e,t=!1){e||(rb++,e=`${V.AUTO_TAG_PRFX}-${rb}`),this.__tag=e;let n=window.customElements.get(e);n?!t&&n!==this&&console.warn([`Element with tag name "${e}" already registered.`,`You're trying to override it with another class "${this.name}".`,"This is most likely a mistake.","New element will not be registered."].join("\n")):window.customElements.define(e,t?class extends(this){}:this)}static get is(){return this.__tag||this.reg(),this.__tag}static bindAttributes(e){this.observedAttributes=Object.keys(e),this.__attrDesc=e}attributeChangedCallback(e,t,n){var r;if(t===n)return;let i=null==(r=this.constructor.__attrDesc)?void 0:r[e];i?this.__dataCtxInitialized?this.$[i]=n:this.init$[i]=n:this[e]=n}getCssData(e,t=!1){if(this.__cssDataCache||(this.__cssDataCache=Object.create(null)),!Object.keys(this.__cssDataCache).includes(e)){this.__computedStyle||(this.__computedStyle=window.getComputedStyle(this));let n=this.__computedStyle.getPropertyValue(e).trim();try{this.__cssDataCache[e]=function WR(e){let t=e;(function jR(e){return!('"'!==e[0]&&"'"!==e[0]||'"'!==e[e.length-1]&&"'"!==e[e.length-1])})(e)&&(t=function zR(e){return('"'===e[0]||"'"===e[0])&&(e=e.slice(1)),('"'===e[e.length-1]||"'"===e[e.length-1])&&(e=e.slice(0,-1)),e}(t),t=t.replace(HR,(n,r)=>String.fromCodePoint(parseInt(r.trim(),16))),t=t.replaceAll("\\\n","\\n"),t=function GR(e){let t="",n="";for(var r=0;r<e.length;r++)"\\"===e[r]&&'"'===e[r+1]?(t+='\\"',r++):t+='"'===e[r]&&"\\"!==n?'\\"':e[r],n=e[r];return t}(t),t='"'+t+'"');try{return JSON.parse(t)}catch{throw new Error(`Failed to parse CSS property value: ${t}. Original input: ${e}`)}}(n)}catch{!t&&console.warn(`CSS Data error: ${e}`),this.__cssDataCache[e]=null}}return this.__cssDataCache[e]}__extractCssName(e){return e.split("--").map((t,n)=>0===n?"":t).join("--")}__initStyleAttrObserver(){mn||(mn=new Set),mn.add(this.updateCssData),ti||(ti=new MutationObserver(e=>{"attributes"===e[0].type&&mn.forEach(t=>{t()})})).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}bindCssData(e,t=""){this.__boundCssProps||(this.__boundCssProps=new Set),this.__boundCssProps.add(e);let n=this.getCssData(this.__extractCssName(e),!0);null===n&&(n=t),this.add(e,n),this.__initStyleAttrObserver()}dropCssDataCache(){this.__cssDataCache=null,this.__computedStyle=null}defineAccessor(e,t,n){let r="__"+e;this[r]=this[e],Object.defineProperty(this,e,{set:i=>{this[r]=i,n?window.setTimeout(()=>{t?.(i)}):t?.(i)},get:()=>this[r]}),this[e]=this[r]}static set shadowStyles(e){let t=new Blob([e],{type:"text/css"});this.__shadowStylesUrl=URL.createObjectURL(t)}static set rootStyles(e){if(!this.__rootStylesLink){let t=new Blob([e],{type:"text/css"}),n=URL.createObjectURL(t),r=document.createElement("link");r.href=n,r.rel="stylesheet",this.__rootStylesLink=r}}},ma=On;vd(ma,"template");var bd=class{static _print(e){console.warn(e)}static setDefaultTitle(e){this.defaultTitle=e}static setRoutingMap(e){Object.assign(this.appMap,e);for(let t in this.appMap)this.defaultRoute||!0!==this.appMap[t].default?!this.errorRoute&&!0===this.appMap[t].error&&(this.errorRoute=t):this.defaultRoute=t}static set routingEventName(e){this.__routingEventName=e}static get routingEventName(){return this.__routingEventName||"sym-on-route"}static readAddressBar(){let e={route:null,options:{}};return window.location.search.split(this.separator).forEach(n=>{if(n.includes("?"))e.route=n.replace("?","");else if(n.includes("=")){let r=n.split("=");e.options[r[0]]=decodeURI(r[1])}else e.options[n]=!0}),e}static notify(){let e=this.readAddressBar(),t=this.appMap[e.route];if(t&&t.title&&(document.title=t.title),null===e.route&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t&&this.errorRoute)return void this.applyRoute(this.errorRoute);if(!t&&this.defaultRoute)return void this.applyRoute(this.defaultRoute);if(!t)return void this._print(`Route "${e.route}" not found...`);let n=new CustomEvent(bd.routingEventName,{detail:{route:e.route,options:Object.assign(t||{},e.options)}});window.dispatchEvent(n)}static reflect(e,t={}){let n=this.appMap[e];if(!n)return void this._print("Wrong route: "+e);let r="?"+e;for(let s in t)r+=!0===t[s]?this.separator+s:this.separator+s+`=${t[s]}`;let i=n.title||this.defaultTitle||"";window.history.pushState(null,i,r),document.title=i}static applyRoute(e,t={}){this.reflect(e,t),this.notify()}static setSeparator(e){this._separator=e}static get separator(){return this._separator||"&"}static createRouterData(e,t){this.setRoutingMap(t);let n=te.registerCtx({route:null,options:null,title:null},e);return window.addEventListener(this.routingEventName,r=>{var i;n.multiPub({route:r.detail.route,options:r.detail.options,title:(null==(i=r.detail.options)?void 0:i.title)||this.defaultTitle||""})}),bd.notify(),this.initPopstateListener(),n}static initPopstateListener(){this.__onPopstate||(this.__onPopstate=()=>{this.notify()},window.addEventListener("popstate",this.__onPopstate))}static removePopstateListener(){window.removeEventListener("popstate",this.__onPopstate),this.__onPopstate=null}};function Dd(e={tag:"div"}){let t=document.createElement(e.tag);if(e.attributes&&function YR(e,t){for(let n in t)t[n].constructor===Boolean?t[n]?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,t[n])}(t,e.attributes),e.styles&&function qR(e,t){for(let n in t)n.includes("-")?e.style.setProperty(n,t[n]):e.style[n]=t[n]}(t,e.styles),e.properties)for(let n in e.properties)t[n]=e.properties[n];return e.processors&&e.processors.forEach(n=>{n(t)}),e.children&&e.children.forEach(n=>{let r=Dd(n);t.appendChild(r)}),t}bd.appMap=Object.create(null);var ib="idb-store-ready",sb=class{static get readyEventName(){return ib}static open(e="symbiote-db",t="store"){let n=e+"/"+t;return this._reg[n]||(this._reg[n]=new class{_notifyWhenReady(e=null){window.dispatchEvent(new CustomEvent(ib,{detail:{dbName:this.name,storeName:this.storeName,event:e}}))}get _updEventName(){return"symbiote-idb-update_"+this.name}_getUpdateEvent(e){return new CustomEvent(this._updEventName,{detail:{key:this.name,newValue:e}})}_notifySubscribers(e){window.localStorage.removeItem(this.name),window.localStorage.setItem(this.name,e),window.dispatchEvent(this._getUpdateEvent(e))}constructor(e,t){var n=this;this.name=e,this.storeName=t,this.version=1,this.request=window.indexedDB.open(this.name,this.version),this.request.onupgradeneeded=r=>{this.db=r.target.result,this.objStore=this.db.createObjectStore(t,{keyPath:"_key"}),this.objStore.transaction.oncomplete=i=>{this._notifyWhenReady(i)}},this.request.onsuccess=r=>{this.db=r.target.result,this._notifyWhenReady(r)},this.request.onerror=r=>{console.error(r)},this._subscriptionsMap={},this._updateHandler=r=>{r.key===this.name&&this._subscriptionsMap[r.newValue]&&this._subscriptionsMap[r.newValue].forEach(function(){var s=se(function*(o){o(yield n.read(r.newValue))});return function(o){return s.apply(this,arguments)}}())},this._localUpdateHandler=r=>{this._updateHandler(r.detail)},window.addEventListener("storage",this._updateHandler),window.addEventListener(this._updEventName,this._localUpdateHandler)}read(e){let n=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).get(e);return new Promise((r,i)=>{n.onsuccess=s=>{var o;null!=(o=s.target.result)&&o._value?r(s.target.result._value):(r(null),console.warn(`IDB: cannot read "${e}"`))},n.onerror=s=>{i(s)}})}write(e,t,n=!1){let r={_key:e,_value:t},s=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).put(r);return new Promise((o,a)=>{s.onsuccess=l=>{n||this._notifySubscribers(e),o(l.target.result)},s.onerror=l=>{a(l)}})}delete(e,t=!1){let r=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).delete(e);return new Promise((i,s)=>{r.onsuccess=o=>{t||this._notifySubscribers(e),i(o)},r.onerror=o=>{s(o)}})}getAll(){let t=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).getAll();return new Promise((n,r)=>{t.onsuccess=i=>{n(i.target.result.map(o=>o._value))},t.onerror=i=>{r(i)}})}subscribe(e,t){this._subscriptionsMap[e]||(this._subscriptionsMap[e]=new Set);let n=this._subscriptionsMap[e];return n.add(t),{remove:()=>{n.delete(t),n.size||delete this._subscriptionsMap[e]}}}stop(){window.removeEventListener("storage",this._updateHandler),this._subscriptionsMap=null,sb.clear(this.name)}}(e,t)),this._reg[n]}static clear(e){window.indexedDB.deleteDatabase(e);for(let t in this._reg)t.split("/")[0]===e&&delete this._reg[t]}};function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e,t,n){return(t=function JR(e){var t=function QR(e,t){if("object"!==ps(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ps(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ps(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e,t){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)};return r.cancel=()=>{clearTimeout(n)},r}vd(sb,"_reg",Object.create(null));const ya="__UPLOADCARE_BLOCKS_WINDOW_HEIGHT_TRACKER_ENABLED__";function ob(){return!(typeof window[ya]>"u"||!window[ya])}const nP=e=>e,wd="{{",ab="}}",lb="plural:";function Cd(e,t,n={}){let{openToken:r=wd,closeToken:i=ab,transform:s=nP}=n;for(let o in t){let a=t[o]?.toString();e=e.replaceAll(r+o+i,"string"==typeof a?s(a):a)}return e}function ub(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gs(e,t,n){ub(e,t),t.set(e,n)}function Ed(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function cb(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ue(e,t){return function sP(e,t){return t.get?t.get.call(e):t.value}(e,cb(e,t,"get"))}function va(e,t,n){return function oP(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,cb(e,t,"set"),n),n}function db(e){return"[object Object]"===Object.prototype.toString.call(e)}const aP=/\W|_/g;function lP(e){return e.split(aP).map((t,n)=>t.charAt(0)[n>0?"toUpperCase":"toLowerCase"]()+t.slice(1)).join("")}function fb(e,{ignoreKeys:t}={ignoreKeys:[]}){return Array.isArray(e)?e.map(n=>Kt(n,{ignoreKeys:t})):e}function Kt(e,{ignoreKeys:t}={ignoreKeys:[]}){if(Array.isArray(e))return fb(e,{ignoreKeys:t});if(!db(e))return e;const n={};for(const r of Object.keys(e)){let i=e[r];t.includes(r)?n[r]=i:(db(i)?i=Kt(i,{ignoreKeys:t}):Array.isArray(i)&&(i=fb(i,{ignoreKeys:t})),n[lP(r)]=i)}return n}const uP=e=>new Promise(t=>setTimeout(t,e));function hb({libraryName:e,libraryVersion:t,userAgent:n,publicKey:r="",integration:i=""}){const s="JavaScript";return"string"==typeof n?n:"function"==typeof n?n({publicKey:r,libraryName:e,libraryVersion:t,languageName:s,integration:i}):`${[e,t,r].filter(Boolean).join("/")} (${[s,i].filter(Boolean).join("; ")})`}const cP={factor:2,time:100};class _a extends Error{constructor(t){super(),y(this,"originalProgressEvent",void 0),this.name="UploadcareNetworkError",this.message="Network error",Object.setPrototypeOf(this,_a.prototype),this.originalProgressEvent=t}}const ba=(e,t)=>{e&&(e.aborted?Promise.resolve().then(t):e.addEventListener("abort",()=>t(),{once:!0}))};class ni extends Error{constructor(t="Request canceled"){super(t),y(this,"isCancel",!0),Object.setPrototypeOf(this,ni.prototype)}}const pb=({check:e,interval:t=500,timeout:n,signal:r})=>new Promise((i,s)=>{let o,a;ba(r,()=>{o&&clearTimeout(o),s(new ni("Poll cancelled"))}),n&&(a=setTimeout(()=>{o&&clearTimeout(o),s(new ni("Timed out"))},n));const l=()=>{try{Promise.resolve(e(r)).then(u=>{u?(a&&clearTimeout(a),i(u)):o=setTimeout(l,t)}).catch(u=>{a&&clearTimeout(a),s(u)})}catch(u){a&&clearTimeout(a),s(u)}};o=setTimeout(l,0)}),H={baseCDN:"https://ucarecdn.com",baseURL:"https://upload.uploadcare.com",maxContentLength:52428800,retryThrottledRequestMaxTimes:1,retryNetworkErrorMaxTimes:3,multipartMinFileSize:26214400,multipartChunkSize:5242880,multipartMinLastPartSize:1048576,maxConcurrentRequests:4,pollingTimeoutMilliseconds:1e4,pusherKey:"79ae88bd931ea68464d9"},Da="application/octet-stream",gb="original",yn=({method:e,url:t,data:n,headers:r={},signal:i,onProgress:s})=>new Promise((o,a)=>{const l=new XMLHttpRequest,u=e?.toUpperCase()||"GET";let c=!1;l.open(u,t,!0),r&&Object.entries(r).forEach(d=>{const[f,h]=d;typeof h<"u"&&!Array.isArray(h)&&l.setRequestHeader(f,h)}),l.responseType="text",ba(i,()=>{c=!0,l.abort(),a(new ni)}),l.onload=()=>{if(200!=l.status)a(new Error(`Error ${l.status}: ${l.statusText}`));else{const d={method:u,url:t,data:n,headers:r||void 0,signal:i,onProgress:s},f=l.getAllResponseHeaders().trim().split(/[\r\n]+/),h={};f.forEach(function(v){const _=v.split(": "),m=_.shift(),D=_.join(": ");m&&typeof m<"u"&&(h[m]=D)}),o({request:d,data:l.response,headers:h,status:l.status})}},l.onerror=d=>{c||a(new _a(d))},s&&"function"==typeof s&&(l.upload.onprogress=d=>{s(d.lengthComputable?{isComputable:!0,value:d.loaded/d.total}:{isComputable:!1})}),n?l.send(n):l.send()}),pP=({name:e})=>e?[e]:[],gP=function hP(e,...t){return e};var mP=()=>new FormData;const wa=e=>typeof Blob<"u"&&e instanceof Blob,Ca=e=>typeof File<"u"&&e instanceof File,Ea=e=>!!e&&"object"==typeof e&&!Array.isArray(e)&&"uri"in e&&"string"==typeof e.uri,ms=e=>wa(e)||Ca(e)||Ea(e),yP=e=>"string"==typeof e||"number"==typeof e||typeof e>"u",vP=e=>!!e&&"object"==typeof e&&!Array.isArray(e),_P=e=>!!e&&"object"==typeof e&&"data"in e&&ms(e.data);function bP(e,t,n){if(_P(n)){const{name:r,contentType:i}=n,s=gP(n.data,r,i??Da),o=pP({name:r,contentType:i});e.push([t,s,...o])}else if(vP(n))for(const[r,i]of Object.entries(n))typeof i<"u"&&e.push([`${t}[${r}]`,String(i)]);else yP(n)&&n&&e.push([t,n.toString()])}function Sd(e){const t=mP(),n=function DP(e){const t=[];for(const[n,r]of Object.entries(e))bP(t,n,r);return t}(e);for(const r of n){const[i,s,...o]=r;t.append(i,s,...o)}return t}class Ve extends Error{constructor(t,n,r,i,s){super(),y(this,"isCancel",void 0),y(this,"code",void 0),y(this,"request",void 0),y(this,"response",void 0),y(this,"headers",void 0),this.name="UploadClientError",this.message=t,this.code=n,this.request=r,this.response=i,this.headers=s,Object.setPrototypeOf(this,Ve.prototype)}}const Xt=(e,t,n)=>{const r=new URL(e);return r.pathname=(r.pathname+t).replace("//","/"),n&&(r.search=(e=>{const t=new URLSearchParams;for(const[n,r]of Object.entries(e))r&&"object"==typeof r&&!Array.isArray(r)?Object.entries(r).filter(i=>i[1]??!1).forEach(i=>t.set(`${n}[${i[0]}]`,String(i[1]))):Array.isArray(r)?r.forEach(i=>{t.append(`${n}[]`,i)}):"string"==typeof r&&r?t.set(n,r):"number"==typeof r&&t.set(n,r.toString());return t.toString()})(n)),r.toString()},EP="UploadcareUploadClient",SP="6.6.1";function Rn(e){return hb({libraryName:EP,libraryVersion:SP,...e})}const IP="RequestThrottledError",yb=15e3,TP=1e3;function vn(e,t){const{retryThrottledRequestMaxTimes:n,retryNetworkErrorMaxTimes:r}=t;return function dP(e,t=cP){let n=0;return function r(i){const s=Math.round(t.time*t.factor**n);return i({attempt:n,retry:a=>uP(a??s).then(()=>(n+=1,r(i)))})}(e)}(({attempt:i,retry:s})=>e().catch(o=>{if("response"in o&&o?.code===IP&&i<n)return s(function AP(e){const{headers:t}=e||{};if(!t||"string"!=typeof t["retry-after"])return yb;const n=parseInt(t["retry-after"],10);return Number.isFinite(n)?1e3*n:yb}(o));if(o instanceof _a&&i<r)return s((i+1)*TP);throw o}))}const vb=e=>{let t="";return(wa(e)||Ca(e)||Ea(e))&&(t=e.type),t||Da},_b=e=>{let t="";return Ca(e)&&e.name?t=e.name:wa(e)?t="":Ea(e)&&e.name&&(t=e.name),t||gb};function Id(e){return typeof e>"u"||"auto"===e?"auto":e?"1":"0"}var ri=(()=>((ri=ri||{}).Token="token",ri.FileInfo="file_info",ri))();var ve=(()=>((ve=ve||{}).Unknown="unknown",ve.Waiting="waiting",ve.Progress="progress",ve.Error="error",ve.Success="success",ve))();function wb(e,{publicKey:t,baseURL:n=H.baseURL,signal:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:a=H.retryNetworkErrorMaxTimes}={}){return vn(()=>yn({method:"GET",headers:t?{"X-UC-User-Agent":Rn({publicKey:t,integration:i,userAgent:s})}:void 0,url:Xt(n,"/from_url/status/",{jsonerrors:1,token:e}),signal:r}).then(({data:l,headers:u,request:c})=>{const d=Kt(JSON.parse(l));if("error"in d&&!(e=>"status"in e&&e.status===ve.Error)(d))throw new Ve(d.error.content,void 0,c,d,u);return d}),{retryNetworkErrorMaxTimes:a,retryThrottledRequestMaxTimes:o})}function Td(e,{publicKey:t,baseURL:n=H.baseURL,signal:r,source:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=H.retryNetworkErrorMaxTimes}){return vn(()=>yn({method:"GET",headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:s,userAgent:o})},url:Xt(n,"/info/",{jsonerrors:1,pub_key:t,file_id:e,source:i}),signal:r}).then(({data:u,headers:c,request:d})=>{const f=Kt(JSON.parse(u));if("error"in f)throw new Ve(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}function Ad({file:e,publicKey:t,baseURL:n,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a,signal:l,onProgress:u}){return pb({check:c=>Td(e,{publicKey:t,baseURL:n,signal:c,source:r,integration:i,userAgent:s,retryThrottledRequestMaxTimes:o,retryNetworkErrorMaxTimes:a}).then(d=>d.isReady?d:(u&&u({isComputable:!0,value:1}),!1)),signal:l})}class ys{constructor(t,{baseCDN:n=H.baseCDN,fileName:r}={}){y(this,"uuid",void 0),y(this,"name",null),y(this,"size",null),y(this,"isStored",null),y(this,"isImage",null),y(this,"mimeType",null),y(this,"cdnUrl",null),y(this,"s3Url",null),y(this,"originalFilename",null),y(this,"imageInfo",null),y(this,"videoInfo",null),y(this,"contentInfo",null),y(this,"metadata",null),y(this,"s3Bucket",null);const{uuid:i,s3Bucket:s}=t,o=Xt(n,`${i}/`),a=s?Xt(`https://${s}.s3.amazonaws.com/`,`${i}/${t.filename}`):null;this.uuid=i,this.name=r||t.filename,this.size=t.size,this.isStored=t.isStored,this.isImage=t.isImage,this.mimeType=t.mimeType,this.cdnUrl=o,this.originalFilename=t.originalFilename,this.imageInfo=t.imageInfo,this.videoInfo=t.videoInfo,this.contentInfo=t.contentInfo,this.metadata=t.metadata||null,this.s3Bucket=s||null,this.s3Url=a}}const NP=(e,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,contentType:a,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,baseCDN:g,metadata:v})=>function bb(e,{publicKey:t,fileName:n,contentType:r,baseURL:i=H.baseURL,secureSignature:s,secureExpire:o,store:a,signal:l,onProgress:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=H.retryNetworkErrorMaxTimes,metadata:g}){return vn(()=>yn({method:"POST",url:Xt(i,"/base/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:d,userAgent:f})},data:Sd({file:{data:e,name:n||_b(e),contentType:r||vb(e)},UPLOADCARE_PUB_KEY:t,UPLOADCARE_STORE:Id(a),signature:s,expire:o,source:c,metadata:g}),signal:l,onProgress:u}).then(({data:v,headers:_,request:m})=>{const D=Kt(JSON.parse(v));if("error"in D)throw new Ve(D.error.content,D.error.errorCode,m,D,_);return D}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,contentType:a,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:l,onProgress:u,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,metadata:v}).then(({file:_})=>Ad({file:_,publicKey:t,baseURL:r,source:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p,onProgress:u,signal:l})).then(_=>new ys(_,{baseCDN:g})),OP=(e,{publicKey:t,fileName:n,baseURL:r,signal:i,onProgress:s,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c,baseCDN:d})=>Td(e,{publicKey:t,baseURL:r,signal:i,source:o,integration:a,userAgent:l,retryThrottledRequestMaxTimes:u,retryNetworkErrorMaxTimes:c}).then(f=>new ys(f,{baseCDN:d,fileName:n})).then(f=>(s&&s({isComputable:!0,value:1}),f));var PP=window.WebSocket;class kP{constructor(){y(this,"events",Object.create({}))}emit(t,n){this.events[t]?.forEach(r=>r(n))}on(t,n){this.events[t]=this.events[t]||[],this.events[t].push(n)}off(t,n){this.events[t]=n?this.events[t].filter(r=>r!==n):[]}}class LP{constructor(t,n=3e4){y(this,"key",void 0),y(this,"disconnectTime",void 0),y(this,"ws",void 0),y(this,"queue",[]),y(this,"isConnected",!1),y(this,"subscribers",0),y(this,"emmitter",new kP),y(this,"disconnectTimeoutId",null),this.key=t,this.disconnectTime=n}connect(){this.disconnectTimeoutId&&clearTimeout(this.disconnectTimeoutId),this.isConnected||this.ws||(this.ws=new PP(`wss://ws.pusherapp.com/app/${this.key}?protocol=5&client=js&version=1.12.2`),this.ws.addEventListener("error",n=>{this.emmitter.emit("error",new Error(n.message))}),this.emmitter.on("connected",()=>{this.isConnected=!0,this.queue.forEach(n=>this.send(n.event,n.data)),this.queue=[]}),this.ws.addEventListener("message",n=>{const r=JSON.parse(n.data.toString());switch(r.event){case"pusher:connection_established":this.emmitter.emit("connected",void 0);break;case"pusher:ping":this.send("pusher:pong",{});break;case"progress":case"success":case"fail":this.emmitter.emit(r.channel,(e=r.event,t=JSON.parse(r.data),"success"===e?{status:ve.Success,...t}:"progress"===e?{status:ve.Progress,...t}:{status:ve.Error,...t}))}var e,t}))}disconnect(){const t=()=>{this.ws?.close(),this.ws=void 0,this.isConnected=!1};this.disconnectTime?this.disconnectTimeoutId=setTimeout(()=>{t()},this.disconnectTime):t()}send(t,n){const r=JSON.stringify({event:t,data:n});this.ws?.send(r)}subscribe(t,n){this.subscribers+=1,this.connect();const r=`task-status-${t}`,i={event:"pusher:subscribe",data:{channel:r}};this.emmitter.on(r,n),this.isConnected?this.send(i.event,i.data):this.queue.push(i)}unsubscribe(t){this.subscribers-=1;const n=`task-status-${t}`,r={event:"pusher:unsubscribe",data:{channel:n}};this.emmitter.off(n),this.isConnected?this.send(r.event,r.data):this.queue=this.queue.filter(i=>i.data.channel!==n),0===this.subscribers&&this.disconnect()}onError(t){return this.emmitter.on("error",t),()=>this.emmitter.off("error",t)}}let Md=null;const xd=e=>{if(!Md){const t=typeof window>"u"?0:3e4;Md=new LP(e,t)}return Md},BP=(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,onProgress:d,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,pusherKey:v=H.pusherKey,metadata:_})=>Promise.resolve((e=>{xd(e).connect()})(v)).then(()=>function Db(e,{publicKey:t,baseURL:n=H.baseURL,store:r,fileName:i,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,source:u="url",signal:c,integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=H.retryNetworkErrorMaxTimes,metadata:g}){return vn(()=>yn({method:"POST",headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:d,userAgent:f})},url:Xt(n,"/from_url/",{jsonerrors:1,pub_key:t,source_url:e,store:Id(r),filename:i,check_URL_duplicates:s?1:void 0,save_URL_duplicates:o?1:void 0,signature:a,expire:l,source:u,metadata:g}),signal:c}).then(({data:v,headers:_,request:m})=>{const D=Kt(JSON.parse(v));if("error"in D)throw new Ve(D.error.content,D.error.errorCode,m,D,_);return D}),{retryNetworkErrorMaxTimes:p,retryThrottledRequestMaxTimes:h})}(e,{publicKey:t,fileName:n,baseURL:r,checkForUrlDuplicates:s,saveUrlForRecurrentUploads:o,secureSignature:a,secureExpire:l,store:u,signal:c,source:f,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,metadata:_})).catch(m=>(xd(v)?.disconnect(),Promise.reject(m))).then(m=>m.type===ri.FileInfo?m:((e,{signal:t}={})=>{let n=null,r=null;const i=e.map(()=>new AbortController);return ba(t,()=>{i.forEach(o=>o.abort())}),Promise.all(e.map((o,a)=>{const l=(o=>()=>{r=o,i.forEach((a,l)=>l!==o&&a.abort())})(a);return Promise.resolve().then(()=>o({stopRace:l,signal:i[a].signal})).then(u=>(l(),u)).catch(u=>(n=u,null))})).then(o=>{if(null===r)throw n;return o[r]})})([({signal:D})=>function UP({token:e,publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,onProgress:a,signal:l}){return pb({check:u=>wb(e,{publicKey:t,baseURL:n,integration:r,userAgent:i,retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o,signal:u}).then(c=>{switch(c.status){case ve.Error:return new Ve(c.error,c.errorCode);case ve.Waiting:return!1;case ve.Unknown:return new Ve(`Token "${e}" was not found.`);case ve.Progress:return a&&a("unknown"===c.total?{isComputable:!1}:{isComputable:!0,value:c.done/c.total}),!1;case ve.Success:return a&&a({isComputable:!0,value:c.done/c.total}),c;default:throw new Error("Unknown status")}}),signal:l})}({token:m.token,publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:D}),({signal:D})=>(({token:e,pusherKey:t,signal:n,onProgress:r})=>new Promise((i,s)=>{const o=xd(t),a=o.onError(s),l=()=>{a(),o.unsubscribe(e)};ba(n,()=>{l(),s(new ni("pusher cancelled"))}),o.subscribe(e,u=>{switch(u.status){case ve.Progress:r&&r("unknown"===u.total?{isComputable:!1}:{isComputable:!0,value:u.done/u.total});break;case ve.Success:l(),r&&r({isComputable:!0,value:u.done/u.total}),i(u);break;case ve.Error:l(),s(new Ve(u.msg,u.error_code))}})}))({token:m.token,pusherKey:v,signal:D,onProgress:d})],{signal:c})).then(m=>{if(m instanceof Ve)throw m;return m}).then(m=>Ad({file:m.uuid,publicKey:t,baseURL:r,integration:h,userAgent:p,retryThrottledRequestMaxTimes:g,onProgress:d,signal:c})).then(m=>new ys(m,{baseCDN:i})),Nd=new WeakMap,HP=function(){var e=se(function*(t){if(Nd.has(t))return Nd.get(t);const n=yield fetch(t.uri).then(r=>r.blob());return Nd.set(t,n),n});return function(n){return e.apply(this,arguments)}}(),Tb=function(){var e=se(function*(t){if(Ca(t)||wa(t))return t.size;if(Ea(t))return(yield HP(t)).size;throw new Error("Unknown file type. Cannot determine file size.")});return function(n){return e.apply(this,arguments)}}(),jP=(e,t=H.multipartMinFileSize)=>e>=t,Ab=e=>{const n=new RegExp("[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}");return!ms(e)&&n.test(e)},Mb=e=>{const n=new RegExp("^(?:\\w+:)?\\/\\/([^\\s\\.]+\\.\\S{2}|localhost[\\:?\\d]*)\\S*$");return!ms(e)&&n.test(e)},zP=(e,t)=>new Promise((n,r)=>{const i=[];let s=!1,o=t.length;const a=[...t],l=()=>{const u=t.length-a.length,c=a.shift();c&&c().then(d=>{s||(i[u]=d,o-=1,o?l():n(i))}).catch(d=>{s=!0,r(d)})};for(let u=0;u<e;u++)l()}),WP=function(){var e=se(function*(t,n,r){return i=>((e,t,n,r)=>{const i=r*t,s=Math.min(i+r,n);return e.slice(i,s)})(t,i,n,r)});return function(n,r,i){return e.apply(this,arguments)}}(),YP=function(){var e=se(function*(t,{publicKey:n,fileName:r,fileSize:i,baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,onProgress:c,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,contentType:v,multipartChunkSize:_=H.multipartChunkSize,maxConcurrentRequests:m=H.maxConcurrentRequests,baseCDN:D,metadata:S}){const T=i??(yield Tb(t));let X;const Pt=(ce,_t)=>{if(!c)return;X||(X=Array(ce).fill(0));const bt=kt=>kt.reduce((Is,ci)=>Is+ci,0);return kt=>{kt.isComputable&&(X[_t]=kt.value,c({isComputable:!0,value:bt(X)/ce}))}};return v||=vb(t),function Eb(e,{publicKey:t,contentType:n,fileName:r,multipartChunkSize:i=H.multipartChunkSize,baseURL:s="",secureSignature:o,secureExpire:a,store:l,signal:u,source:c="local",integration:d,userAgent:f,retryThrottledRequestMaxTimes:h=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:p=H.retryNetworkErrorMaxTimes,metadata:g}){return vn(()=>yn({method:"POST",url:Xt(s,"/multipart/start/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:d,userAgent:f})},data:Sd({filename:r||gb,size:e,content_type:n||Da,part_size:i,UPLOADCARE_STORE:Id(l),UPLOADCARE_PUB_KEY:t,signature:o,expire:a,source:c,metadata:g}),signal:u}).then(({data:v,headers:_,request:m})=>{const D=Kt(JSON.parse(v));if("error"in D)throw new Ve(D.error.content,D.error.errorCode,m,D,_);return D.parts=Object.keys(D.parts).map(S=>D.parts[S]),D}),{retryThrottledRequestMaxTimes:h,retryNetworkErrorMaxTimes:p})}(T,{publicKey:n,contentType:v,fileName:r||_b(t),baseURL:s,secureSignature:o,secureExpire:a,store:l,signal:u,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,metadata:S}).then(function(){var ce=se(function*({uuid:_t,parts:bt}){const kt=yield WP(t,T,_);return Promise.all([_t,zP(m,bt.map((Is,ci)=>()=>((e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})=>function Sb(e,t,{contentType:n,signal:r,onProgress:i,retryThrottledRequestMaxTimes:s=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:o=H.retryNetworkErrorMaxTimes}){return vn(()=>yn({method:"PUT",url:t,data:e,onProgress:i,signal:r,headers:{"Content-Type":n||Da}}).then(a=>(i&&i({isComputable:!0,value:1}),a)).then(({status:a})=>({code:a})),{retryThrottledRequestMaxTimes:s,retryNetworkErrorMaxTimes:o})}(e,t,{publicKey:n,contentType:r,onProgress:i,signal:s,integration:o,retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l}))(kt(ci),Is,{publicKey:n,contentType:v,onProgress:Pt(bt.length,ci),signal:u,integration:f,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})))])});return function(_t){return ce.apply(this,arguments)}}()).then(([ce])=>function Ib(e,{publicKey:t,baseURL:n=H.baseURL,source:r="local",signal:i,integration:s,userAgent:o,retryThrottledRequestMaxTimes:a=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:l=H.retryNetworkErrorMaxTimes}){return vn(()=>yn({method:"POST",url:Xt(n,"/multipart/complete/",{jsonerrors:1}),headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:s,userAgent:o})},data:Sd({uuid:e,UPLOADCARE_PUB_KEY:t,source:r}),signal:i}).then(({data:u,headers:c,request:d})=>{const f=Kt(JSON.parse(u));if("error"in f)throw new Ve(f.error.content,f.error.errorCode,d,f,c);return f}),{retryThrottledRequestMaxTimes:a,retryNetworkErrorMaxTimes:l})}(ce,{publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g})).then(ce=>ce.isReady?ce:Ad({file:ce.uuid,publicKey:n,baseURL:s,source:d,integration:f,userAgent:h,retryThrottledRequestMaxTimes:p,retryNetworkErrorMaxTimes:g,onProgress:c,signal:u})).then(ce=>new ys(ce,{baseCDN:D}))});return function(n,r){return e.apply(this,arguments)}}();function Od(e,t){return Rd.apply(this,arguments)}function Rd(){return(Rd=se(function*(e,{publicKey:t,fileName:n,baseURL:r=H.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartMinFileSize:g,multipartChunkSize:v,maxConcurrentRequests:_,baseCDN:m=H.baseCDN,checkForUrlDuplicates:D,saveUrlForRecurrentUploads:S,pusherKey:T,metadata:X}){if(ms(e)){const Pt=yield Tb(e);return jP(Pt,g)?YP(e,{publicKey:t,contentType:p,multipartChunkSize:v,fileSize:Pt,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,maxConcurrentRequests:_,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m,metadata:X}):NP(e,{publicKey:t,fileName:n,contentType:p,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m,metadata:X})}if(Mb(e))return BP(e,{publicKey:t,fileName:n,baseURL:r,baseCDN:m,checkForUrlDuplicates:D,saveUrlForRecurrentUploads:S,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,pusherKey:T,metadata:X});if(Ab(e))return OP(e,{publicKey:t,fileName:n,baseURL:r,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,baseCDN:m});throw new TypeError(`File uploading from "${e}" is not supported`)})).apply(this,arguments)}class ZP{constructor(t,n){y(this,"uuid",void 0),y(this,"filesCount",void 0),y(this,"totalSize",void 0),y(this,"isStored",void 0),y(this,"isImage",void 0),y(this,"cdnUrl",void 0),y(this,"files",void 0),y(this,"createdAt",void 0),y(this,"storedAt",null),this.uuid=t.id,this.filesCount=t.filesCount,this.totalSize=Object.values(t.files).reduce((r,i)=>r+i.size,0),this.isStored=!!t.datetimeStored,this.isImage=!!Object.values(t.files).filter(r=>r.isImage).length,this.cdnUrl=t.cdnUrl,this.files=n,this.createdAt=t.datetimeCreated,this.storedAt=t.datetimeStored}}function xb(e,{publicKey:t,fileName:n,baseURL:r=H.baseURL,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:l,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g=H.multipartChunkSize,baseCDN:v=H.baseCDN,checkForUrlDuplicates:_,saveUrlForRecurrentUploads:m,jsonpCallback:D}){if(!(e=>{for(const t of e)if(!ms(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!Mb(t))return!1;return!0})(e)&&!(e=>{for(const t of e)if(!Ab(t))return!1;return!0})(e))throw new TypeError(`Group uploading from "${e}" is not supported`);let S,T=!0;const X=e.length,Pt=(ce,_t)=>{if(!l)return;S||(S=Array(ce).fill(0));const bt=kt=>kt.reduce((Is,ci)=>Is+ci)/ce;return kt=>{if(!kt.isComputable||!T)return T=!1,void l({isComputable:!1});S[_t]=kt.value,l({isComputable:!0,value:bt(S)})}};return Promise.all(e.map((ce,_t)=>Od(ce,{publicKey:t,fileName:n,baseURL:r,secureSignature:i,secureExpire:s,store:o,signal:a,onProgress:Pt(X,_t),source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h,contentType:p,multipartChunkSize:g,baseCDN:v,checkForUrlDuplicates:_,saveUrlForRecurrentUploads:m}))).then(ce=>function Cb(e,{publicKey:t,baseURL:n=H.baseURL,jsonpCallback:r,secureSignature:i,secureExpire:s,signal:o,source:a,integration:l,userAgent:u,retryThrottledRequestMaxTimes:c=H.retryThrottledRequestMaxTimes,retryNetworkErrorMaxTimes:d=H.retryNetworkErrorMaxTimes}){return vn(()=>yn({method:"POST",headers:{"X-UC-User-Agent":Rn({publicKey:t,integration:l,userAgent:u})},url:Xt(n,"/group/",{jsonerrors:1,pub_key:t,files:e,callback:r,signature:i,expire:s,source:a}),signal:o}).then(({data:f,headers:h,request:p})=>{const g=Kt(JSON.parse(f));if("error"in g)throw new Ve(g.error.content,g.error.errorCode,p,g,h);return g}),{retryNetworkErrorMaxTimes:d,retryThrottledRequestMaxTimes:c})}(ce.map(bt=>bt.uuid),{publicKey:t,baseURL:r,jsonpCallback:D,secureSignature:i,secureExpire:s,signal:a,source:u,integration:c,userAgent:d,retryThrottledRequestMaxTimes:f,retryNetworkErrorMaxTimes:h}).then(bt=>new ZP(bt,ce)).then(bt=>(l&&l({isComputable:!0,value:1}),bt)))}var vs=new WeakMap,Sa=new WeakMap,sr=new WeakMap,Ia=new WeakMap,Ta=new WeakMap,Aa=new WeakSet;class JP{constructor(t){(function iP(e,t){ub(e,t),t.add(e)})(this,Aa),gs(this,vs,{writable:!0,value:1}),gs(this,Sa,{writable:!0,value:[]}),gs(this,sr,{writable:!0,value:0}),gs(this,Ia,{writable:!0,value:new WeakMap}),gs(this,Ta,{writable:!0,value:new WeakMap}),va(this,vs,t)}add(t){return new Promise((n,r)=>{Ue(this,Ia).set(t,n),Ue(this,Ta).set(t,r),Ue(this,Sa).push(t),Ed(this,Aa,Pd).call(this)})}get pending(){return Ue(this,Sa).length}get running(){return Ue(this,sr)}set concurrency(t){va(this,vs,t),Ed(this,Aa,Pd).call(this)}get concurrency(){return Ue(this,vs)}}function Pd(){const e=Ue(this,vs)-Ue(this,sr);for(let t=0;t<e;t++){const n=Ue(this,Sa).shift();if(!n)return;const r=Ue(this,Ia).get(n),i=Ue(this,Ta).get(n);if(!r||!i)throw new Error("Unexpected behavior: resolver or rejector is undefined");va(this,sr,Ue(this,sr)+1),n().finally(()=>{Ue(this,Ia).delete(n),Ue(this,Ta).delete(n),va(this,sr,Ue(this,sr)-1),Ed(this,Aa,Pd).call(this)}).then(s=>r(s)).catch(s=>i(s))}}const Nb=()=>({"*blocksRegistry":new Set}),Ob=e=>({...Nb(),"*currentActivity":"","*currentActivityParams":{},"*history":[],"*historyBack":null,"*closeModal":()=>{e.set$({"*modalActive":!1,"*currentActivity":""})}}),Rb=e=>({...Ob(e),"*commonProgress":0,"*uploadList":[],"*outputData":null,"*focusedEntry":null,"*uploadMetadata":null,"*uploadQueue":new JP(1)});function ek(e,t){[...e.querySelectorAll("[l10n]")].forEach(n=>{let r=n.getAttribute("l10n"),i="textContent";if(r.includes(":")){let o=r.split(":");i=o[0],r=o[1]}let s="l10n:"+r;t.__l10nKeys.push(s),t.add(s,r),t.sub(s,o=>{n[i]=t.l10n(o)}),n.removeAttribute("l10n")})}const Qe=e=>`*cfg/${e}`,or=e=>e.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)?.map(t=>t.toLowerCase()).join("-"),Pb=new Set;function kb(e){Pb.has(e)||(Pb.add(e),console.warn(e))}const Fb=(e,t)=>new Intl.PluralRules(e).select(t);let Ie=(()=>{class e extends ma{l10n(n,r={}){if(!n)return"";let i=this.getCssData("--l10n-"+n,!0)||n,s=function rP(e){const t=[];let n=e.indexOf(wd);for(;-1!==n;){const r=e.indexOf(ab,n),i=e.substring(n+2,r);if(i.startsWith(lb)){const s=e.substring(n+2,r).replace(lb,""),o=s.substring(0,s.indexOf("(")),a=s.substring(s.indexOf("(")+1,s.indexOf(")"));t.push({variable:i,pluralKey:o,countVariable:a})}n=e.indexOf(wd,r)}return t}(i);for(let a of s)r[a.variable]=this.pluralize(a.pluralKey,Number(r[a.countVariable]));return Cd(i,r)}pluralize(n,r){const i=this.l10n("locale-name")||"en-US",s=Fb(i,r);return this.l10n(`${n}__${s}`)}constructor(){super(),y(this,"allowCustomTemplate",!0),y(this,"init$",Nb()),y(this,"updateCtxCssData",()=>{let n=this.$["*blocksRegistry"];for(let r of n)r.isConnected&&r.updateCssData()}),this.activityType=null,this.addTemplateProcessor(ek),this.__l10nKeys=[]}applyL10nKey(n,r){this.$["l10n:"+n]=r,this.__l10nKeys.push(n)}hasBlockInCtx(n){let r=this.$["*blocksRegistry"];for(let i of r)if(n(i))return!0;return!1}setForCtxTarget(n,r,i){this.hasBlockInCtx(s=>s.constructor.StateConsumerScope===n)&&(this.$[r]=i)}setActivity(n){this.hasBlockInCtx(r=>r.activityType===n)?this.$["*currentActivity"]=n:console.warn(`Activity type "${n}" not found in the context`)}connectedCallback(){const n=this.constructor.className;n&&this.classList.toggle(`lr-${n}`,!0),ob()||(this._destroyInnerHeightTracker=function tP(){if(ob())return;const e=()=>{document.documentElement.style.setProperty("--uploadcare-blocks-window-height",`${window.innerHeight}px`),window[ya]=!0},t=ir(e,100);return window.addEventListener("resize",t,{passive:!0}),e(),()=>{window[ya]=!1,window.removeEventListener("resize",t)}}()),this.hasAttribute("retpl")&&(this.constructor.template=null,this.processInnerHtml=!0),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._destroyInnerHeightTracker?.()}initCallback(){this.$["*blocksRegistry"].add(this)}destroyCallback(){this.$["*blocksRegistry"].delete(this)}fileSizeFmt(n,r=2){let i=["B","KB","MB","GB","TB"],s=u=>this.getCssData("--l10n-unit-"+u.toLowerCase(),!0)||u;if(0===n)return`0 ${s(i[0])}`;let a=r<0?0:r,l=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/1024**l).toFixed(a))+" "+s(i[l])}proxyUrl(n){let r=this.cfg.secureDeliveryProxy;return r?Cd(r,{previewUrl:n},{transform:i=>window.encodeURIComponent(i)}):n}parseCfgProp(n){return{ctx:this.nodeCtx,name:n.replace("*","")}}get cfg(){return this.__cfgProxy||(this.__cfgProxy=new Proxy(Object.create(null),{get:(r,i)=>{const s=Qe(i),o=this.parseCfgProp(s);return o.ctx.has(o.name)?o.ctx.read(o.name):(kb("Using CSS variables for configuration is deprecated. Please use `lr-config` instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.getCssData(`--cfg-${or(i)}`))}})),this.__cfgProxy}subConfigValue(n,r){const i=this.parseCfgProp(Qe(n));i.ctx.has(i.name)?this.sub(Qe(n),r):(this.bindCssData(`--cfg-${or(n)}`),this.sub(`--cfg-${or(n)}`,r))}static reg(n){n?super.reg(n.startsWith("lr-")?n:"lr-"+n):super.reg()}}return y(e,"StateConsumerScope",null),y(e,"className",""),e})(),Pn=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"_handleBackdropClick",()=>{this._closeDialog()}),y(this,"_closeDialog",()=>{this.setForCtxTarget(e.StateConsumerScope,"*modalActive",!1)}),y(this,"_handleDialogClose",()=>{this._closeDialog()}),y(this,"_handleDialogClick",r=>{r.target===this.ref.dialog&&this._closeDialog()}),y(this,"init$",{...this.init$,"*modalActive":!1,isOpen:!1,closeClicked:this._handleDialogClose})}show(){this.ref.dialog.showModal?this.ref.dialog.showModal():this.ref.dialog.setAttribute("open","")}hide(){this.ref.dialog.close?this.ref.dialog.close():this.ref.dialog.removeAttribute("open")}initCallback(){if(super.initCallback(),"function"==typeof HTMLDialogElement)this.ref.dialog.addEventListener("close",this._handleDialogClose),this.ref.dialog.addEventListener("click",this._handleDialogClick);else{this.setAttribute("dialog-fallback","");let n=document.createElement("div");n.className="backdrop",this.appendChild(n),n.addEventListener("click",this._handleBackdropClick)}this.sub("*modalActive",n=>{this.$.isOpen!==n&&(this.$.isOpen=n),document.body.style.overflow=n&&this.cfg.modalScrollLock?"hidden":""}),this.subConfigValue("modalBackdropStrokes",n=>{n?this.setAttribute("strokes",""):this.removeAttribute("strokes")}),this.sub("isOpen",n=>{n?this.show():this.hide()})}destroyCallback(){super.destroyCallback(),document.body.style.overflow="",this.ref.dialog.removeEventListener("close",this._handleDialogClose),this.ref.dialog.removeEventListener("click",this._handleDialogClick)}}return y(e,"StateConsumerScope","modal"),e.template='\n  <dialog ref="dialog">\n    <slot></slot>\n  </dialog>\n',e})();const _s="___ACTIVITY_IS_ACTIVE___";class L extends Ie{constructor(...t){super(...t),y(this,"historyTracked",!1),y(this,"init$",Ob(this)),y(this,"_debouncedHistoryFlush",ir(this._historyFlush.bind(this),10))}_deactivate(){let t=L._activityRegistry[this.activityKey];this[_s]=!1,this.removeAttribute("active"),t?.deactivateCallback?.()}_activate(){let t=L._activityRegistry[this.activityKey];this.$["*historyBack"]=this.historyBack.bind(this),this[_s]=!0,this.setAttribute("active",""),t?.activateCallback?.(),this._debouncedHistoryFlush()}initCallback(){super.initCallback(),this.hasAttribute("current-activity")&&this.sub("*currentActivity",t=>{this.setAttribute("current-activity",t)}),this.activityType&&(this.hasAttribute("activity")||this.setAttribute("activity",this.activityType),this.sub("*currentActivity",t=>{this.activityType!==t&&this[_s]?this._deactivate():this.activityType===t&&!this[_s]&&this._activate(),t||(this.$["*history"]=[])}))}_historyFlush(){let t=this.$["*history"];t&&(t.length>10&&(t=t.slice(t.length-11,t.length-1)),this.historyTracked&&t.push(this.activityType),this.$["*history"]=t)}_isActivityRegistered(){return this.activityType&&!!L._activityRegistry[this.activityKey]}get isActivityActive(){return this[_s]}registerActivity(t,n={}){const{onActivate:r,onDeactivate:i}=n;L._activityRegistry||(L._activityRegistry=Object.create(null)),L._activityRegistry[this.activityKey]={activateCallback:r,deactivateCallback:i}}unregisterActivity(){this.isActivityActive&&this._deactivate(),L._activityRegistry[this.activityKey]=void 0}destroyCallback(){super.destroyCallback(),this._isActivityRegistered()&&this.unregisterActivity(),0===Object.keys(L._activityRegistry).length&&(this.$["*currentActivity"]=null)}get activityKey(){return this.ctxName+this.activityType}get activityParams(){return this.$["*currentActivityParams"]}get initActivity(){return this.getCssData("--cfg-init-activity")}get doneActivity(){return this.getCssData("--cfg-done-activity")}historyBack(){let t=this.$["*history"];if(t){let n=t.pop();for(;n===this.activityType;)n=t.pop();this.$["*currentActivity"]=n,this.$["*history"]=t,n||this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!1)}}}y(L,"_activityRegistry",Object.create(null)),L.activities=Object.freeze({START_FROM:"start-from",CAMERA:"camera",DRAW:"draw",UPLOAD_LIST:"upload-list",URL:"url",CONFIRMATION:"confirmation",CLOUD_IMG_EDIT:"cloud-image-edit",EXTERNAL:"external",DETAILS:"details"});const _n=(e,t=",")=>e.trim().split(t).map(n=>n.trim()).filter(n=>n.length>0),Ma=["image/*","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/avif","image/avif-sequence",".heif",".heifs",".heic",".heics",".avif",".avifs"],$b=e=>e?e.filter(t=>"string"==typeof t).map(t=>_n(t)).flat():[],Ub=(e,t)=>t.some(n=>n.endsWith("*")?(n=n.replace("*",""),e.startsWith(n)):e===n),Fd=e=>{let t=e?.type;return!!t&&Ub(t,Ma)},nk=Object.freeze({file:{type:File,value:null},externalUrl:{type:String,value:null},fileName:{type:String,value:null,nullable:!0},fileSize:{type:Number,value:null,nullable:!0},lastModified:{type:Number,value:Date.now()},uploadProgress:{type:Number,value:0},uuid:{type:String,value:null},isImage:{type:Boolean,value:!1},mimeType:{type:String,value:null,nullable:!0},uploadError:{type:Error,value:null,nullable:!0},validationErrorMsg:{type:String,value:null,nullable:!0},validationMultipleLimitMsg:{type:String,value:null,nullable:!0},ctxName:{type:String,value:null},cdnUrl:{type:String,value:null},cdnUrlModifiers:{type:String,value:null},fileInfo:{type:ys,value:null},isUploading:{type:Boolean,value:!1},abortController:{type:AbortController,value:null,nullable:!0},thumbUrl:{type:String,value:null,nullable:!0},silentUpload:{type:Boolean,value:!1},source:{type:String,value:!1,nullable:!0}}),Vb="blocks",Ld="0.25.1";function rk(e){return hb({...e,libraryName:Vb,libraryVersion:Ld})}const Bb="[Typed State] Wrong property name: ";class sk{constructor(t,n){this.__typedSchema=t,this.__ctxId=n||_d.generate(),this.__schema=Object.keys(t).reduce((r,i)=>(r[i]=t[i].value,r),{}),this.__data=te.registerCtx(this.__schema,this.__ctxId)}get uid(){return this.__ctxId}setValue(t,n){if(!this.__typedSchema.hasOwnProperty(t))return void console.warn(Bb+t);let r=this.__typedSchema[t];n?.constructor===r.type||n instanceof r.type||r.nullable&&null===n?this.__data.pub(t,n):console.warn("[Typed State] Wrong property type: "+t)}setMultipleValues(t){for(let n in t)this.setValue(n,t[n])}getValue(t){if(this.__typedSchema.hasOwnProperty(t))return this.__data.read(t);console.warn(Bb+t)}subscribe(t,n){return this.__data.sub(t,n)}remove(){te.deleteCtx(this.__ctxId)}}class ok{constructor(t){this.__typedSchema=t.typedSchema,this.__ctxId=t.ctxName||_d.generate(),this.__data=te.registerCtx({},this.__ctxId),this.__watchList=t.watchList||[],this.__handler=t.handler||null,this.__subsMap=Object.create(null),this.__observers=new Set,this.__items=new Set,this.__removed=new Set,this.__added=new Set;let n=Object.create(null);this.__notifyObservers=(r,i)=>{this.__observeTimeout&&window.clearTimeout(this.__observeTimeout),n[r]||(n[r]=new Set),n[r].add(i),this.__observeTimeout=window.setTimeout(()=>{this.__observers.forEach(s=>{s({...n})}),n=Object.create(null)})}}notify(){this.__notifyTimeout&&window.clearTimeout(this.__notifyTimeout),this.__notifyTimeout=window.setTimeout(()=>{let t=new Set(this.__added),n=new Set(this.__removed);this.__added.clear(),this.__removed.clear(),this.__handler?.([...this.__items],t,n)})}setHandler(t){this.__handler=t}getHandler(){return this.__handler}removeHandler(){this.__handler=null}add(t){let n=new sk(this.__typedSchema);for(let r in t)n.setValue(r,t[r]);return this.__data.add(n.uid,n),this.__added.add(n),this.__watchList.forEach(r=>{this.__subsMap[n.uid]||(this.__subsMap[n.uid]=[]),this.__subsMap[n.uid].push(n.subscribe(r,()=>{this.__notifyObservers(r,n.uid)}))}),this.__items.add(n.uid),this.notify(),n}read(t){return this.__data.read(t)}readProp(t,n){return this.read(t).getValue(n)}publishProp(t,n,r){this.read(t).setValue(n,r)}remove(t){this.__removed.add(this.__data.read(t)),this.__items.delete(t),this.notify(),this.__data.pub(t,null),delete this.__subsMap[t]}clearAll(){this.__items.forEach(t=>{this.remove(t)})}observe(t){this.__observers.add(t)}unobserve(t){this.__observers.delete(t)}findItems(t){let n=[];return this.__items.forEach(r=>{let i=this.read(r);t(i)&&n.push(r)}),n}items(){return[...this.__items]}get size(){return this.__items.size}destroy(){te.deleteCtx(this.__data),this.__observers=null,this.__handler=null;for(let t in this.__subsMap)this.__subsMap[t].forEach(n=>{n.remove()}),delete this.__subsMap[t]}}const Be={UPLOAD_START:"UPLOAD_START",REMOVE:"REMOVE",UPLOAD_PROGRESS:"UPLOAD_PROGRESS",UPLOAD_FINISH:"UPLOAD_FINISH",UPLOAD_ERROR:"UPLOAD_ERROR",VALIDATION_ERROR:"VALIDATION_ERROR",CDN_MODIFICATION:"CLOUD_MODIFICATION",DATA_OUTPUT:"DATA_OUTPUT",DONE_FLOW:"DONE_FLOW",INIT_FLOW:"INIT_FLOW"};class xt{constructor(t){this.ctx=t.ctx,this.type=t.type,this.data=t.data}}class lt{static eName(t){return"LR_"+t}static emit(t,n=window,r=!0){let i=()=>{n.dispatchEvent(new CustomEvent(this.eName(t.type),{detail:t}))};if(!r)return void i();let s=t.type+t.ctx;this._timeoutStore[s]&&window.clearTimeout(this._timeoutStore[s]),this._timeoutStore[s]=window.setTimeout(()=>{i(),delete this._timeoutStore[s]},20)}}y(lt,"_timeoutStore",Object.create(null));const kn=Object.freeze({LOCAL:"local",DROP_AREA:"drop-area",URL_TAB:"url-tab",CAMERA:"camera",EXTERNAL:"external",API:"js-api"}),Qt=1e3,ar=Object.freeze({AUTO:"auto",BYTE:"byte",KB:"kb",MB:"mb",GB:"gb",TB:"tb",PB:"pb"}),bs=e=>Math.ceil(100*e)/100,ak=(e,t=ar.AUTO)=>{const n=t===ar.AUTO;return t===ar.BYTE||n&&e<1e3?`${e} ${{one:"byte",other:"bytes"}[Fb("en-US",e)]}`:t===ar.KB||n&&e<Qt**2?`${bs(e/1e3)} KB`:t===ar.MB||n&&e<Qt**3?`${bs(e/Qt**2)} MB`:t===ar.GB||n&&e<Qt**4?`${bs(e/Qt**3)} GB`:t===ar.TB||n&&e<Qt**5?`${bs(e/Qt**4)} TB`:`${bs(e/Qt**5)} PB`};class re extends L{constructor(...t){super(...t),y(this,"couldBeUploadCollectionOwner",!1),y(this,"isUploadCollectionOwner",!1),y(this,"init$",Rb(this)),y(this,"__initialUploadMetadata",null),y(this,"_validators",[this._validateMultipleLimit.bind(this),this._validateIsImage.bind(this),this._validateFileType.bind(this),this._validateMaxSizeLimit.bind(this)]),y(this,"_debouncedRunValidators",ir(this._runValidators.bind(this),100)),y(this,"_handleCollectionUpdate",n=>{const r=this.uploadCollection,i=[...new Set(Object.values(n).map(s=>[...s]).flat())].map(s=>r.read(s)).filter(Boolean);for(const s of i)this._runValidatorsForEntry(s);if(n.uploadProgress){let s=0,o=r.findItems(l=>!l.getValue("uploadError"));o.forEach(l=>{s+=r.readProp(l,"uploadProgress")});let a=Math.round(s/o.length);this.$["*commonProgress"]=a,lt.emit(new xt({type:Be.UPLOAD_PROGRESS,ctx:this.ctxName,data:a}),void 0,100===a)}if(n.fileInfo){let s=r.findItems(a=>!!a.getValue("fileInfo")),o=r.findItems(a=>!!a.getValue("uploadError")||!!a.getValue("validationErrorMsg"));if(r.size-o.length===s.length){let a=this.getOutputData(l=>!!l.getValue("fileInfo")&&!l.getValue("silentUpload"));a.length>0&&lt.emit(new xt({type:Be.UPLOAD_FINISH,ctx:this.ctxName,data:a}))}}n.uploadError&&r.findItems(o=>!!o.getValue("uploadError")).forEach(o=>{lt.emit(new xt({type:Be.UPLOAD_ERROR,ctx:this.ctxName,data:r.readProp(o,"uploadError")}),void 0,!1)}),n.validationErrorMsg&&r.findItems(o=>!!o.getValue("validationErrorMsg")).forEach(o=>{lt.emit(new xt({type:Be.VALIDATION_ERROR,ctx:this.ctxName,data:r.readProp(o,"validationErrorMsg")}),void 0,!1)}),n.cdnUrlModifiers&&r.findItems(o=>!!o.getValue("cdnUrlModifiers")).forEach(o=>{lt.emit(new xt({type:Be.CDN_MODIFICATION,ctx:this.ctxName,data:te.getCtx(o).store}),void 0,!1)})})}setUploadMetadata(t){kb("setUploadMetadata is deprecated. Use `metadata` instance property on `lr-config` block instead. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/"),this.connectedOnce?this.$["*uploadMetadata"]=t:this.__initialUploadMetadata=t}initCallback(){if(super.initCallback(),!this.has("*uploadCollection")){let n=new ok({typedSchema:nk,watchList:["uploadProgress","fileInfo","uploadError","validationErrorMsg","validationMultipleLimitMsg","cdnUrlModifiers"]});this.add("*uploadCollection",n)}this.couldBeUploadCollectionOwner&&!(()=>this.hasBlockInCtx(n=>n instanceof re&&n.isUploadCollectionOwner&&n.isConnected&&n!==this))()&&(this.isUploadCollectionOwner=!0,this.__uploadCollectionHandler=(n,r,i)=>{this._runValidators();for(let s of i)s?.getValue("abortController")?.abort(),s?.setValue("abortController",null),URL.revokeObjectURL(s?.getValue("thumbUrl"));this.$["*uploadList"]=n.map(s=>({uid:s}))},this.uploadCollection.setHandler(this.__uploadCollectionHandler),this.uploadCollection.observe(this._handleCollectionUpdate),this.subConfigValue("maxLocalFileSizeBytes",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMin",()=>this._debouncedRunValidators()),this.subConfigValue("multipleMax",()=>this._debouncedRunValidators()),this.subConfigValue("multiple",()=>this._debouncedRunValidators()),this.subConfigValue("imgOnly",()=>this._debouncedRunValidators()),this.subConfigValue("accept",()=>this._debouncedRunValidators())),this.__initialUploadMetadata&&(this.$["*uploadMetadata"]=this.__initialUploadMetadata),this.subConfigValue("maxConcurrentRequests",n=>{this.$["*uploadQueue"].concurrency=Number(n)||1})}destroyCallback(){super.destroyCallback(),this.isUploadCollectionOwner&&(this.uploadCollection.unobserve(this._handleCollectionUpdate),this.uploadCollection.getHandler()===this.__uploadCollectionHandler&&this.uploadCollection.removeHandler())}addFileFromUrl(t,{silent:n,fileName:r,source:i}={}){this.uploadCollection.add({externalUrl:t,fileName:r??null,silentUpload:n??!1,source:i??kn.API})}addFileFromUuid(t,{silent:n,fileName:r,source:i}={}){this.uploadCollection.add({uuid:t,fileName:r??null,silentUpload:n??!1,source:i??kn.API})}addFileFromObject(t,{silent:n,fileName:r,source:i}={}){this.uploadCollection.add({file:t,isImage:Fd(t),mimeType:t.type,fileName:r??t.name,fileSize:t.size,silentUpload:n??!1,source:i??kn.API})}addFiles(t){console.warn("`addFiles` method is deprecated. Please use `addFileFromObject`, `addFileFromUrl` or `addFileFromUuid` instead."),t.forEach(n=>{this.uploadCollection.add({file:n,isImage:Fd(n),mimeType:n.type,fileName:n.name,fileSize:n.size})})}uploadAll(){this.$["*uploadTrigger"]={}}openSystemDialog(t={}){let n=$b([this.cfg.accept??"",...this.cfg.imgOnly?Ma:[]]).join(",");this.cfg.accept&&this.cfg.imgOnly&&console.warn("There could be a mistake.\nBoth `accept` and `imgOnly` parameters are set.\nThe value of `accept` will be concatenated with the internal image mime types list."),this.fileInput=document.createElement("input"),this.fileInput.type="file",this.fileInput.multiple=this.cfg.multiple,t.captureCamera?(this.fileInput.capture="",this.fileInput.accept=Ma.join(",")):this.fileInput.accept=n,this.fileInput.dispatchEvent(new MouseEvent("click")),this.fileInput.onchange=()=>{[...this.fileInput.files].forEach(r=>this.addFileFromObject(r,{source:kn.LOCAL})),this.$["*currentActivity"]=L.activities.UPLOAD_LIST,this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!0),this.fileInput.value="",this.fileInput=null}}get sourceList(){let t=[];return this.cfg.sourceList&&(t=_n(this.cfg.sourceList)),t}initFlow(t=!1){if(this.$["*uploadList"]?.length&&!t)this.set$({"*currentActivity":L.activities.UPLOAD_LIST}),this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!0);else if(1===this.sourceList?.length){let n=this.sourceList[0];"local"===n?(this.$["*currentActivity"]=L.activities.UPLOAD_LIST,this?.openSystemDialog()):(Object.values(re.extSrcList).includes(n)?this.set$({"*currentActivityParams":{externalSourceType:n},"*currentActivity":L.activities.EXTERNAL}):this.$["*currentActivity"]=n,this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!0))}else this.set$({"*currentActivity":L.activities.START_FROM}),this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!0);lt.emit(new xt({type:Be.INIT_FLOW,ctx:this.ctxName}),void 0,!1)}doneFlow(){this.set$({"*currentActivity":this.doneActivity,"*history":this.doneActivity?[this.doneActivity]:[]}),this.$["*currentActivity"]||this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!1),lt.emit(new xt({type:Be.DONE_FLOW,ctx:this.ctxName}),void 0,!1)}get uploadCollection(){return this.$["*uploadCollection"]}_validateFileType(t){const i=$b([...this.cfg.imgOnly?Ma:[],this.cfg.accept]);if(!i.length)return;const s=t.getValue("mimeType"),o=t.getValue("fileName");if(!s||!o)return;const a=Ub(s,i),l=((e,t)=>t.some(n=>!!n.startsWith(".")&&e.toLowerCase().endsWith(n.toLowerCase())))(o,i);return a||l?void 0:this.l10n("file-type-not-allowed")}_validateMaxSizeLimit(t){const n=this.cfg.maxLocalFileSizeBytes,r=t.getValue("fileSize");if(n&&r&&r>n)return this.l10n("files-max-size-limit-error",{maxFileSize:ak(n)})}_validateMultipleLimit(t){const r=this.uploadCollection.items().indexOf(t.uid),i=this.cfg.multiple?this.cfg.multipleMax:1;if(i&&r>=i)return this.l10n("files-count-allowed",{count:i})}_validateIsImage(t){const n=this.cfg.imgOnly,r=t.getValue("isImage");if(n&&!r&&(t.getValue("fileInfo")||!t.getValue("externalUrl"))&&(t.getValue("fileInfo")||t.getValue("mimeType")))return this.l10n("images-only-accepted")}_runValidatorsForEntry(t){for(const n of this._validators){const r=n(t);if(r)return void t.setValue("validationErrorMsg",r)}t.setValue("validationErrorMsg",null)}_runValidators(){for(const t of this.uploadCollection.items())setTimeout(()=>{const n=this.uploadCollection.read(t);n&&this._runValidatorsForEntry(n)})}getMetadata(){var t=this;return se(function*(){const n=t.cfg.metadata??t.$["*uploadMetadata"];return"function"==typeof n?yield n():n})()}getUploadClientOptions(){var t=this;return se(function*(){let n={store:t.cfg.store,publicKey:t.cfg.pubkey,baseCDN:t.cfg.cdnCname,baseURL:t.cfg.baseUrl,userAgent:rk,integration:t.cfg.userAgentIntegration,secureSignature:t.cfg.secureSignature,secureExpire:t.cfg.secureExpire,retryThrottledRequestMaxTimes:t.cfg.retryThrottledRequestMaxTimes,multipartMinFileSize:t.cfg.multipartMinFileSize,multipartChunkSize:t.cfg.multipartChunkSize,maxConcurrentRequests:t.cfg.multipartMaxConcurrentRequests,multipartMaxAttempts:t.cfg.multipartMaxAttempts,checkForUrlDuplicates:!!t.cfg.checkForUrlDuplicates,saveUrlForRecurrentUploads:!!t.cfg.saveUrlForRecurrentUploads,metadata:yield t.getMetadata()};return console.log("Upload client options:",n),n})()}getOutputData(t){let n=[];return this.uploadCollection.findItems(t).forEach(i=>{let s=te.getCtx(i).store,o=s.fileInfo||{name:s.fileName,fileSize:s.fileSize,isImage:s.isImage,mimeType:s.mimeType},a={...o,cdnUrlModifiers:s.cdnUrlModifiers,cdnUrl:s.cdnUrl||o.cdnUrl};n.push(a)}),n}}re.extSrcList=Object.freeze({FACEBOOK:"facebook",DROPBOX:"dropbox",GDRIVE:"gdrive",GPHOTOS:"gphotos",INSTAGRAM:"instagram",FLICKR:"flickr",VK:"vk",EVERNOTE:"evernote",BOX:"box",ONEDRIVE:"onedrive",HUDDLE:"huddle"}),re.sourceTypes=Object.freeze({LOCAL:"local",URL:"url",CAMERA:"camera",DRAW:"draw",...re.extSrcList}),Object.values(Be).forEach(e=>{let t=lt.eName(e);window.addEventListener(t,n=>{if([Be.UPLOAD_FINISH,Be.REMOVE,Be.CDN_MODIFICATION].includes(n.detail.type)){let i=te.getCtx(n.detail.ctx),s=i.read("uploadCollection"),o=[];s.items().forEach(a=>{let l=te.getCtx(a).store,u=l.fileInfo;if(u){let c={...u,cdnUrlModifiers:l.cdnUrlModifiers,cdnUrl:l.cdnUrl||u.cdnUrl};o.push(c)}}),lt.emit(new xt({type:Be.DATA_OUTPUT,ctx:n.detail.ctx,data:o})),i.pub("outputData",o)}})});const xa=Object.freeze({pubkey:"",multiple:!0,multipleMin:0,multipleMax:0,confirmUpload:!1,imgOnly:!1,accept:"",externalSourcesPreferredTypes:"",store:"auto",cameraMirror:!1,sourceList:"local, url, camera, dropbox, gdrive",maxLocalFileSizeBytes:0,thumbSize:76,showEmptyList:!1,useLocalImageEditor:!1,useCloudImageEditor:!0,removeCopyright:!1,modalScrollLock:!0,modalBackdropStrokes:!1,sourceListWrap:!0,remoteTabSessionKey:"",cdnCname:"https://ucarecdn.com",baseUrl:"https://upload.uploadcare.com",socialBaseUrl:"https://social.uploadcare.com",secureSignature:"",secureExpire:"",secureDeliveryProxy:"",retryThrottledRequestMaxTimes:1,multipartMinFileSize:26214400,multipartChunkSize:5242880,maxConcurrentRequests:10,multipartMaxConcurrentRequests:4,multipartMaxAttempts:3,checkForUrlDuplicates:!1,saveUrlForRecurrentUploads:!1,groupOutput:!1,userAgentIntegration:"",metadata:null}),mt=e=>String(e),Jt=e=>Number(e),He=e=>"boolean"==typeof e?e:"true"===e||""===e||"false"!==e&&!!e,lk={pubkey:mt,multiple:He,multipleMin:Jt,multipleMax:Jt,confirmUpload:He,imgOnly:He,accept:mt,externalSourcesPreferredTypes:mt,store:e=>"auto"===e?e:He(e),cameraMirror:He,sourceList:mt,maxLocalFileSizeBytes:Jt,thumbSize:Jt,showEmptyList:He,useLocalImageEditor:He,useCloudImageEditor:He,removeCopyright:He,modalScrollLock:He,modalBackdropStrokes:He,sourceListWrap:He,remoteTabSessionKey:mt,cdnCname:mt,baseUrl:mt,socialBaseUrl:mt,secureSignature:mt,secureExpire:mt,secureDeliveryProxy:mt,retryThrottledRequestMaxTimes:Jt,multipartMinFileSize:Jt,multipartChunkSize:Jt,maxConcurrentRequests:Jt,multipartMaxConcurrentRequests:Jt,multipartMaxAttempts:Jt,checkForUrlDuplicates:He,saveUrlForRecurrentUploads:He,groupOutput:He,userAgentIntegration:mt},Na=Object.keys(xa),ck=["metadata"],$d=Na.filter(e=>!(e=>ck.includes(e))(e)),fk={...Object.fromEntries($d.map(e=>[or(e),e])),...Object.fromEntries($d.map(e=>[e.toLowerCase(),e]))},hk={...Object.fromEntries(Na.map(e=>[or(e),Qe(e)])),...Object.fromEntries(Na.map(e=>[e.toLowerCase(),Qe(e)]))};class Hb extends Ie{constructor(...t){super(...t),y(this,"ctxOwner",!0),y(this,"init$",{...this.init$,...Object.fromEntries(Object.entries(xa).map(([n,r])=>[Qe(n),r]))})}initCallback(){super.initCallback();for(const t of Na){const n=this;let r="__"+t;n[r]=n[t],Object.defineProperty(this,t,{set:i=>{if(n[r]=i,$d.includes(t)){const s=[...new Set([or(t),t.toLowerCase()])];for(const o of s)typeof i>"u"||null===i?this.removeAttribute(o):this.setAttribute(o,i.toString())}this.$[Qe(t)]!==i&&(this.$[Qe(t)]=typeof i>"u"||null===i?xa[t]:i)},get:()=>this.$[Qe(t)]}),typeof n[t]<"u"&&null!==n[t]&&(n[t]=n[r])}}attributeChangedCallback(t,n,r){if(n===r)return;const i=fk[t],o=((e,t)=>{if(!(typeof t>"u"||null===t))return lk[e](t)})(i,r)??xa[i];this[i]=o}}Hb.bindAttributes(hk);let jb=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"init$",{...this.init$,name:"",path:"",size:"24",viewBox:""})}initCallback(){super.initCallback(),this.sub("name",n=>{if(!n)return;let r=this.getCssData(`--icon-${n}`);r&&(this.$.path=r)}),this.sub("path",n=>{n&&(n.trimStart().startsWith("<")?(this.setAttribute("raw",""),this.ref.svg.innerHTML=n):(this.removeAttribute("raw"),this.ref.svg.innerHTML=`<path fill-rule="evenodd" d="${n}"></path>`))}),this.sub("size",n=>{this.$.viewBox=`0 0 ${n} ${n}`})}}return e.template='\n  <svg ref="svg" xmlns="http://www.w3.org/2000/svg" set="@viewBox: viewBox; @height: size; @width: size"></svg>\n',e})();jb.bindAttributes({name:"name",size:"size"});const zb=e=>{if("string"!=typeof e||!e)return"";let t=e.trim();return t.startsWith("-/")?t=t.slice(2):t.startsWith("/")&&(t=t.slice(1)),t.endsWith("/")&&(t=t.slice(0,t.length-1)),t},Ud=(...e)=>e.filter(t=>"string"==typeof t&&t).map(t=>zb(t)).join("/-/"),en=(...e)=>{let t=Ud(...e);return t?`-/${t}/`:""};function Gb(e){let t=new URL(e),n=t.pathname+t.search+t.hash,r=n.lastIndexOf("http"),i=n.lastIndexOf("/"),s="";return r>=0?s=n.slice(r):i>=0&&(s=n.slice(i+1)),s}function Wb(e){let t=new URL(e),n=Gb(e),r=qb(n)?Yb(n).pathname:n;return t.pathname=t.pathname.replace(r,""),t.search="",t.hash="",t.toString()}function qb(e){return e.startsWith("http")}function Yb(e){let t=new URL(e);return{pathname:t.origin+t.pathname||"",search:t.search||"",hash:t.hash||""}}const yt=(e,t,n)=>{let r=new URL(Wb(e));if(n=n||Gb(e),r.pathname.startsWith("//")&&(r.pathname=r.pathname.replace("//","/")),qb(n)){let i=Yb(n);r.pathname=r.pathname+(t||"")+(i.pathname||""),r.search=i.search,r.hash=i.hash}else r.pathname=r.pathname+(t||"")+(n||"");return r.toString()},Ds=(e,t)=>{let n=new URL(e);return n.pathname=t+"/",n.toString()},ii=Object.freeze({"dev-mode":{},pubkey:{},uuid:{},src:{},lazy:{default:1},intersection:{},breakpoints:{},"cdn-cname":{default:"https://ucarecdn.com"},"proxy-cname":{},"secure-delivery-proxy":{},"hi-res-support":{default:1},"ultra-res-support":{},format:{default:"auto"},"cdn-operations":{},progressive:{},quality:{default:"smart"},"is-background-for":{}}),ws="--lr-img-",Zb="unresolved",Kb=!window.location.host.trim()||window.location.host.includes(":")||window.location.hostname.includes("localhost"),Xb=Object.create(null);for(let e in ii)Xb[ws+e]=ii[e]?.default||"";class yk extends ma{constructor(...t){super(...t),y(this,"cssInit$",Xb)}$$(t){return this.$[ws+t]}set$$(t){for(let n in t)this.$[ws+n]=t[n]}sub$$(t,n){this.sub(ws+t,r=>{null===r||""===r||n(r)})}_fmtAbs(t){return!t.includes("//")&&!Kb&&(t=new URL(t,document.baseURI).href),t}_getCdnModifiers(t=""){return en(t&&`resize/${t}`,this.$$("cdn-operations")||"",`format/${this.$$("format")||ii.format.default}`,`quality/${this.$$("quality")||ii.quality.default}`)}_getUrlBase(t=""){if(this.$$("src").startsWith("data:")||this.$$("src").startsWith("blob:"))return this.$$("src");if(Kb&&this.$$("src")&&!this.$$("src").includes("//"))return this._proxyUrl(this.$$("src"));let n=this._getCdnModifiers(t);return this.$$("src").startsWith(this.$$("cdn-cname"))?yt(this.$$("src"),n):this.$$("cdn-cname")&&this.$$("uuid")||this.$$("uuid")?this._proxyUrl(yt(Ds(this.$$("cdn-cname"),this.$$("uuid")),n)):this.$$("proxy-cname")?this._proxyUrl(yt(this.$$("proxy-cname"),n,this._fmtAbs(this.$$("src")))):this.$$("pubkey")?this._proxyUrl(yt(`https://${this.$$("pubkey")}.ucr.io/`,n,this._fmtAbs(this.$$("src")))):void 0}_proxyUrl(t){return this.$$("secure-delivery-proxy")?Cd(this.$$("secure-delivery-proxy"),{previewUrl:t},{transform:r=>window.encodeURIComponent(r)}):t}_getElSize(t,n=1,r=!0){let i=t.getBoundingClientRect(),s=n*Math.round(i.width),o=r?"":n*Math.round(i.height);return s||o?`${s||""}x${o||""}`:null}_setupEventProxy(t){let n=i=>{i.stopPropagation();let s=new Event(i.type,i);this.dispatchEvent(s)},r=["load","error"];for(let i of r)t.addEventListener(i,n)}get img(){return this._img||(this._img=new Image,this._setupEventProxy(this.img),this._img.setAttribute(Zb,""),this.img.onload=()=>{this.img.removeAttribute(Zb)},this.initAttributes(),this.appendChild(this._img)),this._img}get bgSelector(){return this.$$("is-background-for")}initAttributes(){[...this.attributes].forEach(t=>{ii[t.name]||this.img.setAttribute(t.name,t.value)})}get breakpoints(){return this.$$("breakpoints")?(e=_n(this.$$("breakpoints")).map(t=>Number(t)),[...new Set(e)]):null;var e}renderBg(t){let n=new Set;this.breakpoints?this.breakpoints.forEach(i=>{n.add(`url("${this._getUrlBase(i+"x")}") ${i}w`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(2*i+"x")}") ${2*i}w`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(3*i+"x")}") ${3*i}w`)}):(n.add(`url("${this._getUrlBase(this._getElSize(t))}") 1x`),this.$$("hi-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,2))}") 2x`),this.$$("ultra-res-support")&&n.add(`url("${this._getUrlBase(this._getElSize(t,3))}") 3x`));let r=`image-set(${[...n].join(", ")})`;t.style.setProperty("background-image",r),t.style.setProperty("background-image","-webkit-"+r)}getSrcset(){let t=new Set;return this.breakpoints?this.breakpoints.forEach(n=>{t.add(this._getUrlBase(n+"x")+` ${n}w`),this.$$("hi-res-support")&&t.add(this._getUrlBase(2*n+"x")+` ${2*n}w`),this.$$("ultra-res-support")&&t.add(this._getUrlBase(3*n+"x")+` ${3*n}w`)}):(t.add(this._getUrlBase(this._getElSize(this.img))+" 1x"),this.$$("hi-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,2))+" 2x"),this.$$("ultra-res-support")&&t.add(this._getUrlBase(this._getElSize(this.img,3))+" 3x")),[...t].join()}getSrc(){return this._getUrlBase()}init(){this.bgSelector?[...document.querySelectorAll(this.bgSelector)].forEach(t=>{this.$$("intersection")?this.initIntersection(t,()=>{this.renderBg(t)}):this.renderBg(t)}):this.$$("intersection")?this.initIntersection(this.img,()=>{this.img.srcset=this.getSrcset(),this.img.src=this.getSrc()}):(this.img.srcset=this.getSrcset(),this.img.src=this.getSrc())}initIntersection(t,n){this._isnObserver=new IntersectionObserver(i=>{i.forEach(s=>{s.isIntersecting&&(n(),this._isnObserver.unobserve(t))})},{root:null,rootMargin:"0px"}),this._isnObserver.observe(t),this._observed||(this._observed=new Set),this._observed.add(t)}destroyCallback(){super.destroyCallback(),this._isnObserver&&(this._observed.forEach(t=>{this._isnObserver.unobserve(t)}),this._isnObserver=null)}static get observedAttributes(){return Object.keys(ii)}attributeChangedCallback(t,n,r){window.setTimeout(()=>{this.$[ws+t]=r})}}class vk extends yk{initCallback(){super.initCallback(),this.sub$$("src",()=>{this.init()}),this.sub$$("uuid",()=>{this.init()}),this.sub$$("lazy",t=>{this.$$("is-background-for")||(this.img.loading=t?"lazy":"eager")})}}let _k=(()=>{class e extends re{constructor(...n){super(...n),y(this,"init$",{...this.init$,"*simpleButtonText":"",onClick:()=>{this.initFlow()}})}initCallback(){super.initCallback(),this.subConfigValue("multiple",n=>{this.$["*simpleButtonText"]=this.l10n(n?"upload-files":"upload-file")})}}return e.template='\n  <lr-drop-area>\n    <button type="button" set="onclick: onClick">\n      <lr-icon name="upload"></lr-icon>\n      <span>{{*simpleButtonText}}</span>\n      <slot></slot>\n      <div class="visual-drop-area"></div>\n    </button>\n  </lr-drop-area>\n',e})();class bk extends L{constructor(...t){super(...t),y(this,"historyTracked",!0),y(this,"activityType","start-from")}initCallback(){super.initCallback(),this.registerActivity(this.activityType)}}function Dk(e){return new Promise(t=>{"function"!=typeof window.FileReader&&t(!1);try{let n=new FileReader;n.onerror=()=>{t(!0)};let r=i=>{"loadend"!==i.type&&n.abort(),t(!1)};n.onloadend=r,n.onprogress=r,n.readAsDataURL(e)}catch{t(!1)}})}function wk(e,t){return new Promise(n=>{let r=0,i=[],s=a=>{a||(console.warn("Unexpectedly received empty content entry",{scope:"drag-and-drop"}),n(null)),a.isFile?(r++,a.file(l=>{r--;const u=new File([l],l.name,{type:l.type||t});i.push(u),0===r&&n(i)})):a.isDirectory&&o(a.createReader())},o=a=>{r++,a.readEntries(l=>{r--;for(let u of l)s(u);0===r&&n(i)})};s(e)})}const Je={ACTIVE:0,INACTIVE:1,NEAR:2,OVER:3};let Qb=["focus"],Vd=new Map;function Jb(e){let t=0,n=document.body,r=new Set,s=Je.INACTIVE,o=p=>{e.shouldIgnore()&&p!==Je.INACTIVE||(s!==p&&r.forEach(g=>g(p)),s=p)},a=()=>t>0;r.add(p=>e.onChange(p));let l=()=>{t=0,o(Je.INACTIVE)},u=()=>{t+=1,s===Je.INACTIVE&&o(Je.ACTIVE)},c=()=>{t-=1,a()||o(Je.INACTIVE)},d=p=>{p.preventDefault(),t=0,o(Je.INACTIVE)},f=p=>{a()||(t+=1),p.preventDefault();let g=[p.x,p.y],v=e.element.getBoundingClientRect(),_=Math.floor(function Sk(e,t){let n=Math.max(Math.min(e[0],t.x+t.width),t.x),r=Math.max(Math.min(e[1],t.y+t.height),t.y);return Math.sqrt((e[0]-n)*(e[0]-n)+(e[1]-r)*(e[1]-r))}(g,v)),m=_<100,D=p.composedPath().includes(e.element);Vd.set(e.element,_);let S=Math.min(...Vd.values())===_;o(D&&S?Je.OVER:m&&S?Je.NEAR:Je.ACTIVE)},h=function(){var p=se(function*(g){if(e.shouldIgnore())return;g.preventDefault();let v=yield function Ck(e){let t=[],n=[];for(let r=0;r<e.items.length;r++){let i=e.items[r];if(i)if("file"===i.kind){const s=i.type;if("function"==typeof i.webkitGetAsEntry||"function"==typeof i.getAsEntry){let a="function"==typeof i.webkitGetAsEntry?i.webkitGetAsEntry():i.getAsEntry();n.push(wk(a,s).then(l=>{t.push(...l)}));continue}let o=i.getAsFile();n.push(Dk(o).then(a=>{a||t.push(o)}))}else"string"===i.kind&&i.type.match("^text/uri-list")&&n.push(new Promise(s=>{i.getAsString(o=>{t.push(o),s()})}))}return Promise.all(n).then(()=>t)}(g.dataTransfer);e.onItems(v),o(Je.INACTIVE)});return function(v){return p.apply(this,arguments)}}();return n.addEventListener("drop",d),n.addEventListener("dragleave",c),n.addEventListener("dragenter",u),n.addEventListener("dragover",f),e.element.addEventListener("drop",h),Qb.forEach(p=>{window.addEventListener(p,l)}),()=>{Vd.delete(e.element),n.removeEventListener("drop",d),n.removeEventListener("dragleave",c),n.removeEventListener("dragenter",u),n.removeEventListener("dragover",f),e.element.removeEventListener("drop",h),Qb.forEach(p=>{window.removeEventListener(p,l)})}}let eD=(()=>{class e extends re{constructor(...n){super(...n),y(this,"init$",{...this.init$,state:Je.INACTIVE,withIcon:!1,isClickable:!1,isFullscreen:!1,isEnabled:!0,isVisible:!0,text:this.l10n("drop-files-here"),"lr-drop-area/targets":null})}isActive(){if(!this.$.isEnabled)return!1;const n=this.getBoundingClientRect(),r=n.width>0&&n.height>0,i=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth),s=window.getComputedStyle(this);return r&&"hidden"!==s.visibility&&"none"!==s.display&&i}initCallback(){super.initCallback(),this.$["lr-drop-area/targets"]||(this.$["lr-drop-area/targets"]=new Set),this.$["lr-drop-area/targets"].add(this),this.defineAccessor("disabled",r=>{this.set$({isEnabled:!r})}),this.defineAccessor("clickable",r=>{this.set$({isClickable:"string"==typeof r})}),this.defineAccessor("with-icon",r=>{this.set$({withIcon:"string"==typeof r})}),this.defineAccessor("fullscreen",r=>{this.set$({isFullscreen:"string"==typeof r})}),this.defineAccessor("text",r=>{this.set$(r?{text:this.l10n(r)||r}:{text:this.l10n("drop-files-here")})}),this._destroyDropzone=Jb({element:this,shouldIgnore:()=>this._shouldIgnore(),onChange:r=>{this.$.state=r},onItems:r=>{r.length&&(r.forEach(i=>{"string"!=typeof i?this.addFileFromObject(i,{source:kn.DROP_AREA}):this.addFileFromUrl(i,{source:kn.DROP_AREA})}),this.uploadCollection.size&&(this.set$({"*currentActivity":L.activities.UPLOAD_LIST}),this.setForCtxTarget(Pn.StateConsumerScope,"*modalActive",!0)))}});let n=this.ref["content-wrapper"];n&&(this._destroyContentWrapperDropzone=Jb({element:n,onChange:r=>{const i=Object.entries(Je).find(([,s])=>s===r)?.[0].toLowerCase();i&&n.setAttribute("drag-state",i)},onItems:()=>{},shouldIgnore:()=>this._shouldIgnore()})),this.sub("state",r=>{const i=Object.entries(Je).find(([,s])=>s===r)?.[0].toLowerCase();i&&this.setAttribute("drag-state",i)}),this.subConfigValue("sourceList",r=>{const i=_n(r);this.$.isEnabled=i.includes(re.sourceTypes.LOCAL),this.$.isVisible=this.$.isEnabled||!this.querySelector("[data-default-slot]")}),this.sub("isVisible",r=>{this.toggleAttribute("hidden",!r)}),this.$.isClickable&&(this._onAreaClicked=()=>{this.openSystemDialog()},this.addEventListener("click",this._onAreaClicked))}_shouldIgnore(){return!this.$.isEnabled||!this._couldHandleFiles()||!!this.$.isFullscreen&&[...this.$["lr-drop-area/targets"]].filter(i=>i!==this).filter(i=>i.isActive()).length>0}_couldHandleFiles(){let n=this.cfg.multiple,r=this.cfg.multipleMax,i=this.uploadCollection.size;return!(n&&r&&i>=r||!n&&i>0)}destroyCallback(){super.destroyCallback(),this.$["lr-drop-area/targets"]?.remove?.(this),this._destroyDropzone?.(),this._destroyContentWrapperDropzone?.(),this._onAreaClicked&&this.removeEventListener("click",this._onAreaClicked)}}return e.template='\n  <slot>\n    <div data-default-slot hidden></div>\n    <div ref="content-wrapper" class="content-wrapper" set="@hidden: !isVisible">\n      <div class="icon-container" set="@hidden: !withIcon">\n        <lr-icon name="default"></lr-icon>\n        <lr-icon name="arrow-down"></lr-icon>\n      </div>\n      <span class="text">{{text}}</span>\n    </div>\n  </slot>\n',e})();eD.bindAttributes({"with-icon":null,clickable:null,text:null,fullscreen:null,disabled:null});let tD=(()=>{class e extends re{constructor(...n){super(...n),y(this,"_registeredTypes",{}),y(this,"init$",{...this.init$,iconName:"default"})}initTypes(){this.registerType({type:re.sourceTypes.LOCAL,onClick:()=>{this.openSystemDialog()}}),this.registerType({type:re.sourceTypes.URL,activity:L.activities.URL,textKey:"from-url"}),this.registerType({type:re.sourceTypes.CAMERA,activity:L.activities.CAMERA,onClick:()=>{var r=void 0!==document.createElement("input").capture;return r&&this.openSystemDialog({captureCamera:!0}),!r}}),this.registerType({type:"draw",activity:L.activities.DRAW,icon:"edit-draw"});for(let n of Object.values(re.extSrcList))this.registerType({type:n,activity:L.activities.EXTERNAL,activityParams:{externalSourceType:n}})}initCallback(){super.initCallback(),this.initTypes(),this.setAttribute("role","button"),this.defineAccessor("type",n=>{n&&this.applyType(n)})}registerType(n){this._registeredTypes[n.type]=n}getType(n){return this._registeredTypes[n]}applyType(n){const r=this._registeredTypes[n];if(!r)return void console.warn("Unsupported source type: "+n);const{textKey:i=n,icon:s=n,activity:o,onClick:a,activityParams:l={}}=r;this.applyL10nKey("src-type",`src-type-${i}`),this.$.iconName=s,this.onclick=u=>{(a?a(u):o)&&this.set$({"*currentActivityParams":l,"*currentActivity":o})}}}return e.template='\n  <lr-icon set="@name: iconName"></lr-icon>\n  <div class="txt" l10n="src-type"></div>\n',e})();tD.bindAttributes({type:null});class Tk extends Ie{initCallback(){super.initCallback(),this.subConfigValue("sourceList",t=>{let n=_n(t),r="";n.forEach(i=>{r+=`<lr-source-btn type="${i}"></lr-source-btn>`}),this.cfg.sourceListWrap?this.innerHTML=r:this.outerHTML=r})}}function Bd(e){let t=new Blob([e],{type:"image/svg+xml"});return URL.createObjectURL(t)}function Hd(e="hsl(209, 21%, 65%)",t=32,n=32){return Bd(`\n  <svg width="${t}" height="${n}" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" fill="${e}" d="M9.68848 8.70068C9.68848 8.42454 9.91233 8.20068 10.1885 8.20068H15.0885C15.2211 8.20068 15.3483 8.25336 15.442 8.34713L20.342 13.2471C20.4358 13.3409 20.4885 13.4681 20.4885 13.6007V21.3007C20.4885 21.5768 20.2646 21.8007 19.9885 21.8007H10.1885C9.91233 21.8007 9.68848 21.5768 9.68848 21.3007V8.70068ZM10.6885 9.20068V20.8007H19.4885V14.1007L15.0885 14.1007C14.8123 14.1007 14.5885 13.8768 14.5885 13.6007L14.5885 9.20068H10.6885ZM15.5885 9.90779L18.7814 13.1007L15.5885 13.1007L15.5885 9.90779Z"/>\n  </svg>\n  `)}const Pe=Object.freeze({FINISHED:Symbol(0),FAILED:Symbol(1),UPLOADING:Symbol(2),IDLE:Symbol(3),LIMIT_OVERFLOW:Symbol(4)});class lr extends re{constructor(...t){super(...t),y(this,"pauseRender",!0),y(this,"_entrySubs",new Set),y(this,"_entry",null),y(this,"_isIntersecting",!1),y(this,"_debouncedGenerateThumb",ir(this._generateThumbnail.bind(this),100)),y(this,"_debouncedCalculateState",ir(this._calculateState.bind(this),100)),y(this,"_renderedOnce",!1),y(this,"init$",{...this.init$,uid:"",itemName:"",errorText:"",thumbUrl:"",progressValue:0,progressVisible:!1,progressUnknown:!1,badgeIcon:"",isFinished:!1,isFailed:!1,isUploading:!1,isFocused:!1,isEditable:!1,isLimitOverflow:!1,state:Pe.IDLE,"*uploadTrigger":null,onEdit:()=>{this.set$({"*focusedEntry":this._entry}),this.$["*currentActivity"]=this.hasBlockInCtx(n=>n.activityType===L.activities.DETAILS)?L.activities.DETAILS:L.activities.CLOUD_IMG_EDIT},onRemove:()=>{let n=this._entry.getValue("uuid");if(n){let r=this.getOutputData(i=>i.getValue("uuid")===n);lt.emit(new xt({type:Be.REMOVE,ctx:this.ctxName,data:r}))}this.uploadCollection.remove(this.$.uid)},onUpload:()=>{this.upload()}})}_reset(){for(let t of this._entrySubs)t.remove();this._debouncedGenerateThumb.cancel(),this._debouncedCalculateState.cancel(),this._entrySubs=new Set,this._entry=null}_observerCallback(t){let[n]=t;this._isIntersecting=n.isIntersecting,n.isIntersecting&&!this._renderedOnce&&(this.render(),this._renderedOnce=!0),0===n.intersectionRatio?this._debouncedGenerateThumb.cancel():this._debouncedGenerateThumb()}_calculateState(){if(!this._entry)return;let t=this._entry,n=Pe.IDLE;t.getValue("uploadError")||t.getValue("validationErrorMsg")?n=Pe.FAILED:t.getValue("validationMultipleLimitMsg")?n=Pe.LIMIT_OVERFLOW:t.getValue("isUploading")?n=Pe.UPLOADING:t.getValue("fileInfo")&&(n=Pe.FINISHED),this.$.state=n}_generateThumbnail(){var t=this;return se(function*(){if(!t._entry)return;let n=t._entry;if(n.getValue("fileInfo")&&n.getValue("isImage")){let r=t.cfg.thumbSize,i=t.proxyUrl(yt(Ds(t.cfg.cdnCname,t._entry.getValue("uuid")),en(n.getValue("cdnUrlModifiers"),`scale_crop/${r}x${r}/center`))),s=n.getValue("thumbUrl");s!==i&&(n.setValue("thumbUrl",i),s?.startsWith("blob:")&&URL.revokeObjectURL(s))}else if(!n.getValue("thumbUrl"))if(n.getValue("file")?.type.includes("image"))try{let r=yield function Mk(e,t=40){if("image/svg+xml"===e.type)return URL.createObjectURL(e);let n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image,s=new Promise((o,a)=>{i.onload=()=>{let l=i.height/i.width;l>1?(n.width=t,n.height=t*l):(n.height=t,n.width=t/l),r.fillStyle="rgb(240, 240, 240)",r.fillRect(0,0,n.width,n.height),r.drawImage(i,0,0,n.width,n.height),n.toBlob(u=>{if(!u)return void a();let c=URL.createObjectURL(u);o(c)})},i.onerror=l=>{a(l)}});return i.src=URL.createObjectURL(e),s}(n.getValue("file"),t.cfg.thumbSize);n.setValue("thumbUrl",r)}catch{let i=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Hd(i))}else{let r=window.getComputedStyle(t).getPropertyValue("--clr-generic-file-icon");n.setValue("thumbUrl",Hd(r))}})()}_subEntry(t,n){let r=this._entry.subscribe(t,i=>{this.isConnected&&n(i)});this._entrySubs.add(r)}_handleEntryId(t){this._reset();let n=this.uploadCollection?.read(t);this._entry=n,n&&(this._subEntry("uploadProgress",r=>{this.$.progressValue=r}),this._subEntry("fileName",r=>{this.$.itemName=r||n.getValue("externalUrl")||this.l10n("file-no-name"),this._debouncedCalculateState()}),this._subEntry("externalUrl",r=>{this.$.itemName=n.getValue("fileName")||r||this.l10n("file-no-name")}),this._subEntry("uuid",r=>{this._debouncedCalculateState(),r&&this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("cdnUrlModifiers",()=>{this._isIntersecting&&this._debouncedGenerateThumb()}),this._subEntry("thumbUrl",r=>{this.$.thumbUrl=r?`url(${r})`:""}),this._subEntry("validationMultipleLimitMsg",()=>this._debouncedCalculateState()),this._subEntry("validationErrorMsg",()=>this._debouncedCalculateState()),this._subEntry("uploadError",()=>this._debouncedCalculateState()),this._subEntry("isUploading",()=>this._debouncedCalculateState()),this._subEntry("fileSize",()=>this._debouncedCalculateState()),this._subEntry("mimeType",()=>this._debouncedCalculateState()),this._subEntry("isImage",()=>this._debouncedCalculateState()),this._isIntersecting&&this._debouncedGenerateThumb())}initCallback(){super.initCallback(),this.sub("uid",t=>{this._handleEntryId(t)}),this.sub("state",t=>{this._handleState(t)}),this.subConfigValue("useCloudImageEditor",()=>this._debouncedCalculateState()),this.onclick=()=>{lr.activeInstances.forEach(t=>{t===this?t.setAttribute("focused",""):t.removeAttribute("focused")})},this.$["*uploadTrigger"]=null,this.sub("*uploadTrigger",t=>{t&&setTimeout(()=>this.isConnected&&this.upload())}),lr.activeInstances.add(this)}_handleState(t){this.set$({isFailed:t===Pe.FAILED,isLimitOverflow:t===Pe.LIMIT_OVERFLOW,isUploading:t===Pe.UPLOADING,isFinished:t===Pe.FINISHED,progressVisible:t===Pe.UPLOADING,isEditable:this.cfg.useCloudImageEditor&&t===Pe.FINISHED&&this._entry?.getValue("isImage"),errorText:this._entry.getValue("uploadError")?.message||this._entry.getValue("validationErrorMsg")||this._entry.getValue("validationMultipleLimitMsg")}),t===Pe.FAILED||t===Pe.LIMIT_OVERFLOW?this.$.badgeIcon="badge-error":t===Pe.FINISHED&&(this.$.badgeIcon="badge-success"),t===Pe.UPLOADING?this.$.isFocused=!1:this.$.progressValue=0}destroyCallback(){super.destroyCallback(),lr.activeInstances.delete(this),this._reset()}connectedCallback(){super.connectedCallback(),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{root:this.parentElement,rootMargin:"50% 0px 50% 0px",threshold:[0,1]}),this._observer.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._debouncedGenerateThumb.cancel(),this._observer?.disconnect()}upload(){var t=this;return se(function*(){let n=t._entry;if(!t.uploadCollection.read(n.uid)||n.getValue("fileInfo")||n.getValue("isUploading")||n.getValue("uploadError")||n.getValue("validationErrorMsg")||n.getValue("validationMultipleLimitMsg"))return;const r=t.cfg.multiple?t.cfg.multipleMax:1;if(r&&t.uploadCollection.size>r)return;let i=t.getOutputData(s=>!s.getValue("fileInfo"));lt.emit(new xt({type:Be.UPLOAD_START,ctx:t.ctxName,data:i})),t._debouncedCalculateState(),n.setValue("isUploading",!0),n.setValue("uploadError",null),n.setValue("validationErrorMsg",null),n.setValue("validationMultipleLimitMsg",null),!n.getValue("file")&&n.getValue("externalUrl")&&(t.$.progressUnknown=!0);try{let s=new AbortController;n.setValue("abortController",s);const o=function(){var l=se(function*(){const u=yield t.getUploadClientOptions();return Od(n.getValue("file")||n.getValue("externalUrl")||n.getValue("uuid"),{...u,fileName:n.getValue("fileName"),source:n.getValue("source"),onProgress:c=>{c.isComputable&&n.setValue("uploadProgress",100*c.value),t.$.progressUnknown=!c.isComputable},signal:s.signal})});return function(){return l.apply(this,arguments)}}();let a=yield t.$["*uploadQueue"].add(o);n.setMultipleValues({fileInfo:a,isUploading:!1,fileName:a.originalFilename,fileSize:a.size,isImage:a.isImage,mimeType:a.contentInfo?.mime?.mime??a.mimeType,uuid:a.uuid,cdnUrl:a.cdnUrl}),n===t._entry&&t._debouncedCalculateState()}catch(s){console.warn("Upload error",s),n.setMultipleValues({abortController:null,isUploading:!1,uploadProgress:0}),n===t._entry&&t._debouncedCalculateState(),s instanceof Ve?s.isCancel||n.setValue("uploadError",s):n.setValue("uploadError",new Error("Unexpected error"))}})()}}lr.template='\n  <div\n    class="inner"\n    set="@finished: isFinished; @uploading: isUploading; @failed: isFailed; @limit-overflow: isLimitOverflow; @focused: isFocused"\n  >\n    <div class="thumb" set="style.backgroundImage: thumbUrl">\n      <div class="badge">\n        <lr-icon set="@name: badgeIcon"></lr-icon>\n      </div>\n    </div>\n    <div class="file-name-wrapper">\n      <span class="file-name" set="@title: itemName">{{itemName}}</span>\n      <span class="file-error" set="@hidden: !errorText">{{errorText}}</span>\n    </div>\n    <div class="file-actions">\n      <button type="button" class="edit-btn mini-btn" set="onclick: onEdit; @hidden: !isEditable">\n        <lr-icon name="edit-file"></lr-icon>\n      </button>\n      <button type="button" class="remove-btn mini-btn" set="onclick: onRemove;">\n        <lr-icon name="remove-file"></lr-icon>\n      </button>\n      <button type="button" class="upload-btn mini-btn" set="onclick: onUpload;">\n        <lr-icon name="upload"></lr-icon>\n      </button>\n    </div>\n    <lr-progress-bar\n      class="progress-bar"\n      set="value: progressValue; visible: progressVisible; unknown: progressUnknown"\n    >\n    </lr-progress-bar>\n  </div>\n',lr.activeInstances=new Set;class xk{constructor(){y(this,"caption",""),y(this,"text",""),y(this,"iconName",""),y(this,"isError",!1)}}let Nk=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"init$",{...this.init$,iconName:"info",captionTxt:"Message caption",msgTxt:"Message...","*message":null,onClose:()=>{this.$["*message"]=null}})}initCallback(){super.initCallback(),this.sub("*message",n=>{n?(this.setAttribute("active",""),this.set$({captionTxt:n.caption||"",msgTxt:n.text||"",iconName:n.isError?"error":"info"}),n.isError?this.setAttribute("error",""):this.removeAttribute("error")):this.removeAttribute("active")})}}return e.template='\n  <div class="heading">\n    <lr-icon set="@name: iconName"></lr-icon>\n    <div class="caption">{{captionTxt}}</div>\n    <button type="button" set="onclick: onClose">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </div>\n  <div class="msg">{{msgTxt}}</div>\n',e})(),Ok=(()=>{class e extends re{constructor(...n){super(...n),y(this,"couldBeUploadCollectionOwner",!0),y(this,"historyTracked",!0),y(this,"activityType",L.activities.UPLOAD_LIST),y(this,"init$",{...this.init$,doneBtnVisible:!1,doneBtnEnabled:!1,uploadBtnVisible:!1,addMoreBtnVisible:!1,addMoreBtnEnabled:!1,headerText:"",hasFiles:!1,onAdd:()=>{this.initFlow(!0)},onUpload:()=>{this.uploadAll(),this._updateUploadsState()},onDone:()=>{this.doneFlow()},onCancel:()=>{let r=this.getOutputData(i=>!!i.getValue("fileInfo"));lt.emit(new xt({type:Be.REMOVE,ctx:this.ctxName,data:r})),this.uploadCollection.clearAll()}}),y(this,"_debouncedHandleCollectionUpdate",ir(()=>{this.isConnected&&(this._updateUploadsState(),this._updateCountLimitMessage())},0))}_validateFilesCount(){let n=!!this.cfg.multiple,r=n?this.cfg.multipleMin??0:1,i=n?this.cfg.multipleMax??0:1,s=this.uploadCollection.size,o=!!r&&s<r,a=!!i&&s>i;return{passed:!o&&!a,tooFew:o,tooMany:a,min:r,max:i,exact:i===s}}_updateCountLimitMessage(){let n=this.uploadCollection.size,r=this._validateFilesCount();if(n&&!r.passed){let i=new xk,s=r.tooFew?"files-count-limit-error-too-few":"files-count-limit-error-too-many";i.caption=this.l10n("files-count-limit-error-title"),i.text=this.l10n(s,{min:r.min,max:r.max,total:n}),i.isError=!0,this.set$({"*message":i})}else this.set$({"*message":null})}_updateUploadsState(){let n=this.uploadCollection.items(),i={total:n.length,succeed:0,uploading:0,failed:0,limitOverflow:0};for(let h of n){let p=this.uploadCollection.read(h);p.getValue("fileInfo")&&!p.getValue("validationErrorMsg")&&(i.succeed+=1),p.getValue("isUploading")&&(i.uploading+=1),(p.getValue("validationErrorMsg")||p.getValue("uploadError"))&&(i.failed+=1),p.getValue("validationMultipleLimitMsg")&&(i.limitOverflow+=1)}const{passed:s,tooMany:o,exact:a}=this._validateFilesCount();let u=!1,c=!1,d=!1;i.total-i.succeed-i.uploading-i.failed>0&&s?u=!0:(c=!0,d=i.total===i.succeed&&s&&0===i.failed&&0===i.limitOverflow),this.set$({doneBtnVisible:c,doneBtnEnabled:d,uploadBtnVisible:u,addMoreBtnEnabled:0===i.total||!o&&!a,addMoreBtnVisible:!a||this.cfg.multiple,headerText:this._getHeaderText(i)})}_getHeaderText(n){return(i=>this.l10n(`header-${i}`,{count:n[i]}))(n.uploading>0?"uploading":n.failed>0?"failed":n.succeed>0?"succeed":"total")}initCallback(){super.initCallback(),this.registerActivity(this.activityType),this.subConfigValue("multiple",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMin",this._debouncedHandleCollectionUpdate),this.subConfigValue("multipleMax",this._debouncedHandleCollectionUpdate),this.sub("*currentActivity",n=>{0===this.uploadCollection?.size&&!this.cfg.showEmptyList&&n===this.activityType&&(this.$["*currentActivity"]=this.initActivity)}),this.uploadCollection.observe(this._debouncedHandleCollectionUpdate),this.sub("*uploadList",n=>{this._debouncedHandleCollectionUpdate(),this.set$({hasFiles:n.length>0}),0===n?.length&&!this.cfg.showEmptyList&&this.historyBack(),this.cfg.confirmUpload||this.add$({"*uploadTrigger":{}},!0)})}destroyCallback(){super.destroyCallback(),this.uploadCollection.unobserve(this._debouncedHandleCollectionUpdate)}}return e.template='\n  <lr-activity-header>\n    <span class="header-text">{{headerText}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="no-files" set="@hidden: hasFiles">\n    <slot name="empty"><span l10n="no-files"></span></slot>\n  </div>\n\n  <div class="files" repeat="*uploadList" repeat-item-tag="lr-file-item"></div>\n\n  <div class="toolbar">\n    <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel;" l10n="clear"></button>\n    <div class="toolbar-spacer"></div>\n    <button\n      type="button"\n      class="add-more-btn secondary-btn"\n      set="onclick: onAdd; @disabled: !addMoreBtnEnabled; @hidden: !addMoreBtnVisible"\n    >\n      <lr-icon name="add"></lr-icon><span l10n="add-more"></span>\n    </button>\n    <button\n      type="button"\n      class="upload-btn primary-btn"\n      set="@hidden: !uploadBtnVisible; onclick: onUpload;"\n      l10n="upload"\n    ></button>\n    <button\n      type="button"\n      class="done-btn primary-btn"\n      set="@hidden: !doneBtnVisible; onclick: onDone;  @disabled: !doneBtnEnabled"\n      l10n="done"\n    ></button>\n  </div>\n\n  <lr-drop-area ghost></lr-drop-area>\n',e})(),Rk=(()=>{class e extends re{constructor(...n){super(...n),y(this,"activityType",L.activities.URL),y(this,"init$",{...this.init$,importDisabled:!0,onUpload:r=>{r.preventDefault(),this.addFileFromUrl(this.ref.input.value,{source:kn.URL_TAB}),this.$["*currentActivity"]=L.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()},onInput:r=>{this.set$({importDisabled:!r.target.value})}})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{this.ref.input.value="",this.ref.input.focus()}})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon name="url"></lr-icon>\n      <span l10n="caption-from-url"></span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <form class="content">\n    <input placeholder="https://" class="url-input" type="text" ref="input" set="oninput: onInput" />\n    <button\n      type="submit"\n      class="url-upload-btn primary-btn"\n      set="onclick: onUpload; @disabled: importDisabled"\n    ></button>\n  </form>\n',e})();const nD=()=>typeof navigator.permissions<"u";let Pk=(()=>{class e extends re{constructor(...n){super(...n),y(this,"activityType",L.activities.CAMERA),y(this,"_unsubPermissions",null),y(this,"init$",{...this.init$,video:null,videoTransformCss:null,shotBtnDisabled:!0,videoHidden:!0,messageHidden:!0,requestBtnHidden:nD(),l10nMessage:null,originalErrorMessage:null,cameraSelectOptions:null,cameraSelectHidden:!0,onCameraSelectChange:r=>{this._selectedCameraId=r.target.value,this._capture()},onCancel:()=>{this.historyBack()},onShot:()=>{this._shot()},onRequestPermissions:()=>{this._capture()}}),y(this,"_onActivate",()=>{nD()&&this._subscribePermissions(),this._capture()}),y(this,"_onDeactivate",()=>{this._unsubPermissions&&this._unsubPermissions(),this._stopCapture()}),y(this,"_handlePermissionsChange",()=>{this._capture()}),y(this,"_setPermissionsState",ir(r=>{this.$.originalErrorMessage=null,this.classList.toggle("initialized","granted"===r),"granted"===r?this.set$({videoHidden:!1,shotBtnDisabled:!1,messageHidden:!0}):"prompt"===r?(this.$.l10nMessage=this.l10n("camera-permissions-prompt"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture()):(this.$.l10nMessage=this.l10n("camera-permissions-denied"),this.set$({videoHidden:!0,shotBtnDisabled:!0,messageHidden:!1}),this._stopCapture())},300))}_subscribePermissions(){var n=this;return se(function*(){try{(yield navigator.permissions.query({name:"camera"})).addEventListener("change",n._handlePermissionsChange)}catch(r){console.log("Failed to use permissions API. Fallback to manual request mode.",r),n._capture()}})()}_capture(){var n=this;return se(function*(){let r={video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!1};n._selectedCameraId&&(r.video.deviceId={exact:n._selectedCameraId}),n._canvas=document.createElement("canvas"),n._ctx=n._canvas.getContext("2d");try{n._setPermissionsState("prompt");let i=yield navigator.mediaDevices.getUserMedia(r);i.addEventListener("inactive",()=>{n._setPermissionsState("denied")}),n.$.video=i,n._capturing=!0,n._setPermissionsState("granted")}catch(i){n._setPermissionsState("denied"),n.$.originalErrorMessage=i.message}})()}_stopCapture(){this._capturing&&(this.$.video?.getTracks()[0].stop(),this.$.video=null,this._capturing=!1)}_shot(){this._canvas.height=this.ref.video.videoHeight,this._canvas.width=this.ref.video.videoWidth,this._ctx.drawImage(this.ref.video,0,0);let n=Date.now(),r=`camera-${n}.png`;this._canvas.toBlob(i=>{let s=new File([i],r,{lastModified:n,type:"image/png"});this.addFileFromObject(s,{source:kn.CAMERA}),this.set$({"*currentActivity":L.activities.UPLOAD_LIST})})}initCallback(){var n=()=>super.initCallback,r=this;return se(function*(){n().call(r),r.registerActivity(r.activityType,{onActivate:r._onActivate,onDeactivate:r._onDeactivate}),r.subConfigValue("cameraMirror",i=>{r.$.videoTransformCss=i?"scaleX(-1)":null});try{let s=(yield navigator.mediaDevices.enumerateDevices()).filter(o=>"videoinput"===o.kind).map((o,a)=>({text:o.label.trim()||`${r.l10n("caption-camera")} ${a+1}`,value:o.deviceId}));s.length>1&&(r.$.cameraSelectOptions=s,r.$.cameraSelectHidden=!1)}catch{}})()}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div set="@hidden: !cameraSelectHidden">\n      <lr-icon name="camera"></lr-icon>\n      <span l10n="caption-camera"></span>\n    </div>\n    <lr-select\n      class="camera-select"\n      set="$.options: cameraSelectOptions; @hidden: cameraSelectHidden; onchange: onCameraSelectChange"\n    >\n    </lr-select>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <video\n      autoplay\n      playsinline\n      set="srcObject: video; style.transform: videoTransformCss; @hidden: videoHidden"\n      ref="video"\n    ></video>\n    <div class="message-box" set="@hidden: messageHidden">\n      <span>{{l10nMessage}}</span>\n      <span>{{originalErrorMessage}}</span>\n      <button\n        type="button"\n        set="onclick: onRequestPermissions; @hidden: requestBtnHidden"\n        l10n="camera-permissions-request"\n      ></button>\n    </div>\n    <button type="button" class="shot-btn" set="onclick: onShot; @disabled: shotBtnDisabled">\n      <lr-icon name="camera"></lr-icon>\n    </button>\n  </div>\n',e})();class kk extends re{}let Fk=(()=>{class e extends re{constructor(...n){super(...n),y(this,"activityType",L.activities.DETAILS),y(this,"pauseRender",!0),y(this,"init$",{...this.init$,checkerboard:!1,fileSize:null,fileName:"",cdnUrl:"",errorTxt:"",cloudEditBtnHidden:!0,onNameInput:null,onBack:()=>{this.historyBack()},onRemove:()=>{this.uploadCollection.remove(this.entry.uid),this.historyBack()},onCloudEdit:()=>{this.entry.getValue("uuid")&&(this.$["*currentActivity"]=L.activities.CLOUD_IMG_EDIT)}})}showNonImageThumb(){let r=Hd(window.getComputedStyle(this).getPropertyValue("--clr-generic-file-icon"),108,108);this.ref.filePreview.setImageUrl(r),this.set$({checkerboard:!1})}initCallback(){super.initCallback(),this.render(),this.$.fileSize=this.l10n("file-size-unknown"),this.registerActivity(this.activityType,{onDeactivate:()=>{this.ref.filePreview.clear()}}),this.sub("*focusedEntry",n=>{if(!n)return;this._entrySubs?this._entrySubs.forEach(s=>{this._entrySubs.delete(s),s.remove()}):this._entrySubs=new Set,this.entry=n;let r=n.getValue("file");if(r){this._file=r;let s=Fd(this._file);s&&!n.getValue("cdnUrl")&&(this.ref.filePreview.setImageFile(this._file),this.set$({checkerboard:!0})),s||this.showNonImageThumb()}let i=(s,o)=>{this._entrySubs.add(this.entry.subscribe(s,o))};i("fileName",s=>{this.$.fileName=s,this.$.onNameInput=()=>{let o=this.ref.file_name_input.value;Object.defineProperty(this._file,"name",{writable:!0,value:o}),this.entry.setValue("fileName",o)}}),i("fileSize",s=>{this.$.fileSize=Number.isFinite(s)?this.fileSizeFmt(s):this.l10n("file-size-unknown")}),i("uploadError",s=>{this.$.errorTxt=s?.message}),i("externalUrl",s=>{s&&(this.entry.getValue("uuid")||this.showNonImageThumb())}),i("cdnUrl",s=>{const o=this.cfg.useCloudImageEditor&&s&&this.entry.getValue("isImage");if(s&&this.ref.filePreview.clear(),this.set$({cdnUrl:s,cloudEditBtnHidden:!o}),s&&this.entry.getValue("isImage")){let a=yt(s,en("format/auto","preview"));this.ref.filePreview.setImageUrl(this.proxyUrl(a))}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span l10n="caption-edit-file"></span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <lr-tabs tab-list="tab-view, tab-details">\n      <div tab-ctx="tab-details" class="details">\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-name"></div>\n          <input\n            name="name-input"\n            ref="file_name_input"\n            set="value: fileName; oninput: onNameInput; @disabled: !!cdnUrl"\n            type="text"\n          />\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="file-size"></div>\n          <div>{{fileSize}}</div>\n        </div>\n\n        <div class="info-block">\n          <div class="info-block_name" l10n="cdn-url"></div>\n          <a class="cdn-link" target="_blank" set="@href: cdnUrl; @disabled: !cdnUrl">{{cdnUrl}}</a>\n        </div>\n\n        <div>{{errorTxt}}</div>\n      </div>\n\n      <lr-file-preview tab-ctx="tab-view" set="@checkerboard: checkerboard;" ref="filePreview"> </lr-file-preview>\n    </lr-tabs>\n\n    <div class="toolbar" set="@edit-disabled: cloudEditBtnHidden">\n      <button type="button" class="edit-btn secondary-btn" set="onclick: onCloudEdit; @hidden: cloudEditBtnHidden;">\n        <lr-icon name="edit"></lr-icon>\n        <span l10n="edit-image"></span>\n      </button>\n      <button type="button" class="remove-btn secondary-btn" set="onclick: onRemove">\n        <lr-icon name="remove"></lr-icon>\n        <span l10n="remove-from-list"></span>\n      </button>\n      <div></div>\n      <button type="button" class="back-btn primary-btn" set="onclick: onBack">\n        <span l10n="ok"></span>\n      </button>\n    </div>\n  </div>\n',e})();class Lk{constructor(){y(this,"captionL10nStr","confirm-your-action"),y(this,"messageL10Str","are-you-sure"),y(this,"confirmL10nStr","yes"),y(this,"denyL10nStr","no")}confirmAction(){console.log("Confirmed")}denyAction(){this.historyBack()}}let $k=(()=>{class e extends L{constructor(...n){super(...n),y(this,"activityType",L.activities.CONFIRMATION),y(this,"_defaults",new Lk),y(this,"init$",{...this.init$,activityCaption:"",messageTxt:"",confirmBtnTxt:"",denyBtnTxt:"","*confirmation":null,onConfirm:this._defaults.confirmAction,onDeny:this._defaults.denyAction.bind(this)})}initCallback(){super.initCallback(),this.set$({messageTxt:this.l10n(this._defaults.messageL10Str),confirmBtnTxt:this.l10n(this._defaults.confirmL10nStr),denyBtnTxt:this.l10n(this._defaults.denyL10nStr)}),this.sub("*confirmation",n=>{n&&this.set$({"*currentActivity":L.activities.CONFIRMATION,activityCaption:this.l10n(n.captionL10nStr),messageTxt:this.l10n(n.messageL10Str),confirmBtnTxt:this.l10n(n.confirmL10nStr),denyBtnTxt:this.l10n(n.denyL10nStr),onDeny:()=>{n.denyAction()},onConfirm:()=>{n.confirmAction()}})})}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <span>{{activityCaption}}</span>\n    <button type="button" class="mini-btn close-btn" set="onclick: *closeModal">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n\n  <div class="message">{{messageTxt}}</div>\n  <div class="toolbar">\n    <button type="button" class="deny-btn secondary-btn" set="onclick: onDeny">{{denyBtnTxt}}</button>\n    <button type="button" class="confirm-btn primary-btn" set="onclick: onConfirm">{{confirmBtnTxt}}</button>\n  </div>\n',e})(),Uk=(()=>{class e extends re{constructor(...n){super(...n),y(this,"init$",{...this.init$,visible:!1,unknown:!1,value:0,"*commonProgress":0})}initCallback(){super.initCallback(),this.uploadCollection.observe(()=>{let n=this.uploadCollection.items().some(r=>this.uploadCollection.read(r).getValue("isUploading"));this.$.visible=n}),this.sub("visible",n=>{n?this.setAttribute("active",""):this.removeAttribute("active")}),this.sub("*commonProgress",n=>{this.$.value=n})}}return e.template='\n  <lr-progress-bar set="visible: visible; unknown: unknown; value: value"></lr-progress-bar>\n',e})(),Vk=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"_value",0),y(this,"_unknownMode",!1),y(this,"init$",{...this.init$,width:0,opacity:0})}initCallback(){super.initCallback(),this.defineAccessor("value",n=>{void 0!==n&&(this._value=n,this._unknownMode||this.style.setProperty("--l-width",this._value.toString()))}),this.defineAccessor("visible",n=>{this.ref.line.classList.toggle("progress--hidden",!n)}),this.defineAccessor("unknown",n=>{this._unknownMode=n,this.ref.line.classList.toggle("progress--unknown",n)})}}return e.template=' <div ref="line" class="progress"></div> ',e})();const Fn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";let rD=(()=>{class e extends Ie{constructor(){super(),y(this,"init$",{...this.init$,checkerboard:!1,src:Fn})}initCallback(){super.initCallback(),this.sub("checkerboard",()=>{this.style.backgroundImage=this.hasAttribute("checkerboard")?`url(${function Ak(e="#fff",t="rgba(0, 0, 0, .1)"){return Bd(`<svg height="20" width="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">\n    <rect x="0" y="0" width="20" height="20" fill="${e}" />\n    <rect x="0" y="0" width="10" height="10" fill="${t}" />\n    <rect x="10" y="10" width="10" height="10" fill="${t}" />\n  </svg>`)}()})`:"unset"})}destroyCallback(){super.destroyCallback(),URL.revokeObjectURL(this._lastObjectUrl)}setImage(n){this.$.src=n.src}setImageFile(n){let r=URL.createObjectURL(n);this.$.src=r,this._lastObjectUrl=r}setImageUrl(n){this.$.src=n}clear(){URL.revokeObjectURL(this._lastObjectUrl),this.$.src=Fn}}return e.template=' <lr-img class="img-view" ref="img" set="@src: src; style.aa: src;" /> ',e})();rD.bindAttributes({checkerboard:"checkerboard"});const iD="--cfg-ctx-name";class Ln extends Ie{get cfgCssCtxName(){return this.getCssData(iD,!0)}get cfgCtxName(){const t=this.getAttribute("ctx-name")?.trim()||this.cfgCssCtxName||this.__cachedCfgCtxName;return this.__cachedCfgCtxName=t,t}connectedCallback(){if(!this.connectedOnce){const t=this.getAttribute("ctx-name")?.trim();t&&this.style.setProperty(iD,`'${t}'`)}super.connectedCallback()}parseCfgProp(t){return{...super.parseCfgProp(t),ctx:te.getCtx(this.cfgCtxName)}}}function sD(...e){return e.reduce((t,n)=>{if("string"==typeof n)return t[n]=!0,t;for(let r of Object.keys(n))t[r]=n[r];return t},{})}function Nt(...e){let t=sD(...e);return Object.keys(t).reduce((n,r)=>(t[r]&&n.push(r),n),[]).join(" ")}function ai(e,t){let n,r=(...i)=>{clearTimeout(n),n=setTimeout(()=>e(...i),t)};return r.cancel=()=>{clearTimeout(n)},r}const vt={brightness:0,exposure:0,gamma:100,contrast:0,saturation:0,vibrance:0,warmth:0,enhance:0,filter:0,rotate:0},oD=["enhance","brightness","exposure","gamma","contrast","saturation","vibrance","warmth","filter","mirror","flip","rotate","crop"];function Oa(e){return Ud(...oD.filter(t=>typeof e[t]<"u"&&null!==e[t]).map(t=>function Hk(e,t){if("number"==typeof t)return vt[e]!==t?`${e}/${t}`:"";if("boolean"==typeof t)return t&&vt[e]!==t?`${e}`:"";if("filter"===e){if(!t||vt[e]===t.amount)return"";let{name:n,amount:r}=t;return`${e}/${n}/${r}`}if("crop"===e){if(!t)return"";let{dimensions:n,coords:r}=t;return`${e}/${n.join("x")}/${r.join(",")}`}return""}(t,e[t])).filter(t=>!!t))}const aD=Ud("format/auto","progressive/yes"),bn=([e])=>typeof e<"u"?Number(e):void 0,lD=()=>!0,jk={enhance:bn,brightness:bn,exposure:bn,gamma:bn,contrast:bn,saturation:bn,vibrance:bn,warmth:bn,filter:([e,t])=>({name:e,amount:typeof t<"u"?Number(t):100}),mirror:lD,flip:lD,rotate:bn,crop:([e,t])=>({dimensions:_n(e,"x").map(Number),coords:_n(t).map(Number)})};function Gk(e){return{"*originalUrl":null,"*faderEl":null,"*cropperEl":null,"*imgEl":null,"*imgContainerEl":null,"*networkProblems":!1,"*imageSize":null,"*editorTransformations":{},entry:null,extension:null,editorMode:!1,modalCaption:"",isImage:!1,msg:"",src:Fn,fileType:"",showLoader:!1,uuid:null,cdnUrl:null,"presence.networkProblems":!1,"presence.modalCaption":!0,"presence.editorToolbar":!1,"presence.viewerToolbar":!0,"*on.retryNetwork":()=>{let t=e.querySelectorAll("img");for(let n of t){let r=n.src;n.src=Fn,n.src=r}e.$["*networkProblems"]=!1},"*on.apply":t=>{if(!t)return;let n=e.$["*originalUrl"],r=en(Oa(t)),i=yt(n,en(r,"preview"));e.dispatchEvent(new CustomEvent("apply",{detail:{originalUrl:n,cdnUrlModifiers:r,cdnUrl:i,transformations:t},bubbles:!0,composed:!0})),e.remove()},"*on.cancel":()=>{e.remove(),e.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}}}const Wk=`\n  <div class="wrapper wrapper_desktop">\n    <lr-presence-toggle class="network_problems_splash" set="visible: presence.networkProblems;">\n      <div class="network_problems_content">\n        <div class="network_problems_icon">\n          <lr-icon size="20" name="sad"></lr-icon>\n        </div>\n        <div class="network_problems_text">Network error</div>\n      </div>\n      <div class="network_problems_footer">\n        <lr-btn-ui theme="primary" text="Retry" set="onclick: *on.retryNetwork"></lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <div class="viewport">\n      <div class="file_type_outer">\n        <div class="file_type">{{fileType}}</div>\n      </div>\n      <div class="image_container" ref="img-container-el">\n        <img src="${Fn}" class="image image_visible_from_editor" ref="img-el" />\n        <lr-editor-image-cropper ref="cropper-el"></lr-editor-image-cropper>\n        <lr-editor-image-fader ref="fader-el"></lr-editor-image-fader>\n      </div>\n      <div class="info_pan">{{msg}}</div>\n    </div>\n    <div class="toolbar">\n      <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n      <div class="toolbar_content toolbar_content__editor">\n        <lr-editor-toolbar></lr-editor-toolbar>\n      </div>\n    </div>\n  </div>\n`,jd=["crop","sliders","filters"],qk=["brightness","exposure","gamma","contrast","saturation","vibrance","warmth","enhance"],Yk=["adaris","briaril","calarel","carris","cynarel","cyren","elmet","elonni","enzana","erydark","fenralan","ferand","galen","gavin","gethriel","iorill","iothari","iselva","jadis","lavra","misiara","namala","nerion","nethari","pamaya","sarnar","sedis","sewen","sorahel","sorlen","tarian","thellassan","varriel","varven","vevera","virkas","yedis","yllara","zatvel","zevcen"],Zk=["rotate","mirror","flip"],li={brightness:{zero:vt.brightness,range:[-100,100],keypointsNumber:2},exposure:{zero:vt.exposure,range:[-500,500],keypointsNumber:2},gamma:{zero:vt.gamma,range:[0,1e3],keypointsNumber:2},contrast:{zero:vt.contrast,range:[-100,500],keypointsNumber:2},saturation:{zero:vt.saturation,range:[-100,500],keypointsNumber:1},vibrance:{zero:vt.vibrance,range:[-100,500],keypointsNumber:1},warmth:{zero:vt.warmth,range:[-100,100],keypointsNumber:1},enhance:{zero:vt.enhance,range:[0,100],keypointsNumber:1},filter:{zero:vt.filter,range:[0,100],keypointsNumber:1}};let Ra=(()=>{class e extends Ln{constructor(...n){super(...n),y(this,"init$",{...this.init$,...Gk(this)}),y(this,"_debouncedShowLoader",ai(this._showLoader.bind(this),300))}get ctxName(){return this.autoCtxName}_showLoader(n){this.$.showLoader=n}_waitForSize(){return new Promise((r,i)=>{const s=setTimeout(()=>{i(new Error("[cloud-image-editor] timeout waiting for non-zero container size"))},3e3),o=new ResizeObserver(([a])=>{a.contentRect.width>0&&a.contentRect.height>0&&(r(),clearTimeout(s),o.disconnect())});o.observe(this)})}initCallback(){super.initCallback(),this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}initEditor(){var n=this;return se(function*(){try{yield n._waitForSize()}catch(r){return void(n.isConnected&&console.error(r.message))}if(n.ref["img-el"].addEventListener("load",()=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$.src!==Fn&&(n.$["*networkProblems"]=!1)}),n.ref["img-el"].addEventListener("error",()=>{n._imgLoading=!1,n._debouncedShowLoader(!1),n.$["*networkProblems"]=!0}),n.sub("src",r=>{let i=n.ref["img-el"];i.src!==r&&(n._imgLoading=!0,i.src=r||Fn)}),n.sub("*tabId",r=>{n.ref["img-el"].className=Nt("image",{image_hidden_to_cropper:"crop"===r,image_hidden_effects:"crop"!==r})}),n.$.cdnUrl){let r=function pk(e){let t=new URL(e),{pathname:n}=t;const r=n.indexOf("/"),i=n.indexOf("/",r+1);return n.substring(r+1,i)}(n.$.cdnUrl);n.$["*originalUrl"]=Ds(n.$.cdnUrl,r);let i=function gk(e){let t=Wb(e),n=new URL(t),r=n.pathname.indexOf("/-/");return-1===r?[]:n.pathname.substring(r).split("/-/").filter(Boolean).map(s=>zb(s))}(n.$.cdnUrl),s=function zk(e){let t={};for(let n of e){let[r,...i]=n.split("/");if(!oD.includes(r))continue;const o=(0,jk[r])(i);t[r]=o}return t}(i);n.$["*editorTransformations"]=s}else{if(!n.$.uuid)throw new Error("No UUID nor CDN URL provided");n.$["*originalUrl"]=Ds(n.cfg.cdnCname,n.$.uuid)}n.classList.add("editor_ON"),n.sub("*networkProblems",r=>{n.$["presence.networkProblems"]=r,n.$["presence.modalCaption"]=!r}),n.sub("*editorTransformations",r=>{let i=n.$["*originalUrl"],s=en(Oa(r)),o=yt(i,en(s,"preview"));n.dispatchEvent(new CustomEvent("change",{detail:{originalUrl:i,cdnUrlModifiers:s,cdnUrl:o,transformations:r},bubbles:!0,composed:!0}))},!1);try{fetch(yt(n.$["*originalUrl"],en("json"))).then(r=>r.json()).then(r=>{const{width:i,height:s}=r;n.$["*imageSize"]={width:i,height:s}})}catch(r){r&&console.error("Failed to load image info",r)}})()}}return y(e,"className","cloud-image-editor"),e.template=Wk,e})();Ra.bindAttributes({uuid:"uuid","cdn-url":"cdnUrl"});const Ot=1.5,ka=100/3;function ui(e,t){for(let n in t)e.setAttributeNS(null,n,t[n].toString())}function Rt(e,t={}){let n=document.createElementNS("http://www.w3.org/2000/svg",e);return ui(n,t),n}function Xk(e,t){let{x:n,y:r,width:i,height:s}=e,o=t.includes("w")?0:1,a=t.includes("n")?0:1,l=[-1,1][o],u=[-1,1][a],c=[n+o*i+Ot*l,r+a*s+Ot*u-24*u],d=[n+o*i+Ot*l,r+a*s+Ot*u],f=[n+o*i-24*l+Ot*l,r+a*s+Ot*u];return{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]} L ${f[0]} ${f[1]}`,center:d}}function Qk(e,t){let c,d,{x:n,y:r,width:i,height:s}=e,o=["n","s"].includes(t)?.5:{w:0,e:1}[t],a=["w","e"].includes(t)?.5:{n:0,s:1}[t],l=[-1,1][o],u=[-1,1][a];return["n","s"].includes(t)?(c=[n+o*i-17,r+a*s+Ot*u],d=[n+o*i+17,r+a*s+Ot*u]):(c=[n+o*i+Ot*l,r+a*s-17],d=[n+o*i+Ot*l,r+a*s+17]),{d:`M ${c[0]} ${c[1]} L ${d[0]} ${d[1]}`,center:[d[0]-(d[0]-c[0])/2,d[1]-(d[1]-c[1])/2]}}function cD(e,t){let{x:n}=e,{y:r}=e;return e.x<t.x?n=t.x:e.x+e.width>t.x+t.width&&(n=t.x+t.width-e.width),e.y<t.y?r=t.y:e.y+e.height>t.y+t.height&&(r=t.y+t.height-e.height),{...e,x:n,y:r}}function dD(e,[t,n],r){let{x:i,y:s,width:o,height:a}=e;if(r.includes("n")){let l=a;a=Math.max(n,a),s=s+l-a}if(r.includes("s")&&(a=Math.max(n,a)),r.includes("w")){let l=o;o=Math.max(t,o),i=i+l-o}return r.includes("e")&&(o=Math.max(t,o)),{x:i,y:s,width:o,height:a}}let i1=(()=>{class e extends Ln{constructor(){super(),y(this,"init$",{...this.init$,dragging:!1}),this._handlePointerUp=this._handlePointerUp_.bind(this),this._handlePointerMove=this._handlePointerMove_.bind(this),this._handleSvgPointerMove=this._handleSvgPointerMove_.bind(this)}_shouldThumbBeDisabled(n){let r=this.$["*imageBox"];if(!r)return;if(""===n&&r.height<=82&&r.width<=82)return!0;let i=r.height<=82&&(n.includes("n")||n.includes("s")),s=r.width<=82&&(n.includes("e")||n.includes("w"));return i||s}_createBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n,a=this.ref["svg-el"],l=Rt("mask",{id:"backdrop-mask"}),u=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"white"}),c=Rt("rect",{x:r,y:i,width:s,height:o,fill:"black"});l.appendChild(u),l.appendChild(c);let d=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"var(--color-image-background)","fill-opacity":.85,mask:"url(#backdrop-mask)"});a.appendChild(d),a.appendChild(l),this._backdropMask=l,this._backdropMaskInner=c}_resizeBackdrop(){this._backdropMask&&(this._backdropMask.style.display="none",window.requestAnimationFrame(()=>{this._backdropMask.style.display="block"}))}_updateBackdrop(){let n=this.$["*cropBox"];if(!n)return;let{x:r,y:i,width:s,height:o}=n;ui(this._backdropMaskInner,{x:r,y:i,width:s,height:o})}_updateFrame(){let n=this.$["*cropBox"];if(n){for(let i of Object.values(this._frameThumbs)){let{direction:s,pathNode:o,interactionNode:a,groupNode:l}=i,c=2===s.length;if(""===s){let{x:f,y:h,width:p,height:g}=n,v=[f+p/2,h+g/2];ui(a,{r:Math.min(p,g)/3,cx:v[0],cy:v[1]})}else{let{d:f,center:h}=c?Xk(n,s):Qk(n,s);ui(a,{cx:h[0],cy:h[1]}),ui(o,{d:f})}let d=this._shouldThumbBeDisabled(s);l.setAttribute("class",Nt("thumb",{"thumb--hidden":d,"thumb--visible":!d}))}ui(this._frameGuides,{x:n.x-.5,y:n.y-.5,width:n.width+1,height:n.height+1})}}_createThumbs(){let n={};for(let r=0;r<3;r++)for(let i=0;i<3;i++){let s=`${["n","","s"][r]}${["w","","e"][i]}`,o=Rt("g");o.classList.add("thumb"),o.setAttribute("with-effects","");let a=Rt("circle",{r:25.5,fill:"transparent"}),l=Rt("path",{stroke:"currentColor",fill:"none","stroke-width":3});o.appendChild(l),o.appendChild(a),n[s]={direction:s,pathNode:l,interactionNode:a,groupNode:o},a.addEventListener("pointerdown",this._handlePointerDown.bind(this,s))}return n}_createGuides(){let n=Rt("svg"),r=Rt("rect",{x:0,y:0,width:"100%",height:"100%",fill:"none",stroke:"#000000","stroke-width":1,"stroke-opacity":.5});n.appendChild(r);for(let i=1;i<=2;i++){let s=Rt("line",{x1:ka*i+"%",y1:"0%",x2:ka*i+"%",y2:"100%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}for(let i=1;i<=2;i++){let s=Rt("line",{x1:"0%",y1:ka*i+"%",x2:"100%",y2:ka*i+"%",stroke:"#000000","stroke-width":1,"stroke-opacity":.3});n.appendChild(s)}return n.classList.add("guides","guides--semi-hidden"),n}_createFrame(){let n=this.ref["svg-el"],r=document.createDocumentFragment(),i=this._createGuides();r.appendChild(i);let s=this._createThumbs();for(let{groupNode:o}of Object.values(s))r.appendChild(o);n.appendChild(r),this._frameThumbs=s,this._frameGuides=i}_handlePointerDown(n,r){let i=this._frameThumbs[n];if(this._shouldThumbBeDisabled(n))return;let s=this.$["*cropBox"],{x:o,y:a}=this.ref["svg-el"].getBoundingClientRect(),l=r.x-o,u=r.y-a;this.$.dragging=!0,this._draggingThumb=i,this._dragStartPoint=[l,u],this._dragStartCrop={...s}}_handlePointerUp_(n){this._updateCursor(),this.$.dragging&&(n.stopPropagation(),n.preventDefault(),this.$.dragging=!1)}_handlePointerMove_(n){if(!this.$.dragging)return;n.stopPropagation(),n.preventDefault();let r=this.ref["svg-el"],{x:i,y:s}=r.getBoundingClientRect(),l=n.x-i-this._dragStartPoint[0],u=n.y-s-this._dragStartPoint[1],{direction:c}=this._draggingThumb,d=this.$["*imageBox"],f=this._dragStartCrop;""===c?(f=function e1(e,[t,n]){return{...e,x:e.x+t,y:e.y+n}}(f,[l,u]),f=cD(f,d)):(f=function t1(e,[t,n],r){let{x:i,y:s,width:o,height:a}=e;return r.includes("n")&&(s+=n,a-=n),r.includes("s")&&(a+=n),r.includes("w")&&(i+=t,o-=t),r.includes("e")&&(o+=t),{x:i,y:s,width:o,height:a}}(f,[l,u],c),f=function n1(e,t){let n=Math.max(e.x,t.x),r=Math.min(e.x+e.width,t.x+t.width),i=Math.max(e.y,t.y);return{x:n,y:i,width:r-n,height:Math.min(e.y+e.height,t.y+t.height)-i}}(f,d)),f=dD(f,[Math.min(d.width,82),Math.min(d.height,82)],c),Object.values(f).every(p=>Number.isFinite(p)&&p>=0)?this.$["*cropBox"]=f:console.error("CropFrame is trying to create invalid rectangle",{payload:f})}_handleSvgPointerMove_(n){let r=Object.values(this._frameThumbs).find(i=>{if(this._shouldThumbBeDisabled(i.direction))return!1;let o=i.groupNode.getBoundingClientRect();return function r1(e,[t,n]){return e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height}({x:o.x,y:o.y,width:o.width,height:o.height},[n.x,n.y])});this._hoverThumb=r,this._updateCursor()}_updateCursor(){let n=this._hoverThumb;this.ref["svg-el"].style.cursor=n?function Jk(e){return""===e?"move":["e","w"].includes(e)?"ew-resize":["n","s"].includes(e)?"ns-resize":["nw","se"].includes(e)?"nwse-resize":"nesw-resize"}(n.direction):"initial"}_render(){this._updateBackdrop(),this._updateFrame()}toggleThumbs(n){Object.values(this._frameThumbs).map(({groupNode:r})=>r).forEach(r=>{r.setAttribute("class",Nt("thumb",{"thumb--hidden":!n,"thumb--visible":n}))})}initCallback(){super.initCallback(),this._createBackdrop(),this._createFrame(),this.sub("*imageBox",()=>{this._resizeBackdrop(),window.requestAnimationFrame(()=>{this._render()})}),this.sub("*cropBox",n=>{n&&(this._guidesHidden=n.height<=82||n.width<=82,window.requestAnimationFrame(()=>{this._render()}))}),this.sub("dragging",n=>{this._frameGuides.setAttribute("class",Nt({"guides--hidden":this._guidesHidden,"guides--visible":!this._guidesHidden&&n,"guides--semi-hidden":!this._guidesHidden&&!n}))}),this.ref["svg-el"].addEventListener("pointermove",this._handleSvgPointerMove,!0),document.addEventListener("pointermove",this._handlePointerMove,!0),document.addEventListener("pointerup",this._handlePointerUp,!0)}destroyCallback(){super.destroyCallback(),document.removeEventListener("pointermove",this._handlePointerMove),document.removeEventListener("pointerup",this._handlePointerUp)}}return e.template=' <svg class="svg" ref="svg-el" xmlns="http://www.w3.org/2000/svg"></svg> ',e})(),zd=(()=>{class e extends Ln{constructor(...n){super(...n),y(this,"init$",{...this.init$,active:!1,title:"",icon:"","on.click":null})}initCallback(){super.initCallback(),this._titleEl=this.ref["title-el"],this._iconEl=this.ref["icon-el"],this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.sub("title",n=>{this._titleEl&&(this._titleEl.style.display=n?"block":"none")}),this.sub("active",n=>{this.className=Nt({active:n,not_active:!n})}),this.sub("on.click",n=>{this.onclick=n})}}return e.template='\n  <div class="before"></div>\n  <lr-icon size="20" set="@name: icon;"></lr-icon>\n  <div class="title" ref="title-el">{{title}}</div>\n',e})();class Gd extends zd{initCallback(){super.initCallback(),this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t)}),this.$["on.click"]=t=>{let n=this.$["*cropperEl"].getValue(this._operation),r=function o1(e,t){return"rotate"===e?function s1(e){let t=e+90;return t=t>=360?0:t,t}(t):["mirror","flip"].includes(e)?!t:null}(this._operation,n);this.$["*cropperEl"].setValue(this._operation,r)}}}const $n="original";let a1=(()=>{class e extends Ln{constructor(...n){super(...n),y(this,"init$",{...this.init$,disabled:!1,min:0,max:100,value:0,defaultValue:0,zero:0,"on.input":r=>{this.$["*faderEl"].set(r),this.$.value=r}})}setOperation(n,r){this._controlType="filter"===n?"filter":"color_operation",this._operation=n,this._iconName=n,this._title=n.toUpperCase(),this._filter=r,this._initializeValues(),this.$["*faderEl"].activate({url:this.$["*originalUrl"],operation:this._operation,value:this._filter===$n?void 0:this.$.value,filter:this._filter===$n?void 0:this._filter,fromViewer:!1})}_initializeValues(){let{range:n,zero:r}=li[this._operation],[i,s]=n;this.$.min=i,this.$.max=s,this.$.zero=r;let o=this.$["*editorTransformations"][this._operation];if("filter"===this._controlType){let a=s;if(o){let{name:l,amount:u}=o;a=l===this._filter?u:s}this.$.value=a,this.$.defaultValue=a}if("color_operation"===this._controlType){let a=typeof o<"u"?o:r;this.$.value=a,this.$.defaultValue=a}}apply(){let n;n="filter"===this._controlType?this._filter===$n?null:{name:this._filter,amount:this.$.value}:this.$.value;let r={...this.$["*editorTransformations"],[this._operation]:n};this.$["*editorTransformations"]=r}cancel(){this.$["*faderEl"].deactivate({hide:!1})}initCallback(){super.initCallback(),this.sub("*originalUrl",n=>{this._originalUrl=n}),this.sub("value",n=>{this.$["*operationTooltip"]=`${this._filter||this._operation} ${n}`})}}return e.template='\n  <lr-slider-ui\n    ref="slider-el"\n    set="disabled: disabled; min: min; max: max; defaultValue: defaultValue; zero: zero; onInput: on.input;"\n  ></lr-slider-ui>\n',e})();function Wd(e){let t=new Image;return{promise:new Promise((i,s)=>{t.src=e,t.onload=i,t.onerror=s}),image:t,cancel:()=>{0===t.naturalWidth&&(t.src=Fn)}}}function qd(e){let t=[];for(let s of e){let o=Wd(s);t.push(o)}let n=t.map(s=>s.image);return{promise:Promise.allSettled(t.map(s=>s.promise)),images:n,cancel:()=>{t.forEach(s=>{s.cancel()})}}}let Yd=(()=>{class e extends zd{constructor(...n){super(...n),y(this,"init$",{...this.init$,active:!1,title:"",icon:"",isOriginal:!1,iconSize:"20","on.click":null})}_previewSrc(){let n=parseInt(window.getComputedStyle(this).getPropertyValue("--l-base-min-width"),10),r=window.devicePixelRatio,i=Math.ceil(r*n),s=r>=2?"lightest":"normal",a={...this.$["*editorTransformations"]};return a[this._operation]=this._filter!==$n?{name:this._filter,amount:100}:void 0,yt(this._originalUrl,en(aD,Oa(a),`quality/${s}`,`scale_crop/${i}x${i}/center`))}_observerCallback(n,r){if(n[0].isIntersecting){let s=this.proxyUrl(this._previewSrc()),o=this.ref["preview-el"],{promise:a,cancel:l}=Wd(s);this._cancelPreload=l,a.catch(u=>{this.$["*networkProblems"]=!0,console.error("Failed to load image",{error:u})}).finally(()=>{o.style.backgroundImage=`url(${s})`,o.setAttribute("loaded",""),r.unobserve(this)})}else this._cancelPreload&&this._cancelPreload()}initCallback(){super.initCallback(),this.$["on.click"]=r=>{this.$.active?this.$.isOriginal||(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*showSlider"]=!0):(this.$["*sliderEl"].setOperation(this._operation,this._filter),this.$["*sliderEl"].apply()),this.$["*currentFilter"]=this._filter},this.defineAccessor("filter",r=>{this._operation="filter",this._filter=r,this.$.isOriginal=r===$n,this.$.icon=this.$.isOriginal?"original":"slider"}),this._observer=new window.IntersectionObserver(this._observerCallback.bind(this),{threshold:[0,1]}),this._originalUrl=this.$["*originalUrl"],this.$.isOriginal?this.ref["icon-el"].classList.add("original-icon"):this._observer.observe(this),this.sub("*currentFilter",r=>{this.$.active=r&&r===this._filter}),this.sub("isOriginal",r=>{this.$.iconSize=r?40:20}),this.sub("active",r=>{if(this.$.isOriginal)return;this.ref["icon-el"].style.opacity=r?"1":"0";let s=this.ref["preview-el"];r?s.style.opacity="0":s.style.backgroundImage&&(s.style.opacity="1")}),this.sub("*networkProblems",r=>{if(!r){let i=this.proxyUrl(this._previewSrc()),s=this.ref["preview-el"];s.style.backgroundImage&&(s.style.backgroundImage="none",s.style.backgroundImage=`url(${i})`)}})}destroyCallback(){super.destroyCallback(),this._observer?.disconnect(),this._cancelPreload&&this._cancelPreload()}}return e.template='\n  <div class="before"></div>\n  <div class="preview" ref="preview-el"></div>\n  <lr-icon size="40" ref="icon-el" set="@name: icon; @size: iconSize;"></lr-icon>\n',e})();class Zd extends zd{constructor(...t){super(...t),y(this,"_operation","")}initCallback(){super.initCallback(),this.$["on.click"]=t=>{this.$["*sliderEl"].setOperation(this._operation),this.$["*showSlider"]=!0,this.$["*currentOperation"]=this._operation},this.defineAccessor("operation",t=>{t&&(this._operation=t,this.$.icon=t,this.$.title=this.l10n(t))}),this.sub("*editorTransformations",t=>{if(!this._operation)return;let{zero:n}=li[this._operation],r=t[this._operation];this.$.active=typeof r<"u"&&r!==n})}}function Kd(e,t,n){let i=window.devicePixelRatio,s=Math.min(Math.ceil(t*i),3e3),o=i>=2?"lightest":"normal";return yt(e,en(aD,Oa(n),`quality/${o}`,`stretch/off/-/resize/${s}x`))}function Fa(e,t,n){return Math.min(Math.max(e,t),n)}function Ss({width:e,height:t},n){let r=n/90%2!=0;return{width:r?t:e,height:r?e:t}}let c1=(()=>{class e extends Ln{constructor(){super(),y(this,"init$",{...this.init$,image:null,"*padding":20,"*operations":{rotate:0,mirror:!1,flip:!1},"*imageBox":{x:0,y:0,width:0,height:0},"*cropBox":{x:0,y:0,width:0,height:0}}),this._commitDebounced=ai(this._commit.bind(this),300),this._handleResizeDebounced=ai(this._handleResize.bind(this),10)}_handleResize(){this.isConnected&&(this.deactivate(),this.activate(this._imageSize,{fromViewer:!1}))}_syncTransformations(){let r=function l1(e,t){let n={};for(let r of t){let i=e[r];(e.hasOwnProperty(r)||void 0!==i)&&(n[r]=i)}return n}(this.$["*editorTransformations"],Object.keys(this.$["*operations"])),i={...this.$["*operations"],...r};this.$["*operations"]=i}_initCanvas(){let n=this.ref["canvas-el"],r=n.getContext("2d"),i=this.offsetWidth,s=this.offsetHeight,o=window.devicePixelRatio;n.style.width=`${i}px`,n.style.height=`${s}px`,n.width=i*o,n.height=s*o,r.scale(o,o),this._canvas=n,this._ctx=r}_alignImage(){if(!this._isActive||!this.$.image)return;let n=this.$.image,r=this.$["*padding"],i=this.$["*operations"],{rotate:s}=i,o_width=this.offsetWidth,o_height=this.offsetHeight,a=Ss({width:n.naturalWidth,height:n.naturalHeight},s);if(a.width>o_width-2*r||a.height>o_height-2*r){let l=a.width/a.height;if(l>o_width/o_height){let c=o_width-2*r,d=c/l;this.$["*imageBox"]={x:0+r,y:r+(o_height-2*r)/2-d/2,width:c,height:d}}else{let c=o_height-2*r,d=c*l;this.$["*imageBox"]={x:r+(o_width-2*r)/2-d/2,y:0+r,width:d,height:c}}}else{let{width:l,height:u}=a;this.$["*imageBox"]={x:r+(o_width-2*r)/2-l/2,y:r+(o_height-2*r)/2-u/2,width:l,height:u}}}_alignCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,o=this.$["*editorTransformations"].crop;if(o){let{dimensions:[l,u],coords:[c,d]}=o,{width:f,x:h,y:p}=this.$["*imageBox"],{width:g}=Ss(this._imageSize,s),v=f/g;n={x:h+c*v,y:p+d*v,width:l*v,height:u*v}}else n={x:r.x,y:r.y,width:r.width,height:r.height};n=dD(n,[Math.min(r.width,82),Math.min(r.height,82)],"se"),n=cD(n,r),this.$["*cropBox"]=n}_drawImage(){let n=this.$.image,r=this.$["*imageBox"],i=this.$["*operations"],{mirror:s,flip:o,rotate:a}=i,l=this._ctx,u=Ss({width:r.width,height:r.height},a);l.save(),l.translate(r.x+r.width/2,r.y+r.height/2),l.rotate(a*Math.PI*-1/180),l.scale(s?-1:1,o?-1:1),l.drawImage(n,-u.width/2,-u.height/2,u.width,u.height),l.restore()}_draw(){if(!this._isActive||!this.$.image)return;let n=this._canvas;this._ctx.clearRect(0,0,n.width,n.height),this._drawImage()}_animateIn({fromViewer:n}){this.$.image&&(this.ref["frame-el"].toggleThumbs(!0),this._transitionToImage(),setTimeout(()=>{this.className=Nt({active_from_viewer:n,active_from_editor:!n,inactive_to_editor:!1})}))}_calculateDimensions(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a}=r,{width:l,height:u}=Ss(this._imageSize,s),{width:c,height:d}=n,h=a/u;return[Fa(Math.round(c/(o/l)),1,l),Fa(Math.round(d/h),1,u)]}_calculateCrop(){let n=this.$["*cropBox"],r=this.$["*imageBox"],i=this.$["*operations"],{rotate:s}=i,{width:o,height:a,x:l,y:u}=r,{width:c,height:d}=Ss(this._imageSize,s),{x:f,y:h}=n,p=o/c,g=a/d,v=this._calculateDimensions(),_={dimensions:v,coords:[Fa(Math.round((f-l)/p),0,c-v[0]),Fa(Math.round((h-u)/g),0,d-v[1])]};if(function u1(e){return!e||[({dimensions:n,coords:r})=>[...n,...r].every(i=>Number.isInteger(i)&&Number.isFinite(i)),({dimensions:n,coords:r})=>n.every(i=>i>0)&&r.every(i=>i>=0)].every(n=>n(e))}(_))return v[0]!==c||v[1]!==d?_:void 0;console.error("Cropper is trying to create invalid crop object",{payload:_})}_commit(){if(!this.isConnected)return;let n=this.$["*operations"],{rotate:r,mirror:i,flip:s}=n,o=this._calculateCrop(),l={...this.$["*editorTransformations"],crop:o,rotate:r,mirror:i,flip:s};this.$["*editorTransformations"]=l}setValue(n,r){console.log(`Apply cropper operation [${n}=${r}]`),this.$["*operations"]={...this.$["*operations"],[n]:r},this._isActive&&(this._alignImage(),this._alignCrop(),this._draw())}getValue(n){return this.$["*operations"][n]}activate(n,{fromViewer:r}){var i=this;return se(function*(){if(!i._isActive){i._isActive=!0,i._imageSize=n,i.removeEventListener("transitionend",i._reset),i._initCanvas();try{i.$.image=yield i._waitForImage(i.$["*originalUrl"],i.$["*editorTransformations"]),i._syncTransformations(),i._alignImage(),i._alignCrop(),i._draw(),i._animateIn({fromViewer:r})}catch(s){console.error("Failed to activate cropper",{error:s})}}})()}deactivate(){this._isActive&&(this._commit(),this._isActive=!1,this._transitionToCrop(),this.className=Nt({active_from_viewer:!1,active_from_editor:!1,inactive_to_editor:!0}),this.ref["frame-el"].toggleThumbs(!1),this.addEventListener("transitionend",this._reset,{once:!0}))}_transitionToCrop(){let n=this._calculateDimensions(),r=Math.min(this.offsetWidth,n[0])/this.$["*cropBox"].width,i=Math.min(this.offsetHeight,n[1])/this.$["*cropBox"].height,s=Math.min(r,i),o=this.$["*cropBox"].x+this.$["*cropBox"].width/2,a=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform=`scale(${s}) translate(${(this.offsetWidth/2-o)/s}px, ${(this.offsetHeight/2-a)/s}px)`,this.style.transformOrigin=`${o}px ${a}px`}_transitionToImage(){let n=this.$["*cropBox"].x+this.$["*cropBox"].width/2,r=this.$["*cropBox"].y+this.$["*cropBox"].height/2;this.style.transform="scale(1)",this.style.transformOrigin=`${n}px ${r}px`}_reset(){this._isActive||(this.$.image=null)}_waitForImage(n,r){let i=this.offsetWidth;r={...r,crop:void 0,rotate:void 0,flip:void 0,mirror:void 0};let s=this.proxyUrl(Kd(n,i,r)),{promise:o,cancel:a,image:l}=Wd(s),u=this._handleImageLoading(s);return l.addEventListener("load",u,{once:!0}),l.addEventListener("error",u,{once:!0}),this._cancelPreload&&this._cancelPreload(),this._cancelPreload=a,o.then(()=>l).catch(c=>(console.error("Failed to load image",{error:c}),this.$["*networkProblems"]=!0,Promise.resolve(l)))}_handleImageLoading(n){let r="crop",i=this.$["*loadingOperations"];return i.get(r)||i.set(r,new Map),i.get(r).get(n)||(i.set(r,i.get(r).set(n,!0)),this.$["*loadingOperations"]=i),()=>{i?.get(r)?.has(n)&&(i.get(r).delete(n),this.$["*loadingOperations"]=i)}}initCallback(){super.initCallback(),this._observer=new ResizeObserver(([n])=>{n.contentRect.width>0&&n.contentRect.height>0&&this._isActive&&this.$.image&&this._handleResizeDebounced()}),this._observer.observe(this),this.sub("*imageBox",()=>{this._draw()}),this.sub("*cropBox",n=>{this.$.image&&this._commitDebounced()}),setTimeout(()=>{this.sub("*networkProblems",n=>{n||this._isActive&&this.activate(this._imageSize,{fromViewer:!1})})},0)}destroyCallback(){super.destroyCallback(),this._observer?.disconnect()}}return e.template='\n  <canvas class="canvas" ref="canvas-el"></canvas>\n  <lr-crop-frame ref="frame-el"></lr-crop-frame>\n',e})();function fD(e,t,n){let r=Array(n);for(let i=--n;i>=0;i--)r[i]=Math.ceil((i*t+(n-i)*e)/n);return r}function hD(e,t){let n=li[e].keypointsNumber,{range:r,zero:i}=li[e];return[...new Set([...fD(r[0],i,n+1),...fD(i,r[1],n+1),i,t])].sort((s,o)=>s-o)}class p1 extends Ln{constructor(){super(),this._isActive=!1,this._hidden=!0,this._addKeypointDebounced=ai(this._addKeypoint.bind(this),600),this.classList.add("inactive_to_cropper")}_handleImageLoading(t){let n=this._operation,r=this.$["*loadingOperations"];return r.get(n)||r.set(n,new Map),r.get(n).get(t)||(r.set(n,r.get(n).set(t,!0)),this.$["*loadingOperations"]=r),()=>{r?.get(n)?.has(t)&&(r.get(n).delete(t),this.$["*loadingOperations"]=r)}}_flush(){window.cancelAnimationFrame(this._raf),this._raf=window.requestAnimationFrame(()=>{for(let t of this._keypoints){let{image:n}=t;n&&(n.style.opacity=t.opacity.toString(),n.style.zIndex=t.zIndex.toString())}})}_imageSrc({url:t=this._url,filter:n=this._filter,operation:r,value:i}={}){let s={...this._transformations};return r&&(s[r]=n?{name:n,amount:i}:i),this.proxyUrl(Kd(t,this.offsetWidth,s))}_constructKeypoint(t,n){return{src:this._imageSrc({operation:t,value:n}),image:null,opacity:0,zIndex:0,value:n}}_isSame(t,n){return this._operation===t&&this._filter===n}_addKeypoint(t,n,r){let i=()=>!this._isSame(t,n)||this._value!==r||!!this._keypoints.find(l=>l.value===r);if(i())return;let s=this._constructKeypoint(t,r),o=new Image;o.src=s.src;let a=this._handleImageLoading(s.src);o.addEventListener("load",a,{once:!0}),o.addEventListener("error",a,{once:!0}),s.image=o,o.classList.add("fader-image"),o.addEventListener("load",()=>{if(i())return;let l=this._keypoints,u=l.findIndex(d=>d.value>r),c=u<l.length?l[u].image:null;!this._container||c&&!this._container.contains(c)||(l.splice(u,0,s),this._container.insertBefore(o,c),this._update(t,r))},{once:!0}),o.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}set(t){t="string"==typeof t?parseInt(t,10):t,this._update(this._operation,t),this._addKeypointDebounced(this._operation,this._filter,t)}_update(t,n){this._operation=t,this._value=n;let{zero:r}=li[t],i=this._keypoints.map(a=>a.value),s=function f1(e,t,n){let r=function d1(e){return e.reduce((t,n,r)=>r<e.length-1?[...t,[n,e[r+1]]]:t,[])}(e).find(([i,s])=>i<=t&&t<=s);return e.map(i=>{let s=Math.abs(r[0]-r[1]),o=Math.abs(t-r[0])/s;return r[0]===i?t>n?1:1-o:r[1]===i?t>=n?o:1:0})}(i,n,r),o=function h1(e,t){return e.map((n,r)=>n<t?e.length-r:r)}(i,r);for(let[a,l]of Object.entries(this._keypoints))l.opacity=s[a],l.zIndex=o[a];this._flush()}_createPreviewImage(){let t=new Image;return t.classList.add("fader-image","fader-image--preview"),t.style.opacity="0",t}_initNodes(){var t=this;return se(function*(){let n=document.createDocumentFragment();t._previewImage=t._previewImage||t._createPreviewImage(),!t.contains(t._previewImage)&&n.appendChild(t._previewImage);let r=document.createElement("div");n.appendChild(r);let i=t._keypoints.map(c=>c.src),{images:s,promise:o,cancel:a}=qd(i);s.forEach(c=>{let d=t._handleImageLoading(c.src);c.addEventListener("load",d),c.addEventListener("error",d)}),t._cancelLastImages=()=>{a(),t._cancelLastImages=void 0};let l=t._operation,u=t._filter;yield o,t._isActive&&t._isSame(l,u)&&(t._container&&t._container.remove(),t._container=r,t._keypoints.forEach((c,d)=>{let f=s[d];f.classList.add("fader-image"),c.image=f,t._container.appendChild(f)}),t.appendChild(n),t._flush())})()}setTransformations(t){if(this._transformations=t,this._previewImage){let n=this._imageSrc(),r=this._handleImageLoading(n);this._previewImage.src=n,this._previewImage.addEventListener("load",r,{once:!0}),this._previewImage.addEventListener("error",r,{once:!0}),this._previewImage.style.opacity="1",this._previewImage.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}}preload({url:t,filter:n,operation:r,value:i}){this._cancelBatchPreload&&this._cancelBatchPreload();let o=hD(r,i).map(l=>this._imageSrc({url:t,filter:n,operation:r,value:l})),{cancel:a}=qd(o);this._cancelBatchPreload=a}_setOriginalSrc(t){let n=this._previewImage||this._createPreviewImage();if(!this.contains(n)&&this.appendChild(n),this._previewImage=n,n.src===t)return n.style.opacity="1",n.style.transform="scale(1)",void(this.className=Nt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}));n.style.opacity="0";let r=this._handleImageLoading(t);n.addEventListener("error",r,{once:!0}),n.src=t,n.addEventListener("load",()=>{r(),n&&(n.style.opacity="1",n.style.transform="scale(1)",this.className=Nt({active_from_viewer:this._fromViewer,active_from_cropper:!this._fromViewer,inactive_to_cropper:!1}))},{once:!0}),n.addEventListener("error",()=>{this.$["*networkProblems"]=!0},{once:!0})}activate({url:t,operation:n,value:r,filter:i,fromViewer:s}){if(this._isActive=!0,this._hidden=!1,this._url=t,this._operation=n||"initial",this._value=r,this._filter=i,this._fromViewer=s,"number"!=typeof r&&!i){let a=this._imageSrc({operation:n,value:r});return this._setOriginalSrc(a),void(this._container&&this._container.remove())}this._keypoints=hD(n,r).map(a=>this._constructKeypoint(n,a)),this._update(n,r),this._initNodes()}deactivate({hide:t=!0}={}){this._isActive=!1,this._cancelLastImages&&this._cancelLastImages(),this._cancelBatchPreload&&this._cancelBatchPreload(),t&&!this._hidden?(this._hidden=!0,this._previewImage&&(this._previewImage.style.transform="scale(1)"),this.className=Nt({active_from_viewer:!1,active_from_cropper:!1,inactive_to_cropper:!0}),this.addEventListener("transitionend",()=>{this._container&&this._container.remove()},{once:!0})):this._container&&this._container.remove()}}let m1=(()=>{class e extends Ln{initCallback(){super.initCallback(),this.addEventListener("wheel",n=>{n.preventDefault();let{deltaY:r,deltaX:i}=n;Math.abs(i)>1?this.scrollLeft+=i:this.scrollLeft+=r})}}return e.template=" <slot></slot> ",e})();class pD extends Ln{constructor(){super(),y(this,"_updateInfoTooltip",ai(()=>{let t=this.$["*editorTransformations"],n="",r=!1;if("filters"===this.$["*tabId"])if(r=!0,this.$["*currentFilter"]&&t?.filter?.name===this.$["*currentFilter"]){let i=t?.filter?.amount||100;n=this.l10n(this.$["*currentFilter"])+" "+i}else n=this.l10n($n);else"sliders"===this.$["*tabId"]&&this.$["*currentOperation"]&&(r=!0,n=this.$["*currentOperation"]+" "+(t?.[this.$["*currentOperation"]]||li[this.$["*currentOperation"]].zero));r&&(this.$["*operationTooltip"]=n),this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",r)},0)),this.init$={...this.init$,"*sliderEl":null,"*loadingOperations":new Map,"*showSlider":!1,"*currentFilter":$n,"*currentOperation":null,"*tabId":"crop",showLoader:!1,filters:Yk,colorOperations:qk,cropOperations:Zk,"*operationTooltip":null,"l10n.cancel":this.l10n("cancel"),"l10n.apply":this.l10n("apply"),"presence.mainToolbar":!0,"presence.subToolbar":!1,"presence.tabContent.crop":!1,"presence.tabContent.sliders":!1,"presence.tabContent.filters":!1,"presence.subTopToolbarStyles":{hidden:"sub-toolbar--top-hidden",visible:"sub-toolbar--visible"},"presence.subBottomToolbarStyles":{hidden:"sub-toolbar--bottom-hidden",visible:"sub-toolbar--visible"},"presence.tabContentStyles":{hidden:"tab-content--hidden",visible:"tab-content--visible"},"on.cancel":t=>{this._cancelPreload&&this._cancelPreload(),this.$["*on.cancel"]()},"on.apply":t=>{this.$["*on.apply"](this.$["*editorTransformations"])},"on.applySlider":t=>{this.ref["slider-el"].apply(),this._onSliderClose()},"on.cancelSlider":t=>{this.ref["slider-el"].cancel(),this._onSliderClose()},"on.clickTab":t=>{let n=t.currentTarget.getAttribute("data-id");this._activateTab(n,{fromViewer:!1})}},this._debouncedShowLoader=ai(this._showLoader.bind(this),500)}_onSliderClose(){this.$["*showSlider"]=!1,"sliders"===this.$["*tabId"]&&this.ref["tooltip-el"].classList.toggle("info-tooltip_visible",!1)}_createOperationControl(t){let n=Zd.is&&new Zd;return n.operation=t,n}_createFilterControl(t){let n=Yd.is&&new Yd;return n.filter=t,n}_createToggleControl(t){let n=Gd.is&&new Gd;return n.operation=t,n}_renderControlsList(t){let n=this.ref[`controls-list-${t}`],r=document.createDocumentFragment();"crop"===t?this.$.cropOperations.forEach(i=>{let s=this._createToggleControl(i);r.appendChild(s)}):"filters"===t?[$n,...this.$.filters].forEach(i=>{let s=this._createFilterControl(i);r.appendChild(s)}):"sliders"===t&&this.$.colorOperations.forEach(i=>{let s=this._createOperationControl(i);r.appendChild(s)}),r.childNodes.forEach((i,s)=>{s===r.childNodes.length-1&&i.classList.add("controls-list_last-item")}),n.innerHTML="",n.appendChild(r)}_activateTab(t,{fromViewer:n}){this.$["*tabId"]=t,"crop"===t?(this.$["*faderEl"].deactivate(),this.$["*cropperEl"].activate(this.$["*imageSize"],{fromViewer:n})):(this.$["*faderEl"].activate({url:this.$["*originalUrl"],fromViewer:n}),this.$["*cropperEl"].deactivate());for(let r of jd){let i=r===t;this.ref[`tab-toggle-${r}`].active=i,i?(this._renderControlsList(t),this._syncTabIndicator()):this._unmountTabControls(r),this.$[`presence.tabContent.${r}`]=i}}_unmountTabControls(t){let n=this.ref[`controls-list-${t}`];n&&(n.innerHTML="")}_syncTabIndicator(){this.ref["tabs-indicator"].style.transform=`translateX(${this.ref[`tab-toggle-${this.$["*tabId"]}`].offsetLeft}px)`}_preloadEditedImage(){if(this.$["*imgContainerEl"]&&this.$["*originalUrl"]){let n=this.proxyUrl(Kd(this.$["*originalUrl"],this.$["*imgContainerEl"].offsetWidth,this.$["*editorTransformations"]));this._cancelPreload&&this._cancelPreload();let{cancel:r}=qd([n]);this._cancelPreload=()=>{r(),this._cancelPreload=void 0}}}_showLoader(t){this.$.showLoader=t}initCallback(){super.initCallback(),this.$["*sliderEl"]=this.ref["slider-el"],this.sub("*imageSize",t=>{t&&setTimeout(()=>{this._activateTab(this.$["*tabId"],{fromViewer:!0})},0)}),this.sub("*editorTransformations",t=>{let n=t?.filter?.name;this.$["*currentFilter"]!==n&&(this.$["*currentFilter"]=n)}),this.sub("*currentFilter",()=>{this._updateInfoTooltip()}),this.sub("*currentOperation",()=>{this._updateInfoTooltip()}),this.sub("*tabId",()=>{this._updateInfoTooltip()}),this.sub("*originalUrl",t=>{this.$["*faderEl"]&&this.$["*faderEl"].deactivate()}),this.sub("*editorTransformations",t=>{this._preloadEditedImage(),this.$["*faderEl"]&&this.$["*faderEl"].setTransformations(t)}),this.sub("*loadingOperations",t=>{let n=!1;for(let[,r]of t.entries()){if(n)break;for(let[,i]of r.entries())if(i){n=!0;break}}this._debouncedShowLoader(n)}),this.sub("*showSlider",t=>{this.$["presence.subToolbar"]=t,this.$["presence.mainToolbar"]=!t}),this._updateInfoTooltip()}}pD.template=`\n  <lr-line-loader-ui set="active: showLoader"></lr-line-loader-ui>\n  <div class="info-tooltip_container">\n    <div class="info-tooltip_wrapper">\n      <div ref="tooltip-el" class="info-tooltip info-tooltip_hidden">{{*operationTooltip}}</div>\n    </div>\n  </div>\n  <div class="toolbar-container">\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.mainToolbar; styles: presence.subTopToolbarStyles">\n      <div class="tab-content-row">${jd.map(function v1(e){return`\n    <lr-presence-toggle class="tab-content" set="visible: presence.tabContent.${e}; styles: presence.tabContentStyles">\n      <lr-editor-scroller hidden-scrollbar>\n        <div class="controls-list_align">\n          <div class="controls-list_inner" ref="controls-list-${e}"></div>\n        </div>\n      </lr-editor-scroller>\n    </lr-presence-toggle>\n  `}).join("")}</div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" icon="closeMax" set="onclick: on.cancel"> </lr-btn-ui>\n        <div class="tab-toggles">\n          <div ref="tabs-indicator" class="tab-toggles_indicator"></div>\n          ${jd.map(function y1(e){return`\n    <lr-btn-ui\n      theme="boring"\n      ref="tab-toggle-${e}"\n      data-id="${e}"\n      icon="${e}"\n      tabindex="0"\n      set="onclick: on.clickTab;"\n    >\n    </lr-btn-ui>\n  `}).join("")}\n        </div>\n        <lr-btn-ui theme="primary" icon="done" set="onclick: on.apply"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n    <lr-presence-toggle class="sub-toolbar" set="visible: presence.subToolbar; styles: presence.subBottomToolbarStyles">\n      <div class="slider">\n        <lr-editor-slider ref="slider-el"></lr-editor-slider>\n      </div>\n      <div class="controls-row">\n        <lr-btn-ui theme="boring" set="@text: l10n.cancel; onclick: on.cancelSlider;"> </lr-btn-ui>\n        <lr-btn-ui theme="primary" set="@text: l10n.apply; onclick: on.applySlider;"> </lr-btn-ui>\n      </div>\n    </lr-presence-toggle>\n  </div>\n`;class Xd extends Ie{constructor(){super(),this._iconReversed=!1,this._iconSingle=!1,this._iconHidden=!1,this.init$={...this.init$,text:"",icon:"",iconCss:this._iconCss(),theme:null},this.defineAccessor("active",t=>{t?this.setAttribute("active",""):this.removeAttribute("active")})}_iconCss(){return Nt("icon",{icon_left:!this._iconReversed,icon_right:this._iconReversed,icon_hidden:this._iconHidden,icon_single:this._iconSingle})}initCallback(){super.initCallback(),this.sub("icon",t=>{this._iconSingle=!this.$.text,this._iconHidden=!t,this.$.iconCss=this._iconCss()}),this.sub("theme",t=>{"custom"!==t&&(this.className=t)}),this.sub("text",t=>{this._iconSingle=!1}),this.setAttribute("role","button"),-1===this.tabIndex&&(this.tabIndex=0),this.hasAttribute("theme")||this.setAttribute("theme","default")}set reverse(t){this.hasAttribute("reverse")?(this.style.flexDirection="row-reverse",this._iconReversed=!0):(this._iconReversed=!1,this.style.flexDirection=null)}}Xd.bindAttributes({text:"text",icon:"icon",reverse:"reverse",theme:"theme"}),Xd.template='\n  <lr-icon size="20" set="className: iconCss; @name: icon;"></lr-icon>\n  <div class="text">{{text}}</div>\n';let _1=(()=>{class e extends Ie{constructor(){super(),this._active=!1,this._handleTransitionEndRight=()=>{let n=this.ref["line-el"];n.style.transition="initial",n.style.opacity="0",n.style.transform="translateX(-101%)",this._active&&this._start()}}initCallback(){super.initCallback(),this.defineAccessor("active",n=>{"boolean"==typeof n&&(n?this._start():this._stop())})}_start(){this._active=!0;let{width:n}=this.getBoundingClientRect(),r=this.ref["line-el"];r.style.transition="transform 1s",r.style.opacity="1",r.style.transform=`translateX(${n}px)`,r.addEventListener("transitionend",this._handleTransitionEndRight,{once:!0})}_stop(){this._active=!1}}return e.template='\n  <div class="inner">\n    <div class="line" ref="line-el"></div>\n  </div>\n',e})();let b1=(()=>{class e extends Ie{constructor(){super(),this._visible=!1,this._visibleStyle="visible",this._hiddenStyle="hidden",this._externalTransitions=!1,this.defineAccessor("styles",n=>{n&&(this._externalTransitions=!0,this._visibleStyle=n.visible,this._hiddenStyle=n.hidden)}),this.defineAccessor("visible",n=>{"boolean"==typeof n&&(this._visible=n,this._handleVisible())})}_handleVisible(){this.style.visibility=this._visible?"inherit":"hidden",function Bk(e,...t){let n=sD(...t);for(let r of Object.keys(n))e.classList.toggle(r,n[r])}(this,{transition:!this._externalTransitions,[this._visibleStyle]:this._visible,[this._hiddenStyle]:!this._visible}),this.setAttribute("aria-hidden",this._visible?"false":"true")}initCallback(){super.initCallback(),this.setAttribute("hidden",""),this._externalTransitions||this.classList.add("transition"),this._handleVisible(),setTimeout(()=>this.removeAttribute("hidden"),0)}}return e.template=" <slot></slot> ",e})(),D1=(()=>{class e extends Ie{constructor(){super(),y(this,"init$",{...this.init$,disabled:!1,min:0,max:100,onInput:null,onChange:null,defaultValue:null,"on.sliderInput":()=>{let n=parseInt(this.ref["input-el"].value,10);this._updateValue(n),this.$.onInput&&this.$.onInput(n)},"on.sliderChange":()=>{let n=parseInt(this.ref["input-el"].value,10);this.$.onChange&&this.$.onChange(n)}}),this.setAttribute("with-effects","")}initCallback(){super.initCallback(),this.defineAccessor("disabled",r=>{this.$.disabled=r}),this.defineAccessor("min",r=>{this.$.min=r}),this.defineAccessor("max",r=>{this.$.max=r}),this.defineAccessor("defaultValue",r=>{this.$.defaultValue=r,this.ref["input-el"].value=r,this._updateValue(r)}),this.defineAccessor("zero",r=>{this._zero=r}),this.defineAccessor("onInput",r=>{r&&(this.$.onInput=r)}),this.defineAccessor("onChange",r=>{r&&(this.$.onChange=r)}),this._updateSteps(),this._observer=new ResizeObserver(()=>{this._updateSteps();let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)}),this._observer.observe(this),this._thumbSize=parseInt(window.getComputedStyle(this).getPropertyValue("--l-thumb-size"),10),setTimeout(()=>{let r=parseInt(this.ref["input-el"].value,10);this._updateValue(r)},0),this.sub("disabled",r=>{let i=this.ref["input-el"];r?i.setAttribute("disabled","disabled"):i.removeAttribute("disabled")});let n=this.ref["input-el"];n.addEventListener("focus",()=>{this.style.setProperty("--color-effect","var(--hover-color-rgb)")}),n.addEventListener("blur",()=>{this.style.setProperty("--color-effect","var(--idle-color-rgb)")})}_updateValue(n){this._updateZeroDot(n);let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(n-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this.ref["thumb-el"].style.transform=`translateX(${o}px)`})}_updateZeroDot(n){if(!this._zeroDotEl)return;this._zeroDotEl.style.opacity=n===this._zero?"0":"0.2";let{width:r}=this.getBoundingClientRect(),o=100/(this.$.max-this.$.min)*(this._zero-this.$.min)*(r-this._thumbSize)/100;window.requestAnimationFrame(()=>{this._zeroDotEl.style.transform=`translateX(${o}px)`})}_updateSteps(){let r=this.ref["steps-el"],{width:i}=r.getBoundingClientRect(),s=Math.ceil(i/2),o=Math.ceil(s/15)-2;if(this._stepsCount===o)return;let a=document.createDocumentFragment(),l=document.createElement("div"),u=document.createElement("div");l.className="minor-step",u.className="border-step",a.appendChild(u);for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());for(let d=0;d<o;d++)a.appendChild(l.cloneNode());a.appendChild(u.cloneNode());let c=document.createElement("div");c.className="zero-dot",a.appendChild(c),this._zeroDotEl=c,r.innerHTML="",r.appendChild(a),this._stepsCount=o}destroyCallback(){this._observer?.disconnect()}}return e.template='\n  <div class="steps" ref="steps-el"></div>\n  <div ref="thumb-el" class="thumb"></div>\n  <input\n    class="input"\n    type="range"\n    ref="input-el"\n    tabindex="0"\n    set="oninput: on.sliderInput; onchange: on.sliderChange; @min: min; @max: max; @value: defaultValue;"\n  />\n',e})();class w1 extends re{constructor(...t){super(...t),y(this,"activityType",L.activities.CLOUD_IMG_EDIT),y(this,"init$",{...this.init$,cdnUrl:null})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>this.mountEditor(),onDeactivate:()=>this.unmountEditor()}),this.sub("*focusedEntry",t=>{t&&(this.entry=t,this.entry.subscribe("cdnUrl",n=>{n&&(this.$.cdnUrl=n)}))})}handleApply(t){let n=t.detail;this.entry.setMultipleValues({cdnUrl:n.cdnUrl,cdnUrlModifiers:n.cdnUrlModifiers}),this.historyBack()}handleCancel(){this.historyBack()}mountEditor(){let t=new Ra,n=this.$.cdnUrl;t.setAttribute("ctx-name",this.ctxName),t.setAttribute("cdn-url",n),t.addEventListener("apply",r=>this.handleApply(r)),t.addEventListener("cancel",()=>this.handleCancel()),this.innerHTML="",this.appendChild(t)}unmountEditor(){this.innerHTML=""}}const C1=function(e){return e.replace(/[\\-\\[]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},E1=function(e,t="i"){const n=e.split("*").map(C1);return new RegExp("^"+n.join(".+")+"$",t)};function I1({textColor:e,backgroundColor:t,linkColor:n,linkColorHover:r,shadeColor:i}){let s=`solid 1px ${i}`;return(e=>Object.keys(e).reduce((n,r)=>{let i=e[r];return n+`${r}{${Object.keys(i).reduce((o,a)=>o+`${a}: ${i[a]};`,"")}}`},""))({body:{color:e,"background-color":t},".side-bar":{background:"inherit","border-right":s},".main-content":{background:"inherit"},".main-content-header":{background:"inherit"},".main-content-footer":{background:"inherit"},".list-table-row":{color:"inherit"},".list-table-row:hover":{background:i},".list-table-row .list-table-cell-a, .list-table-row .list-table-cell-b":{"border-top":s},".list-table-body .list-items":{"border-bottom":s},".bread-crumbs a":{color:n},".bread-crumbs a:hover":{color:r},".main-content.loading":{background:`${t} url(/static/images/loading_spinner.gif) center no-repeat`,"background-size":"25px 25px"},".list-icons-item":{"background-color":i},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a":{color:n},".source-gdrive .side-bar-menu a, .source-gphotos .side-bar-menu a:hover":{color:r},".side-bar-menu a":{color:n},".side-bar-menu a:hover":{color:r},".source-gdrive .side-bar-menu .current, .source-gdrive .side-bar-menu a:hover, .source-gphotos .side-bar-menu .current, .source-gphotos .side-bar-menu a:hover":{color:r},".source-vk .side-bar-menu a":{color:n},".source-vk .side-bar-menu a:hover":{color:r,background:"none"}})}let Un={};window.addEventListener("message",e=>{let t;try{t=JSON.parse(e.data)}catch{return}if(t?.type in Un){let n=Un[t.type];for(let[r,i]of n)e.source===r&&i(t)}});let x1=(()=>{class e extends re{constructor(...n){super(...n),y(this,"activityType",L.activities.EXTERNAL),y(this,"init$",{...this.init$,activityIcon:"",activityCaption:"",counter:0,onDone:()=>{this.$["*currentActivity"]=L.activities.UPLOAD_LIST},onCancel:()=>{this.historyBack()}}),y(this,"_iframe",null),y(this,"_inheritedUpdateCssData",this.updateCssData),y(this,"updateCssData",()=>{this.isActivityActive&&(this._inheritedUpdateCssData(),this.applyStyles())})}initCallback(){super.initCallback(),this.registerActivity(this.activityType,{onActivate:()=>{let{externalSourceType:n}=this.activityParams;this.set$({activityCaption:`${n?.[0].toUpperCase()}${n?.slice(1)}`,activityIcon:n}),this.$.counter=0,this.mountIframe()}}),this.sub("*currentActivity",n=>{n!==this.activityType&&this.unmountIframe()})}sendMessage(n){this._iframe?.contentWindow?.postMessage(JSON.stringify(n),"*")}handleFileSelected(n){var r=this;return se(function*(){console.log(n),r.$.counter=r.$.counter+1;const i=(()=>{if(n.alternatives){const a=_n(r.cfg.externalSourcesPreferredTypes);for(const l of a){const u=E1(l);for(const[c,d]of Object.entries(n.alternatives))if(u.test(c))return d}}return n.url})();let{filename:s}=n,{externalSourceType:o}=r.activityParams;r.addFileFromUrl(i,{fileName:s,source:o})})()}handleIframeLoad(){this.applyStyles()}getCssValue(n){return window.getComputedStyle(this).getPropertyValue(n).trim()}applyStyles(){let n={backgroundColor:this.getCssValue("--clr-background-light"),textColor:this.getCssValue("--clr-txt"),shadeColor:this.getCssValue("--clr-shade-lv1"),linkColor:"#157cfc",linkColorHover:"#3891ff"};this.sendMessage({type:"embed-css",style:I1(n)})}remoteUrl(){let n=this.cfg.pubkey,r=(!1).toString(),{externalSourceType:i}=this.activityParams,s={lang:this.getCssData("--l10n-locale-name")?.split("-")?.[0]||"en",public_key:n,images_only:r,pass_window_open:!1,session_key:this.cfg.remoteTabSessionKey},o=new URL(this.cfg.socialBaseUrl);return o.pathname=`/window3/${i}`,o.search=function M1(e){let t=[];for(let[n,r]of Object.entries(e))null==r||"string"==typeof r&&0===r.length||t.push(`${n}=${encodeURIComponent(r)}`);return t.join("&")}(s),o.toString()}mountIframe(){let n=Dd({tag:"iframe",attributes:{src:this.remoteUrl(),marginheight:0,marginwidth:0,frameborder:0,allowTransparency:!0}});n.addEventListener("load",this.handleIframeLoad.bind(this)),this.ref.iframeWrapper.innerHTML="",this.ref.iframeWrapper.appendChild(n),function(e,t,n){e in Un||(Un[e]=[]),Un[e].push([t,n])}("file-selected",n.contentWindow,this.handleFileSelected.bind(this)),this._iframe=n}unmountIframe(){this._iframe&&function(e,t){e in Un&&(Un[e]=Un[e].filter(n=>n[0]!==t))}("file-selected",this._iframe.contentWindow),this.ref.iframeWrapper.innerHTML="",this._iframe=null}}return e.template='\n  <lr-activity-header>\n    <button type="button" class="mini-btn" set="onclick: *historyBack">\n      <lr-icon name="back"></lr-icon>\n    </button>\n    <div>\n      <lr-icon set="@name: activityIcon"></lr-icon>\n      <span>{{activityCaption}}</span>\n    </div>\n    <button type="button" class="mini-btn close-btn" set="onclick: *historyBack">\n      <lr-icon name="close"></lr-icon>\n    </button>\n  </lr-activity-header>\n  <div class="content">\n    <div ref="iframeWrapper" class="iframe-wrapper"></div>\n    <div class="toolbar">\n      <button type="button" class="cancel-btn secondary-btn" set="onclick: onCancel" l10n="cancel"></button>\n      <div></div>\n      <div class="selected-counter"><span l10n="selected-count"></span>{{counter}}</div>\n      <button type="button" class="done-btn primary-btn" set="onclick: onDone; @disabled: !counter">\n        <lr-icon name="check"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();class Qd extends Ie{setCurrentTab(t){if(t){[...this.ref.context.querySelectorAll("[tab-ctx]")].forEach(r=>{r.getAttribute("tab-ctx")===t?r.removeAttribute("hidden"):r.setAttribute("hidden","")});for(let r in this._tabMap)r===t?this._tabMap[r].setAttribute("current",""):this._tabMap[r].removeAttribute("current")}}initCallback(){super.initCallback(),this._tabMap={},this.defineAccessor("tab-list",t=>{t&&_n(t).forEach(r=>{let i=Dd({tag:"div",attributes:{class:"tab"},properties:{onclick:()=>{this.setCurrentTab(r)}}});i.textContent=this.l10n(r),this.ref.row.appendChild(i),this._tabMap[r]=i})}),this.defineAccessor("default",t=>{this.setCurrentTab(t)}),this.hasAttribute("default")||this.setCurrentTab(Object.keys(this._tabMap)[0])}}Qd.bindAttributes({"tab-list":null,default:null}),Qd.template='\n  <div ref="row" class="tabs-row"></div>\n  <div ref="context" class="tabs-context">\n    <slot></slot>\n  </div>\n';class $a extends re{constructor(...t){super(...t),y(this,"processInnerHtml",!0),y(this,"init$",{...this.init$,output:null,filesData:null})}get dict(){return $a.dict}get validationInput(){return this._validationInputElement}initCallback(){var t=this;if(super.initCallback(),this.hasAttribute(this.dict.FORM_INPUT_ATTR)&&(this._dynamicInputsContainer=document.createElement("div"),this.appendChild(this._dynamicInputsContainer),this.hasAttribute(this.dict.INPUT_REQUIRED))){let n=document.createElement("input");n.type="text",n.name="__UPLOADCARE_VALIDATION_INPUT__",n.required=!0,this.appendChild(n),this._validationInputElement=n}this.sub("output",n=>{if(n){if(this.hasAttribute(this.dict.FIRE_EVENT_ATTR)&&this.dispatchEvent(new CustomEvent(this.dict.EVENT_NAME,{bubbles:!0,composed:!0,detail:{timestamp:Date.now(),ctxName:this.ctxName,data:n}})),this.hasAttribute(this.dict.FORM_INPUT_ATTR)){this._dynamicInputsContainer.innerHTML="";let r=n.groupData?[n.groupData.cdnUrl]:n.map(i=>i.cdnUrl);for(let i of r){let s=document.createElement("input");s.type="hidden",s.name=this.getAttribute(this.dict.INPUT_NAME_ATTR)||this.ctxName,s.value=i,this._dynamicInputsContainer.appendChild(s)}this.hasAttribute(this.dict.INPUT_REQUIRED)&&(this._validationInputElement.value=r.length?"__VALUE__":"")}this.hasAttribute(this.dict.CONSOLE_ATTR)&&console.log(n)}},!1),this.sub(this.dict.SRC_CTX_KEY,function(){var n=se(function*(r){if(!r)return t.$.output=null,void(t.$.filesData=null);if(t.$.filesData=r,t.cfg.groupOutput||t.hasAttribute(t.dict.GROUP_ATTR)){let i=r.map(a=>a.uuid);const s=yield t.getUploadClientOptions();let o=yield xb(i,{...s});t.$.output={groupData:o,files:r}}else t.$.output=r});return function(r){return n.apply(this,arguments)}}(),!1)}}$a.dict=Object.freeze({SRC_CTX_KEY:"*outputData",EVENT_NAME:"lr-data-output",FIRE_EVENT_ATTR:"use-event",CONSOLE_ATTR:"use-console",GROUP_ATTR:"use-group",FORM_INPUT_ATTR:"use-input",INPUT_NAME_ATTR:"input-name",INPUT_REQUIRED:"input-required"});class N1 extends L{}let O1=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"init$",{...this.init$,currentText:"",options:[],selectHtml:"",onSelect:r=>{r.preventDefault(),r.stopPropagation(),this.value=this.ref.select.value,this.$.currentText=this.$.options.find(i=>i.value==this.value)?.text||"",this.dispatchEvent(new Event("change"))}})}initCallback(){super.initCallback(),this.sub("options",n=>{this.$.currentText=n?.[0]?.text||"";let r="";n?.forEach(i=>{r+=`<option value="${i.value}">${i.text}</option>`}),this.$.selectHtml=r})}}return e.template='\n  <button>\n    {{currentText}}\n    <lr-icon name="select"></lr-icon>\n    <select ref="select" set="innerHTML: selectHtml; onchange: onSelect"></select>\n  </button>\n',e})();let mD=(()=>{class e extends Ie{constructor(...n){super(...n),y(this,"init$",{...this.init$,src:"",ppIcon:"play",fsIcon:"fullscreen-on",volIcon:"unmute",capIcon:"captions-off",totalTime:"00:00",currentTime:"00:00",progressCssWidth:"0",hasSubtitles:!1,volumeDisabled:!1,volumeValue:0,onPP:()=>{this.togglePlay()},onFs:()=>{this.toggleFullscreen()},onCap:()=>{this.toggleCaptions()},onMute:()=>{this.toggleSound()},onVolChange:r=>{let i=parseFloat(r.currentTarget.$.value);this.setVolume(i)},progressClicked:r=>{let i=this.progress.getBoundingClientRect();this._video.currentTime=this._video.duration*(r.offsetX/i.width)}})}togglePlay(){this._video.paused||this._video.ended?this._video.play():this._video.pause()}toggleFullscreen(){(document.fullscreenElement||document.webkitFullscreenElement)===this?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e=>{e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()})(this)}toggleCaptions(){"captions-off"===this.$.capIcon?(this.$.capIcon="captions",this._video.textTracks[0].mode="showing",window.localStorage.setItem(e.is+":captions","1")):(this.$.capIcon="captions-off",this._video.textTracks[0].mode="hidden",window.localStorage.removeItem(e.is+":captions"))}toggleSound(){"unmute"===this.$.volIcon?(this.$.volIcon="mute",this.$.volumeDisabled=!0,this._video.muted=!0):(this.$.volIcon="unmute",this.$.volumeDisabled=!1,this._video.muted=!1)}setVolume(n){window.localStorage.setItem(e.is+":volume",n),this._video.volume=n?n/100:0}get progress(){return this.ref.progress}_getUrl(n){return n.includes("/")?n:`https://ucarecdn.com/${n}/`}_desc2attrs(n){let r=[];for(let i in n){let s="src"===i?this._getUrl(n[i]):n[i];r.push(`${i}="${s}"`)}return r.join(" ")}_timeFmt(n){let r=new Date(1e3*Math.round(n));return[r.getMinutes(),r.getSeconds()].map(i=>i<10?"0"+i:i).join(":")}_initTracks(){[...this._video.textTracks].forEach(n=>{n.mode="hidden"}),window.localStorage.getItem(e.is+":captions")&&this.toggleCaptions()}_castAttributes(){let n=["autoplay","loop","muted"];[...this.attributes].forEach(r=>{n.includes(r.name)&&this._video.setAttribute(r.name,r.value)})}initCallback(){var n=this;super.initCallback(),this._video=this.ref.video,this._castAttributes(),this._video.addEventListener("play",()=>{this.$.ppIcon="pause",this.setAttribute("playback","")}),this._video.addEventListener("pause",()=>{this.$.ppIcon="play",this.removeAttribute("playback")}),this.addEventListener("fullscreenchange",i=>{console.log(i),this.$.fsIcon=document.fullscreenElement===this?"fullscreen-off":"fullscreen-on"}),this.sub("src",i=>{if(!i)return;let s=this._getUrl(i);this._video.src=s}),this.sub("video",function(){var i=se(function*(s){if(!s)return;let o=yield(yield window.fetch(n._getUrl(s))).json();o.poster&&(n._video.poster=n._getUrl(o.poster));let a="";o?.sources.forEach(l=>{a+=`<source ${n._desc2attrs(l)} />`}),o.tracks&&(o.tracks.forEach(l=>{a+=`<track ${n._desc2attrs(l)} />`}),n.$.hasSubtitles=!0),n._video.innerHTML+=a,n._initTracks(),console.log(o)});return function(s){return i.apply(this,arguments)}}()),this._video.addEventListener("loadedmetadata",i=>{this.$.currentTime=this._timeFmt(this._video.currentTime),this.$.totalTime=this._timeFmt(this._video.duration)}),this._video.addEventListener("timeupdate",i=>{let s=Math.round(this._video.currentTime/this._video.duration*100);this.$.progressCssWidth=s+"%",this.$.currentTime=this._timeFmt(this._video.currentTime)});let r=window.localStorage.getItem(e.is+":volume");if(r){let i=parseFloat(r);this.setVolume(i),this.$.volumeValue=i}}}return e.template='\n  <div class="video-wrapper">\n    <video ref="video" preload="metadata" crossorigin="anonymous"></video>\n  </div>\n\n  <div class="toolbar">\n    <div class="progress" ref="progress" set -onclick="progressClicked">\n      <div class="bar" set -style.width="progressCssWidth"></div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onPP">\n        <lr-icon set -@name="ppIcon"></lr-icon>\n      </button>\n      <div class="timer">{{currentTime}} / {{totalTime}}</div>\n    </div>\n\n    <div class="tb-block">\n      <button set -onclick="onCap" -@hidden="!hasSubtitles">\n        <lr-icon set -@name="capIcon"></lr-icon>\n      </button>\n\n      <button set -onclick="onMute">\n        <lr-icon set -@name="volIcon"></lr-icon>\n      </button>\n\n      <lr-range type="range" set -onchange="onVolChange" -@disabled="volumeDisabled" -value="volumeValue"> </lr-range>\n\n      <button set -onclick="onFs">\n        <lr-icon set -@name="fsIcon"></lr-icon>\n      </button>\n    </div>\n  </div>\n',e})();mD.bindAttributes({video:"video",src:"src"});const R1="css-src";function Jd(e){return class extends e{constructor(...t){super(...t),y(this,"renderShadow",!0),y(this,"pauseRender",!0)}shadowReadyCallback(){}initCallback(){super.initCallback(),this.setAttribute("hidden",""),setTimeout(()=>{let t=this.getAttribute(R1);if(t){this.attachShadow({mode:"open"});let n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t,n.onload=()=>{window.requestAnimationFrame(()=>{this.render(),window.setTimeout(()=>{this.removeAttribute("hidden"),this.shadowReadyCallback()})})},this.shadowRoot.prepend(n)}else console.error("Attribute `css-src` is required and it is not set. See migration guide: https://uploadcare.com/docs/file-uploader/migration-to-0.25.0/")})}}}class yD extends(Jd(Ie)){}let P1=(()=>{class e extends Ie{initCallback(){super.initCallback(),this.subConfigValue("removeCopyright",n=>{this.toggleAttribute("hidden",!!n)})}}return y(e,"template",'\n    <a\n      href="https://uploadcare.com/?utm_source=copyright&utm_medium=referral&utm_campaign=v4"\n      target="_blank noopener"\n      class="credits"\n      >Powered by Uploadcare</a\n    >\n  '),e})();class ef extends yD{constructor(...t){super(...t),y(this,"init$",Rb(this)),y(this,"_template",null)}static set template(t){this._template=t+"<slot></slot>"}static get template(){return this._template}}let k1=(()=>{class e extends ef{}return e.template="\n  <lr-simple-btn></lr-simple-btn>\n\n  <lr-modal strokes block-body-scrolling>\n    <lr-start-from>\n      <lr-drop-area with-icon clickable></lr-drop-area>\n      <lr-source-list wrap></lr-source-list>\n      <lr-copyright></lr-copyright>\n    </lr-start-from>\n    <lr-upload-list></lr-upload-list>\n    <lr-camera-source></lr-camera-source>\n    <lr-url-source></lr-url-source>\n    <lr-external-source></lr-external-source>\n    <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>\n  </lr-modal>\n\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar-common></lr-progress-bar-common>\n",e})(),F1=(()=>{class e extends ef{constructor(...n){super(...n),y(this,"pauseRender",!0)}shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)}),this.sub("*uploadList",r=>{0===r?.length&&(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)}),this.sub(Qe("sourceList"),r=>{"local"!==r&&(this.$[Qe("sourceList")]="local")}),this.sub(Qe("confirmUpload"),r=>{!1!==r&&(this.$[Qe("confirmUpload")]=!1)})}}return e.template='\n  <lr-start-from>\n    <lr-drop-area clickable l10n="choose-file"></lr-drop-area>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-message-box></lr-message-box>\n',e})(),L1=(()=>{class e extends ef{shadowReadyCallback(){const n=this.ref.uBlock;this.sub("*currentActivity",r=>{r||(this.$["*currentActivity"]=n.initActivity||L.activities.START_FROM)})}}return e.template=' <lr-start-from>\n    <lr-drop-area with-icon clickable></lr-drop-area>\n    <lr-source-list wrap></lr-source-list>\n    <lr-copyright></lr-copyright>\n  </lr-start-from>\n  <lr-upload-list ref="uBlock"></lr-upload-list>\n  <lr-camera-source></lr-camera-source>\n  <lr-url-source></lr-url-source>\n  <lr-external-source></lr-external-source>\n  <lr-message-box></lr-message-box>\n  <lr-progress-bar></lr-progress-bar>\n  <lr-cloud-image-editor-activity></lr-cloud-image-editor-activity>',e})();class $1 extends(Jd(Ra)){shadowReadyCallback(){this.__shadowReady=!0,this.$["*faderEl"]=this.ref["fader-el"],this.$["*cropperEl"]=this.ref["cropper-el"],this.$["*imgContainerEl"]=this.ref["img-container-el"],this.initEditor()}initEditor(){var t=()=>super.initEditor,n=this;return se(function*(){n.__shadowReady&&(yield t().call(n))})()}}const tf="LR";function U1(e){return nf.apply(this,arguments)}function nf(){return(nf=se(function*(e,t=!1){return new Promise((n,r)=>{if("object"!=typeof document)return void n(null);if("object"==typeof window&&window[tf])return void n(window[tf]);let i=document.createElement("script");i.async=!0,i.src=e,i.onerror=()=>{r()},i.onload=()=>{let s=window[tf];t&&yd(s),n(s)},document.head.appendChild(i)})})).apply(this,arguments)}function V1(e,t){if(1&e&&Bo(0,"img",6),2&e){const n=t.$implicit;rc("src","https://ucarecdn.com/",n.uuid,"/",n.cdnUrlModifiers||"","-/preview/-/scale_crop/400x400/",uu)}}yd(di);let B1=(()=>{class e{constructor(){this.files=[],this.cssSrc=`https://unpkg.com/@uploadcare/blocks@${Ld}/web/lr-file-uploader-regular.min.css`}handleUploaderEvent(n){const{data:r}=n.detail;this.files=r}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=eh({type:e,selectors:[["app-root"]],decls:6,vars:2,consts:[[1,"wrapper"],["ctx-name","my-uploader","pubkey","demopublickey","multiple","true","multipleMax","10","confirmUpload","true","sourceList","local, url, camera, dropbox, gdrive"],["ctx-name","my-uploader"],["ctx-name","my-uploader","use-event","","hidden","",3,"lr-data-output"],[1,"output"],["width","200",3,"src",4,"ngFor","ngForOf"],["width","200",3,"src"]],template:function(n,r){1&n&&(qr(0,"div",0),Bo(1,"lr-config",1)(2,"lr-file-uploader-regular",2),qr(3,"lr-data-output",3),tc("lr-data-output",function(s){return r.handleUploaderEvent(s)}),Xi(),qr(4,"div",4),function mm(e,t,n,r,i,s,o,a){const l=b(),u=G(),c=e+j,d=u.firstCreatePass?function $0(e,t,n,r,i,s,o,a,l){const u=t.consts,c=Lr(t,e,4,o||null,In(u,a));Lu(t,n,c,In(u,l)),Ks(t,c);const d=c.tView=Fu(2,c,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,c),d.queries=t.queries.embeddedTView(c)),c}(c,u,l,t,n,r,i,s,o):u.data[c];jt(d,!1);const f=ym(u,l,d,e);Zs()&&go(u,l,f,d),Oe(f,l),Oo(l,l[c]=Vg(f,l,f,d)),js(d)&&Pu(u,l,d),null!=o&&ku(l,d,a)}(5,V1,1,2,"img",5),Xi()()),2&n&&(Nu(2),zu("css-src",r.cssSrc),Nu(3),Ku("ngForOf",r.files))},dependencies:[S_],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;grid-gap:32px;padding:32px}.output[_ngcontent-%COMP%]{display:grid;grid-gap:8px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));width:100%;max-width:1000px}"]}),e})(),H1=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=yi({type:e,bootstrap:[B1]}),e.\u0275inj=cr({imports:[wR]}),e})();bR().bootstrapModule(H1).catch(e=>console.error(e))}},Ua=>{Ua(Ua.s=997)}]);